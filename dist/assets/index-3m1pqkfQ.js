const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-DSS-Huz6.js","assets/react-vendor-Cx5d5nzo.js","assets/ui-vendor-CiGVPRKv.js","assets/supabase-BiQ6lAbC.js","assets/data-vendor-CORMAIf3.js"])))=>i.map(i=>d[i]);
import{j as i,L as jg,B as r2,a as Sg,G as _g,S as Ag,C as ds,U as n2,b as xr,c as fi,E as _o,d as mc,T as Eg,P as Le,e as a2,X as s2,f as Cg,g as i2,D as Lg,h as Dg,F as o2,i as l2,k as c2,l as Pg,m as u2,n as d2,o as h2,p as f2,q as p2,r as kg,s as m2,t as g2,A as Hf,u as Gf,v as Og,w as ua,M as Gl,x as v2,y as b2,z as Vf,H as Yf,I as y2,J as Zu,K as Kf,N as Xf,O as x2,Q as w2,R as N2,V as j2,W as S2,Z as _2,Y as A2,_ as E2,$ as C2,a0 as L2,a1 as D2}from"./ui-vendor-CiGVPRKv.js";import{b as P2,r as W,N as Qu,O as vh,u as Xr,d as Tg,L as ma,e as zo,g as qr,f as ue,c as cn,h as Mg,i as k2,j as O2,k as $e,B as T2}from"./react-vendor-Cx5d5nzo.js";import{c as M2,_ as Pd}from"./supabase-BiQ6lAbC.js";import{a as Er}from"./data-vendor-CORMAIf3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var kd={},Jf=P2;kd.createRoot=Jf.createRoot,kd.hydrateRoot=Jf.hydrateRoot;const I2="https://dakyetfomciihdiuwrbx.supabase.co",R2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRha3lldGZvbWNpaWhkaXV3cmJ4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwODgzNDYsImV4cCI6MjA2MzY2NDM0Nn0.ylHsHeu-XoB2SRA4YDCLThjFk-Lq8jyK2RnsWk1JBiw",Ue=M2(I2,R2);function wi(){const[e,t]=W.useState(null),[r,n]=W.useState(null),[a,s]=W.useState(!0),[o,l]=W.useState(null);return W.useEffect(()=>{const g=async()=>{try{s(!0),l(null);const{data:{user:N},error:y}=await Ue.auth.getUser();if(y)throw y;if(!N){t(null),n(null),s(!1);return}const{data:j,error:x}=await Ue.from("users").select(`
            *
          `).eq("id",N.id).single();if(x)throw x;t(j),n(j==null?void 0:j.organizations)}catch(N){console.error("Error fetching user profile:",N),l(N.message)}finally{s(!1)}};g();const{data:{subscription:f}}=Ue.auth.onAuthStateChange((N,y)=>{N==="SIGNED_OUT"?(t(null),n(null)):N==="SIGNED_IN"&&y&&g()});return()=>f.unsubscribe()},[]),{profile:e,organization:r,loading:a,error:o,updateProfile:async g=>{try{const{data:f,error:N}=await Ue.from("users").update(g).eq("id",e.id).select().single();if(N)throw N;return t(y=>({...y,...f})),{data:f,error:null}}catch(f){return console.error("Error updating profile:",f),{data:null,error:f.message}}},hasRole:g=>(e==null?void 0:e.role)===g,hasAnyRole:g=>g.includes(e==null?void 0:e.role),isSubscriptionActive:()=>{if(!r)return!1;const{subscription_status:g,trial_ends_at:f}=r;return g==="active"?!0:g==="trial"&&f?new Date(f)>new Date:!1},isAuthenticated:!!e}}function bh({size:e="default",className:t=""}){const r={small:"h-4 w-4",default:"h-6 w-6",large:"h-8 w-8"};return i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(jg,{className:`animate-spin text-blue-600 ${r[e]} ${t}`})})}function ns({allowedRoles:e}){const{profile:t,loading:r,isAuthenticated:n,isSubscriptionActive:a}=wi();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx(bh,{size:"xl"})}):n?e&&!e.includes(t.role)?i.jsx(Qu,{to:"/unauthorized",replace:!0}):!a()&&window.location.pathname!=="/billing"?i.jsx(Qu,{to:"/billing",replace:!0}):i.jsx(vh,{}):i.jsx(Qu,{to:"/login",replace:!0})}const Dt=Er.create({baseURL:"https://api.ptoconnect.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});Dt.interceptors.request.use(async e=>{console.log("🔍 [FRONTEND DEBUG] API Request interceptor started"),console.log("🔍 [FRONTEND DEBUG] Request URL:",e.url),console.log("🔍 [FRONTEND DEBUG] Request method:",e.method);try{const{data:{session:t}}=await Ue.auth.getSession();console.log("🔍 [FRONTEND DEBUG] Session retrieved:",!!t),console.log("🔍 [FRONTEND DEBUG] Access token present:",!!(t!=null&&t.access_token)),t!=null&&t.access_token?(e.headers.Authorization=`Bearer ${t.access_token}`,console.log("🔍 [FRONTEND DEBUG] Auth header set, token length:",t.access_token.length)):console.warn("⚠️ [FRONTEND DEBUG] No access token found in session")}catch(t){console.error("❌ [FRONTEND DEBUG] Error getting session:",t)}return console.log("🔍 [FRONTEND DEBUG] Final request headers:",e.headers),e},e=>(console.error("❌ [FRONTEND DEBUG] Request interceptor error:",e),Promise.reject(e)));Dt.interceptors.response.use(e=>(console.log("✅ [FRONTEND DEBUG] API Response received:",{url:e.config.url,status:e.status,statusText:e.statusText,dataKeys:Object.keys(e.data||{})}),e),e=>{var t,r,n,a,s;return console.error("❌ [FRONTEND DEBUG] API Response error:",{url:(t=e.config)==null?void 0:t.url,status:(r=e.response)==null?void 0:r.status,statusText:(n=e.response)==null?void 0:n.statusText,errorData:(a=e.response)==null?void 0:a.data,errorMessage:e.message}),((s=e.response)==null?void 0:s.status)===401&&(console.warn("🚫 [FRONTEND DEBUG] Unauthorized - redirecting to login"),window.location.href="/login"),Promise.reject(e)});function F2(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}F2(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var yh=e=>typeof e=="number"&&!isNaN(e),Ao=e=>typeof e=="string",Ig=e=>typeof e=="function",$2=e=>Ao(e)||yh(e),B2=e=>W.isValidElement(e)||Ao(e)||Ig(e)||yh(e),q2=1,Rg=()=>`${q2++}`,Hn=new Map,Od=[],Zf=new Set,Fg=()=>Hn.size>0,z2=(e,{containerId:t})=>{var r;return(r=Hn.get(t||1))==null?void 0:r.toasts.get(e)};function U2(e,t){var r;if(t)return!!((r=Hn.get(t))!=null&&r.isToastActive(e));let n=!1;return Hn.forEach(a=>{a.isToastActive(e)&&(n=!0)}),n}function W2(e){if(!Fg()){Od=Od.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||$2(e))Hn.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Hn.get(e.containerId);t?t.removeToast(e.id):Hn.forEach(r=>{r.removeToast(e.id)})}}var H2=(e={})=>{Hn.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function G2(e,t){B2(e)&&(Fg()||Od.push({content:e,options:t}),Hn.forEach(r=>{r.buildToast(e,t)}))}function $g(e,t){Hn.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function V2(e){return Zf.add(e),()=>{Zf.delete(e)}}function Y2(e){return e&&(Ao(e.toastId)||yh(e.toastId))?e.toastId:Rg()}function Uo(e,t){return G2(e,t),t.toastId}function Pc(e,t){return{...t,type:t&&t.type||e,toastId:Y2(t)}}function kc(e){return(t,r)=>Uo(t,Pc(e,r))}function Ot(e,t){return Uo(e,Pc("default",t))}Ot.loading=(e,t)=>Uo(e,Pc("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function K2(e,{pending:t,error:r,success:n},a){let s;t&&(s=Ao(t)?Ot.loading(t,a):Ot.loading(t.render,{...a,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,p,m)=>{if(p==null){Ot.dismiss(s);return}let g={type:d,...o,...a,data:m},f=Ao(p)?{render:p}:p;return s?Ot.update(s,{...g,...f}):Ot(f.render,{...g,...f}),m},c=Ig(e)?e():e;return c.then(d=>l("success",n,d)).catch(d=>l("error",r,d)),c}Ot.promise=K2;Ot.success=kc("success");Ot.info=kc("info");Ot.error=kc("error");Ot.warning=kc("warning");Ot.warn=Ot.warning;Ot.dark=(e,t)=>Uo(e,Pc("default",{theme:"dark",...t}));function X2(e){W2(e)}Ot.dismiss=X2;Ot.clearWaitingQueue=H2;Ot.isActive=U2;Ot.update=(e,t={})=>{let r=z2(e,t);if(r){let{props:n,content:a}=r,s={delay:100,...n,...t,toastId:t.toastId||e,updateId:Rg()};s.toastId!==e&&(s.staleId=e);let o=s.render||a;delete s.render,Uo(o,s)}};Ot.done=e=>{Ot.update(e,{progress:1})};Ot.onChange=V2;Ot.play=e=>$g(!0,e);Ot.pause=e=>$g(!1,e);const Lr=(e,t="An error occurred")=>(console.error("Error:",e),Ot.error(t),!1),Gn=(e="Operation successful")=>(Ot.success(e),!0);function J2(){const[e,t]=W.useState([]),[r,n]=W.useState(!1),[a,s]=W.useState(null),o=async()=>{try{n(!0);const{data:d}=await Dt.get("/notifications");t(d),s(null)}catch(d){s("Failed to fetch notifications"),Lr(d,"Failed to fetch notifications")}finally{n(!1)}},l=async d=>{try{n(!0),await Dt.put(`/notifications/${d}/read`),t(e.map(p=>p.id===d?{...p,read:!0}:p)),Gn("Notification marked as read")}catch(p){Lr(p,"Failed to update notification")}finally{n(!1)}},c=async()=>{try{n(!0),await Dt.delete("/notifications/clear-all"),t([]),Gn("All notifications cleared")}catch(d){Lr(d,"Failed to clear notifications")}finally{n(!1)}};return W.useEffect(()=>{o()},[]),r?i.jsx(bh,{size:"sm"}):i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>setShowDropdown(!showDropdown),className:"p-2 rounded-full hover:bg-gray-100 focus:outline-none",children:[i.jsx(r2,{className:"h-6 w-6 text-gray-600"}),e.length>0&&i.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-500 rounded-full",children:e.length})]}),showDropdown&&i.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50",children:[i.jsx("div",{className:"p-4 border-b",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Notifications"}),e.length>0&&i.jsx("button",{onClick:c,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"})]})}),i.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.length===0?i.jsx("div",{className:"p-4 text-center text-gray-500",children:"No notifications"}):e.map(d=>i.jsxs("div",{className:`p-4 border-b hover:bg-gray-50 cursor-pointer ${d.read?"":"bg-blue-50"}`,onClick:()=>l(d.id),children:[i.jsx("p",{className:"text-sm",children:d.message}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(d.created_at).toLocaleString()})]},d.id))})]})]})}function Z2(){const e=Xr(),t=async()=>{await Ue.auth.signOut(),localStorage.removeItem("access_token"),e("/login")};return i.jsx("button",{onClick:t,className:"text-sm bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",children:"Logout"})}const Q2=[{to:"/dashboard/admin",label:"Dashboard",roles:["admin"]},{to:"/events",label:"Events",roles:["admin","teacher","parent_member"]},{to:"/fundraisers",label:"Fundraisers",roles:["admin","treasurer"]},{to:"/budget",label:"Budget",roles:["admin","treasurer"]},{to:"/communications",label:"Communications",roles:["admin","committee_lead","teacher"]},{to:"/teacher-requests",label:"Teacher Requests",roles:["admin","teacher"]},{to:"/billing",label:"Billing",roles:["admin"]}];function eb({role:e}){const t=Tg(),r=Q2.filter(n=>n.roles.includes(e));return i.jsx("aside",{className:"w-64 bg-white border-r shadow-sm hidden md:block",children:i.jsx("nav",{className:"px-4 py-6 space-y-2",children:r.map(n=>i.jsx(ma,{to:n.to,className:`block px-3 py-2 rounded text-sm font-medium ${t.pathname===n.to?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:n.label},n.to))})})}function tb(){return i.jsxs("footer",{className:"text-xs text-gray-500 text-center py-4 border-t bg-white",children:["PTO Connect © ",new Date().getFullYear()," — Need help? Visit our support page."]})}function as(){const[e,t]=W.useState(null),[r,n]=W.useState(null);return W.useEffect(()=>{async function a(){const{data:{user:s}}=await Ue.auth.getUser();t(s);const{data:o}=await Ue.from("profiles").select("role").eq("id",s.id).single();n(o==null?void 0:o.role)}a()},[]),!e||!r?null:i.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[i.jsxs("header",{className:"bg-white shadow-sm px-6 py-4 flex justify-between items-center w-full",children:[i.jsx("span",{className:"text-xl font-bold text-blue-700",children:"PTO Connect"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(J2,{}),i.jsx(Z2,{})]})]}),i.jsxs("div",{className:"flex flex-1",children:[i.jsx(eb,{role:r}),i.jsx("main",{className:"flex-1 p-6",children:i.jsx(vh,{})})]}),i.jsx(tb,{})]})}const rb={admin:"/dashboard/admin",board_member:"/dashboard/board",committee_lead:"/dashboard/committee",volunteer:"/dashboard/volunteer",parent_member:"/dashboard/parent",teacher:"/dashboard/teacher"},nb=e=>rb[e]||"/dashboard";function Qf(){const[e,t]=W.useState(""),[r,n]=W.useState(""),[a,s]=W.useState(""),[o,l]=W.useState(!1),c=Xr(),d=async p=>{if(p&&p.preventDefault(),console.log("🔍 [LOGIN DEBUG] Login attempt started"),console.log("🔍 [LOGIN DEBUG] Email:",e),l(!0),s(""),!e||!r){console.log("❌ [LOGIN DEBUG] Missing email or password"),s("Email and password are required."),l(!1);return}console.log("🔍 [LOGIN DEBUG] Calling Supabase signInWithPassword...");const{data:m,error:g}=await Ue.auth.signInWithPassword({email:e,password:r});if(console.log("🔍 [LOGIN DEBUG] Supabase response:",{user:!!(m!=null&&m.user),session:!!(m!=null&&m.session),error:g}),g||!(m!=null&&m.user)){console.error("❌ [LOGIN DEBUG] Login error:",g),s((g==null?void 0:g.message)||"Login failed."),l(!1);return}const f=m.user;console.log("🔍 [LOGIN DEBUG] User authenticated:",{id:f.id,email:f.email,user_metadata:f.user_metadata}),console.log("🔍 [LOGIN DEBUG] Fetching user profile...");const{data:N,error:y}=await Ue.from("profiles").select("role, org_id, approved").eq("id",f.id).single();if(console.log("🔍 [LOGIN DEBUG] Profile query result:",{profile:N,profileError:y}),y||!N){console.error("❌ [LOGIN DEBUG] Profile fetch error:",y),s("Unable to load user profile. Please contact support."),l(!1);return}if(!N.approved){console.log("❌ [LOGIN DEBUG] User not approved"),s("Your account is pending approval. Please contact an administrator."),l(!1);return}const j=N.role;if(console.log("🔍 [LOGIN DEBUG] User role:",j),!j){console.log("❌ [LOGIN DEBUG] No role assigned"),s("Your account does not have a role assigned."),l(!1);return}console.log("🔍 [LOGIN DEBUG] Getting dashboard route for role:",j);const x=nb(j);console.log("🔍 [LOGIN DEBUG] Navigating to:",x),c(x),l(!1)};return i.jsxs("div",{className:"p-6 max-w-md mx-auto",children:[i.jsx("h1",{className:"text-xl font-bold mb-4",children:"Log In"}),i.jsxs("form",{onSubmit:d,className:"space-y-4",children:[i.jsx("input",{className:"border p-2 w-full rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",type:"email",value:e,onChange:p=>t(p.target.value),placeholder:"Email",required:!0,disabled:o,autoComplete:"email"}),i.jsx("input",{className:"border p-2 w-full rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",type:"password",value:r,onChange:p=>n(p.target.value),placeholder:"Password",required:!0,disabled:o,autoComplete:"current-password"}),i.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white px-4 py-2 rounded w-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Logging in...":"Log In"}),a&&i.jsx("p",{className:"text-red-500 mt-2",children:a})]})]})}const ab=["admin","treasurer","board_member"];function sb(){const[e,t]=W.useState(""),[r,n]=W.useState(""),[a,s]=W.useState(""),[o,l]=W.useState("parent_member"),[c,d]=W.useState(""),[p,m]=W.useState(""),g=async()=>{if(d(""),m(""),!e||!r||!a||!o){d("All fields are required.");return}const{data:f,error:N}=await Ue.from("ptos").select("id").ilike("code",a).single();if(N||!(f!=null&&f.id)){console.error("PTO code lookup failed:",N),d("Invalid PTO code. Please check with your organization.");return}const y=f.id,{data:j,error:x}=await Ue.auth.signUp({email:e,password:r,options:{data:{org_id:y,role:o}}});if(x||!(j!=null&&j.user)){console.error("Signup error:",x),d((x==null?void 0:x.message)||"Signup failed.");return}const w=j.user,_=!ab.includes(o),{data:E}=await Ue.from("profiles").select("id").eq("id",w.id).maybeSingle();if(E){console.warn("Profile already exists, skipping insert."),m("Signup successful! You can now log in.");return}const{error:A}=await Ue.from("profiles").insert([{id:w.id,email:e,org_id:y,role:o,approved:_}]);A?(console.error("Profile insert error:",A),d("Signup successful, but failed to save profile.")):(m(_?"Signup successful! You can now log in.":"Signup submitted. An admin must approve your role before you can access the system."),t(""),n(""),s(""),l("parent_member"))};return i.jsxs("div",{className:"p-6 max-w-md mx-auto",children:[i.jsx("h1",{className:"text-xl font-bold mb-4",children:"Sign Up"}),i.jsx("input",{className:"border p-2 w-full mb-2",type:"email",value:e,onChange:f=>t(f.target.value),placeholder:"Email",required:!0}),i.jsx("input",{className:"border p-2 w-full mb-2",type:"password",value:r,onChange:f=>n(f.target.value),placeholder:"Password",required:!0}),i.jsx("input",{className:"border p-2 w-full mb-2",type:"text",value:a,onChange:f=>s(f.target.value),placeholder:"PTO Code (e.g. abc123xy)",required:!0}),i.jsxs("select",{className:"border p-2 w-full mb-4",value:o,onChange:f=>l(f.target.value),required:!0,children:[i.jsx("option",{value:"parent_member",children:"Parent Member"}),i.jsx("option",{value:"teacher",children:"Teacher"}),i.jsx("option",{value:"volunteer",children:"Volunteer"}),i.jsx("option",{value:"committee_lead",children:"Committee Lead"}),i.jsx("option",{value:"board_member",children:"Board Member"}),i.jsx("option",{value:"treasurer",children:"Treasurer"}),i.jsx("option",{value:"admin",children:"Admin"})]}),i.jsx("button",{onClick:g,className:"bg-green-600 text-white px-4 py-2 rounded w-full",children:"Sign Up"}),c&&i.jsx("p",{className:"text-red-500 mt-2",children:c}),p&&i.jsx("p",{className:"text-green-600 mt-2",children:p})]})}function ib(){return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-6",children:i.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 max-w-md text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),i.jsx("p",{className:"text-gray-700 mb-6",children:"You don’t have permission to view this page."}),i.jsx(ma,{to:"/",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Return to Home"})]})})}const ob=()=>{var _,E,A,B;const{userProfile:e}=wi(),[t,r]=W.useState("membership"),[n,a]=W.useState("6months"),[s,o]=W.useState({membership:[],events:[],financial:[],engagement:[]}),[l,c]=W.useState(!0);W.useEffect(()=>{e!=null&&e.org_id&&d()},[e,n]);const d=async()=>{try{c(!0);const T=new Date,C=new Date;switch(n){case"3months":C.setMonth(T.getMonth()-3);break;case"6months":C.setMonth(T.getMonth()-6);break;case"1year":C.setFullYear(T.getFullYear()-1);break;default:C.setMonth(T.getMonth()-6)}const[$,H,L,D]=await Promise.all([p(C,T),m(C,T),g(C,T),f(C,T)]);o({membership:$,events:H,financial:L,engagement:D})}catch(T){console.error("Error fetching chart data:",T)}finally{c(!1)}},p=async(T,C)=>{const $=[],H=new Date(T);for(;H<=C;){const L=new Date(H.getFullYear(),H.getMonth(),1),D=new Date(H.getFullYear(),H.getMonth()+1,0),{count:F}=await Ue.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id).lte("created_at",D.toISOString());$.push({month:L.toLocaleDateString("en-US",{month:"short"}),value:F||0,date:L}),H.setMonth(H.getMonth()+1)}return $},m=async(T,C)=>{const{data:$}=await Ue.from("events").select("event_date, title, status").eq("org_id",e.org_id).gte("event_date",T.toISOString()).lte("event_date",C.toISOString()).order("event_date"),H={};return $==null||$.forEach(L=>{const D=new Date(L.event_date).toLocaleDateString("en-US",{month:"short"});H[D]||(H[D]={total:0,completed:0}),H[D].total++,L.status==="completed"&&H[D].completed++}),Object.entries(H).map(([L,D])=>({month:L,total:D.total,completed:D.completed,success_rate:D.total>0?Math.round(D.completed/D.total*100):0}))},g=async(T,C)=>{const{data:$}=await Ue.from("budget_entries").select("amount, type, category, created_at").eq("org_id",e.org_id).gte("created_at",T.toISOString()).lte("created_at",C.toISOString()),H={};return $==null||$.forEach(L=>{H[L.category]||(H[L.category]={income:0,expenses:0}),L.type==="income"?H[L.category].income+=L.amount:H[L.category].expenses+=L.amount}),Object.entries(H).map(([L,D])=>({category:L,income:D.income,expenses:D.expenses,net:D.income-D.expenses}))},f=async(T,C)=>{const $=[],H=new Date(T);for(;H<=C;){const L=H.toLocaleDateString("en-US",{month:"short"}),D=65,F=Math.random()*20-10,U=Math.max(0,Math.min(100,D+F));$.push({month:L,engagement:Math.round(U),email_opens:Math.round(U*.8),event_attendance:Math.round(U*.6),volunteer_participation:Math.round(U*.4)}),H.setMonth(H.getMonth()+1)}return $},N=(T,C,$="#3B82F6")=>{if(!T||T.length===0)return null;const H=Math.max(...T.map(U=>U[C]||0)),L=Math.min(...T.map(U=>U[C]||0)),D=H-L||1,F=T.map((U,ee)=>{const te=ee/(T.length-1)*100,re=100-((U[C]||0)-L)/D*80-10;return`${te},${re}`}).join(" ");return i.jsxs("div",{className:"relative h-64 bg-gray-50 rounded-lg p-4",children:[i.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[i.jsx("polyline",{fill:"none",stroke:$,strokeWidth:"0.5",points:F}),T.map((U,ee)=>{const te=ee/(T.length-1)*100,re=100-((U[C]||0)-L)/D*80-10;return i.jsx("circle",{cx:te,cy:re,r:"1",fill:$},ee)})]}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between text-xs text-gray-500 px-4",children:T.map((U,ee)=>i.jsx("span",{children:U.month},ee))}),i.jsxs("div",{className:"absolute left-0 top-0 bottom-0 flex flex-col justify-between text-xs text-gray-500 py-4",children:[i.jsx("span",{children:H}),i.jsx("span",{children:Math.round((H+L)/2)}),i.jsx("span",{children:L})]})]})},y=(T,C,$="#10B981")=>{if(!T||T.length===0)return null;const H=Math.max(...T.map(L=>L[C]||0));return i.jsx("div",{className:"relative h-64 bg-gray-50 rounded-lg p-4",children:i.jsx("div",{className:"flex items-end justify-between h-full space-x-2",children:T.map((L,D)=>{const F=H>0?(L[C]||0)/H*100:0;return i.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[i.jsx("div",{className:"w-full rounded-t",style:{height:`${F}%`,backgroundColor:$,minHeight:F>0?"4px":"0"}}),i.jsx("span",{className:"text-xs text-gray-500 mt-2",children:L.month})]},D)})})})},j=T=>{if(!T||T.length===0)return null;const C=T.reduce((L,D)=>L+Math.abs(D.net||0),0);let $=0;const H=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6"];return i.jsxs("div",{className:"relative h-64 flex items-center justify-center",children:[i.jsxs("svg",{className:"w-48 h-48",viewBox:"0 0 100 100",children:[T.map((L,D)=>{const U=(C>0?Math.abs(L.net||0)/C:0)*360,ee=$,te=$+U,re=50+35*Math.cos(ee*Math.PI/180),Q=50+35*Math.sin(ee*Math.PI/180),Y=50+35*Math.cos(te*Math.PI/180),X=50+35*Math.sin(te*Math.PI/180),ce=U>180?1:0,P=["M 50 50",`L ${re} ${Q}`,`A 35 35 0 ${ce} 1 ${Y} ${X}`,"Z"].join(" ");return $+=U,i.jsx("path",{d:P,fill:H[D%H.length],opacity:.8},D)}),i.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"white"})]}),i.jsx("div",{className:"absolute right-0 top-0 space-y-2",children:T.map((L,D)=>i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:H[D%H.length]}}),i.jsx("span",{className:"text-gray-700",children:L.category})]},D))})]})},x=()=>{const T=s[t],C="data:text/csv;charset=utf-8,"+Object.keys(T[0]||{}).join(",")+`
`+T.map(L=>Object.values(L).join(",")).join(`
`),$=encodeURI(C),H=document.createElement("a");H.setAttribute("href",$),H.setAttribute("download",`${t}_analytics.csv`),document.body.appendChild(H),H.click(),document.body.removeChild(H)},w={membership:{title:"Membership Growth",description:"Track member acquisition and retention over time",dataKey:"value",color:"#3B82F6"},events:{title:"Event Performance",description:"Monitor event frequency and success rates",dataKey:"total",color:"#10B981"},financial:{title:"Financial Distribution",description:"Analyze income and expenses by category",dataKey:"net",color:"#F59E0B"},engagement:{title:"Member Engagement",description:"Measure community participation and activity",dataKey:"engagement",color:"#8B5CF6"}};return l?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),i.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Analytics Dashboard"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("select",{value:n,onChange:T=>a(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"3months",children:"Last 3 Months"}),i.jsx("option",{value:"6months",children:"Last 6 Months"}),i.jsx("option",{value:"1year",children:"Last Year"})]}),i.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors",children:"Export CSV"})]})]}),i.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:Object.entries(w).map(([T,C])=>i.jsx("button",{onClick:()=>r(T),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${t===T?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:C.title},T))})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:w[t].title}),i.jsx("p",{className:"text-sm text-gray-600",children:w[t].description})]}),i.jsxs("div",{className:"mb-6",children:[t==="membership"&&N(s.membership,w.membership.dataKey,w.membership.color),t==="events"&&y(s.events,w.events.dataKey,w.events.color),t==="financial"&&j(s.financial),t==="engagement"&&N(s.engagement,w.engagement.dataKey,w.engagement.color)]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[t==="membership"&&s.membership.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:((_=s.membership[s.membership.length-1])==null?void 0:_.value)||0}),i.jsx("p",{className:"text-sm text-gray-600",children:"Current Members"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",s.membership.length>1?(((E=s.membership[s.membership.length-1])==null?void 0:E.value)||0)-(((A=s.membership[0])==null?void 0:A.value)||0):0]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Growth"})]})]}),t==="events"&&s.events.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.events.reduce((T,C)=>T+C.total,0)}),i.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[s.events.length>0?Math.round(s.events.reduce((T,C)=>T+C.success_rate,0)/s.events.length):0,"%"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Avg Success Rate"})]})]}),t==="financial"&&s.financial.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",s.financial.reduce((T,C)=>T+C.income,0).toLocaleString()]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Total Income"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",s.financial.reduce((T,C)=>T+C.expenses,0).toLocaleString()]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"})]})]}),t==="engagement"&&s.engagement.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[((B=s.engagement[s.engagement.length-1])==null?void 0:B.engagement)||0,"%"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Current Engagement"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[s.engagement.length>0?Math.round(s.engagement.reduce((T,C)=>T+C.email_opens,0)/s.engagement.length):0,"%"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Avg Email Opens"})]})]})]})]})]})},lb=()=>{const{userProfile:e}=wi(),[t,r]=W.useState([]),[n,a]=W.useState("all"),[s,o]=W.useState(!0);W.useEffect(()=>{e!=null&&e.org_id&&l()},[e]);const l=async()=>{try{o(!0);const w=[],_=await c();w.push(..._);const E=await d();w.push(...E);const A=await p();w.push(...A);const B=await m();w.push(...B),w.sort((T,C)=>{const $={high:3,medium:2,low:1};return $[T.priority]!==$[C.priority]?$[C.priority]-$[T.priority]:new Date(C.timestamp)-new Date(T.timestamp)}),r(w)}catch(w){console.error("Error generating smart notifications:",w)}finally{o(!1)}},c=async()=>{const w=[];try{const{data:_}=await Ue.from("budget_entries").select("amount, category, type").eq("org_id",e.org_id);if(_&&_.length>0){const E=_.filter(C=>C.type==="income").reduce((C,$)=>C+$.amount,0),A=_.filter(C=>C.type==="expense").reduce((C,$)=>C+$.amount,0),B=E>0?A/E*100:0;B>80?w.push({id:"budget-alert-1",type:"budget",priority:"high",title:"Budget Alert: Events Category",message:`Events budget is ${Math.round(B)}% spent with 3 months remaining. Consider reviewing upcoming event costs.`,timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Review Budget",action:"review_budget"},{label:"View Details",action:"view_details"}]}):B>60&&w.push({id:"budget-alert-2",type:"budget",priority:"medium",title:"Budget Tracking",message:`Budget is ${Math.round(B)}% utilized. On track for current period.`,timestamp:new Date().toISOString(),actionable:!1,actions:[]});const T=_.reduce((C,$)=>(C[$.category]||(C[$.category]={income:0,expenses:0}),$.type==="income"?C[$.category].income+=$.amount:C[$.category].expenses+=$.amount,C),{});Object.entries(T).forEach(([C,$])=>{const H=$.income>0?$.expenses/$.income*100:0;H>90&&w.push({id:`budget-category-${C}`,type:"budget",priority:"high",title:`${C} Budget Alert`,message:`${C} category is ${Math.round(H)}% spent. Immediate attention required.`,timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Review Category",action:"review_category"},{label:"Adjust Budget",action:"adjust_budget"}]})})}}catch(_){console.error("Error generating budget alerts:",_)}return w},d=async()=>{const w=[];try{const _=new Date;_.setDate(_.getDate()-30);const{count:E}=await Ue.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id).gte("created_at",_.toISOString()),{count:A}=await Ue.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id),B=A>0?E/A*100:0;B<5?w.push({id:"membership-growth-1",type:"membership",priority:"medium",title:"Membership Growth Trending Down",message:"New member registrations have decreased by 15% this month. Consider launching a recruitment campaign.",timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Start Campaign",action:"start_campaign"},{label:"View Analytics",action:"view_analytics"}]}):B>15&&w.push({id:"membership-growth-2",type:"membership",priority:"low",title:"Excellent Membership Growth",message:`Outstanding! New member registrations increased by ${Math.round(B)}% this month.`,timestamp:new Date().toISOString(),actionable:!1,actions:[]});const{count:T}=await Ue.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id).gte("last_sign_in_at",_.toISOString()),C=A>0?T/A*100:0;C<40&&w.push({id:"engagement-alert-1",type:"engagement",priority:"medium",title:"Low Member Engagement",message:`Only ${Math.round(C)}% of members were active this month. Consider increasing communication frequency.`,timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Send Newsletter",action:"send_newsletter"},{label:"Plan Event",action:"plan_event"}]})}catch(_){console.error("Error generating membership insights:",_)}return w},p=async()=>{const w=[];try{const _=new Date;_.setDate(_.getDate()+7);const{data:E}=await Ue.from("events").select("id, title, event_date, volunteer_slots_needed, volunteer_slots_filled").eq("org_id",e.org_id).gte("event_date",new Date().toISOString()).lte("event_date",_.toISOString());E==null||E.forEach(T=>{const C=Math.ceil((new Date(T.event_date)-new Date)/864e5),$=(T.volunteer_slots_needed||0)-(T.volunteer_slots_filled||0);C<=3&&$>0?w.push({id:`event-volunteer-${T.id}`,type:"events",priority:"high",title:`Volunteer Shortage: ${T.title}`,message:`${T.title} in ${C} days needs ${$} more volunteers.`,timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Send Reminder",action:"send_reminder"},{label:"View Event",action:"view_event"}]}):C<=7&&w.push({id:`event-reminder-${T.id}`,type:"events",priority:"low",title:`Upcoming Event: ${T.title}`,message:`${T.title} is coming up in ${C} days. All preparations on track.`,timestamp:new Date().toISOString(),actionable:!1,actions:[]})});const{data:A}=await Ue.from("events").select("id, title, event_date, updated_at").eq("org_id",e.org_id).gte("event_date",new Date().toISOString()),B=new Date;B.setDate(B.getDate()-14),A==null||A.forEach(T=>{new Date(T.updated_at)<B&&w.push({id:`event-stale-${T.id}`,type:"events",priority:"medium",title:`Event Needs Attention: ${T.title}`,message:`${T.title} hasn't been updated in 2 weeks. Consider reviewing event details.`,timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Update Event",action:"update_event"},{label:"View Details",action:"view_details"}]})})}catch(_){console.error("Error generating event alerts:",_)}return w},m=async()=>{const w=[];w.push({id:"goal-achievement-1",type:"goals",priority:"low",title:"Goal Achievement: Volunteer Hours",message:"Congratulations! Volunteer hours goal exceeded by 104% this quarter.",timestamp:new Date().toISOString(),actionable:!1,actions:[]});const _=new Date().getMonth();return _>=8&&_<=10&&w.push({id:"seasonal-insight-1",type:"seasonal",priority:"medium",title:"Fall Fundraising Opportunity",message:"Fall is peak fundraising season. Consider launching a major campaign now.",timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Create Campaign",action:"create_campaign"},{label:"View Templates",action:"view_templates"}]}),w.push({id:"communication-insight-1",type:"communication",priority:"low",title:"Communication Performance",message:"Email open rates increased by 8% this month. Great job on engaging content!",timestamp:new Date().toISOString(),actionable:!1,actions:[]}),w},g=(w,_)=>{switch(console.log(`Executing action: ${w} for notification: ${_}`),w){case"review_budget":break;case"start_campaign":break;case"send_reminder":break;case"view_analytics":break;default:console.log("Action not implemented:",w)}},f=w=>{r(_=>_.filter(E=>E.id!==w))},N=t.filter(w=>n==="all"?!0:n==="actionable"?w.actionable:w.type===n),y=w=>{switch(w){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-blue-200 bg-blue-50";default:return"border-gray-200 bg-gray-50"}},j=w=>{switch(w){case"high":return i.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"medium":return i.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"low":return i.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}},x=w=>{switch(w){case"budget":return i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})});case"membership":return i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})});case"events":return i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})});case"engagement":return i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})});default:return i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4 19h5v-5H4v5zM13 13h5V8h-5v5zM4 8h5V3H4v5z"})})}};return s?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"h-16 bg-gray-200 rounded"}),i.jsx("div",{className:"h-16 bg-gray-200 rounded"}),i.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})]})}):i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:i.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4 19h5v-5H4v5zM13 13h5V8h-5v5zM4 8h5V3H4v5z"})})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Smart Notifications"}),i.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered insights and alerts"})]})]}),i.jsx("button",{className:"text-blue-600 text-sm font-medium hover:text-blue-700",children:"View All"})]}),i.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[{key:"all",label:"All"},{key:"actionable",label:"Actionable"},{key:"budget",label:"Budget"},{key:"events",label:"Events"},{key:"membership",label:"Members"}].map(({key:w,label:_})=>i.jsx("button",{onClick:()=>a(w),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${n===w?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:_},w))})]}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:N.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("p",{className:"text-gray-500",children:"No notifications to display"})]}):N.map(w=>i.jsx("div",{className:`border rounded-lg p-4 ${y(w.priority)}`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[j(w.priority),i.jsx("div",{className:"text-gray-500",children:x(w.type)})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:w.title}),i.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w.priority==="high"?"bg-red-100 text-red-800":w.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:[w.priority," priority"]})]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.message}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(w.timestamp).toLocaleString()}),w.actions.length>0&&i.jsx("div",{className:"flex items-center space-x-2 mt-3",children:w.actions.map((_,E)=>i.jsx("button",{onClick:()=>g(_.action,w.id),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:_.label},E))})]})]}),i.jsx("button",{onClick:()=>f(w.id),className:"text-gray-400 hover:text-gray-600 ml-2",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},w.id))})})]})},cb=()=>{const{userProfile:e,loading:t}=wi(),[r,n]=W.useState({metrics:{totalMembers:0,activeEvents:0,budgetUsed:0,engagementRate:0},recentActivity:[],upcomingEvents:[],pendingTasks:[],financialSummary:{totalBudget:0,spent:0,remaining:0,categories:[]}}),[a,s]=W.useState(!0);W.useEffect(()=>{e!=null&&e.org_id&&o()},[e]);const o=async()=>{try{s(!0);const x=[l(),c(),d(),p()],[w,_,E,A]=await Promise.all(x),[B,T,C]=await Promise.all([m(),g(),f()]);n({metrics:{totalMembers:w,activeEvents:_,budgetUsed:E.percentUsed,engagementRate:A},recentActivity:B,upcomingEvents:T,pendingTasks:C,financialSummary:E})}catch(x){console.error("Error fetching dashboard data:",x)}finally{s(!1)}},l=async()=>{const{count:x}=await Ue.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id);return x||0},c=async()=>{const{count:x}=await Ue.from("events").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id).gte("event_date",new Date().toISOString());return x||0},d=async()=>{const{data:x}=await Ue.from("budget_entries").select("amount, category, type").eq("org_id",e.org_id);if(!x)return{percentUsed:0,totalBudget:0,spent:0,remaining:0,categories:[]};const w=x.filter(A=>A.type==="income").reduce((A,B)=>A+B.amount,0),_=x.filter(A=>A.type==="expense").reduce((A,B)=>A+B.amount,0),E=x.reduce((A,B)=>(A[B.category]||(A[B.category]={income:0,expenses:0}),B.type==="income"?A[B.category].income+=B.amount:A[B.category].expenses+=B.amount,A),{});return{totalBudget:w,spent:_,remaining:w-_,percentUsed:w>0?Math.round(_/w*100):0,categories:Object.entries(E).map(([A,B])=>({name:A,...B,net:B.income-B.expenses}))}},p=async()=>{const x=new Date;x.setDate(x.getDate()-30);const{count:w}=await Ue.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id).gte("last_sign_in_at",x.toISOString()),{count:_}=await Ue.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id);return _>0?Math.round(w/_*100):0},m=async()=>{const{data:x}=await Ue.from("events").select("title, created_at, created_by").eq("org_id",e.org_id).order("created_at",{ascending:!1}).limit(5),{data:w}=await Ue.from("users").select("first_name, last_name, created_at").eq("org_id",e.org_id).order("created_at",{ascending:!1}).limit(3),_=[];return x&&x.forEach(E=>{_.push({type:"event_created",title:`New event: ${E.title}`,timestamp:E.created_at,user:"System"})}),w&&w.forEach(E=>{_.push({type:"user_joined",title:`${E.first_name} ${E.last_name} joined`,timestamp:E.created_at,user:`${E.first_name} ${E.last_name}`})}),_.sort((E,A)=>new Date(A.timestamp)-new Date(E.timestamp)).slice(0,8)},g=async()=>{const{data:x}=await Ue.from("events").select("id, title, event_date, location, status").eq("org_id",e.org_id).gte("event_date",new Date().toISOString()).order("event_date",{ascending:!0}).limit(5);return x||[]},f=async()=>{const x=[];return(e.role==="admin"||e.role==="board_member")&&x.push({id:1,title:"Review budget proposal",priority:"high",dueDate:"2025-06-10"},{id:2,title:"Approve volunteer applications",priority:"medium",dueDate:"2025-06-12"},{id:3,title:"Update event calendar",priority:"low",dueDate:"2025-06-15"}),x},N=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x),y=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),j=x=>{const w=new Date,_=new Date(x),E=Math.floor((w-_)/(1e3*60*60));if(E<1)return"Just now";if(E<24)return`${E}h ago`;const A=Math.floor(E/24);return A<7?`${A}d ago`:y(x)};return t||a?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",e==null?void 0:e.first_name,"!"]}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Here's what's happening with your PTO today"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.metrics.totalMembers})]}),i.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})]}),i.jsx("div",{className:"mt-4",children:i.jsx("span",{className:"text-sm text-green-600",children:"+12% from last month"})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Events"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.metrics.activeEvents})]}),i.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),i.jsx("div",{className:"mt-4",children:i.jsx("span",{className:"text-sm text-blue-600",children:"3 this month"})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Budget Used"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[r.metrics.budgetUsed,"%"]})]}),i.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]}),i.jsx("div",{className:"mt-4",children:i.jsxs("span",{className:"text-sm text-gray-600",children:[N(r.financialSummary.remaining)," remaining"]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Engagement Rate"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[r.metrics.engagementRate,"%"]})]}),i.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),i.jsx("div",{className:"mt-4",children:i.jsx("span",{className:"text-sm text-green-600",children:"+5% from last month"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Activity"})}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:r.recentActivity.map((x,w)=>i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${x.type==="event_created"?"bg-blue-500":"bg-green-500"}`})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.title}),i.jsx("p",{className:"text-sm text-gray-500",children:j(x.timestamp)})]})]},w))})})]}),i.jsx(ob,{})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx(lb,{}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upcoming Events"})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[r.upcomingEvents.map(x=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:x.title}),i.jsx("p",{className:"text-sm text-gray-600",children:y(x.event_date)}),x.location&&i.jsx("p",{className:"text-sm text-gray-500",children:x.location})]}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x.status==="confirmed"?"bg-green-100 text-green-800":x.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:x.status})]},x.id)),r.upcomingEvents.length===0&&i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming events"})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quick Actions"})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("button",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[i.jsx("svg",{className:"w-6 h-6 text-blue-600 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("span",{className:"text-sm font-medium text-blue-900",children:"New Event"})]}),i.jsxs("button",{className:"flex flex-col items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[i.jsx("svg",{className:"w-6 h-6 text-green-600 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),i.jsx("span",{className:"text-sm font-medium text-green-900",children:"Send Message"})]}),i.jsxs("button",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:[i.jsx("svg",{className:"w-6 h-6 text-purple-600 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),i.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Add Member"})]}),i.jsxs("button",{className:"flex flex-col items-center p-4 bg-yellow-50 rounded-lg hover:bg-yellow-100 transition-colors",children:[i.jsx("svg",{className:"w-6 h-6 text-yellow-600 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),i.jsx("span",{className:"text-sm font-medium text-yellow-900",children:"New Report"})]})]})})]}),r.pendingTasks.length>0&&i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Pending Tasks"})}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-3",children:r.pendingTasks.map(x=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:x.title}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",y(x.dueDate)]})]}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x.priority==="high"?"bg-red-100 text-red-800":x.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:x.priority})]},x.id))})})]})]})]})]})})};function ed(){const[e,t]=W.useState([]),[r,n]=W.useState(""),[a,s]=W.useState(!0);return W.useEffect(()=>{async function o(){try{const{data:{session:l}}=await Ue.auth.getSession();console.log("Supabase session:",l);const c=l==null?void 0:l.access_token;if(!c){n("Not authenticated.");return}const d=await Er.get("/api/admin-users",{headers:{Authorization:`Bearer ${c}`}});if(console.log("API response:",d.data),!Array.isArray(d.data))throw new Error("Invalid API response format (expected array)");t(d.data)}catch(l){console.error("Error fetching users:",l),n("Failed to load user list.")}finally{s(!1)}}o()},[]),i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"PTO Members & Roles"}),a&&i.jsx("p",{className:"text-gray-500",children:"Loading users..."}),r&&i.jsx("p",{className:"text-red-600",children:r}),!a&&e.length===0&&!r&&i.jsx("p",{children:"No users found for this PTO."}),!a&&e.length>0&&i.jsxs("table",{className:"w-full table-auto border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-200 text-left",children:[i.jsx("th",{className:"p-2 border",children:"Name"}),i.jsx("th",{className:"p-2 border",children:"Email"}),i.jsx("th",{className:"p-2 border",children:"Role"})]})}),i.jsx("tbody",{children:e.map(o=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"p-2",children:o.full_name||"—"}),i.jsx("td",{className:"p-2",children:o.email}),i.jsx("td",{className:"p-2 capitalize",children:o.role})]},o.id))})]})]})}function ub(){const{profile:e,loading:t}=wi(),[r,n]=W.useState([]),[a,s]=W.useState([]),[o,l]=W.useState(!0),[c,d]=W.useState(null),[p,m]=W.useState(!1),g=(e==null?void 0:e.role)==="admin",f=W.useCallback(async()=>{if(!(e!=null&&e.user_id)||t||!g){l(!1);return}try{l(!0),d(null);const{data:{session:T}}=await Ue.auth.getSession();if(!(T!=null&&T.access_token))throw new Error("No authentication token available");const[C,$]=await Promise.all([Er.get("/api/admin/organization-permissions/templates",{headers:{Authorization:`Bearer ${T.access_token}`}}),Er.get("/api/admin/organization-permissions",{headers:{Authorization:`Bearer ${T.access_token}`}})]);n(C.data.templates||[]),s($.data.permissions||[])}catch(T){console.error("Error fetching permission data:",T.message),d(T.message)}finally{l(!1)}},[e==null?void 0:e.user_id,t,g]);W.useEffect(()=>{f()},[f]);const N=W.useCallback(async(T,C)=>{var $,H;if(!g)throw new Error("Only administrators can modify permissions");try{m(!0),d(null);const{data:{session:L}}=await Ue.auth.getSession();if(!(L!=null&&L.access_token))throw new Error("No authentication token available");const D=await Er.put(`/api/admin/organization-permissions/${T}`,C,{headers:{Authorization:`Bearer ${L.access_token}`}});return await f(),D.data}catch(L){throw console.error(`Error updating permission ${T}:`,L.message),d(((H=($=L.response)==null?void 0:$.data)==null?void 0:H.error)||L.message),L}finally{m(!1)}},[g,f]),y=W.useCallback(async T=>{var C,$;if(!g)throw new Error("Only administrators can modify permissions");try{m(!0),d(null);const{data:{session:H}}=await Ue.auth.getSession();if(!(H!=null&&H.access_token))throw new Error("No authentication token available");const L=await Er.post("/api/admin/organization-permissions/bulk-update",{permissions:T},{headers:{Authorization:`Bearer ${H.access_token}`}});return await f(),L.data}catch(H){throw console.error("Error bulk updating permissions:",H.message),d((($=(C=H.response)==null?void 0:C.data)==null?void 0:$.error)||H.message),H}finally{m(!1)}},[g,f]),j=W.useCallback(async T=>{var C,$;if(!g)throw new Error("Only administrators can modify permissions");try{m(!0),d(null);const{data:{session:H}}=await Ue.auth.getSession();if(!(H!=null&&H.access_token))throw new Error("No authentication token available");const L=await Er.delete(`/api/admin/organization-permissions/${T}`,{headers:{Authorization:`Bearer ${H.access_token}`}});return await f(),L.data}catch(H){throw console.error(`Error resetting permission ${T}:`,H.message),d((($=(C=H.response)==null?void 0:C.data)==null?void 0:$.error)||H.message),H}finally{m(!1)}},[g,f]),x=W.useCallback(async T=>{if(!g)throw new Error("Only administrators can view user permissions");try{const{data:{session:C}}=await Ue.auth.getSession();if(!(C!=null&&C.access_token))throw new Error("No authentication token available");return(await Er.get(`/api/admin/organization-permissions/user/${T}`,{headers:{Authorization:`Bearer ${C.access_token}`}})).data}catch(C){throw console.error(`Error fetching permissions for user ${T}:`,C.message),C}},[g]),w=W.useCallback(()=>{const T={};return a.forEach(C=>{const $=C.module_name;T[$]||(T[$]=[]),T[$].push(C)}),T},[a]),_=W.useCallback(T=>r.find(C=>C.permission_key===T)||null,[r]),E=W.useCallback(T=>{const C=a.find($=>$.permission_key===T);return!!(C!=null&&C.has_custom_setting)},[a]),A=W.useCallback(T=>{const C=a.find(H=>H.permission_key===T),$=_(T);return $?{permission_key:T,module_name:$.module_name,permission_name:$.permission_name,permission_description:$.permission_description,current_min_role:(C==null?void 0:C.current_min_role)||$.default_min_role,specific_users:(C==null?void 0:C.specific_users)||[],is_enabled:(C==null?void 0:C.is_enabled)!==void 0?C.is_enabled:!0,is_customized:!!(C!=null&&C.has_custom_setting),default_min_role:$.default_min_role}:null},[a,_]),B=W.useCallback(()=>{f()},[f]);return{templates:r,orgPermissions:a,loading:o,error:c,saving:p,isAdmin:g,updatePermission:N,bulkUpdatePermissions:y,resetPermission:j,getUserPermissions:x,refreshPermissions:B,getPermissionsByModule:w,getPermissionTemplate:_,isPermissionCustomized:E,getEffectivePermission:A,userId:e==null?void 0:e.user_id,orgId:e==null?void 0:e.org_id,userRole:e==null?void 0:e.role}}function db(){const{profile:e,organization:t,loading:r}=wi(),n={admin:5,board_member:4,committee_lead:3,volunteer:2,parent_member:1,teacher:1},a=A=>e!=null&&e.role?n[e.role]>=n[A]:!1,s=A=>e!=null&&e.role?A.includes(e.role):!1,o=A=>(e==null?void 0:e.role)===A,l=()=>a("admin"),c=()=>a("committee_lead"),d=()=>a("committee_lead"),p=()=>a("committee_lead");return{hasRole:a,hasAnyRole:s,hasExactRole:o,canAccessAdminFeatures:l,canManageEvents:c,canManageBudget:d,canManageCommunications:p,canManageUsers:()=>a("admin"),canViewReports:()=>a("board_member"),canCreateEvents:()=>a("volunteer"),canVolunteer:()=>a("parent_member"),isInOrganization:()=>!!(e!=null&&e.org_id)&&!!t,getOrganizationId:()=>e==null?void 0:e.org_id,getOrganizationName:()=>t==null?void 0:t.name,getRoleDisplayName:(A=e==null?void 0:e.role)=>({admin:"Administrator",board_member:"Board Member",committee_lead:"Committee Lead",volunteer:"Volunteer",parent_member:"Parent Member",teacher:"Teacher"})[A]||"Unknown Role",getRoleColor:(A=e==null?void 0:e.role)=>({admin:"bg-red-100 text-red-800",board_member:"bg-purple-100 text-purple-800",committee_lead:"bg-blue-100 text-blue-800",volunteer:"bg-green-100 text-green-800",parent_member:"bg-yellow-100 text-yellow-800",teacher:"bg-indigo-100 text-indigo-800"})[A]||"bg-gray-100 text-gray-800",canAccessRoute:A=>({"/dashboard/admin":l(),"/dashboard/board":a("board_member"),"/dashboard/committee":a("committee_lead"),"/dashboard/volunteer":a("volunteer"),"/dashboard/parent":a("parent_member"),"/dashboard/teacher":o("teacher"),"/events":c(),"/budget":d(),"/communications":p(),"/billing":l(),"/shared-library":a("volunteer"),"/teacher-requests":o("teacher")})[A]??!1,currentRole:e==null?void 0:e.role,currentUserId:e==null?void 0:e.id,loading:r}}function hb(){const{canAccessAdminFeatures:e}=db(),{templates:t,loading:r,error:n,saving:a,isAdmin:s,updatePermission:o,bulkUpdatePermissions:l,resetPermission:c,getEffectivePermission:d,isPermissionCustomized:p,refreshPermissions:m}=ub(),[g,f]=W.useState("all"),[N,y]=W.useState({}),[j,x]=W.useState(!1),[w,_]=W.useState(!1),E=[{value:"volunteer",label:"Volunteer",color:"bg-green-100 text-green-800"},{value:"committee_lead",label:"Committee Lead",color:"bg-blue-100 text-blue-800"},{value:"board_member",label:"Board Member",color:"bg-purple-100 text-purple-800"},{value:"admin",label:"Administrator",color:"bg-red-100 text-red-800"}],A=[...new Set(t.map(F=>F.module_name))].sort(),T=(g==="all"?t:t.filter(F=>F.module_name===g)).reduce((F,U)=>{const ee=U.module_name;return F[ee]||(F[ee]=[]),F[ee].push(U),F},{}),C=(F,U,ee)=>{y(te=>({...te,[F]:{...te[F],[U]:ee}}))},$=async F=>{const U=N[F];if(U)try{const ee=d(F),te={min_role_required:U.min_role_required||ee.current_min_role,specific_users:U.specific_users||ee.specific_users,is_enabled:U.is_enabled!==void 0?U.is_enabled:ee.is_enabled};await o(F,te),y(re=>{const Q={...re};return delete Q[F],Q}),alert(`Permission "${F}" updated successfully!`)}catch(ee){alert(`Failed to update permission: ${ee.message}`)}},H=async()=>{if(Object.keys(N).length!==0)try{const F=Object.entries(N).map(([U,ee])=>{const te=d(U);return{permission_key:U,min_role_required:ee.min_role_required||te.current_min_role,specific_users:ee.specific_users||te.specific_users,is_enabled:ee.is_enabled!==void 0?ee.is_enabled:te.is_enabled}});await l(F),y({}),alert(`Successfully updated ${F.length} permissions!`)}catch(F){alert(`Failed to save changes: ${F.message}`)}},L=async F=>{if(confirm(`Reset "${F}" to default settings?`))try{await c(F),y(U=>{const ee={...U};return delete ee[F],ee}),alert(`Permission "${F}" reset to default!`)}catch(U){alert(`Failed to reset permission: ${U.message}`)}},D=F=>{const U=d(F),ee=N[F];return ee?{...U,current_min_role:ee.min_role_required||U.current_min_role,specific_users:ee.specific_users||U.specific_users,is_enabled:ee.is_enabled!==void 0?ee.is_enabled:U.is_enabled}:U};return!e||!s?i.jsx("div",{className:"max-w-4xl mx-auto p-6",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Access Denied"}),i.jsx("p",{className:"text-red-600",children:"Only administrators can access permission management."})]})}):r?i.jsx("div",{className:"max-w-6xl mx-auto p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),i.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>i.jsx("div",{className:"h-20 bg-gray-200 rounded"},F))})]})}):n?i.jsx("div",{className:"max-w-4xl mx-auto p-6",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Permissions"}),i.jsx("p",{className:"text-red-600 mb-4",children:n}),i.jsx("button",{onClick:m,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Retry"})]})}):i.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Permission Management"}),i.jsx("p",{className:"text-gray-600",children:"Customize which roles can perform specific actions in your organization."})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Module:"}),i.jsxs("select",{value:g,onChange:F=>f(F.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[i.jsx("option",{value:"all",children:"All Modules"}),A.map(F=>i.jsx("option",{value:F,children:F.charAt(0).toUpperCase()+F.slice(1).replace("_"," ")},F))]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>_(!w),className:`px-4 py-2 rounded-md text-sm font-medium ${w?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:w?"Exit Bulk Mode":"Bulk Edit"}),Object.keys(N).length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>x(!j),className:"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-md text-sm font-medium hover:bg-yellow-200",children:["Preview Changes (",Object.keys(N).length,")"]}),i.jsx("button",{onClick:H,disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700 disabled:opacity-50",children:a?"Saving...":"Save All Changes"})]})]})]})}),j&&Object.keys(N).length>0&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Pending Changes"}),i.jsx("div",{className:"space-y-2",children:Object.entries(N).map(([F,U])=>i.jsxs("div",{className:"text-sm text-yellow-700",children:[i.jsxs("span",{className:"font-medium",children:[F,":"]}),U.min_role_required&&i.jsxs("span",{className:"ml-2",children:["Role → ",U.min_role_required]}),U.is_enabled!==void 0&&i.jsxs("span",{className:"ml-2",children:["Enabled → ",U.is_enabled?"Yes":"No"]})]},F))})]}),i.jsx("div",{className:"space-y-8",children:Object.entries(T).map(([F,U])=>i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-900 capitalize",children:[F.replace("_"," ")," Module"]}),i.jsxs("span",{className:"text-sm text-gray-500",children:[U.length," permissions"]})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permission"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Minimum Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(ee=>{const te=D(ee.permission_key),re=N[ee.permission_key],Q=p(ee.permission_key);return i.jsxs("tr",{className:re?"bg-yellow-50":"",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[te.permission_name,Q&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Custom"}),re&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"Modified"})]}),i.jsx("div",{className:"text-sm text-gray-500",children:te.permission_description})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("select",{value:te.current_min_role,onChange:Y=>C(ee.permission_key,"min_role_required",Y.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:E.map(Y=>i.jsx("option",{value:Y.value,children:Y.label},Y.value))})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:te.is_enabled,onChange:Y=>C(ee.permission_key,"is_enabled",Y.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"ml-2 text-sm text-gray-700",children:te.is_enabled?"Enabled":"Disabled"})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[re&&i.jsx("button",{onClick:()=>$(ee.permission_key),disabled:a,className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Save"}),Q&&i.jsx("button",{onClick:()=>L(ee.permission_key),disabled:a,className:"text-gray-600 hover:text-gray-800 text-sm font-medium",children:"Reset"})]})})]},ee.permission_key)})})]})})]},F))}),i.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Permission Management Guide"}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Minimum Role:"})," The lowest role level that can perform this action"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Custom:"})," Permission has been modified from the default setting"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Modified:"})," Permission has unsaved changes"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Reset:"})," Restore permission to its default setting"]}),i.jsx("li",{children:"• Changes take effect immediately for all users in your organization"})]})]})]})}function fb(){return i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Welcome to the Board Dashboard"}),i.jsx("p",{className:"mt-4 text-gray-700",children:"This is a placeholder for the Board dashboard."})]})}function pb(){return i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Welcome to the Committee Dashboard"}),i.jsx("p",{className:"mt-4 text-gray-700",children:"This is a placeholder for the Committee dashboard."})]})}function mb(){return i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Welcome to the Volunteer Dashboard"}),i.jsx("p",{className:"mt-4 text-gray-700",children:"This is a placeholder for the Volunteer dashboard."})]})}function gb(){return i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Welcome to the Parent Dashboard"}),i.jsx("p",{className:"mt-4 text-gray-700",children:"This is a placeholder for the Parent dashboard."})]})}function vb(){return i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Welcome to the Teacher Dashboard"}),i.jsx("p",{className:"mt-4 text-gray-700",children:"This is a placeholder for the Teacher dashboard."})]})}function bb(){const[e,t]=W.useState([]),[r,n]=W.useState("");W.useEffect(()=>{async function s(){const{data:{session:o},error:l}=await Ue.auth.getSession();if(l||!(o!=null&&o.access_token)){n("Authentication error. Please log in again.");return}try{const c=await fetch("/api/events",{headers:{Authorization:`Bearer ${o.access_token}`}}),d=await c.json();c.ok?t(d):n(d.error||"Failed to load events")}catch(c){console.error("Fetch error:",c),n("Failed to connect to server.")}}s()},[]);const a=async s=>{if(!window.confirm("Are you sure you want to delete this event?"))return;const{data:{session:l}}=await Ue.auth.getSession();if(!(l!=null&&l.access_token)){alert("You must be logged in to delete events.");return}const c=await fetch(`/api/events/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${l.access_token}`}});c.ok?t(d=>d.filter(p=>p.id!==s)):(alert("Failed to delete event."),console.error("Delete error:",await c.text()))};return i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-4",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"PTO-Wide Events"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ma,{to:"/events/calendar",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300",children:"📅 View Calendar"}),i.jsx(ma,{to:"/events/create",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"+ Create Event"})]})]}),r&&i.jsx("p",{className:"text-red-600 mb-4",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No events created yet."}),i.jsx("ul",{className:"space-y-4",children:e.map(s=>i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("h2",{className:"text-xl font-semibold",children:s.title}),i.jsxs("div",{className:"flex gap-2 text-sm",children:[i.jsx(ma,{to:`/events/edit/${s.id}`,className:"text-blue-600 hover:underline",children:"✏️ Edit"}),i.jsx("button",{onClick:()=>a(s.id),className:"text-red-600 hover:underline",children:"🗑️ Delete"})]})]}),i.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(s.event_date).toLocaleDateString()," • ",s.school_level," • ",s.category]}),i.jsx("p",{className:"mt-2",children:s.description}),s.share_public&&i.jsx("span",{className:"text-xs inline-block mt-2 px-2 py-1 bg-green-100 text-green-800 rounded",children:"Shared to Library"})]},s.id))})]})}const yb=()=>{const e=Xr(),[t,r]=W.useState("grid"),[n,a]=W.useState("manual"),[s,o]=W.useState(""),[l,c]=W.useState("all"),d=()=>{e("/events/create")},p=()=>{e("/events/create?mode=ai-assisted")},m=()=>{e("/events/create?mode=ai-automated")},g=A=>{e(`/events/${A}`)},f=A=>{e(`/events/${A}/edit`)},N=A=>{window.confirm("Are you sure you want to delete this event?")&&console.log("Deleting event:",A)},y=()=>{e("/events/create")},j=[{id:1,name:"Fall Festival 2024",date:"2024-10-15",status:"planning",attendees:300,budget:3e3,profit:1800,progress:65,type:"ai-generated",description:"Community celebration with games, food, and family fun"},{id:2,name:"Book Fair",date:"2024-11-20",status:"active",attendees:150,budget:1500,profit:800,progress:85,type:"manual",description:"Annual book fair to promote reading"},{id:3,name:"Science Night",date:"2024-12-05",status:"draft",attendees:200,budget:2e3,profit:1200,progress:25,type:"manual",description:"Interactive science demonstrations and experiments"}],x=A=>{const B={draft:"bg-gray-100 text-gray-800",planning:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",completed:"bg-purple-100 text-purple-800",cancelled:"bg-red-100 text-red-800"};return B[A]||B.draft},w=({event:A})=>i.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:A.name}),A.type==="ai-generated"&&i.jsx(xr,{className:"w-4 h-4 text-purple-500",title:"AI Generated"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A.description}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ds,{className:"w-4 h-4"}),i.jsx("span",{children:new Date(A.date).toLocaleDateString()})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(fi,{className:"w-4 h-4"}),i.jsxs("span",{children:[A.attendees," expected"]})]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(A.status)}`,children:A.status.charAt(0).toUpperCase()+A.status.slice(1)})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600",children:"Progress"}),i.jsxs("span",{className:"font-medium text-gray-900",children:[A.progress,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${A.progress}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[i.jsx("div",{className:"text-sm text-gray-600",children:"Budget"}),i.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",A.budget]})]}),i.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[i.jsx("div",{className:"text-sm text-green-600",children:"Projected Profit"}),i.jsxs("div",{className:"text-lg font-semibold text-green-700",children:["$",A.profit]})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:()=>g(A.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(_o,{className:"w-4 h-4 mr-2"}),"View"]}),i.jsxs("button",{onClick:()=>f(A.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(mc,{className:"w-4 h-4 mr-2"}),"Edit"]})]})]})}),_=({event:A})=>i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"font-medium text-gray-900",children:A.name}),A.type==="ai-generated"&&i.jsx(xr,{className:"w-4 h-4 text-purple-500"}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(A.status)}`,children:A.status})]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.description})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Date"}),i.jsx("div",{className:"font-medium",children:new Date(A.date).toLocaleDateString()})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Attendees"}),i.jsx("div",{className:"font-medium",children:A.attendees})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Budget"}),i.jsxs("div",{className:"font-medium",children:["$",A.budget]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Progress"}),i.jsxs("div",{className:"font-medium",children:[A.progress,"%"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>g(A.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",children:i.jsx(_o,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>f(A.id),className:"p-2 text-gray-600 hover:bg-gray-50 rounded",children:i.jsx(mc,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>N(A.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:i.jsx(Eg,{className:"w-4 h-4"})})]})]})}),E=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create New Event"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(n2,{className:"w-8 h-8 text-gray-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Manual Creation"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Full control over every detail"})]})]}),i.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 mb-4",children:[i.jsx("li",{children:"• Step-by-step event setup"}),i.jsx("li",{children:"• Custom timeline creation"}),i.jsx("li",{children:"• Manual budget planning"}),i.jsx("li",{children:"• Individual task assignment"})]}),i.jsx("button",{onClick:d,className:"w-full py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Create Manually"})]}),i.jsxs("div",{className:"border-2 border-blue-200 rounded-lg p-6 hover:border-blue-400 transition-colors bg-blue-50",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(xr,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-blue-900",children:"AI Assisted"}),i.jsx("p",{className:"text-sm text-blue-700",children:"AI suggestions with manual control"})]})]}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-2 mb-4",children:[i.jsx("li",{children:"• AI-generated suggestions"}),i.jsx("li",{children:"• Smart template recommendations"}),i.jsx("li",{children:"• Automated task suggestions"}),i.jsx("li",{children:"• Budget estimation help"})]}),i.jsx("button",{onClick:p,className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create with AI Help"})]}),i.jsxs("div",{className:"border-2 border-purple-200 rounded-lg p-6 hover:border-purple-400 transition-colors bg-purple-50",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(xr,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-purple-900",children:"AI Automated"}),i.jsx("p",{className:"text-sm text-purple-700",children:"Complete workflow generation"})]})]}),i.jsxs("ul",{className:"text-sm text-purple-700 space-y-2 mb-4",children:[i.jsx("li",{children:"• Complete workflow creation"}),i.jsx("li",{children:"• Automated timeline & tasks"}),i.jsx("li",{children:"• Budget & profit projections"}),i.jsx("li",{children:"• Communication campaigns"})]}),i.jsx("button",{onClick:m,className:"w-full py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Generate Full Workflow"})]})]})]});return i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Events Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"Manage your PTO events with manual control or AI assistance"})]}),i.jsx("div",{className:"flex items-center space-x-3",children:i.jsx("button",{onClick:()=>r(t==="grid"?"list":"grid"),className:"p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:t==="grid"?i.jsx(Sg,{className:"w-5 h-5"}):i.jsx(_g,{className:"w-5 h-5"})})})]}),i.jsx(E,{}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Ag,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search events...",value:s,onChange:A=>o(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("select",{value:l,onChange:A=>c(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"planning",children:"Planning"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"completed",children:"Completed"})]})]})}),i.jsx("div",{className:t==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:j.map(A=>t==="grid"?i.jsx(w,{event:A},A.id):i.jsx(_,{event:A},A.id))}),j.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ds,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first event"}),i.jsx("button",{onClick:y,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Event"})]})]})})};function dt(e){"@babel/helpers - typeof";return dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(e)}var wr=Uint8Array,Yr=Uint16Array,xh=Int32Array,Oc=new wr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tc=new wr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Td=new wr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bg=function(e,t){for(var r=new Yr(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new xh(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},qg=Bg(Oc,2),zg=qg.b,Md=qg.r;zg[28]=258,Md[258]=28;var Ug=Bg(Tc,0),xb=Ug.b,ep=Ug.r,Id=new Yr(32768);for(var Tt=0;Tt<32768;++Tt){var ka=(Tt&43690)>>1|(Tt&21845)<<1;ka=(ka&52428)>>2|(ka&13107)<<2,ka=(ka&61680)>>4|(ka&3855)<<4,Id[Tt]=((ka&65280)>>8|(ka&255)<<8)>>1}var Vn=function(e,t,r){for(var n=e.length,a=0,s=new Yr(t);a<n;++a)e[a]&&++s[e[a]-1];var o=new Yr(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new Yr(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var d=a<<4|e[a],p=t-e[a],m=o[e[a]-1]++<<p,g=m|(1<<p)-1;m<=g;++m)l[Id[m]>>c]=d}else for(l=new Yr(n),a=0;a<n;++a)e[a]&&(l[a]=Id[o[e[a]-1]++]>>15-e[a]);return l},Ia=new wr(288);for(var Tt=0;Tt<144;++Tt)Ia[Tt]=8;for(var Tt=144;Tt<256;++Tt)Ia[Tt]=9;for(var Tt=256;Tt<280;++Tt)Ia[Tt]=7;for(var Tt=280;Tt<288;++Tt)Ia[Tt]=8;var Eo=new wr(32);for(var Tt=0;Tt<32;++Tt)Eo[Tt]=5;var wb=Vn(Ia,9,0),Nb=Vn(Ia,9,1),jb=Vn(Eo,5,0),Sb=Vn(Eo,5,1),td=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},_n=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},rd=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},wh=function(e){return(e+7)/8|0},Wg=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new wr(e.subarray(t,r))},_b=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],En=function(e,t,r){var n=new Error(t||_b[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,En),!r)throw n;return n},Ab=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new wr(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new wr(a*3));var d=function(Se){var Te=r.length;if(Se>Te){var De=new wr(Math.max(Te*2,Se));De.set(r),r=De}},p=t.f||0,m=t.p||0,g=t.b||0,f=t.l,N=t.d,y=t.m,j=t.n,x=a*8;do{if(!f){p=_n(e,m,1);var w=_n(e,m+1,3);if(m+=3,w)if(w==1)f=Nb,N=Sb,y=9,j=5;else if(w==2){var B=_n(e,m,31)+257,T=_n(e,m+10,15)+4,C=B+_n(e,m+5,31)+1;m+=14;for(var $=new wr(C),H=new wr(19),L=0;L<T;++L)H[Td[L]]=_n(e,m+L*3,7);m+=T*3;for(var D=td(H),F=(1<<D)-1,U=Vn(H,D,1),L=0;L<C;){var ee=U[_n(e,m,F)];m+=ee&15;var _=ee>>4;if(_<16)$[L++]=_;else{var te=0,re=0;for(_==16?(re=3+_n(e,m,3),m+=2,te=$[L-1]):_==17?(re=3+_n(e,m,7),m+=3):_==18&&(re=11+_n(e,m,127),m+=7);re--;)$[L++]=te}}var Q=$.subarray(0,B),Y=$.subarray(B);y=td(Q),j=td(Y),f=Vn(Q,y,1),N=Vn(Y,j,1)}else En(1);else{var _=wh(m)+4,E=e[_-4]|e[_-3]<<8,A=_+E;if(A>a){c&&En(0);break}l&&d(g+E),r.set(e.subarray(_,A),g),t.b=g+=E,t.p=m=A*8,t.f=p;continue}if(m>x){c&&En(0);break}}l&&d(g+131072);for(var X=(1<<y)-1,ce=(1<<j)-1,P=m;;P=m){var te=f[rd(e,m)&X],q=te>>4;if(m+=te&15,m>x){c&&En(0);break}if(te||En(2),q<256)r[g++]=q;else if(q==256){P=m,f=null;break}else{var V=q-254;if(q>264){var L=q-257,Z=Oc[L];V=_n(e,m,(1<<Z)-1)+zg[L],m+=Z}var se=N[rd(e,m)&ce],de=se>>4;se||En(3),m+=se&15;var Y=xb[de];if(de>3){var Z=Tc[de];Y+=rd(e,m)&(1<<Z)-1,m+=Z}if(m>x){c&&En(0);break}l&&d(g+131072);var fe=g+V;if(g<Y){var ge=s-Y,Ae=Math.min(Y,fe);for(ge+g<0&&En(3);g<Ae;++g)r[g]=n[ge+g]}for(;g<fe;++g)r[g]=r[g-Y]}}t.l=f,t.p=P,t.b=g,t.f=p,f&&(p=1,t.m=y,t.d=N,t.n=j)}while(!p);return g!=r.length&&o?Wg(r,0,g):r.subarray(0,g)},da=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},ho=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},nd=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:Gg,l:0};if(a==1){var o=new wr(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(A,B){return A.f-B.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,p=1,m=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};p!=a-1;)l=r[r[d].f<r[m].f?d++:m++],c=r[d!=p&&r[d].f<r[m].f?d++:m++],r[p++]={s:-1,f:l.f+c.f,l,r:c};for(var g=s[0].s,n=1;n<a;++n)s[n].s>g&&(g=s[n].s);var f=new Yr(g+1),N=Rd(r[p-1],f,0);if(N>t){var n=0,y=0,j=N-t,x=1<<j;for(s.sort(function(B,T){return f[T.s]-f[B.s]||B.f-T.f});n<a;++n){var w=s[n].s;if(f[w]>t)y+=x-(1<<N-f[w]),f[w]=t;else break}for(y>>=j;y>0;){var _=s[n].s;f[_]<t?y-=1<<t-f[_]++-1:++n}for(;n>=0&&y;--n){var E=s[n].s;f[E]==t&&(--f[E],++y)}N=t}return{t:new wr(f),l:N}},Rd=function(e,t,r){return e.s==-1?Math.max(Rd(e.l,t,r+1),Rd(e.r,t,r+1)):t[e.s]=r},tp=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Yr(++t),n=0,a=e[0],s=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=e[l]}return{c:r.subarray(0,n),n:t}},fo=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Hg=function(e,t,r){var n=r.length,a=wh(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},rp=function(e,t,r,n,a,s,o,l,c,d,p){da(t,p++,r),++a[256];for(var m=nd(a,15),g=m.t,f=m.l,N=nd(s,15),y=N.t,j=N.l,x=tp(g),w=x.c,_=x.n,E=tp(y),A=E.c,B=E.n,T=new Yr(19),C=0;C<w.length;++C)++T[w[C]&31];for(var C=0;C<A.length;++C)++T[A[C]&31];for(var $=nd(T,7),H=$.t,L=$.l,D=19;D>4&&!H[Td[D-1]];--D);var F=d+5<<3,U=fo(a,Ia)+fo(s,Eo)+o,ee=fo(a,g)+fo(s,y)+o+14+3*D+fo(T,H)+2*T[16]+3*T[17]+7*T[18];if(c>=0&&F<=U&&F<=ee)return Hg(t,p,e.subarray(c,c+d));var te,re,Q,Y;if(da(t,p,1+(ee<U)),p+=2,ee<U){te=Vn(g,f,0),re=g,Q=Vn(y,j,0),Y=y;var X=Vn(H,L,0);da(t,p,_-257),da(t,p+5,B-1),da(t,p+10,D-4),p+=14;for(var C=0;C<D;++C)da(t,p+3*C,H[Td[C]]);p+=3*D;for(var ce=[w,A],P=0;P<2;++P)for(var q=ce[P],C=0;C<q.length;++C){var V=q[C]&31;da(t,p,X[V]),p+=H[V],V>15&&(da(t,p,q[C]>>5&127),p+=q[C]>>12)}}else te=wb,re=Ia,Q=jb,Y=Eo;for(var C=0;C<l;++C){var Z=n[C];if(Z>255){var V=Z>>18&31;ho(t,p,te[V+257]),p+=re[V+257],V>7&&(da(t,p,Z>>23&31),p+=Oc[V]);var se=Z&31;ho(t,p,Q[se]),p+=Y[se],se>3&&(ho(t,p,Z>>5&8191),p+=Tc[se])}else ho(t,p,te[Z]),p+=re[Z]}return ho(t,p,te[256]),p+re[256]},Eb=new xh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Gg=new wr(0),Cb=function(e,t,r,n,a,s){var o=s.z||e.length,l=new wr(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),d=s.l,p=(s.r||0)&7;if(t){p&&(c[0]=s.r>>3);for(var m=Eb[t-1],g=m>>13,f=m&8191,N=(1<<r)-1,y=s.p||new Yr(32768),j=s.h||new Yr(N+1),x=Math.ceil(r/3),w=2*x,_=function(Ge){return(e[Ge]^e[Ge+1]<<x^e[Ge+2]<<w)&N},E=new xh(25e3),A=new Yr(288),B=new Yr(32),T=0,C=0,$=s.i||0,H=0,L=s.w||0,D=0;$+2<o;++$){var F=_($),U=$&32767,ee=j[F];if(y[U]=ee,j[F]=U,L<=$){var te=o-$;if((T>7e3||H>24576)&&(te>423||!d)){p=rp(e,c,0,E,A,B,C,H,D,$-D,p),H=T=C=0,D=$;for(var re=0;re<286;++re)A[re]=0;for(var re=0;re<30;++re)B[re]=0}var Q=2,Y=0,X=f,ce=U-ee&32767;if(te>2&&F==_($-ce))for(var P=Math.min(g,te)-1,q=Math.min(32767,$),V=Math.min(258,te);ce<=q&&--X&&U!=ee;){if(e[$+Q]==e[$+Q-ce]){for(var Z=0;Z<V&&e[$+Z]==e[$+Z-ce];++Z);if(Z>Q){if(Q=Z,Y=ce,Z>P)break;for(var se=Math.min(ce,Z-2),de=0,re=0;re<se;++re){var fe=$-ce+re&32767,ge=y[fe],Ae=fe-ge&32767;Ae>de&&(de=Ae,ee=fe)}}}U=ee,ee=y[U],ce+=U-ee&32767}if(Y){E[H++]=268435456|Md[Q]<<18|ep[Y];var Se=Md[Q]&31,Te=ep[Y]&31;C+=Oc[Se]+Tc[Te],++A[257+Se],++B[Te],L=$+Q,++T}else E[H++]=e[$],++A[e[$]]}}for($=Math.max($,L);$<o;++$)E[H++]=e[$],++A[e[$]];p=rp(e,c,d,E,A,B,C,H,D,$-D,p),d||(s.r=p&7|c[p/8|0]<<3,p-=7,s.h=j,s.p=y,s.i=$,s.w=L)}else{for(var $=s.w||0;$<o+d;$+=65535){var De=$+65535;De>=o&&(c[p/8|0]=d,De=o),p=Hg(c,p+1,e.subarray($,De))}s.i=o}return Wg(l,0,n+wh(p)+a)},Vg=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Lb=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new wr(s.length+e.length);o.set(s),o.set(e,s.length),e=o,a.w=s.length}return Cb(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},Yg=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Db=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Vg();a.p(t.dictionary),Yg(e,2,a.d())}},Pb=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&En(6,"invalid zlib data"),(e[1]>>5&1)==1&&En(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Fd(e,t){t||(t={});var r=Vg();r.p(e);var n=Lb(e,t,t.dictionary?6:2,4);return Db(n,t),Yg(n,n.length-4,r.d()),n}function kb(e,t){return Ab(e.subarray(Pb(e),-4),{i:2},t,t)}var Ob=typeof TextDecoder<"u"&&new TextDecoder,Tb=0;try{Ob.decode(Gg,{stream:!0}),Tb=1}catch{}var Ke=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ad(){Ke.console&&typeof Ke.console.log=="function"&&Ke.console.log.apply(Ke.console,arguments)}var _t={log:ad,warn:function(e){Ke.console&&(typeof Ke.console.warn=="function"?Ke.console.warn.apply(Ke.console,arguments):ad.call(null,arguments))},error:function(e){Ke.console&&(typeof Ke.console.error=="function"?Ke.console.error.apply(Ke.console,arguments):ad(e))}};function sd(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){is(n.response,t,r)},n.onerror=function(){_t.error("could not download file")},n.send()}function np(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Vl(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var wo,$d,is=Ke.saveAs||((typeof window>"u"?"undefined":dt(window))!=="object"||window!==Ke?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Ke.URL||Ke.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?np(a.href)?sd(e,t,r):Vl(a,a.target="_blank"):Vl(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Vl(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(np(e))sd(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Vl(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:dt(s)!=="object"&&(_t.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return sd(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Ke.HTMLElement)||Ke.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":dt(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var p=l.result;p=o?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=p:location=p,n=null},l.readAsDataURL(e)}else{var c=Ke.URL||Ke.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Kg(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function id(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=mr(r,n,a,s,t[0],7,-680876936),s=mr(s,r,n,a,t[1],12,-389564586),a=mr(a,s,r,n,t[2],17,606105819),n=mr(n,a,s,r,t[3],22,-1044525330),r=mr(r,n,a,s,t[4],7,-176418897),s=mr(s,r,n,a,t[5],12,1200080426),a=mr(a,s,r,n,t[6],17,-1473231341),n=mr(n,a,s,r,t[7],22,-45705983),r=mr(r,n,a,s,t[8],7,1770035416),s=mr(s,r,n,a,t[9],12,-1958414417),a=mr(a,s,r,n,t[10],17,-42063),n=mr(n,a,s,r,t[11],22,-1990404162),r=mr(r,n,a,s,t[12],7,1804603682),s=mr(s,r,n,a,t[13],12,-40341101),a=mr(a,s,r,n,t[14],17,-1502002290),r=gr(r,n=mr(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=gr(s,r,n,a,t[6],9,-1069501632),a=gr(a,s,r,n,t[11],14,643717713),n=gr(n,a,s,r,t[0],20,-373897302),r=gr(r,n,a,s,t[5],5,-701558691),s=gr(s,r,n,a,t[10],9,38016083),a=gr(a,s,r,n,t[15],14,-660478335),n=gr(n,a,s,r,t[4],20,-405537848),r=gr(r,n,a,s,t[9],5,568446438),s=gr(s,r,n,a,t[14],9,-1019803690),a=gr(a,s,r,n,t[3],14,-187363961),n=gr(n,a,s,r,t[8],20,1163531501),r=gr(r,n,a,s,t[13],5,-1444681467),s=gr(s,r,n,a,t[2],9,-51403784),a=gr(a,s,r,n,t[7],14,1735328473),r=vr(r,n=gr(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=vr(s,r,n,a,t[8],11,-2022574463),a=vr(a,s,r,n,t[11],16,1839030562),n=vr(n,a,s,r,t[14],23,-35309556),r=vr(r,n,a,s,t[1],4,-1530992060),s=vr(s,r,n,a,t[4],11,1272893353),a=vr(a,s,r,n,t[7],16,-155497632),n=vr(n,a,s,r,t[10],23,-1094730640),r=vr(r,n,a,s,t[13],4,681279174),s=vr(s,r,n,a,t[0],11,-358537222),a=vr(a,s,r,n,t[3],16,-722521979),n=vr(n,a,s,r,t[6],23,76029189),r=vr(r,n,a,s,t[9],4,-640364487),s=vr(s,r,n,a,t[12],11,-421815835),a=vr(a,s,r,n,t[15],16,530742520),r=br(r,n=vr(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=br(s,r,n,a,t[7],10,1126891415),a=br(a,s,r,n,t[14],15,-1416354905),n=br(n,a,s,r,t[5],21,-57434055),r=br(r,n,a,s,t[12],6,1700485571),s=br(s,r,n,a,t[3],10,-1894986606),a=br(a,s,r,n,t[10],15,-1051523),n=br(n,a,s,r,t[1],21,-2054922799),r=br(r,n,a,s,t[8],6,1873313359),s=br(s,r,n,a,t[15],10,-30611744),a=br(a,s,r,n,t[6],15,-1560198380),n=br(n,a,s,r,t[13],21,1309151649),r=br(r,n,a,s,t[4],6,-145523070),s=br(s,r,n,a,t[11],10,-1120210379),a=br(a,s,r,n,t[2],15,718787259),n=br(n,a,s,r,t[9],21,-343485551),e[0]=Ma(r,e[0]),e[1]=Ma(n,e[1]),e[2]=Ma(a,e[2]),e[3]=Ma(s,e[3])}function Mc(e,t,r,n,a,s){return t=Ma(Ma(t,e),Ma(n,s)),Ma(t<<a|t>>>32-a,r)}function mr(e,t,r,n,a,s,o){return Mc(t&r|~t&n,e,t,a,s,o)}function gr(e,t,r,n,a,s,o){return Mc(t&n|r&~n,e,t,a,s,o)}function vr(e,t,r,n,a,s,o){return Mc(t^r^n,e,t,a,s,o)}function br(e,t,r,n,a,s,o){return Mc(r^(t|~n),e,t,a,s,o)}function Xg(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)id(n,Mb(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(id(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,id(n,a),n}function Mb(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}wo=Ke.atob.bind(Ke),$d=Ke.btoa.bind(Ke);var ap="0123456789abcdef".split("");function Ib(e){for(var t="",r=0;r<4;r++)t+=ap[e>>8*r+4&15]+ap[e>>8*r&15];return t}function Rb(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Bd(e){return Xg(e).map(Rb).join("")}var Fb=function(e){for(var t=0;t<e.length;t++)e[t]=Ib(e[t]);return e.join("")}(Xg("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ma(e,t){if(Fb){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function qd(e,t){var r,n,a,s;if(e!==r){for(var o=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var p=l[c];d=(d+p+o.charCodeAt(c))%256,l[c]=l[d],l[d]=p}r=e,n=l}else l=n;var m=t.length,g=0,f=0,N="";for(c=0;c<m;c++)f=(f+(p=l[g=(g+1)%256]))%256,l[g]=l[f],l[f]=p,o=l[(l[g]+l[f])%256],N+=String.fromCharCode(t.charCodeAt(c)^o);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var sp={print:4,modify:8,copy:16,"annot-forms":32};function si(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(sp.perm!==void 0)throw new Error("Invalid permission: "+l);a+=sp[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=Bd(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=qd(this.encryptionKey,this.padding)}function ii(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function ip(e){if(dt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var o=t[r][s];try{o[0].apply(e,n)}catch(l){Ke.console&&_t.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function gc(e){if(!(this instanceof gc))return new gc(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Jg(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function cs(e,t,r,n,a){if(!(this instanceof cs))return new cs(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Jg.call(this,n,a)}function li(e,t,r,n,a){if(!(this instanceof li))return new li(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Jg.call(this,n,a)}function Ye(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,d="S",p=null;dt(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,g={},f={internal:{},__private__:{}};f.__private__.PubSub=ip;var N="1.3",y=f.__private__.getPdfVersion=function(){return N};f.__private__.setPdfVersion=function(v){N=v};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return j};var x=f.__private__.getPageFormat=function(v){return j[v]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},_=w.COMPAT;function E(){this.saveGraphicsState(),J(new Ve(Ie,0,0,-Ie,0,xa()*Ie).toString()+" cm"),this.setFontSize(this.getFontSize()/Ie),d="n",_=w.ADVANCED}function A(){this.restoreGraphicsState(),d="S",_=w.COMPAT}var B=f.__private__.combineFontStyleAndFontWeight=function(v,O){if(v=="bold"&&O=="normal"||v=="bold"&&O==400||v=="normal"&&O=="italic"||v=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(v=O==400||O==="normal"?v==="italic"?"italic":"normal":O!=700&&O!=="bold"||v!=="normal"?(O==700?"bold":O)+""+v:"bold"),v};f.advancedAPI=function(v){var O=_===w.COMPAT;return O&&E.call(this),typeof v!="function"||(v(this),O&&A.call(this)),this},f.compatAPI=function(v){var O=_===w.ADVANCED;return O&&A.call(this),typeof v!="function"||(v(this),O&&E.call(this)),this},f.isAdvancedAPI=function(){return _===w.ADVANCED};var T,C=function(v){if(_!==w.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=f.roundToPrecision=f.__private__.roundToPrecision=function(v,O){var K=t||O;if(isNaN(v)||isNaN(K))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(K).replace(/0+$/,"")};T=f.hpf=f.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return $(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return $(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return $(v,16)};var H=f.f2=f.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return $(v,2)},L=f.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return $(v,3)},D=f.scale=f.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return _===w.COMPAT?v*Ie:_===w.ADVANCED?v:void 0},F=function(v){return _===w.COMPAT?xa()-v:_===w.ADVANCED?v:void 0},U=function(v){return D(F(v))};f.__private__.setPrecision=f.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(t=parseInt(v,10))};var ee,te="00000000000000000000000000000000",re=f.__private__.getFileId=function(){return te},Q=f.__private__.setFileId=function(v){return te=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(fr=new si(p.userPermissions,p.userPassword,p.ownerPassword,te)),te};f.setFileId=function(v){return Q(v),this},f.getFileId=function(){return re()};var Y=f.__private__.convertDateToPDFDate=function(v){var O=v.getTimezoneOffset(),K=O<0?"+":"-",ne=Math.floor(Math.abs(O/60)),he=Math.abs(O%60),be=[K,V(ne),"'",V(he),"'"].join("");return["D:",v.getFullYear(),V(v.getMonth()+1),V(v.getDate()),V(v.getHours()),V(v.getMinutes()),V(v.getSeconds()),be].join("")},X=f.__private__.convertPDFDateToDate=function(v){var O=parseInt(v.substr(2,4),10),K=parseInt(v.substr(6,2),10)-1,ne=parseInt(v.substr(8,2),10),he=parseInt(v.substr(10,2),10),be=parseInt(v.substr(12,2),10),_e=parseInt(v.substr(14,2),10);return new Date(O,K,ne,he,be,_e,0)},ce=f.__private__.setCreationDate=function(v){var O;if(v===void 0&&(v=new Date),v instanceof Date)O=Y(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=v}return ee=O},P=f.__private__.getCreationDate=function(v){var O=ee;return v==="jsDate"&&(O=X(ee)),O};f.setCreationDate=function(v){return ce(v),this},f.getCreationDate=function(v){return P(v)};var q,V=f.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},Z=f.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},se=0,de=[],fe=[],ge=0,Ae=[],Se=[],Te=!1,De=fe,Ge=function(){se=0,ge=0,fe=[],de=[],Ae=[],ea=Xt(),vn=Xt()};f.__private__.setCustomOutputDestination=function(v){Te=!0,De=v};var ye=function(v){Te||(De=v)};f.__private__.resetCustomOutputDestination=function(){Te=!1,De=fe};var J=f.__private__.out=function(v){return v=v.toString(),ge+=v.length+1,De.push(v),De},Ze=f.__private__.write=function(v){return J(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},qe=f.__private__.getArrayBuffer=function(v){for(var O=v.length,K=new ArrayBuffer(O),ne=new Uint8Array(K);O--;)ne[O]=v.charCodeAt(O);return K},Ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Ee};var Ce=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(v){return Ce=_===w.ADVANCED?v/Ie:v,this};var Oe,ke=f.__private__.getFontSize=f.getFontSize=function(){return _===w.COMPAT?Ce:Ce*Ie},ze=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(v){return ze=v,this},f.__private__.getR2L=f.getR2L=function(){return ze};var Xe,et=f.__private__.setZoomMode=function(v){var O=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Oe=v;else if(isNaN(v)){if(O.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Oe=v}else Oe=parseInt(v,10)};f.__private__.getZoomMode=function(){return Oe};var ot,ct=f.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Xe=v};f.__private__.getPageMode=function(){return Xe};var mt=f.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');ot=v};f.__private__.getLayoutMode=function(){return ot},f.__private__.setDisplayMode=f.setDisplayMode=function(v,O,K){return et(v),mt(O),ct(K),this};var Je={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(v){if(Object.keys(Je).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Je[v]},f.__private__.getDocumentProperties=function(){return Je},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(v){for(var O in Je)Je.hasOwnProperty(O)&&v[O]&&(Je[O]=v[O]);return this},f.__private__.setDocumentProperty=function(v,O){if(Object.keys(Je).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Je[v]=O};var lt,Ie,hr,pt,pn,jt={},Mt={},Pn=[],vt={},Wa={},Rt={},mn={},Qn=null,Ft=0,tt=[],bt=new ip(f),Ha=e.hotfixes||[],lr={},kn={},On=[],Ve=function v(O,K,ne,he,be,_e){if(!(this instanceof v))return new v(O,K,ne,he,be,_e);isNaN(O)&&(O=1),isNaN(K)&&(K=0),isNaN(ne)&&(ne=0),isNaN(he)&&(he=1),isNaN(be)&&(be=0),isNaN(_e)&&(_e=0),this._matrix=[O,K,ne,he,be,_e]};Object.defineProperty(Ve.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ve.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ve.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ve.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ve.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ve.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ve.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ve.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ve.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ve.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ve.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ve.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ve.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ve.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ve.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ve.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ve.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(v)},Ve.prototype.multiply=function(v){var O=v.sx*this.sx+v.shy*this.shx,K=v.sx*this.shy+v.shy*this.sy,ne=v.shx*this.sx+v.sy*this.shx,he=v.shx*this.shy+v.sy*this.sy,be=v.tx*this.sx+v.ty*this.shx+this.tx,_e=v.tx*this.shy+v.ty*this.sy+this.ty;return new Ve(O,K,ne,he,be,_e)},Ve.prototype.decompose=function(){var v=this.sx,O=this.shy,K=this.shx,ne=this.sy,he=this.tx,be=this.ty,_e=Math.sqrt(v*v+O*O),Re=(v/=_e)*K+(O/=_e)*ne;K-=v*Re,ne-=O*Re;var We=Math.sqrt(K*K+ne*ne);return Re/=We,v*(ne/=We)<O*(K/=We)&&(v=-v,O=-O,Re=-Re,_e=-_e),{scale:new Ve(_e,0,0,We,0,0),translate:new Ve(1,0,0,1,he,be),rotate:new Ve(v,O,-O,v,0,0),skew:new Ve(1,0,Re,1,0,0)}},Ve.prototype.toString=function(v){return this.join(" ")},Ve.prototype.inversed=function(){var v=this.sx,O=this.shy,K=this.shx,ne=this.sy,he=this.tx,be=this.ty,_e=1/(v*ne-O*K),Re=ne*_e,We=-O*_e,at=-K*_e,rt=v*_e;return new Ve(Re,We,at,rt,-Re*he-at*be,-We*he-rt*be)},Ve.prototype.applyToPoint=function(v){var O=v.x*this.sx+v.y*this.shx+this.tx,K=v.x*this.shy+v.y*this.sy+this.ty;return new $s(O,K)},Ve.prototype.applyToRectangle=function(v){var O=this.applyToPoint(v),K=this.applyToPoint(new $s(v.x+v.w,v.y+v.h));return new Hi(O.x,O.y,K.x-O.x,K.y-O.y)},Ve.prototype.clone=function(){var v=this.sx,O=this.shy,K=this.shx,ne=this.sy,he=this.tx,be=this.ty;return new Ve(v,O,K,ne,he,be)},f.Matrix=Ve;var gn=f.matrixMult=function(v,O){return O.multiply(v)},Tn=new Ve(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Tn;var Dr=function(v,O){if(!Wa[v]){var K=(O instanceof cs?"Sh":"P")+(Object.keys(vt).length+1).toString(10);O.id=K,Wa[v]=K,vt[K]=O,bt.publish("addPattern",O)}};f.ShadingPattern=cs,f.TilingPattern=li,f.addShadingPattern=function(v,O){return C("addShadingPattern()"),Dr(v,O),this},f.beginTilingPattern=function(v){C("beginTilingPattern()"),xl(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},f.endTilingPattern=function(v,O){C("endTilingPattern()"),O.stream=Se[q].join(`
`),Dr(v,O),bt.publish("endTilingPattern",O),On.pop().restore()};var er=f.__private__.newObject=function(){var v=Xt();return Ur(v,!0),v},Xt=f.__private__.newObjectDeferred=function(){return se++,de[se]=function(){return ge},se},Ur=function(v,O){return O=typeof O=="boolean"&&O,de[v]=ge,O&&J(v+" 0 obj"),v},As=f.__private__.newAdditionalObject=function(){var v={objId:Xt(),content:""};return Ae.push(v),v},ea=Xt(),vn=Xt(),bn=f.__private__.decodeColorString=function(v){var O=v.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length===5&&(O[4]==="k"||O[4]==="K")&&(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var K=parseFloat(O[0]);O=[K,K,K,"r"]}for(var ne="#",he=0;he<3;he++)ne+=("0"+Math.floor(255*parseFloat(O[he])).toString(16)).slice(-2);return ne},yn=f.__private__.encodeColorString=function(v){var O;typeof v=="string"&&(v={ch1:v});var K=v.ch1,ne=v.ch2,he=v.ch3,be=v.ch4,_e=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof K=="string"&&K.charAt(0)!=="#"){var Re=new Kg(K);if(Re.ok)K=Re.toHex();else if(!/^\d*\.?\d*$/.test(K))throw new Error('Invalid color "'+K+'" passed to jsPDF.encodeColorString.')}if(typeof K=="string"&&/^#[0-9A-Fa-f]{3}$/.test(K)&&(K="#"+K[1]+K[1]+K[2]+K[2]+K[3]+K[3]),typeof K=="string"&&/^#[0-9A-Fa-f]{6}$/.test(K)){var We=parseInt(K.substr(1),16);K=We>>16&255,ne=We>>8&255,he=255&We}if(ne===void 0||be===void 0&&K===ne&&ne===he)if(typeof K=="string")O=K+" "+_e[0];else switch(v.precision){case 2:O=H(K/255)+" "+_e[0];break;case 3:default:O=L(K/255)+" "+_e[0]}else if(be===void 0||dt(be)==="object"){if(be&&!isNaN(be.a)&&be.a===0)return O=["1.","1.","1.",_e[1]].join(" ");if(typeof K=="string")O=[K,ne,he,_e[1]].join(" ");else switch(v.precision){case 2:O=[H(K/255),H(ne/255),H(he/255),_e[1]].join(" ");break;default:case 3:O=[L(K/255),L(ne/255),L(he/255),_e[1]].join(" ")}}else if(typeof K=="string")O=[K,ne,he,be,_e[2]].join(" ");else switch(v.precision){case 2:O=[H(K),H(ne),H(he),H(be),_e[2]].join(" ");break;case 3:default:O=[L(K),L(ne),L(he),L(be),_e[2]].join(" ")}return O},Mn=f.__private__.getFilters=function(){return o},Jr=f.__private__.putStream=function(v){var O=(v=v||{}).data||"",K=v.filters||Mn(),ne=v.alreadyAppliedFilters||[],he=v.addLength1||!1,be=O.length,_e=v.objectId,Re=function(pr){return pr};if(p!==null&&_e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Re=fr.encryptor(_e,0));var We={};K===!0&&(K=["FlateEncode"]);var at=v.additionalKeyValues||[],rt=(We=Ye.API.processDataByFilters!==void 0?Ye.API.processDataByFilters(O,K):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(ne)?ne.join(" "):ne.toString());if(We.data.length!==0&&(at.push({key:"Length",value:We.data.length}),he===!0&&at.push({key:"Length1",value:be})),rt.length!=0)if(rt.split("/").length-1==1)at.push({key:"Filter",value:rt});else{at.push({key:"Filter",value:"["+rt+"]"});for(var ht=0;ht<at.length;ht+=1)if(at[ht].key==="DecodeParms"){for(var It=[],$t=0;$t<We.reverseChain.split("/").length-1;$t+=1)It.push("null");It.push(at[ht].value),at[ht].value="["+It.join(" ")+"]"}}J("<<");for(var Jt=0;Jt<at.length;Jt++)J("/"+at[Jt].key+" "+at[Jt].value);J(">>"),We.data.length!==0&&(J("stream"),J(Re(We.data)),J("endstream"))},In=f.__private__.putPage=function(v){var O=v.number,K=v.data,ne=v.objId,he=v.contentsObjId;Ur(ne,!0),J("<</Type /Page"),J("/Parent "+v.rootDictionaryObjId+" 0 R"),J("/Resources "+v.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(T(v.mediaBox.bottomLeftX))+" "+parseFloat(T(v.mediaBox.bottomLeftY))+" "+T(v.mediaBox.topRightX)+" "+T(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&J("/CropBox ["+T(v.cropBox.bottomLeftX)+" "+T(v.cropBox.bottomLeftY)+" "+T(v.cropBox.topRightX)+" "+T(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&J("/BleedBox ["+T(v.bleedBox.bottomLeftX)+" "+T(v.bleedBox.bottomLeftY)+" "+T(v.bleedBox.topRightX)+" "+T(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&J("/TrimBox ["+T(v.trimBox.bottomLeftX)+" "+T(v.trimBox.bottomLeftY)+" "+T(v.trimBox.topRightX)+" "+T(v.trimBox.topRightY)+"]"),v.artBox!==null&&J("/ArtBox ["+T(v.artBox.bottomLeftX)+" "+T(v.artBox.bottomLeftY)+" "+T(v.artBox.topRightX)+" "+T(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&J("/UserUnit "+v.userUnit),bt.publish("putPage",{objId:ne,pageContext:tt[O],pageNumber:O,page:K}),J("/Contents "+he+" 0 R"),J(">>"),J("endobj");var be=K.join(`
`);return _===w.ADVANCED&&(be+=`
Q`),Ur(he,!0),Jr({data:be,filters:Mn(),objectId:he}),J("endobj"),ne},Ga=f.__private__.putPages=function(){var v,O,K=[];for(v=1;v<=Ft;v++)tt[v].objId=Xt(),tt[v].contentsObjId=Xt();for(v=1;v<=Ft;v++)K.push(In({number:v,data:Se[v],objId:tt[v].objId,contentsObjId:tt[v].contentsObjId,mediaBox:tt[v].mediaBox,cropBox:tt[v].cropBox,bleedBox:tt[v].bleedBox,trimBox:tt[v].trimBox,artBox:tt[v].artBox,userUnit:tt[v].userUnit,rootDictionaryObjId:ea,resourceDictionaryObjId:vn}));Ur(ea,!0),J("<</Type /Pages");var ne="/Kids [";for(O=0;O<Ft;O++)ne+=K[O]+" 0 R ";J(ne+"]"),J("/Count "+Ft),J(">>"),J("endobj"),bt.publish("postPutPages")},Es=function(v){bt.publish("putFont",{font:v,out:J,newObject:er,putStream:Jr}),v.isAlreadyPutted!==!0&&(v.objectNumber=er(),J("<<"),J("/Type /Font"),J("/BaseFont /"+ii(v.postScriptName)),J("/Subtype /Type1"),typeof v.encoding=="string"&&J("/Encoding /"+v.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Cs=function(){for(var v in jt)jt.hasOwnProperty(v)&&(m===!1||m===!0&&g.hasOwnProperty(v))&&Es(jt[v])},Ls=function(v){v.objectNumber=er();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[T(v.x),T(v.y),T(v.x+v.width),T(v.y+v.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var K=v.pages[1].join(`
`);Jr({data:K,additionalKeyValues:O,objectId:v.objectNumber}),J("endobj")},Ds=function(){for(var v in lr)lr.hasOwnProperty(v)&&Ls(lr[v])},rl=function(v,O){var K,ne=[],he=1/(O-1);for(K=0;K<1;K+=he)ne.push(K);if(ne.push(1),v[0].offset!=0){var be={offset:0,color:v[0].color};v.unshift(be)}if(v[v.length-1].offset!=1){var _e={offset:1,color:v[v.length-1].color};v.push(_e)}for(var Re="",We=0,at=0;at<ne.length;at++){for(K=ne[at];K>v[We+1].offset;)We++;var rt=v[We].offset,ht=(K-rt)/(v[We+1].offset-rt),It=v[We].color,$t=v[We+1].color;Re+=Z(Math.round((1-ht)*It[0]+ht*$t[0]).toString(16))+Z(Math.round((1-ht)*It[1]+ht*$t[1]).toString(16))+Z(Math.round((1-ht)*It[2]+ht*$t[2]).toString(16))}return Re.trim()},uu=function(v,O){O||(O=21);var K=er(),ne=rl(v.colors,O),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+O+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Jr({data:ne,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:K}),J("endobj"),v.objectNumber=er(),J("<< /ShadingType "+v.type),J("/ColorSpace /DeviceRGB");var be="/Coords ["+T(parseFloat(v.coords[0]))+" "+T(parseFloat(v.coords[1]))+" ";v.type===2?be+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3])):be+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3]))+" "+T(parseFloat(v.coords[4]))+" "+T(parseFloat(v.coords[5])),J(be+="]"),v.matrix&&J("/Matrix ["+v.matrix.toString()+"]"),J("/Function "+K+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},du=function(v,O){var K=Xt(),ne=er();O.push({resourcesOid:K,objectOid:ne}),v.objectNumber=ne;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+v.boundingBox.map(T).join(" ")+"]"}),he.push({key:"XStep",value:T(v.xStep)}),he.push({key:"YStep",value:T(v.yStep)}),he.push({key:"Resources",value:K+" 0 R"}),v.matrix&&he.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Jr({data:v.stream,additionalKeyValues:he,objectId:v.objectNumber}),J("endobj")},Ps=function(v){var O;for(O in vt)vt.hasOwnProperty(O)&&(vt[O]instanceof cs?uu(vt[O]):vt[O]instanceof li&&du(vt[O],v))},nl=function(v){for(var O in v.objectNumber=er(),J("<<"),v)switch(O){case"opacity":J("/ca "+H(v[O]));break;case"stroke-opacity":J("/CA "+H(v[O]))}J(">>"),J("endobj")},hu=function(){var v;for(v in Rt)Rt.hasOwnProperty(v)&&nl(Rt[v])},Mi=function(){for(var v in J("/XObject <<"),lr)lr.hasOwnProperty(v)&&lr[v].objectNumber>=0&&J("/"+v+" "+lr[v].objectNumber+" 0 R");bt.publish("putXobjectDict"),J(">>")},fu=function(){fr.oid=er(),J("<<"),J("/Filter /Standard"),J("/V "+fr.v),J("/R "+fr.r),J("/U <"+fr.toHexString(fr.U)+">"),J("/O <"+fr.toHexString(fr.O)+">"),J("/P "+fr.P),J(">>"),J("endobj")},al=function(){for(var v in J("/Font <<"),jt)jt.hasOwnProperty(v)&&(m===!1||m===!0&&g.hasOwnProperty(v))&&J("/"+v+" "+jt[v].objectNumber+" 0 R");J(">>")},pu=function(){if(Object.keys(vt).length>0){for(var v in J("/Shading <<"),vt)vt.hasOwnProperty(v)&&vt[v]instanceof cs&&vt[v].objectNumber>=0&&J("/"+v+" "+vt[v].objectNumber+" 0 R");bt.publish("putShadingPatternDict"),J(">>")}},ks=function(v){if(Object.keys(vt).length>0){for(var O in J("/Pattern <<"),vt)vt.hasOwnProperty(O)&&vt[O]instanceof f.TilingPattern&&vt[O].objectNumber>=0&&vt[O].objectNumber<v&&J("/"+O+" "+vt[O].objectNumber+" 0 R");bt.publish("putTilingPatternDict"),J(">>")}},mu=function(){if(Object.keys(Rt).length>0){var v;for(v in J("/ExtGState <<"),Rt)Rt.hasOwnProperty(v)&&Rt[v].objectNumber>=0&&J("/"+v+" "+Rt[v].objectNumber+" 0 R");bt.publish("putGStateDict"),J(">>")}},Wt=function(v){Ur(v.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),al(),pu(),ks(v.objectOid),mu(),Mi(),J(">>"),J("endobj")},sl=function(){var v=[];Cs(),hu(),Ds(),Ps(v),bt.publish("putResources"),v.forEach(Wt),Wt({resourcesOid:vn,objectOid:Number.MAX_SAFE_INTEGER}),bt.publish("postPutResources")},il=function(){bt.publish("putAdditionalObjects");for(var v=0;v<Ae.length;v++){var O=Ae[v];Ur(O.objId,!0),J(O.content),J("endobj")}bt.publish("postPutAdditionalObjects")},ol=function(v){Mt[v.fontName]=Mt[v.fontName]||{},Mt[v.fontName][v.fontStyle]=v.id},Ii=function(v,O,K,ne,he){var be={id:"F"+(Object.keys(jt).length+1).toString(10),postScriptName:v,fontName:O,fontStyle:K,encoding:ne,isStandardFont:he||!1,metadata:{}};return bt.publish("addFont",{font:be,instance:this}),jt[be.id]=be,ol(be),be.id},gu=function(v){for(var O=0,K=Ee.length;O<K;O++){var ne=Ii.call(this,v[O][0],v[O][1],v[O][2],Ee[O][3],!0);m===!1&&(g[ne]=!0);var he=v[O][0].split("-");ol({id:ne,fontName:he[0],fontStyle:he[1]||""})}bt.publish("addFonts",{fonts:jt,dictionary:Mt})},xn=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(ne){var O=ne.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var K="Error in function "+O.split(`
`)[0].split("<")[0]+": "+ne.message;if(!Ke.console)throw new Error(K);Ke.console.error(K,ne),Ke.alert&&alert(K)}},v.foo.bar=v,v.foo},Os=function(v,O){var K,ne,he,be,_e,Re,We,at,rt;if(he=(O=O||{}).sourceEncoding||"Unicode",_e=O.outputEncoding,(O.autoencode||_e)&&jt[lt].metadata&&jt[lt].metadata[he]&&jt[lt].metadata[he].encoding&&(be=jt[lt].metadata[he].encoding,!_e&&jt[lt].encoding&&(_e=jt[lt].encoding),!_e&&be.codePages&&(_e=be.codePages[0]),typeof _e=="string"&&(_e=be[_e]),_e)){for(We=!1,Re=[],K=0,ne=v.length;K<ne;K++)(at=_e[v.charCodeAt(K)])?Re.push(String.fromCharCode(at)):Re.push(v[K]),Re[K].charCodeAt(0)>>8&&(We=!0);v=Re.join("")}for(K=v.length;We===void 0&&K!==0;)v.charCodeAt(K-1)>>8&&(We=!0),K--;if(!We)return v;for(Re=O.noBOM?[]:[254,255],K=0,ne=v.length;K<ne;K++){if((rt=(at=v.charCodeAt(K))>>8)>>8)throw new Error("Character at position "+K+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Re.push(rt),Re.push(at-(rt<<8))}return String.fromCharCode.apply(void 0,Re)},Pr=f.__private__.pdfEscape=f.pdfEscape=function(v,O){return Os(v,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ri=f.__private__.beginPage=function(v){Se[++Ft]=[],tt[Ft]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},cl(Ft),ye(Se[q])},ll=function(v,O){var K,ne,he;switch(r=O||r,typeof v=="string"&&(K=x(v.toLowerCase()),Array.isArray(K)&&(ne=K[0],he=K[1])),Array.isArray(v)&&(ne=v[0]*Ie,he=v[1]*Ie),isNaN(ne)&&(ne=a[0],he=a[1]),(ne>14400||he>14400)&&(_t.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ne=Math.min(14400,ne),he=Math.min(14400,he)),a=[ne,he],r.substr(0,1)){case"l":he>ne&&(a=[he,ne]);break;case"p":ne>he&&(a=[he,ne])}Ri(a),ml(qi),J(wn),Ui!==0&&J(Ui+" J"),Wi!==0&&J(Wi+" j"),bt.publish("addPage",{pageNumber:Ft})},vu=function(v){v>0&&v<=Ft&&(Se.splice(v,1),tt.splice(v,1),Ft--,q>Ft&&(q=Ft),this.setPage(q))},cl=function(v){v>0&&v<=Ft&&(q=v)},bu=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Se.length-1},ul=function(v,O,K){var ne,he=void 0;return K=K||{},v=v!==void 0?v:jt[lt].fontName,O=O!==void 0?O:jt[lt].fontStyle,ne=v.toLowerCase(),Mt[ne]!==void 0&&Mt[ne][O]!==void 0?he=Mt[ne][O]:Mt[v]!==void 0&&Mt[v][O]!==void 0?he=Mt[v][O]:K.disableWarning===!1&&_t.warn("Unable to look up font label for font '"+v+"', '"+O+"'. Refer to getFontList() for available fonts."),he||K.noFallback||(he=Mt.times[O])==null&&(he=Mt.times.normal),he},yu=f.__private__.putInfo=function(){var v=er(),O=function(ne){return ne};for(var K in p!==null&&(O=fr.encryptor(v,0)),J("<<"),J("/Producer ("+Pr(O("jsPDF "+Ye.version))+")"),Je)Je.hasOwnProperty(K)&&Je[K]&&J("/"+K.substr(0,1).toUpperCase()+K.substr(1)+" ("+Pr(O(Je[K]))+")");J("/CreationDate ("+Pr(O(ee))+")"),J(">>"),J("endobj")},Fi=f.__private__.putCatalog=function(v){var O=(v=v||{}).rootDictionaryObjId||ea;switch(er(),J("<<"),J("/Type /Catalog"),J("/Pages "+O+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var K=""+Oe;K.substr(K.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&J("/OpenAction [3 0 R /XYZ null null "+H(Oe)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}Xe&&J("/PageMode /"+Xe),bt.publish("putCatalog"),J(">>"),J("endobj")},xu=f.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(se+1)),J("/Root "+se+" 0 R"),J("/Info "+(se-1)+" 0 R"),p!==null&&J("/Encrypt "+fr.oid+" 0 R"),J("/ID [ <"+te+"> <"+te+"> ]"),J(">>")},wu=f.__private__.putHeader=function(){J("%PDF-"+N),J("%ºß¬à")},Nu=f.__private__.putXRef=function(){var v="0000000000";J("xref"),J("0 "+(se+1)),J("0000000000 65535 f ");for(var O=1;O<=se;O++)typeof de[O]=="function"?J((v+de[O]()).slice(-10)+" 00000 n "):de[O]!==void 0?J((v+de[O]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},ta=f.__private__.buildDocument=function(){Ge(),ye(fe),bt.publish("buildDocument"),wu(),Ga(),il(),sl(),p!==null&&fu(),yu(),Fi();var v=ge;return Nu(),xu(),J("startxref"),J(""+v),J("%%EOF"),ye(Se[q]),fe.join(`
`)},Ts=f.__private__.getBlob=function(v){return new Blob([qe(v)],{type:"application/pdf"})},Ms=f.output=f.__private__.output=xn(function(v,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",v){case void 0:return ta();case"save":f.save(O.filename);break;case"arraybuffer":return qe(ta());case"blob":return Ts(ta());case"bloburi":case"bloburl":if(Ke.URL!==void 0&&typeof Ke.URL.createObjectURL=="function")return Ke.URL&&Ke.URL.createObjectURL(Ts(ta()))||void 0;_t.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var K="",ne=ta();try{K=$d(ne)}catch{K=$d(unescape(encodeURIComponent(ne)))}return"data:application/pdf;filename="+O.filename+";base64,"+K;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ke)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(he=O.pdfObjectUrl,be="");var _e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",Re=Ke.open();return Re!==null&&Re.document.write(_e),Re}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ke)==="[object Window]"){var We='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',at=Ke.open();if(at!==null){at.document.write(We);var rt=this;at.document.documentElement.querySelector("#pdfViewer").onload=function(){at.document.title=O.filename,at.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(rt.output("bloburl"))}}return at}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ke)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',It=Ke.open();if(It!==null&&(It.document.write(ht),It.document.title=O.filename),It||typeof safari>"u")return It;break;case"datauri":case"dataurl":return Ke.document.location.href=this.output("datauristring",O);default:return null}}),dl=function(v){return Array.isArray(Ha)===!0&&Ha.indexOf(v)>-1};switch(n){case"pt":Ie=1;break;case"mm":Ie=72/25.4;break;case"cm":Ie=72/2.54;break;case"in":Ie=72;break;case"px":Ie=dl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ie=12;break;case"ex":Ie=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ie=n}var fr=null;ce(),Q();var ju=function(v){return p!==null?fr.encryptor(v,0):function(O){return O}},hl=f.__private__.getPageInfo=f.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:tt[v].objId,pageNumber:v,pageContext:tt[v]}},Qe=f.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in tt)if(tt[O].objId===v)break;return hl(O)},Su=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:tt[q].objId,pageNumber:q,pageContext:tt[q]}};f.addPage=function(){return ll.apply(this,arguments),this},f.setPage=function(){return cl.apply(this,arguments),ye.call(this,Se[q]),this},f.insertPage=function(v){return this.addPage(),this.movePage(q,v),this},f.movePage=function(v,O){var K,ne;if(v>O){K=Se[v],ne=tt[v];for(var he=v;he>O;he--)Se[he]=Se[he-1],tt[he]=tt[he-1];Se[O]=K,tt[O]=ne,this.setPage(O)}else if(v<O){K=Se[v],ne=tt[v];for(var be=v;be<O;be++)Se[be]=Se[be+1],tt[be]=tt[be+1];Se[O]=K,tt[O]=ne,this.setPage(O)}return this},f.deletePage=function(){return vu.apply(this,arguments),this},f.__private__.text=f.text=function(v,O,K,ne,he){var be,_e,Re,We,at,rt,ht,It,$t,Jt=(ne=ne||{}).scope||this;if(typeof v=="number"&&typeof O=="number"&&(typeof K=="string"||Array.isArray(K))){var pr=K;K=O,O=v,v=pr}if(arguments[3]instanceof Ve?(C("The transform parameter of text() with a Matrix value"),$t=he):(Re=arguments[4],We=arguments[5],dt(ht=arguments[3])==="object"&&ht!==null||(typeof Re=="string"&&(We=Re,Re=null),typeof ht=="string"&&(We=ht,ht=null),typeof ht=="number"&&(Re=ht,ht=null),ne={flags:ht,angle:Re,align:We})),isNaN(O)||isNaN(K)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Jt;var ar="",Nn=!1,Wr=typeof ne.lineHeightFactor=="number"?ne.lineHeightFactor:Ya,$n=Jt.internal.scaleFactor;function wl(Et){return Et=Et.split("	").join(Array(ne.TabLen||9).join(" ")),Pr(Et,ht)}function Ki(Et){for(var Ct,Gt=Et.concat(),tr=[],ia=Gt.length;ia--;)typeof(Ct=Gt.shift())=="string"?tr.push(Ct):Array.isArray(Et)&&(Ct.length===1||Ct[1]===void 0&&Ct[2]===void 0)?tr.push(Ct[0]):tr.push([Ct[0],Ct[1],Ct[2]]);return tr}function Xi(Et,Ct){var Gt;if(typeof Et=="string")Gt=Ct(Et)[0];else if(Array.isArray(Et)){for(var tr,ia,ao=Et.concat(),Xs=[],Al=ao.length;Al--;)typeof(tr=ao.shift())=="string"?Xs.push(Ct(tr)[0]):Array.isArray(tr)&&typeof tr[0]=="string"&&(ia=Ct(tr[0],tr[1],tr[2]),Xs.push([ia[0],ia[1],ia[2]]));Gt=Xs}return Gt}var qs=!1,Ji=!0;if(typeof v=="string")qs=!0;else if(Array.isArray(v)){var Zi=v.concat();_e=[];for(var zs,cr=Zi.length;cr--;)(typeof(zs=Zi.shift())!="string"||Array.isArray(zs)&&typeof zs[0]!="string")&&(Ji=!1);qs=Ji}if(qs===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Us=Ce/Jt.internal.scaleFactor,Ws=Us*(Wr-1);switch(ne.baseline){case"bottom":K-=Ws;break;case"top":K+=Us-Ws;break;case"hanging":K+=Us-2*Ws;break;case"middle":K+=Us/2-Ws}if((rt=ne.maxWidth||0)>0&&(typeof v=="string"?v=Jt.splitTextToSize(v,rt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Et,Ct){return Et.concat(Jt.splitTextToSize(Ct,rt))},[]))),be={text:v,x:O,y:K,options:ne,mutex:{pdfEscape:Pr,activeFontKey:lt,fonts:jt,activeFontSize:Ce}},bt.publish("preProcessText",be),v=be.text,Re=(ne=be.options).angle,!($t instanceof Ve)&&Re&&typeof Re=="number"){Re*=Math.PI/180,ne.rotationDirection===0&&(Re=-Re),_===w.ADVANCED&&(Re=-Re);var Hs=Math.cos(Re),Qi=Math.sin(Re);$t=new Ve(Hs,Qi,-Qi,Hs,0,0)}else Re&&Re instanceof Ve&&($t=Re);_!==w.ADVANCED||$t||($t=Tn),(at=ne.charSpace||Fs)!==void 0&&(ar+=T(D(at))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(It=ne.horizontalScale)!==void 0&&(ar+=T(100*It)+` Tz
`),ne.lang;var kr=-1,Tu=ne.renderingMode!==void 0?ne.renderingMode:ne.stroke,eo=Jt.internal.getCurrentPageInfo().pageContext;switch(Tu){case 0:case!1:case"fill":kr=0;break;case 1:case!0:case"stroke":kr=1;break;case 2:case"fillThenStroke":kr=2;break;case 3:case"invisible":kr=3;break;case 4:case"fillAndAddForClipping":kr=4;break;case 5:case"strokeAndAddPathForClipping":kr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":kr=6;break;case 7:case"addToPathForClipping":kr=7}var Nl=eo.usedRenderingMode!==void 0?eo.usedRenderingMode:-1;kr!==-1?ar+=kr+` Tr
`:Nl!==-1&&(ar+=`0 Tr
`),kr!==-1&&(eo.usedRenderingMode=kr),We=ne.align||"left";var Zr,Gs=Ce*Wr,jl=Jt.internal.pageSize.getWidth(),Sl=jt[lt];at=ne.charSpace||Fs,rt=ne.maxWidth||0,ht=Object.assign({autoencode:!0,noBOM:!0},ne.flags);var wa=[],Ja=function(Et){return Jt.getStringUnitWidth(Et,{font:Sl,charSpace:at,fontSize:Ce,doKerning:!1})*Ce/$n};if(Object.prototype.toString.call(v)==="[object Array]"){var Or;_e=Ki(v),We!=="left"&&(Zr=_e.map(Ja));var Sr,Na=0;if(We==="right"){O-=Zr[0],v=[],cr=_e.length;for(var na=0;na<cr;na++)na===0?(Sr=Fn(O),Or=ra(K)):(Sr=D(Na-Zr[na]),Or=-Gs),v.push([_e[na],Sr,Or]),Na=Zr[na]}else if(We==="center"){O-=Zr[0]/2,v=[],cr=_e.length;for(var aa=0;aa<cr;aa++)aa===0?(Sr=Fn(O),Or=ra(K)):(Sr=D((Na-Zr[aa])/2),Or=-Gs),v.push([_e[aa],Sr,Or]),Na=Zr[aa]}else if(We==="left"){v=[],cr=_e.length;for(var Vs=0;Vs<cr;Vs++)v.push(_e[Vs])}else if(We==="justify"&&Sl.encoding==="Identity-H"){v=[],cr=_e.length,rt=rt!==0?rt:jl;for(var sa=0,Ht=0;Ht<cr;Ht++)if(Or=Ht===0?ra(K):-Gs,Sr=Ht===0?Fn(O):sa,Ht<cr-1){var to=D((rt-Zr[Ht])/(_e[Ht].split(" ").length-1)),_r=_e[Ht].split(" ");v.push([_r[0]+" ",Sr,Or]),sa=0;for(var Qr=1;Qr<_r.length;Qr++){var Ys=(Ja(_r[Qr-1]+" "+_r[Qr])-Ja(_r[Qr]))*$n+to;Qr==_r.length-1?v.push([_r[Qr],Ys,0]):v.push([_r[Qr]+" ",Ys,0]),sa-=Ys}}else v.push([_e[Ht],Sr,Or]);v.push(["",sa,0])}else{if(We!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],cr=_e.length,rt=rt!==0?rt:jl,Ht=0;Ht<cr;Ht++)Or=Ht===0?ra(K):-Gs,Sr=Ht===0?Fn(O):0,Ht<cr-1?wa.push(T(D((rt-Zr[Ht])/(_e[Ht].split(" ").length-1)))):wa.push(0),v.push([_e[Ht],Sr,Or])}}var _l=typeof ne.R2L=="boolean"?ne.R2L:ze;_l===!0&&(v=Xi(v,function(Et,Ct,Gt){return[Et.split("").reverse().join(""),Ct,Gt]})),be={text:v,x:O,y:K,options:ne,mutex:{pdfEscape:Pr,activeFontKey:lt,fonts:jt,activeFontSize:Ce}},bt.publish("postProcessText",be),v=be.text,Nn=be.mutex.isHex||!1;var ro=jt[lt].encoding;ro!=="WinAnsiEncoding"&&ro!=="StandardEncoding"||(v=Xi(v,function(Et,Ct,Gt){return[wl(Et),Ct,Gt]})),_e=Ki(v),v=[];for(var Za,Qa,ja,es=0,Ks=1,ts=Array.isArray(_e[0])?Ks:es,Sa="",no=function(Et,Ct,Gt){var tr="";return Gt instanceof Ve?(Gt=typeof ne.angle=="number"?gn(Gt,new Ve(1,0,0,1,Et,Ct)):gn(new Ve(1,0,0,1,Et,Ct),Gt),_===w.ADVANCED&&(Gt=gn(new Ve(1,0,0,-1,0,0),Gt)),tr=Gt.join(" ")+` Tm
`):tr=T(Et)+" "+T(Ct)+` Td
`,tr},en=0;en<_e.length;en++){switch(Sa="",ts){case Ks:ja=(Nn?"<":"(")+_e[en][0]+(Nn?">":")"),Za=parseFloat(_e[en][1]),Qa=parseFloat(_e[en][2]);break;case es:ja=(Nn?"<":"(")+_e[en]+(Nn?">":")"),Za=Fn(O),Qa=ra(K)}wa!==void 0&&wa[en]!==void 0&&(Sa=wa[en]+` Tw
`),en===0?v.push(Sa+no(Za,Qa,$t)+ja):ts===es?v.push(Sa+ja):ts===Ks&&v.push(Sa+no(Za,Qa,$t)+ja)}v=ts===es?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var tn=`BT
/`;return tn+=lt+" "+Ce+` Tf
`,tn+=T(Ce*Wr)+` TL
`,tn+=Ka+`
`,tn+=ar,tn+=v,J(tn+="ET"),g[lt]=!0,Jt};var _u=f.__private__.clip=f.clip=function(v){return J(v==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return _u("evenodd")},f.__private__.discardPath=f.discardPath=function(){return J("n"),this};var Rn=f.__private__.isValidStyle=function(v){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(O=!0),O};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(v){return Rn(v)&&(d=v),this};var fl=f.__private__.getStyle=f.getStyle=function(v){var O=d;switch(v){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=v}return O},pl=f.close=function(){return J("h"),this};f.stroke=function(){return J("S"),this},f.fill=function(v){return Is("f",v),this},f.fillEvenOdd=function(v){return Is("f*",v),this},f.fillStroke=function(v){return Is("B",v),this},f.fillStrokeEvenOdd=function(v){return Is("B*",v),this};var Is=function(v,O){dt(O)==="object"?Eu(O,v):J(v)},$i=function(v){v===null||_===w.ADVANCED&&v===void 0||(v=fl(v),J(v))};function Au(v,O,K,ne,he){var be=new li(O||this.boundingBox,K||this.xStep,ne||this.yStep,this.gState,he||this.matrix);be.stream=this.stream;var _e=v+"$$"+this.cloneIndex+++"$$";return Dr(_e,be),be}var Eu=function(v,O){var K=Wa[v.key],ne=vt[K];if(ne instanceof cs)J("q"),J(Cu(O)),ne.gState&&f.setGState(ne.gState),J(v.matrix.toString()+" cm"),J("/"+K+" sh"),J("Q");else if(ne instanceof li){var he=new Ve(1,0,0,-1,0,xa());v.matrix&&(he=he.multiply(v.matrix||Tn),K=Au.call(ne,v.key,v.boundingBox,v.xStep,v.yStep,he).id),J("q"),J("/Pattern cs"),J("/"+K+" scn"),ne.gState&&f.setGState(ne.gState),J(O),J("Q")}},Cu=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Bi=f.moveTo=function(v,O){return J(T(D(v))+" "+T(U(O))+" m"),this},Va=f.lineTo=function(v,O){return J(T(D(v))+" "+T(U(O))+" l"),this},ba=f.curveTo=function(v,O,K,ne,he,be){return J([T(D(v)),T(U(O)),T(D(K)),T(U(ne)),T(D(he)),T(U(be)),"c"].join(" ")),this};f.__private__.line=f.line=function(v,O,K,ne,he){if(isNaN(v)||isNaN(O)||isNaN(K)||isNaN(ne)||!Rn(he))throw new Error("Invalid arguments passed to jsPDF.line");return _===w.COMPAT?this.lines([[K-v,ne-O]],v,O,[1,1],he||"S"):this.lines([[K-v,ne-O]],v,O,[1,1]).stroke()},f.__private__.lines=f.lines=function(v,O,K,ne,he,be){var _e,Re,We,at,rt,ht,It,$t,Jt,pr,ar,Nn;if(typeof v=="number"&&(Nn=K,K=O,O=v,v=Nn),ne=ne||[1,1],be=be||!1,isNaN(O)||isNaN(K)||!Array.isArray(v)||!Array.isArray(ne)||!Rn(he)||typeof be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Bi(O,K),_e=ne[0],Re=ne[1],at=v.length,pr=O,ar=K,We=0;We<at;We++)(rt=v[We]).length===2?(pr=rt[0]*_e+pr,ar=rt[1]*Re+ar,Va(pr,ar)):(ht=rt[0]*_e+pr,It=rt[1]*Re+ar,$t=rt[2]*_e+pr,Jt=rt[3]*Re+ar,pr=rt[4]*_e+pr,ar=rt[5]*Re+ar,ba(ht,It,$t,Jt,pr,ar));return be&&pl(),$i(he),this},f.path=function(v){for(var O=0;O<v.length;O++){var K=v[O],ne=K.c;switch(K.op){case"m":Bi(ne[0],ne[1]);break;case"l":Va(ne[0],ne[1]);break;case"c":ba.apply(this,ne);break;case"h":pl()}}return this},f.__private__.rect=f.rect=function(v,O,K,ne,he){if(isNaN(v)||isNaN(O)||isNaN(K)||isNaN(ne)||!Rn(he))throw new Error("Invalid arguments passed to jsPDF.rect");return _===w.COMPAT&&(ne=-ne),J([T(D(v)),T(U(O)),T(D(K)),T(D(ne)),"re"].join(" ")),$i(he),this},f.__private__.triangle=f.triangle=function(v,O,K,ne,he,be,_e){if(isNaN(v)||isNaN(O)||isNaN(K)||isNaN(ne)||isNaN(he)||isNaN(be)||!Rn(_e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[K-v,ne-O],[he-K,be-ne],[v-he,O-be]],v,O,[1,1],_e,!0),this},f.__private__.roundedRect=f.roundedRect=function(v,O,K,ne,he,be,_e){if(isNaN(v)||isNaN(O)||isNaN(K)||isNaN(ne)||isNaN(he)||isNaN(be)||!Rn(_e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Re=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*K),be=Math.min(be,.5*ne),this.lines([[K-2*he,0],[he*Re,0,he,be-be*Re,he,be],[0,ne-2*be],[0,be*Re,-he*Re,be,-he,be],[2*he-K,0],[-he*Re,0,-he,-be*Re,-he,-be],[0,2*be-ne],[0,-be*Re,he*Re,-be,he,-be]],v+he,O,[1,1],_e,!0),this},f.__private__.ellipse=f.ellipse=function(v,O,K,ne,he){if(isNaN(v)||isNaN(O)||isNaN(K)||isNaN(ne)||!Rn(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var be=4/3*(Math.SQRT2-1)*K,_e=4/3*(Math.SQRT2-1)*ne;return Bi(v+K,O),ba(v+K,O-_e,v+be,O-ne,v,O-ne),ba(v-be,O-ne,v-K,O-_e,v-K,O),ba(v-K,O+_e,v-be,O+ne,v,O+ne),ba(v+be,O+ne,v+K,O+_e,v+K,O),$i(he),this},f.__private__.circle=f.circle=function(v,O,K,ne){if(isNaN(v)||isNaN(O)||isNaN(K)||!Rn(ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,O,K,K,ne)},f.setFont=function(v,O,K){return K&&(O=B(O,K)),lt=ul(v,O,{disableWarning:!1}),this};var Lu=f.__private__.getFont=f.getFont=function(){return jt[ul.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var v,O,K={};for(v in Mt)if(Mt.hasOwnProperty(v))for(O in K[v]=[],Mt[v])Mt[v].hasOwnProperty(O)&&K[v].push(O);return K},f.addFont=function(v,O,K,ne,he){var be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&be.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&be.indexOf(arguments[3])==-1&&(K=B(K,ne)),he=he||"Identity-H",Ii.call(this,v,O,K,he)};var Ya,qi=e.lineWidth||.200025,Rs=f.__private__.getLineWidth=f.getLineWidth=function(){return qi},ml=f.__private__.setLineWidth=f.setLineWidth=function(v){return qi=v,J(T(D(v))+" w"),this};f.__private__.setLineDash=Ye.API.setLineDash=Ye.API.setLineDashPattern=function(v,O){if(v=v||[],O=O||0,isNaN(O)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(K){return T(D(K))}).join(" "),O=T(D(O)),J("["+v+"] "+O+" d"),this};var gl=f.__private__.getLineHeight=f.getLineHeight=function(){return Ce*Ya};f.__private__.getLineHeight=f.getLineHeight=function(){return Ce*Ya};var vl=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(Ya=v),this},bl=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Ya};vl(e.lineHeight);var Fn=f.__private__.getHorizontalCoordinate=function(v){return D(v)},ra=f.__private__.getVerticalCoordinate=function(v){return _===w.ADVANCED?v:tt[q].mediaBox.topRightY-tt[q].mediaBox.bottomLeftY-D(v)},Du=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(v){return T(Fn(v))},ya=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(v){return T(ra(v))},wn=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return bn(wn)},f.__private__.setStrokeColor=f.setDrawColor=function(v,O,K,ne){return wn=yn({ch1:v,ch2:O,ch3:K,ch4:ne,pdfColorType:"draw",precision:2}),J(wn),this};var zi=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return bn(zi)},f.__private__.setFillColor=f.setFillColor=function(v,O,K,ne){return zi=yn({ch1:v,ch2:O,ch3:K,ch4:ne,pdfColorType:"fill",precision:2}),J(zi),this};var Ka=e.textColor||"0 g",Pu=f.__private__.getTextColor=f.getTextColor=function(){return bn(Ka)};f.__private__.setTextColor=f.setTextColor=function(v,O,K,ne){return Ka=yn({ch1:v,ch2:O,ch3:K,ch4:ne,pdfColorType:"text",precision:3}),this};var Fs=e.charSpace,ku=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Fs||0)};f.__private__.setCharSpace=f.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fs=v,this};var Ui=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(v){var O=f.CapJoinStyles[v];if(O===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ui=O,J(O+" J"),this};var Wi=0;f.__private__.setLineJoin=f.setLineJoin=function(v){var O=f.CapJoinStyles[v];if(O===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wi=O,J(O+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(T(D(v))+" M"),this},f.GState=gc,f.setGState=function(v){(v=typeof v=="string"?Rt[mn[v]]:yl(null,v)).equals(Qn)||(J("/"+v.id+" gs"),Qn=v)};var yl=function(v,O){if(!v||!mn[v]){var K=!1;for(var ne in Rt)if(Rt.hasOwnProperty(ne)&&Rt[ne].equals(O)){K=!0;break}if(K)O=Rt[ne];else{var he="GS"+(Object.keys(Rt).length+1).toString(10);Rt[he]=O,O.id=he}return v&&(mn[v]=O.id),bt.publish("addGState",O),O}};f.addGState=function(v,O){return yl(v,O),this},f.saveGraphicsState=function(){return J("q"),Pn.push({key:lt,size:Ce,color:Ka}),this},f.restoreGraphicsState=function(){J("Q");var v=Pn.pop();return lt=v.key,Ce=v.size,Ka=v.color,Qn=null,this},f.setCurrentTransformationMatrix=function(v){return J(v.toString()+" cm"),this},f.comment=function(v){return J("#"+v),this};var $s=function(v,O){var K=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return K},set:function(be){isNaN(be)||(K=parseFloat(be))}});var ne=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ne},set:function(be){isNaN(be)||(ne=parseFloat(be))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(be){he=be.toString()}}),this},Hi=function(v,O,K,ne){$s.call(this,v,O),this.type="rect";var he=K||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(_e){isNaN(_e)||(he=parseFloat(_e))}});var be=ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return be},set:function(_e){isNaN(_e)||(be=parseFloat(_e))}}),this},Gi=function(){this.page=Ft,this.currentPage=q,this.pages=Se.slice(0),this.pagesContext=tt.slice(0),this.x=hr,this.y=pt,this.matrix=pn,this.width=Xa(q),this.height=xa(q),this.outputDestination=De,this.id="",this.objectNumber=-1};Gi.prototype.restore=function(){Ft=this.page,q=this.currentPage,tt=this.pagesContext,Se=this.pages,hr=this.x,pt=this.y,pn=this.matrix,Vi(q,this.width),Yi(q,this.height),De=this.outputDestination};var xl=function(v,O,K,ne,he){On.push(new Gi),Ft=q=0,Se=[],hr=v,pt=O,pn=he,Ri([K,ne])},Ou=function(v){if(kn[v])On.pop().restore();else{var O=new Gi,K="Xo"+(Object.keys(lr).length+1).toString(10);O.id=K,kn[v]=K,lr[K]=O,bt.publish("addFormObject",O),On.pop().restore()}};for(var Bs in f.beginFormObject=function(v,O,K,ne,he){return xl(v,O,K,ne,he),this},f.endFormObject=function(v){return Ou(v),this},f.doFormObject=function(v,O){var K=lr[kn[v]];return J("q"),J(O.toString()+" cm"),J("/"+K.id+" Do"),J("Q"),this},f.getFormObject=function(v){var O=lr[kn[v]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},f.save=function(v,O){return v=v||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(is(Ts(ta()),v),typeof is.unload=="function"&&Ke.setTimeout&&setTimeout(is.unload,911),this):new Promise(function(K,ne){try{var he=is(Ts(ta()),v);typeof is.unload=="function"&&Ke.setTimeout&&setTimeout(is.unload,911),K(he)}catch(be){ne(be.message)}})},Ye.API)Ye.API.hasOwnProperty(Bs)&&(Bs==="events"&&Ye.API.events.length?function(v,O){var K,ne,he;for(he=O.length-1;he!==-1;he--)K=O[he][0],ne=O[he][1],v.subscribe.apply(v,[K].concat(typeof ne=="function"?[ne]:ne))}(bt,Ye.API.events):f[Bs]=Ye.API[Bs]);var Xa=f.getPageWidth=function(v){return(tt[v=v||q].mediaBox.topRightX-tt[v].mediaBox.bottomLeftX)/Ie},Vi=f.setPageWidth=function(v,O){tt[v].mediaBox.topRightX=O*Ie+tt[v].mediaBox.bottomLeftX},xa=f.getPageHeight=function(v){return(tt[v=v||q].mediaBox.topRightY-tt[v].mediaBox.bottomLeftY)/Ie},Yi=f.setPageHeight=function(v,O){tt[v].mediaBox.topRightY=O*Ie+tt[v].mediaBox.bottomLeftY};return f.internal={pdfEscape:Pr,getStyle:fl,getFont:Lu,getFontSize:ke,getCharSpace:ku,getTextColor:Pu,getLineHeight:gl,getLineHeightFactor:bl,getLineWidth:Rs,write:Ze,getHorizontalCoordinate:Fn,getVerticalCoordinate:ra,getCoordinateString:Du,getVerticalCoordinateString:ya,collections:{},newObject:er,newAdditionalObject:As,newObjectDeferred:Xt,newObjectDeferredBegin:Ur,getFilters:Mn,putStream:Jr,events:bt,scaleFactor:Ie,pageSize:{getWidth:function(){return Xa(q)},setWidth:function(v){Vi(q,v)},getHeight:function(){return xa(q)},setHeight:function(v){Yi(q,v)}},encryptionOptions:p,encryption:fr,getEncryptor:ju,output:Ms,getNumberOfPages:bu,pages:Se,out:J,f2:H,f3:L,getPageInfo:hl,getPageInfoByObjId:Qe,getCurrentPageInfo:Su,getPDFVersion:y,Point:$s,Rectangle:Hi,Matrix:Ve,hasHotfix:dl},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Xa(q)},set:function(v){Vi(q,v)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return xa(q)},set:function(v){Yi(q,v)},enumerable:!0,configurable:!0}),gu.call(f,Ee),lt="F1",ll(a,r),bt.publish("initialized"),f}si.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},si.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},si.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},si.prototype.processOwnerPassword=function(e,t){return qd(Bd(t).substr(0,5),e)},si.prototype.encryptor=function(e,t){var r=Bd(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return qd(r,n)}},gc.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||dt(e)!==dt(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Ye.API={events:[]},Ye.version="3.0.1";var qt=Ye.API,Nh=1,Ss=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ti=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nt=function(e){return e.toFixed(2)},Oa=function(e){return e.toFixed(5)};qt.__acroform__={};var zr=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},op=function(e){return e*Nh},zn=function(e){var t=new Qg,r=Be.internal.getHeight(e)||0,n=Be.internal.getWidth(e)||0;return t.BBox=[0,0,Number(nt(n)),Number(nt(r))],t},$b=qt.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Bb=qt.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},qb=qt.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Vt=qt.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qb(e,t-1)},Yt=qt.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $b(e,t-1)},Kt=qt.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Bb(e,t-1)},zb=qt.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(nt(c.lowerLeft_X)),Number(nt(c.lowerLeft_Y)),Number(nt(c.upperRight_X)),Number(nt(c.upperRight_Y))]},Ub=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=zd(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+nt(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=zn(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},zd=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(L){return L.split(`
`)}):a.map(function(L){return[L]});var s=r,o=Be.internal.getHeight(e)||0;o=o<0?-o:o;var l=Be.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(L,D,F){if(L+1<a.length){var U=D+" "+a[L+1][0];return Yl(U,e,F).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var d,p,m=Yl("3",e,s).height,g=e.multiline?o-s:(o-m)/2,f=g+=2,N=0,y=0,j=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Yl(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var x="",w=0,_=0;_<a.length;_++)if(a.hasOwnProperty(_)){var E=!1;if(a[_].length!==1&&j!==a[_].length-1){if((m+2)*(w+2)+2>o)continue e;x+=a[_][j],E=!0,y=_,_--}else{x=(x+=a[_][j]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var A=parseInt(_),B=c(A,x,s),T=_>=a.length-1;if(B&&!T){x+=" ",j=0;continue}if(B||T){if(T)y=A;else if(e.multiline&&(m+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(m+2)*(w+2)+2>o)continue e;y=A}}for(var C="",$=N;$<=y;$++){var H=a[$];if(e.multiline){if($===y){C+=H[j]+" ",j=(j+1)%H.length;continue}if($===N){C+=H[H.length-1]+" ";continue}}C+=H[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,p=Yl(C,e,s).width,e.textAlign){case"right":d=l-p-2;break;case"center":d=(l-p)/2;break;case"left":default:d=2}t+=nt(d)+" "+nt(f)+` Td
`,t+="("+Ss(C)+`) Tj
`,t+=-nt(d)+` 0 Td
`,f=-(s+2),p=0,N=E?y:y+1,w++,x=""}break}return n.text=t,n.fontSize=s,n},Yl=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Wb={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Hb=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Gb=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),dt(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},Vb=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Ln.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Wb)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Nh=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new e0,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&Hb(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=zb(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Be.createDefaultAppearanceStream(l),dt(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var p=Ub(l);c.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(l.appearanceStreamContent){var m="";for(var g in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(g)){var f=l.appearanceStreamContent[g];if(m+="/"+g+" ",m+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var N=f[o];typeof N=="function"&&(N=N.call(a,l)),m+="/"+o+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=f)=="function"&&(N=N.call(a,l)),m+="/"+o+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&Gb(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Zg=qt.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),dt(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Ss(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},od=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Ss(n(e))+")"},Wn=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wn.prototype.toString=function(){return this.objId+" 0 R"},Wn.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Wn.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:Zg(a,this.objId,this.scope)}):a instanceof Wn?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var Qg=function(){Wn.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};zr(Qg,Wn);var e0=function(){Wn.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ss(r(e))+")"}},set:function(r){e=r}})};zr(e0,Wn);var Ln=function e(){Wn.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Vt(t,3)},set:function(x){x?this.F=Yt(t,3):this.F=Kt(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof vc)return;s="FieldObject"+e.FieldNum++}var x=function(w){return w};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Ss(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/Nh:d},set:function(x){d=x}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){p=x}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof vc||this instanceof hs))return od(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=x}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof or?g:od(g,this.objId,this.scope)},set:function(x){x=x.toString(),g=this instanceof or?x:x.substr(0,1)==="("?ti(x.substr(1,x.length-2)):ti(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof or?ti(g.substr(1,g.length-1)):g},set:function(x){x=x.toString(),g=this instanceof or?"/"+x:x}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof or?f:od(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=this instanceof or?x:x.substr(0,1)==="("?ti(x.substr(1,x.length-2)):ti(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof or?ti(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof or?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(x){x=!!x,y=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(x){N=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,1)},set:function(x){x?this.Ff=Yt(this.Ff,1):this.Ff=Kt(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,2)},set:function(x){x?this.Ff=Yt(this.Ff,2):this.Ff=Kt(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,3)},set:function(x){x?this.Ff=Yt(this.Ff,3):this.Ff=Kt(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');j=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(j){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};zr(Ln,Wn);var ci=function(){Ln.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Zg(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,d=[];c=o.exec(s);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,18)},set:function(r){r?this.Ff=Yt(this.Ff,18):this.Ff=Kt(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Yt(this.Ff,19):this.Ff=Kt(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,20)},set:function(r){r?(this.Ff=Yt(this.Ff,20),t.sort()):this.Ff=Kt(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,22)},set:function(r){r?this.Ff=Yt(this.Ff,22):this.Ff=Kt(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,23)},set:function(r){r?this.Ff=Yt(this.Ff,23):this.Ff=Kt(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,27)},set:function(r){r?this.Ff=Yt(this.Ff,27):this.Ff=Kt(this.Ff,27)}}),this.hasAppearanceStream=!1};zr(ci,Ln);var ui=function(){ci.call(this),this.fontName="helvetica",this.combo=!1};zr(ui,ci);var di=function(){ui.call(this),this.combo=!0};zr(di,ui);var ac=function(){di.call(this),this.edit=!0};zr(ac,di);var or=function(){Ln.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,15)},set:function(r){r?this.Ff=Yt(this.Ff,15):this.Ff=Kt(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,16)},set:function(r){r?this.Ff=Yt(this.Ff,16):this.Ff=Kt(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,17)},set:function(r){r?this.Ff=Yt(this.Ff,17):this.Ff=Kt(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,26)},set:function(r){r?this.Ff=Yt(this.Ff,26):this.Ff=Kt(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Ss(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){dt(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};zr(or,Ln);var sc=function(){or.call(this),this.pushButton=!0};zr(sc,or);var hi=function(){or.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};zr(hi,or);var vc=function(){var e,t;Ln.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+Ss(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){dt(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Be.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zr(vc,Ln),hi.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},hi.prototype.createOption=function(e){var t=new vc;return t.Parent=this,t.optionName=e,this.Kids.push(t),Yb.call(this.scope,t),t};var ic=function(){or.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Be.CheckBox.createAppearanceStream()};zr(ic,or);var hs=function(){Ln.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,13)},set:function(t){t?this.Ff=Yt(this.Ff,13):this.Ff=Kt(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,21)},set:function(t){t?this.Ff=Yt(this.Ff,21):this.Ff=Kt(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,23)},set:function(t){t?this.Ff=Yt(this.Ff,23):this.Ff=Kt(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,24)},set:function(t){t?this.Ff=Yt(this.Ff,24):this.Ff=Kt(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,25)},set:function(t){t?this.Ff=Yt(this.Ff,25):this.Ff=Kt(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,26)},set:function(t){t?this.Ff=Yt(this.Ff,26):this.Ff=Kt(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zr(hs,Ln);var oc=function(){hs.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Vt(this.Ff,14)},set:function(e){e?this.Ff=Yt(this.Ff,14):this.Ff=Kt(this.Ff,14)}}),this.password=!0};zr(oc,hs);var Be={CheckBox:{createAppearanceStream:function(){return{N:{On:Be.CheckBox.YesNormal},D:{On:Be.CheckBox.YesPushDown,Off:Be.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=zn(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=zd(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+nt(Be.internal.getWidth(e))+" "+nt(Be.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+nt(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=zn(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=Be.internal.getHeight(e),o=Be.internal.getWidth(e),l=zd(e,e.caption);return a.push("1 g"),a.push("0 0 "+nt(o)+" "+nt(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+nt(o-1)+" "+nt(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+nt(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=zn(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+nt(Be.internal.getWidth(e))+" "+nt(Be.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Be.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Be.RadioButton.Circle.YesNormal,t.D[e]=Be.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=zn(e);t.scope=e.scope;var r=[],n=Be.internal.getWidth(e)<=Be.internal.getHeight(e)?Be.internal.getWidth(e)/4:Be.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Be.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Oa(Be.internal.getWidth(e)/2)+" "+Oa(Be.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=zn(e);t.scope=e.scope;var r=[],n=Be.internal.getWidth(e)<=Be.internal.getHeight(e)?Be.internal.getWidth(e)/4:Be.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Be.internal.Bezier_C).toFixed(5)),o=Number((n*Be.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Oa(Be.internal.getWidth(e)/2)+" "+Oa(Be.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Oa(Be.internal.getWidth(e)/2)+" "+Oa(Be.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=zn(e);t.scope=e.scope;var r=[],n=Be.internal.getWidth(e)<=Be.internal.getHeight(e)?Be.internal.getWidth(e)/4:Be.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Be.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Oa(Be.internal.getWidth(e)/2)+" "+Oa(Be.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Be.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Be.RadioButton.Cross.YesNormal,t.D[e]=Be.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=zn(e);t.scope=e.scope;var r=[],n=Be.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+nt(Be.internal.getWidth(e)-2)+" "+nt(Be.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(nt(n.x1.x)+" "+nt(n.x1.y)+" m"),r.push(nt(n.x2.x)+" "+nt(n.x2.y)+" l"),r.push(nt(n.x4.x)+" "+nt(n.x4.y)+" m"),r.push(nt(n.x3.x)+" "+nt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=zn(e);t.scope=e.scope;var r=Be.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+nt(Be.internal.getWidth(e))+" "+nt(Be.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+nt(Be.internal.getWidth(e)-2)+" "+nt(Be.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(nt(r.x1.x)+" "+nt(r.x1.y)+" m"),n.push(nt(r.x2.x)+" "+nt(r.x2.y)+" l"),n.push(nt(r.x4.x)+" "+nt(r.x4.y)+" m"),n.push(nt(r.x3.x)+" "+nt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=zn(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+nt(Be.internal.getWidth(e))+" "+nt(Be.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Be.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Be.internal.getWidth(e),r=Be.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Be.internal.getWidth=function(e){var t=0;return dt(e)==="object"&&(t=op(e.Rect[2])),t},Be.internal.getHeight=function(e){var t=0;return dt(e)==="object"&&(t=op(e.Rect[3])),t};var Yb=qt.addField=function(e){if(Vb(this,e),!(e instanceof Ln))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};qt.AcroFormChoiceField=ci,qt.AcroFormListBox=ui,qt.AcroFormComboBox=di,qt.AcroFormEditBox=ac,qt.AcroFormButton=or,qt.AcroFormPushButton=sc,qt.AcroFormRadioButton=hi,qt.AcroFormCheckBox=ic,qt.AcroFormTextField=hs,qt.AcroFormPasswordField=oc,qt.AcroFormAppearance=Be,qt.AcroForm={ChoiceField:ci,ListBox:ui,ComboBox:di,EditBox:ac,Button:or,PushButton:sc,RadioButton:hi,CheckBox:ic,TextField:hs,PasswordField:oc,Appearance:Be},Ye.AcroForm={ChoiceField:ci,ListBox:ui,ComboBox:di,EditBox:ac,Button:or,PushButton:sc,RadioButton:hi,CheckBox:ic,TextField:hs,PasswordField:oc,Appearance:Be};Ye.AcroForm;function t0(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(L,D){var F,U,ee,te,re,Q=t;if((D=D||t)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(B(L))for(re in r)for(ee=r[re],F=0;F<ee.length;F+=1){for(te=!0,U=0;U<ee[F].length;U+=1)if(ee[F][U]!==void 0&&ee[F][U]!==L[U]){te=!1;break}if(te===!0){Q=re;break}}else for(re in r)for(ee=r[re],F=0;F<ee.length;F+=1){for(te=!0,U=0;U<ee[F].length;U+=1)if(ee[F][U]!==void 0&&ee[F][U]!==L.charCodeAt(U)){te=!1;break}if(te===!0){Q=re;break}}return Q===t&&D!==t&&(Q=D),Q},a=function L(D){for(var F=this.internal.write,U=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var te=[];if(te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Image"}),te.push({key:"Width",value:D.width}),te.push({key:"Height",value:D.height}),D.colorSpace===j.INDEXED?te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(te.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===j.DEVICE_CMYK&&te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),te.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&te.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var re="",Q=0,Y=D.transparency.length;Q<Y;Q++)re+=D.transparency[Q]+" "+D.transparency[Q]+" ";te.push({key:"Mask",value:"["+re+"]"})}D.sMask!==void 0&&te.push({key:"SMask",value:D.objectId+1+" 0 R"});var X=D.filter!==void 0?["/"+D.filter]:void 0;if(U({data:D.data,additionalKeyValues:te,alreadyAppliedFilters:X,objectId:D.objectId}),F("endobj"),"sMask"in D&&D.sMask!==void 0){var ce="/Predictor "+D.predictor+" /Colors 1 /BitsPerComponent "+D.bitsPerComponent+" /Columns "+D.width,P={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:ce,data:D.sMask};"filter"in D&&(P.filter=D.filter),L.call(this,P)}if(D.colorSpace===j.INDEXED){var q=this.internal.newObject();U({data:C(new Uint8Array(D.palette)),objectId:q}),F("endobj")}},s=function(){var L=this.internal.collections.addImage_images;for(var D in L)a.call(this,L[D])},o=function(){var L,D=this.internal.collections.addImage_images,F=this.internal.write;for(var U in D)F("/I"+(L=D[U]).index,L.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var L=this.internal.collections.addImage_images;return l.call(this),L},d=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(L){return typeof e["process"+L.toUpperCase()]=="function"},m=function(L){return dt(L)==="object"&&L.nodeType===1},g=function(L,D){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var F=""+L.getAttribute("src");if(F.indexOf("data:image/")===0)return wo(unescape(F).split("base64,").pop());var U=e.loadFile(F,!0);if(U!==void 0)return U}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var ee;switch(D){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return wo(L.toDataURL(ee,1).split("base64,").pop())}},f=function(L){var D=this.internal.collections.addImage_images;if(D){for(var F in D)if(L===D[F].alias)return D[F]}},N=function(L,D,F){return L||D||(L=-96,D=-96),L<0&&(L=-1*F.width*72/L/this.internal.scaleFactor),D<0&&(D=-1*F.height*72/D/this.internal.scaleFactor),L===0&&(L=D*F.width/F.height),D===0&&(D=L*F.height/F.width),[L,D]},y=function(L,D,F,U,ee,te){var re=N.call(this,F,U,ee),Q=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,X=c.call(this);if(F=re[0],U=re[1],X[ee.index]=ee,te){te*=Math.PI/180;var ce=Math.cos(te),P=Math.sin(te),q=function(Z){return Z.toFixed(4)},V=[q(ce),q(P),q(-1*P),q(ce),0,0,"cm"]}this.internal.write("q"),te?(this.internal.write([1,"0","0",1,Q(L),Y(D+U),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([Q(F),"0","0",Q(U),"0","0","cm"].join(" "))):this.internal.write([Q(F),"0","0",Q(U),Q(L),Y(D+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(L){var D,F,U=0;if(typeof L=="string")for(F=L.length,D=0;D<F;D++)U=(U<<5)-U+L.charCodeAt(D),U|=0;else if(B(L))for(F=L.byteLength/2,D=0;D<F;D++)U=(U<<5)-U+L[D],U|=0;return U},_=e.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var D=!0;return L.length===0&&(D=!1),L.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(D=!1),D},E=e.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var D=L.indexOf(",");return D<0?null:L.substring(0,D).trim().endsWith("base64")?L.substring(D+1):null},A=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(L){return A()&&L instanceof ArrayBuffer};var B=e.__addimage__.isArrayBufferView=function(L){return A()&&typeof Uint32Array<"u"&&(L instanceof Int8Array||L instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array)},T=e.__addimage__.binaryStringToUint8Array=function(L){for(var D=L.length,F=new Uint8Array(D),U=0;U<D;U++)F[U]=L.charCodeAt(U);return F},C=e.__addimage__.arrayBufferToBinaryString=function(L){for(var D="",F=B(L)?L:new Uint8Array(L),U=0;U<F.length;U+=8192)D+=String.fromCharCode.apply(null,F.subarray(U,U+8192));return D};e.addImage=function(){var L,D,F,U,ee,te,re,Q,Y;if(typeof arguments[1]=="number"?(D=t,F=arguments[1],U=arguments[2],ee=arguments[3],te=arguments[4],re=arguments[5],Q=arguments[6],Y=arguments[7]):(D=arguments[1],F=arguments[2],U=arguments[3],ee=arguments[4],te=arguments[5],re=arguments[6],Q=arguments[7],Y=arguments[8]),dt(L=arguments[0])==="object"&&!m(L)&&"imageData"in L){var X=L;L=X.imageData,D=X.format||D||t,F=X.x||F||0,U=X.y||U||0,ee=X.w||X.width||ee,te=X.h||X.height||te,re=X.alias||re,Q=X.compression||Q,Y=X.rotation||X.angle||Y}var ce=this.internal.getFilters();if(Q===void 0&&ce.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(F)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=$.call(this,L,D,re,Q);return y.call(this,F,U,ee,te,P,Y),this};var $=function(L,D,F,U){var ee,te,re;if(typeof L=="string"&&n(L)===t){L=unescape(L);var Q=H(L,!1);(Q!==""||(Q=e.loadFile(L,!0))!==void 0)&&(L=Q)}if(m(L)&&(L=g(L,D)),D=n(L,D),!p(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((re=F)==null||re.length===0)&&(F=function(Y){return typeof Y=="string"||B(Y)?w(Y):B(Y.data)?w(Y.data):null}(L)),(ee=f.call(this,F))||(A()&&(L instanceof Uint8Array||D==="RGBA"||(te=L,L=T(L))),ee=this["process"+D.toUpperCase()](L,d.call(this),F,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in e.image_compression?Y:x.NONE}(U),te)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},H=e.__addimage__.convertBase64ToBinaryString=function(L,D){D=typeof D!="boolean"||D;var F,U="";if(typeof L=="string"){var ee;F=(ee=E(L))!==null&&ee!==void 0?ee:L;try{U=wo(F)}catch(te){if(D)throw _(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};e.getImageProperties=function(L){var D,F,U="";if(m(L)&&(L=g(L)),typeof L=="string"&&n(L)===t&&((U=H(L,!1))===""&&(U=e.loadFile(L)||""),L=U),F=n(L),!p(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(!A()||L instanceof Uint8Array||(L=T(L)),!(D=this["process"+F.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=F,D}})(Ye.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Ye.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,p=!1,m=0;m<d.length&&!p;m++)switch((n=d[m]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var g=0;g<d.length;g++){n=d[g];var f=this.internal.pdfEscape,N=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(y.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+f(x(n.contents))+")",s+=" /Popup "+j.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+f(x(w))+") >>",y.content=s;var _=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(s+=" /Open true"),s+=" >>",j.content=s,this.internal.write(y.objId,"0 R",j.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var E=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(N(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var A=this.annotations._nameMap[n.options.name];n.options.pageNumber=A.page,n.options.top=A.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(N(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var B=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+B+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+a),h:d(n+s)},options:o,type:"link"})},e.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var p=this.splitTextToSize(r,l).length;o=Math.ceil(d*p)}else l=c,o=d;return this.text(r,n,a,s),a+=.2*d,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-d,l,o,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Ye.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(y){return t[y.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},l=e.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&s(y)&&t[y.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&a.indexOf(y.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&s(y)&&t[y.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&s(y)&&t[y.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&s(y)&&t[y.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&s(y)&&t[y.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(y){var j=0,x=r,w="",_=0;for(j=0;j<y.length;j+=1)x[y.charCodeAt(j)]!==void 0?(_++,typeof(x=x[y.charCodeAt(j)])=="number"&&(w+=String.fromCharCode(x),x=r,_=0),j===y.length-1&&(x=r,w+=y.charAt(j-(_-1)),j-=_-1,_=0)):(x=r,w+=y.charAt(j-_),j-=_,_=0);return w};e.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(y,j,x){return o(y)?s(y)===!1?-1:!d(y)||!o(j)&&!o(x)||!o(x)&&l(j)||l(y)&&!o(j)||l(y)&&c(j)||l(y)&&l(j)?0:p(y)&&o(j)&&!l(j)&&o(x)&&d(x)?3:l(y)||!o(x)?1:2:-1},f=function(y){var j=0,x=0,w=0,_="",E="",A="",B=(y=y||"").split("\\s+"),T=[];for(j=0;j<B.length;j+=1){for(T.push(""),x=0;x<B[j].length;x+=1)_=B[j][x],E=B[j][x-1],A=B[j][x+1],o(_)?(w=g(_,E,A),T[j]+=w!==-1?String.fromCharCode(t[_.charCodeAt(0)][w]):_):T[j]+=_;T[j]=m(T[j])}return T.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var y,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(j)){var w=0;for(x=[],w=0;w<j.length;w+=1)Array.isArray(j[w])?x.push([f(j[w][0]),j[w][1],j[w][2]]):x.push([f(j[w])]);y=x}else y=f(j);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};e.events.push(["preProcessText",N])}(Ye.API),Ye.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ye.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(y){N=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var p=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),g=d.scaleFactor||this.internal.scaleFactor,f=0,N=0,y=0,j=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=d.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,E){return _.concat(j.splitTextToSize(E,x))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)f<(y=this.getStringUnitWidth(c[w],{font:m})*p)&&(f=y);return f!==0&&(N=c.length),{w:f/=g,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,f&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-p,c.y+p,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+p,{align:"center",baseline:"top",maxWidth:c.width-p-p}):this.text(c.text,c.x+p,c.y+p,{align:"left",baseline:"top",maxWidth:c.width-p-p})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,p,m,g){if(n.call(this),!p)throw new Error("No data for PDF table.");var f,N,y,j,x=[],w=[],_=[],E={},A={},B=[],T=[],C=(g=g||{}).autoSize||!1,$=g.printHeaders!==!1,H=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,L=g.margins||Object.assign({width:this.getPageWidth()},t),D=typeof g.padding=="number"?g.padding:3,F=g.headerBackgroundColor||"#c8c8c8",U=g.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=H,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=U,this.setFontSize(H),m==null)w=x=Object.keys(p[0]),_=x.map(function(){return"left"});else if(Array.isArray(m)&&dt(m[0])==="object")for(x=m.map(function(X){return X.name}),w=m.map(function(X){return X.prompt||X.name||""}),_=m.map(function(X){return X.align||"left"}),f=0;f<m.length;f+=1)A[m[f].name]=m[f].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(w=x=m,_=x.map(function(){return"left"}));if(C||Array.isArray(m)&&typeof m[0]=="string")for(f=0;f<x.length;f+=1){for(E[j=x[f]]=p.map(function(X){return X[j]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(w[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=E[j],this.setFont(void 0,"normal"),y=0;y<N.length;y+=1)B.push(this.getTextDimensions(N[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[j]=Math.max.apply(null,B)+D+D,B=[]}if($){var ee={};for(f=0;f<x.length;f+=1)ee[x[f]]={},ee[x[f]].text=w[f],ee[x[f]].align=_[f];var te=l.call(this,ee,A);T=x.map(function(X){return new s(c,d,A[X],te,ee[X].text,void 0,ee[X].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var re=m.reduce(function(X,ce){return X[ce.name]=ce.align,X},{});for(f=0;f<p.length;f+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:f,data:p[f]},this);var Q=l.call(this,p[f],A);for(y=0;y<x.length;y+=1){var Y=p[f][x[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:f,col:y,data:Y},this),o.call(this,new s(c,d,A[x[y]],Q,Y,f+2,re[x[y]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(f){var N=c[f];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,d[f]-p-p)},this).map(function(f){return this.getLineHeightFactor()*f.length*m/g+p+p},this).reduce(function(f,N){return Math.max(f,N)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){p=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(p.y=this.internal.__cell__.margins.top||0,g.push(p)),p.lineNumber=c;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,p),this.setTextColor(N)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}}(Ye.API);var r0={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},n0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ud=t0(n0),a0=[100,200,300,400,500,600,700,800,900],Kb=t0(a0);function Wd(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return r0[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof Ud[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function lp(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var Xb={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},cp={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function up(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Jb(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},Xb,r.genericFontFamilies||{}),s=null,o=null,l=0;l<t.length;++l)if(a[(s=Wd(t[l])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+up(s)+"' and default family '"+n+"'.");if(o=function(c,d){if(d[c])return d[c];var p=Ud[c],m=p<=Ud.normal?-1:1,g=lp(d,n0,p,m);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(s.stretch,o),o=function(c,d){if(d[c])return d[c];for(var p=r0[c],m=0;m<p.length;++m)if(d[p[m]])return d[p[m]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var p=Kb[c],m=lp(d,a0,p,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+up(s)+"'.");return o}function dp(e){return e.trimLeft()}function Zb(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Qb(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Kl,hp,fp,ld=["times"];(function(e){var t,r,n,a,s,o,l,c,d,p=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new o,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new o,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new p}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=P;Object.defineProperty(this,"pdf",{get:function(){return q}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(ye){V=!!ye}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(ye){Z=!!ye}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(ye){isNaN(ye)||(se=ye)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(ye){isNaN(ye)||(de=ye)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ye){var J;typeof ye=="number"?J=[ye,ye,ye,ye]:((J=new Array(4))[0]=ye[0],J[1]=ye.length>=2?ye[1]:J[0],J[2]=ye.length>=3?ye[2]:J[0],J[3]=ye.length>=4?ye[3]:J[1]),d.margin=J}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(ye){fe=ye}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(ye){ge=ye}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(ye){Ae=ye}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ye){ye instanceof p&&(d=ye)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ye){d.path=ye}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(ye){Se=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var J;J=g(ye),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var J=g(ye);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Te=null;function De(ye,J){if(Te===null){var Ze=function(qe){var Ee=[];return Object.keys(qe).forEach(function(Ce){qe[Ce].forEach(function(Oe){var ke=null;switch(Oe){case"bold":ke={family:Ce,weight:"bold"};break;case"italic":ke={family:Ce,style:"italic"};break;case"bolditalic":ke={family:Ce,weight:"bold",style:"italic"};break;case"":case"normal":ke={family:Ce}}ke!==null&&(ke.ref={name:Ce,style:Oe},Ee.push(ke))})}),Ee}(ye.getFontList());Te=function(qe){for(var Ee={},Ce=0;Ce<qe.length;++Ce){var Oe=Wd(qe[Ce]),ke=Oe.family,ze=Oe.stretch,Xe=Oe.style,et=Oe.weight;Ee[ke]=Ee[ke]||{},Ee[ke][ze]=Ee[ke][ze]||{},Ee[ke][ze][Xe]=Ee[ke][ze][Xe]||{},Ee[ke][ze][Xe][et]=Oe}return Ee}(Ze.concat(J))}return Te}var Ge=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ge},set:function(ye){Te=null,Ge=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var J;if(this.ctx.font=ye,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var Ze=J[1];J[2];var qe=J[3],Ee=J[4];J[5];var Ce=J[6],Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ee)[2];Ee=Math.floor(Oe==="px"?parseFloat(Ee)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Ee)*this.pdf.getFontSize():parseFloat(Ee)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ee);var ke=function(Je){var lt,Ie,hr=[],pt=Je.trim();if(pt==="")return ld;if(pt in cp)return[cp[pt]];for(;pt!=="";){switch(Ie=null,lt=(pt=dp(pt)).charAt(0)){case'"':case"'":Ie=Zb(pt.substring(1),lt);break;default:Ie=Qb(pt)}if(Ie===null||(hr.push(Ie[0]),(pt=dp(Ie[1]))!==""&&pt.charAt(0)!==","))return ld;pt=pt.replace(/^,/,"")}return hr}(Ce);if(this.fontFaces){var ze=Jb(De(this.pdf,this.fontFaces),ke.map(function(Je){return{family:Je,stretch:"normal",weight:qe,style:Ze}}));this.pdf.setFont(ze.ref.name,ze.ref.style)}else{var Xe="";(qe==="bold"||parseInt(qe,10)>=700||Ze==="bold")&&(Xe="bold"),Ze==="italic"&&(Xe+="italic"),Xe.length===0&&(Xe="normal");for(var et="",ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ct=0;ct<ke.length;ct++){if(this.pdf.internal.getFont(ke[ct],Xe,{noFallback:!0,disableWarning:!0})!==void 0){et=ke[ct];break}if(Xe==="bolditalic"&&this.pdf.internal.getFont(ke[ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)et=ke[ct],Xe="bold";else if(this.pdf.internal.getFont(ke[ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){et=ke[ct],Xe="normal";break}}if(et===""){for(var mt=0;mt<ke.length;mt++)if(ot[ke[mt]]){et=ot[ke[mt]];break}}et=et===""?"Times":et,this.pdf.setFont(et,Xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){E.call(this,"fill",!1)},m.prototype.stroke=function(){E.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,q){if(isNaN(P)||isNaN(q))throw _t.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(P,q)},m.prototype.closePath=function(){var P=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&dt(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){P=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(P.x,P.y)},m.prototype.lineTo=function(P,q){if(isNaN(P)||isNaN(q))throw _t.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,q,V,Z){if(isNaN(V)||isNaN(Z)||isNaN(P)||isNaN(q))throw _t.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(V,Z)),de=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"qct",x1:de.x,y1:de.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},m.prototype.bezierCurveTo=function(P,q,V,Z,se,de){if(isNaN(se)||isNaN(de)||isNaN(P)||isNaN(q)||isNaN(V)||isNaN(Z))throw _t.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new o(se,de)),ge=this.ctx.transform.applyToPoint(new o(P,q)),Ae=this.ctx.transform.applyToPoint(new o(V,Z));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:Ae.x,y2:Ae.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},m.prototype.arc=function(P,q,V,Z,se,de){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(Z)||isNaN(se))throw _t.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new o(P,q));P=fe.x,q=fe.y;var ge=this.ctx.transform.applyToPoint(new o(0,V)),Ae=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(ge.x-Ae.x,2)+Math.pow(ge.y-Ae.y,2))}Math.abs(se-Z)>=2*Math.PI&&(Z=0,se=2*Math.PI),this.path.push({type:"arc",x:P,y:q,radius:V,startAngle:Z,endAngle:se,counterclockwise:de})},m.prototype.arcTo=function(P,q,V,Z,se){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,q,V,Z){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(Z))throw _t.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,q),this.lineTo(P+V,q),this.lineTo(P+V,q+Z),this.lineTo(P,q+Z),this.lineTo(P,q),this.lineTo(P+V,q),this.lineTo(P,q)},m.prototype.fillRect=function(P,q,V,Z){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(Z))throw _t.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,q,V,Z),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},m.prototype.strokeRect=function(P,q,V,Z){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(Z))throw _t.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(P,q,V,Z),this.stroke())},m.prototype.clearRect=function(P,q,V,Z){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(Z))throw _t.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,q,V,Z))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(q),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(P){var q,V,Z,se;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))q=0,V=0,Z=0,se=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(de!==null)q=parseInt(de[1]),V=parseInt(de[2]),Z=parseInt(de[3]),se=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)q=parseInt(de[1]),V=parseInt(de[2]),Z=parseInt(de[3]),se=parseFloat(de[4]);else{if(se=1,typeof P=="string"&&P.charAt(0)!=="#"){var fe=new Kg(P);P=fe.ok?fe.toHex():"#000000"}P.length===4?(q=P.substring(1,2),q+=q,V=P.substring(2,3),V+=V,Z=P.substring(3,4),Z+=Z):(q=P.substring(1,3),V=P.substring(3,5),Z=P.substring(5,7)),q=parseInt(q,16),V=parseInt(V,16),Z=parseInt(Z,16)}}return{r:q,g:V,b:Z,a:se,style:P}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,q,V,Z){if(isNaN(q)||isNaN(V)||typeof P!="string")throw _t.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!f.call(this)){var se=Q(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;D.call(this,{text:P,x:q,y:V,scale:de,angle:se,align:this.textAlign,maxWidth:Z})}},m.prototype.strokeText=function(P,q,V,Z){if(isNaN(q)||isNaN(V)||typeof P!="string")throw _t.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){Z=isNaN(Z)?void 0:Z;var se=Q(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;D.call(this,{text:P,x:q,y:V,scale:de,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:Z})}},m.prototype.measureText=function(P){if(typeof P!="string")throw _t.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,V=this.pdf.internal.scaleFactor,Z=q.internal.getFontSize(),se=q.getStringUnitWidth(P)*Z/q.internal.scaleFactor,de=function(fe){var ge=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this};return new de({width:se*=Math.round(96*V/72*1e4)/1e4})},m.prototype.scale=function(P,q){if(isNaN(P)||isNaN(q))throw _t.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(P,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.rotate=function(P){if(isNaN(P))throw _t.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.translate=function(P,q){if(isNaN(P)||isNaN(q))throw _t.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,P,q);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.transform=function(P,q,V,Z,se,de){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(Z)||isNaN(se)||isNaN(de))throw _t.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new c(P,q,V,Z,se,de);this.ctx.transform=this.ctx.transform.multiply(fe)},m.prototype.setTransform=function(P,q,V,Z,se,de){P=isNaN(P)?1:P,q=isNaN(q)?0:q,V=isNaN(V)?0:V,Z=isNaN(Z)?1:Z,se=isNaN(se)?0:se,de=isNaN(de)?0:de,this.ctx.transform=new c(P,q,V,Z,se,de)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,q,V,Z,se,de,fe,ge,Ae){var Se=this.pdf.getImageProperties(P),Te=1,De=1,Ge=1,ye=1;Z!==void 0&&ge!==void 0&&(Ge=ge/Z,ye=Ae/se,Te=Se.width/Z*ge/Z,De=Se.height/se*Ae/se),de===void 0&&(de=q,fe=V,q=0,V=0),Z!==void 0&&ge===void 0&&(ge=Z,Ae=se),Z===void 0&&ge===void 0&&(ge=Se.width,Ae=Se.height);for(var J,Ze=this.ctx.transform.decompose(),qe=Q(Ze.rotate.shx),Ee=new c,Ce=(Ee=(Ee=(Ee=Ee.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new l(de-q*Ge,fe-V*ye,Z*Te,se*De)),Oe=j.call(this,Ce),ke=[],ze=0;ze<Oe.length;ze+=1)ke.indexOf(Oe[ze])===-1&&ke.push(Oe[ze]);if(_(ke),this.autoPaging)for(var Xe=ke[0],et=ke[ke.length-1],ot=Xe;ot<et+1;ot++){this.pdf.setPage(ot);var ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mt=ot===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=ot===1?0:Je+(ot-2)*lt;if(this.ctx.clip_path.length!==0){var hr=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(J,this.posX+this.margin[3],-Ie+mt+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=hr}var pt=JSON.parse(JSON.stringify(Ce));pt=w([pt],this.posX+this.margin[3],-Ie+mt+this.ctx.prevPageLastElemOffset)[0];var pn=(ot>Xe||ot<et)&&y.call(this);pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,lt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,qe),pn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,qe)};var j=function(P,q,V){var Z=[];q=q||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":Z.push(Math.floor((P.y+se)/V)+1);break;case"arc":Z.push(Math.floor((P.y+se-P.radius)/V)+1),Z.push(Math.floor((P.y+se+P.radius)/V)+1);break;case"qct":var de=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);Z.push(Math.floor((de.y+se)/V)+1),Z.push(Math.floor((de.y+de.h+se)/V)+1);break;case"bct":var fe=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);Z.push(Math.floor((fe.y+se)/V)+1),Z.push(Math.floor((fe.y+fe.h+se)/V)+1);break;case"rect":Z.push(Math.floor((P.y+se)/V)+1),Z.push(Math.floor((P.y+P.h+se)/V)+1)}for(var ge=0;ge<Z.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<Z[ge];)x.call(this);return Z},x=function(){var P=this.fillStyle,q=this.strokeStyle,V=this.font,Z=this.lineCap,se=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=q,this.font=V,this.lineCap=Z,this.lineWidth=se,this.lineJoin=de},w=function(P,q,V){for(var Z=0;Z<P.length;Z++)switch(P[Z].type){case"bct":P[Z].x2+=q,P[Z].y2+=V;case"qct":P[Z].x1+=q,P[Z].y1+=V;case"mt":case"lt":case"arc":default:P[Z].x+=q,P[Z].y+=V}return P},_=function(P){return P.sort(function(q,V){return q-V})},E=function(P,q){for(var V,Z,se=this.fillStyle,de=this.strokeStyle,fe=this.lineCap,ge=this.lineWidth,Ae=Math.abs(ge*this.ctx.transform.scaleX),Se=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),De=JSON.parse(JSON.stringify(this.path)),Ge=[],ye=0;ye<De.length;ye++)if(De[ye].x!==void 0)for(var J=j.call(this,De[ye]),Ze=0;Ze<J.length;Ze+=1)Ge.indexOf(J[Ze])===-1&&Ge.push(J[Ze]);for(var qe=0;qe<Ge.length;qe++)for(;this.pdf.internal.getNumberOfPages()<Ge[qe];)x.call(this);if(_(Ge),this.autoPaging)for(var Ee=Ge[0],Ce=Ge[Ge.length-1],Oe=Ee;Oe<Ce+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=se,this.strokeStyle=de,this.lineCap=fe,this.lineWidth=Ae,this.lineJoin=Se;var ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ze=Oe===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=Oe===1?0:Xe+(Oe-2)*et;if(this.ctx.clip_path.length!==0){var ct=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(V,this.posX+this.margin[3],-ot+ze+this.ctx.prevPageLastElemOffset),A.call(this,P,!0),this.path=ct}if(Z=JSON.parse(JSON.stringify(Te)),this.path=w(Z,this.posX+this.margin[3],-ot+ze+this.ctx.prevPageLastElemOffset),q===!1||Oe===0){var mt=(Oe>Ee||Oe<Ce)&&y.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,et,null).clip().discardPath()),A.call(this,P,q),mt&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=Ae,A.call(this,P,q),this.lineWidth=ge;this.path=Te},A=function(P,q){if((P!=="stroke"||q||!N.call(this))&&(P==="stroke"||q||!f.call(this))){for(var V,Z,se=[],de=this.path,fe=0;fe<de.length;fe++){var ge=de[fe];switch(ge.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:ge,deltas:[],abs:[]});break;case"lt":var Ae=se.length;if(de[fe-1]&&!isNaN(de[fe-1].x)&&(V=[ge.x-de[fe-1].x,ge.y-de[fe-1].y],Ae>0)){for(;Ae>=0;Ae--)if(se[Ae-1].close!==!0&&se[Ae-1].begin!==!0){se[Ae-1].deltas.push(V),se[Ae-1].abs.push(ge);break}}break;case"bct":V=[ge.x1-de[fe-1].x,ge.y1-de[fe-1].y,ge.x2-de[fe-1].x,ge.y2-de[fe-1].y,ge.x-de[fe-1].x,ge.y-de[fe-1].y],se[se.length-1].deltas.push(V);break;case"qct":var Se=de[fe-1].x+2/3*(ge.x1-de[fe-1].x),Te=de[fe-1].y+2/3*(ge.y1-de[fe-1].y),De=ge.x+2/3*(ge.x1-ge.x),Ge=ge.y+2/3*(ge.y1-ge.y),ye=ge.x,J=ge.y;V=[Se-de[fe-1].x,Te-de[fe-1].y,De-de[fe-1].x,Ge-de[fe-1].y,ye-de[fe-1].x,J-de[fe-1].y],se[se.length-1].deltas.push(V);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(ge)}}Z=q?null:P==="stroke"?"stroke":"fill";for(var Ze=!1,qe=0;qe<se.length;qe++)if(se[qe].arc)for(var Ee=se[qe].abs,Ce=0;Ce<Ee.length;Ce++){var Oe=Ee[Ce];Oe.type==="arc"?C.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,q,!Ze):F.call(this,Oe.x,Oe.y),Ze=!0}else if(se[qe].close===!0)this.pdf.internal.out("h"),Ze=!1;else if(se[qe].begin!==!0){var ke=se[qe].start.x,ze=se[qe].start.y;U.call(this,se[qe].deltas,ke,ze),Ze=!0}Z&&$.call(this,Z),q&&H.call(this)}},B=function(P){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-V;case"top":return P+q-V;case"hanging":return P+q-2*V;case"middle":return P+q/2-V;case"ideographic":return P;case"alphabetic":default:return P}},T=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(q,V){this.colorStops.push([q,V])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(P,q,V,Z,se,de,fe,ge,Ae){for(var Se=te.call(this,V,Z,se,de),Te=0;Te<Se.length;Te++){var De=Se[Te];Te===0&&(Ae?L.call(this,De.x1+P,De.y1+q):F.call(this,De.x1+P,De.y1+q)),ee.call(this,P,q,De.x2,De.y2,De.x3,De.y3,De.x4,De.y4)}ge?H.call(this):$.call(this,fe)},$=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},H=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(P,q){this.pdf.internal.out(r(P)+" "+n(q)+" m")},D=function(P){var q;switch(P.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var V=this.pdf.getTextDimensions(P.text),Z=B.call(this,P.y),se=T.call(this,Z)-V.h,de=this.ctx.transform.applyToPoint(new o(P.x,Z)),fe=this.ctx.transform.decompose(),ge=new c;ge=(ge=(ge=ge.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var Ae,Se,Te,De=this.ctx.transform.applyToRectangle(new l(P.x,Z,V.w,V.h)),Ge=ge.applyToRectangle(new l(P.x,se,V.w,V.h)),ye=j.call(this,Ge),J=[],Ze=0;Ze<ye.length;Ze+=1)J.indexOf(ye[Ze])===-1&&J.push(ye[Ze]);if(_(J),this.autoPaging)for(var qe=J[0],Ee=J[J.length-1],Ce=qe;Ce<Ee+1;Ce++){this.pdf.setPage(Ce);var Oe=Ce===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[2],Xe=ze-this.margin[0],et=this.pdf.internal.pageSize.width-this.margin[1],ot=et-this.margin[3],ct=Ce===1?0:ke+(Ce-2)*Xe;if(this.ctx.clip_path.length!==0){var mt=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Ae,this.posX+this.margin[3],-1*ct+Oe),A.call(this,"fill",!0),this.path=mt}var Je=w([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-ct+Oe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*P.scale),Te=this.lineWidth,this.lineWidth=Te*P.scale);var lt=this.autoPaging!=="text";if(lt||Je.y+Je.h<=ze){if(lt||Je.y>=Oe&&Je.x<=et){var Ie=lt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||et-Je.x)[0],hr=w([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-ct+Oe+this.ctx.prevPageLastElemOffset)[0],pt=lt&&(Ce>qe||Ce<Ee)&&y.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Xe,null).clip().discardPath()),this.pdf.text(Ie,hr.x,hr.y,{angle:P.angle,align:q,renderingMode:P.renderingMode}),pt&&this.pdf.restoreGraphicsState()}}else Je.y<ze&&(this.ctx.prevPageLastElemOffset+=ze-Je.y);P.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Te)}else P.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*P.scale),Te=this.lineWidth,this.lineWidth=Te*P.scale),this.pdf.text(P.text,de.x+this.posX,de.y+this.posY,{angle:P.angle,align:q,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Te)},F=function(P,q,V,Z){V=V||0,Z=Z||0,this.pdf.internal.out(r(P+V)+" "+n(q+Z)+" l")},U=function(P,q,V){return this.pdf.lines(P,q,V,null,null)},ee=function(P,q,V,Z,se,de,fe,ge){this.pdf.internal.out([t(a(V+P)),t(s(Z+q)),t(a(se+P)),t(s(de+q)),t(a(fe+P)),t(s(ge+q)),"c"].join(" "))},te=function(P,q,V,Z){for(var se=2*Math.PI,de=Math.PI/2;q>V;)q-=se;var fe=Math.abs(V-q);fe<se&&Z&&(fe=se-fe);for(var ge=[],Ae=Z?-1:1,Se=q;fe>1e-5;){var Te=Se+Ae*Math.min(fe,de);ge.push(re.call(this,P,Se,Te)),fe-=Math.abs(Te-Se),Se=Te}return ge},re=function(P,q,V){var Z=(V-q)/2,se=P*Math.cos(Z),de=P*Math.sin(Z),fe=se,ge=-de,Ae=fe*fe+ge*ge,Se=Ae+fe*se+ge*de,Te=4/3*(Math.sqrt(2*Ae*Se)-Se)/(fe*de-ge*se),De=fe-Te*ge,Ge=ge+Te*fe,ye=De,J=-Ge,Ze=Z+q,qe=Math.cos(Ze),Ee=Math.sin(Ze);return{x1:P*Math.cos(q),y1:P*Math.sin(q),x2:De*qe-Ge*Ee,y2:De*Ee+Ge*qe,x3:ye*qe-J*Ee,y3:ye*Ee+J*qe,x4:P*Math.cos(V),y4:P*Math.sin(V)}},Q=function(P){return 180*P/Math.PI},Y=function(P,q,V,Z,se,de){var fe=P+.5*(V-P),ge=q+.5*(Z-q),Ae=se+.5*(V-se),Se=de+.5*(Z-de),Te=Math.min(P,se,fe,Ae),De=Math.max(P,se,fe,Ae),Ge=Math.min(q,de,ge,Se),ye=Math.max(q,de,ge,Se);return new l(Te,Ge,De-Te,ye-Ge)},X=function(P,q,V,Z,se,de,fe,ge){var Ae,Se,Te,De,Ge,ye,J,Ze,qe,Ee,Ce,Oe,ke,ze,Xe=V-P,et=Z-q,ot=se-V,ct=de-Z,mt=fe-se,Je=ge-de;for(Se=0;Se<41;Se++)qe=(J=(Te=P+(Ae=Se/40)*Xe)+Ae*((Ge=V+Ae*ot)-Te))+Ae*(Ge+Ae*(se+Ae*mt-Ge)-J),Ee=(Ze=(De=q+Ae*et)+Ae*((ye=Z+Ae*ct)-De))+Ae*(ye+Ae*(de+Ae*Je-ye)-Ze),Se==0?(Ce=qe,Oe=Ee,ke=qe,ze=Ee):(Ce=Math.min(Ce,qe),Oe=Math.min(Oe,Ee),ke=Math.max(ke,qe),ze=Math.max(ze,Ee));return new l(Math.round(Ce),Math.round(Oe),Math.round(ke-Ce),Math.round(ze-Oe))},ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,q,V=(P=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:q}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(Ye.API),function(e){var t=function(s){var o,l,c,d,p,m,g,f,N,y;for(l=[],c=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>c;c+=4)(p=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(m=(p=((p=((p=((p=(p-(y=p%85))/85)-(N=p%85))/85)-(f=p%85))/85)-(g=p%85))/85)%85,l.push(m+33,g+33,f+33,N+33,y+33)):l.push(122);return function(j,x){for(var w=x;w>0;w--)j.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var o,l,c,d,p,m=String,g="length",f=255,N="charCodeAt",y="slice",j="replace";for(s[y](-2),s=s[y](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),c=[],d=0,p=(s+=o="uuuuu"[y](s[g]%5||5))[g];p>d;d+=5)l=52200625*(s[N](d)-33)+614125*(s[N](d+1)-33)+7225*(s[N](d+2)-33)+85*(s[N](d+3)-33)+(s[N](d+4)-33),c.push(f&l>>24,f&l>>16,f&l>>8,f&l);return function(x,w){for(var _=w;_>0;_--)x.pop()}(c,o[g]),m.fromCharCode.apply(m,c)},n=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return s=(o=Fd(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var l=0,c=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(Ye.API),function(e){e.loadFile=function(t,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,p){var m=new XMLHttpRequest,g=0,f=function(N){var y=N.length,j=[],x=String.fromCharCode;for(g=0;g<y;g+=1)j.push(x(255&N.charCodeAt(g)));return j.join("")};if(m.open("GET",c,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?p(f(this.responseText)):p(void 0)}),m.send(null),d&&m.status===200)return f(m.responseText)}(a,s,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Ye.API),function(e){function t(){return(Ke.html2canvas?Promise.resolve(Ke.html2canvas):Pd(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Ke.DOMPurify?Promise.resolve(Ke.DOMPurify):Pd(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=dt(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,p){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),g=d.firstChild;g;g=g.nextSibling)p!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||m.appendChild(c(g,p));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var g=0;g<d.length;++g){var f=d[g],N=f.src.find(function(y){return y.format==="truetype"});N&&c.addFont(N.url,f.ref.name,f.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||Ye.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,p){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,d),m}).then(d,p).then(function(m){return c.updateProgress(1),m})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=c.call(d,o,l);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ye.getPageSize=function(o,l,c){if(dt(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var p,m=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var f,N=0,y=0;if(g.hasOwnProperty(m))N=g[m][1]/p,y=g[m][0]/p;else try{N=c[1],y=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",y>N&&(f=y,y=N,N=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",N>y&&(f=y,y=N,N=f)}return{width:y,height:N,unit:l,k:p,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Wd):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(Ye.API),Ye.API.addJS=function(e){return fp=e,this.internal.events.subscribe("postPutResources",function(){Kl=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Kl+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),hp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fp+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Kl!==void 0&&hp!==void 0&&this.internal.out("/Names <</JavaScript "+Kl+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,p=[];for(s=0;s<d;s++){var m=r.internal.newObject();p.push(m);var g=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<p.length;s++)r.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Ye.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,o,l){var c,d=this.decode.DCT_DECODE,p=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(m){for(var g,f=256*m.charCodeAt(4)+m.charCodeAt(5),N=m.length,y={width:0,height:0,numcomponents:1},j=4;j<N;j+=2){if(j+=f,t.indexOf(m.charCodeAt(j+1))!==-1){g=256*m.charCodeAt(j+5)+m.charCodeAt(j+6),y={width:256*m.charCodeAt(j+7)+m.charCodeAt(j+8),height:g,numcomponents:m.charCodeAt(j+9)};break}f=256*m.charCodeAt(j+2)+m.charCodeAt(j+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}p={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:a}}return p}}(Ye.API);var ri,Xl,pp,mp,gp,ey=function(){var e,t,r;function n(s){var o,l,c,d,p,m,g,f,N,y,j,x,w,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(o=this.readUInt32(),N=(function(){var E,A;for(A=[],E=0;E<4;++E)A.push(String.fromCharCode(this.data[this.pos++]));return A}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),d=this.readUInt16()||100,m.delay=1e3*p/d,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,o-=4),s=(m!=null?m.data:void 0)||this.imgData,x=0;0<=o?x<o:x>o;0<=o?++x:--x)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((y=c-this.transparency.indexed.length)>0)for(w=0;0<=y?w<y:w>y;0<=y?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(j=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,j.slice(0,g)),this.text[f]=String.fromCharCode.apply(String,j.slice(g+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var o,l;for(l=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(m,g,f,N){var y,j,x,w,_,E,A,B,T,C,$,H,L,D,F,U,ee,te,re,Q,Y,X=Math.ceil((d.width-m)/f),ce=Math.ceil((d.height-g)/N),P=d.width==X&&d.height==ce;for(D=o*X,H=P?l:new Uint8Array(D*ce),E=s.length,L=0,j=0;L<ce&&c<E;){switch(s[c++]){case 0:for(w=ee=0;ee<D;w=ee+=1)H[j++]=s[c++];break;case 1:for(w=te=0;te<D;w=te+=1)y=s[c++],_=w<o?0:H[j-o],H[j++]=(y+_)%256;break;case 2:for(w=re=0;re<D;w=re+=1)y=s[c++],x=(w-w%o)/o,F=L&&H[(L-1)*D+x*o+w%o],H[j++]=(F+y)%256;break;case 3:for(w=Q=0;Q<D;w=Q+=1)y=s[c++],x=(w-w%o)/o,_=w<o?0:H[j-o],F=L&&H[(L-1)*D+x*o+w%o],H[j++]=(y+Math.floor((_+F)/2))%256;break;case 4:for(w=Y=0;Y<D;w=Y+=1)y=s[c++],x=(w-w%o)/o,_=w<o?0:H[j-o],L===0?F=U=0:(F=H[(L-1)*D+x*o+w%o],U=x&&H[(L-1)*D+(x-1)*o+w%o]),A=_+F-U,B=Math.abs(A-_),C=Math.abs(A-F),$=Math.abs(A-U),T=B<=C&&B<=$?_:C<=$?F:U,H[j++]=(y+T)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var q=((g+L*N)*d.width+m)*o,V=L*D;for(w=0;w<X;w+=1){for(var Z=0;Z<o;Z+=1)l[q++]=H[V++];q+=(f-1)*o}}L++}}return s=kb(s),d.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),l},n.prototype.decodePalette=function(){var s,o,l,c,d,p,m,g,f;for(l=this.palette,p=this.transparency.indexed||[],d=new Uint8Array((p.length||0)+l.length),c=0,s=0,o=m=0,g=l.length;m<g;o=m+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(f=p[s++])!=null?f:255;return d},n.prototype.copyToImageData=function(s,o){var l,c,d,p,m,g,f,N,y,j,x;if(c=this.colors,y=null,l=this.hasAlphaChannel,this.palette.length&&(y=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),c=4,l=!0),N=(d=s.data||s).length,m=y||o,p=g=0,c===1)for(;p<N;)f=y?4*o[p/4]:g,j=m[f++],d[p++]=j,d[p++]=j,d[p++]=j,d[p++]=l?m[f++]:255,g=f;else for(;p<N;)f=y?4*o[p/4]:g,d[p++]=m[f++],d[p++]=m[f++],d[p++]=m[f++],d[p++]=l?m[f++]:255,g=f},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Ke)==="[object Window]"){try{t=Ke.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var o;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var o,l,c,d,p,m,g,f;if(this.animation){for(f=[],l=p=0,m=(g=this.animation.frames).length;p<m;l=++p)o=g[l],c=s.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,f.push(o.image=e(c));return f}},n.prototype.renderFrame=function(s,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(s){var o,l,c,d,p,m,g=this;return l=0,m=this.animation,d=m.numFrames,c=m.frames,p=m.numPlays,(o=function(){var f,N;if(f=l++%d,N=c[f],g.renderFrame(s,f),d>1&&l/d<p)return g.animation._timeout=setTimeout(o,N.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var o,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ty(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=o,t+=3*o);var d=!0,p=[],m=0,g=null,f=0,N=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var y=e[t++];m=e[t++]|e[t++]<<8,g=e[t++],!(1&y)&&(g=null),f=y>>2&7,t++;break;case 254:for(;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var j=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,E=e[t++],A=E>>6&1,B=1<<(7&E)+1,T=l,C=c,$=!1;E>>7&&($=!0,T=t,C=B,t+=3*B);var H=t;for(t++;;){var L;if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}p.push({x:j,y:x,width:w,height:_,has_local_palette:$,palette_offset:T,palette_size:C,data_offset:H,data_length:t-H,transparent_index:g,interlaced:!!A,delay:m,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(D){if(D<0||D>=p.length)throw new Error("Frame index out of range.");return p[D]},this.decodeAndBlitFrameBGRA=function(D,F){var U=this.frameInfo(D),ee=U.width*U.height,te=new Uint8Array(ee);vp(e,U.data_offset,te,ee);var re=U.palette_offset,Q=U.transparent_index;Q===null&&(Q=256);var Y=U.width,X=r-Y,ce=Y,P=4*(U.y*r+U.x),q=4*((U.y+U.height)*r+U.x),V=P,Z=4*X;U.interlaced===!0&&(Z+=4*r*7);for(var se=8,de=0,fe=te.length;de<fe;++de){var ge=te[de];if(ce===0&&(ce=Y,(V+=Z)>=q&&(Z=4*X+4*r*(se-1),V=P+(Y+X)*(se<<1),se>>=1)),ge===Q)V+=4;else{var Ae=e[re+3*ge],Se=e[re+3*ge+1],Te=e[re+3*ge+2];F[V++]=Te,F[V++]=Se,F[V++]=Ae,F[V++]=255}--ce}},this.decodeAndBlitFrameRGBA=function(D,F){var U=this.frameInfo(D),ee=U.width*U.height,te=new Uint8Array(ee);vp(e,U.data_offset,te,ee);var re=U.palette_offset,Q=U.transparent_index;Q===null&&(Q=256);var Y=U.width,X=r-Y,ce=Y,P=4*(U.y*r+U.x),q=4*((U.y+U.height)*r+U.x),V=P,Z=4*X;U.interlaced===!0&&(Z+=4*r*7);for(var se=8,de=0,fe=te.length;de<fe;++de){var ge=te[de];if(ce===0&&(ce=Y,(V+=Z)>=q&&(Z=4*X+4*r*(se-1),V=P+(Y+X)*(se<<1),se>>=1)),ge===Q)V+=4;else{var Ae=e[re+3*ge],Se=e[re+3*ge+1],Te=e[re+3*ge+2];F[V++]=Ae,F[V++]=Se,F[V++]=Te,F[V++]=255}--ce}}}function vp(e,t,r,n){for(var a=e[t++],s=1<<a,o=s+1,l=o+1,c=a+1,d=(1<<c)-1,p=0,m=0,g=0,f=e[t++],N=new Int32Array(4096),y=null;;){for(;p<16&&f!==0;)m|=e[t++]<<p,p+=8,f===1?f=e[t++]:--f;if(p<c)break;var j=m&d;if(m>>=c,p-=c,j!==s){if(j===o)break;for(var x=j<l?j:y,w=0,_=x;_>s;)_=N[_]>>8,++w;var E=_;if(g+w+(x!==j?1:0)>n)return void _t.log("Warning, gif stream longer than expected.");r[g++]=E;var A=g+=w;for(x!==j&&(r[g++]=E),_=x;w--;)_=N[_],r[--A]=255&_,_>>=8;y!==null&&l<4096&&(N[l++]=y<<8|E,l>=d+1&&c<12&&(++c,d=d<<1|1)),y=j}else l=o+1,d=(1<<(c=a+1))-1,y=null}return g!==n&&_t.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function cd(e){var t,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(64),m=new Array(65535),g=new Array(65535),f=new Array(64),N=new Array(64),y=[],j=0,x=7,w=new Array(64),_=new Array(64),E=new Array(64),A=new Array(256),B=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function te(P,q){for(var V=0,Z=0,se=new Array,de=1;de<=16;de++){for(var fe=1;fe<=P[de];fe++)se[q[Z]]=[],se[q[Z]][0]=V,se[q[Z]][1]=de,Z++,V++;V*=2}return se}function re(P){for(var q=P[0],V=P[1]-1;V>=0;)q&1<<V&&(j|=1<<x),V--,--x<0&&(j==255?(Q(255),Q(0)):Q(j),x=7,j=0)}function Q(P){y.push(P)}function Y(P){Q(P>>8&255),Q(255&P)}function X(P,q,V,Z,se){for(var de,fe=se[0],ge=se[240],Ae=function(Ee,Ce){var Oe,ke,ze,Xe,et,ot,ct,mt,Je,lt,Ie=0;for(Je=0;Je<8;++Je){Oe=Ee[Ie],ke=Ee[Ie+1],ze=Ee[Ie+2],Xe=Ee[Ie+3],et=Ee[Ie+4],ot=Ee[Ie+5],ct=Ee[Ie+6];var hr=Oe+(mt=Ee[Ie+7]),pt=Oe-mt,pn=ke+ct,jt=ke-ct,Mt=ze+ot,Pn=ze-ot,vt=Xe+et,Wa=Xe-et,Rt=hr+vt,mn=hr-vt,Qn=pn+Mt,Ft=pn-Mt;Ee[Ie]=Rt+Qn,Ee[Ie+4]=Rt-Qn;var tt=.707106781*(Ft+mn);Ee[Ie+2]=mn+tt,Ee[Ie+6]=mn-tt;var bt=.382683433*((Rt=Wa+Pn)-(Ft=jt+pt)),Ha=.5411961*Rt+bt,lr=1.306562965*Ft+bt,kn=.707106781*(Qn=Pn+jt),On=pt+kn,Ve=pt-kn;Ee[Ie+5]=Ve+Ha,Ee[Ie+3]=Ve-Ha,Ee[Ie+1]=On+lr,Ee[Ie+7]=On-lr,Ie+=8}for(Ie=0,Je=0;Je<8;++Je){Oe=Ee[Ie],ke=Ee[Ie+8],ze=Ee[Ie+16],Xe=Ee[Ie+24],et=Ee[Ie+32],ot=Ee[Ie+40],ct=Ee[Ie+48];var gn=Oe+(mt=Ee[Ie+56]),Tn=Oe-mt,Dr=ke+ct,er=ke-ct,Xt=ze+ot,Ur=ze-ot,As=Xe+et,ea=Xe-et,vn=gn+As,bn=gn-As,yn=Dr+Xt,Mn=Dr-Xt;Ee[Ie]=vn+yn,Ee[Ie+32]=vn-yn;var Jr=.707106781*(Mn+bn);Ee[Ie+16]=bn+Jr,Ee[Ie+48]=bn-Jr;var In=.382683433*((vn=ea+Ur)-(Mn=er+Tn)),Ga=.5411961*vn+In,Es=1.306562965*Mn+In,Cs=.707106781*(yn=Ur+er),Ls=Tn+Cs,Ds=Tn-Cs;Ee[Ie+40]=Ds+Ga,Ee[Ie+24]=Ds-Ga,Ee[Ie+8]=Ls+Es,Ee[Ie+56]=Ls-Es,Ie++}for(Je=0;Je<64;++Je)lt=Ee[Je]*Ce[Je],f[Je]=lt>0?lt+.5|0:lt-.5|0;return f}(P,q),Se=0;Se<64;++Se)N[T[Se]]=Ae[Se];var Te=N[0]-V;V=N[0],Te==0?re(Z[0]):(re(Z[g[de=32767+Te]]),re(m[de]));for(var De=63;De>0&&N[De]==0;)De--;if(De==0)return re(fe),V;for(var Ge,ye=1;ye<=De;){for(var J=ye;N[ye]==0&&ye<=De;)++ye;var Ze=ye-J;if(Ze>=16){Ge=Ze>>4;for(var qe=1;qe<=Ge;++qe)re(ge);Ze&=15}de=32767+N[ye],re(se[(Ze<<4)+g[de]]),re(m[de]),ye++}return De!=63&&re(fe),V}function ce(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(q){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var se=o((V[Z]*q+50)/100);se=Math.min(Math.max(se,1),255),l[T[Z]]=se}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var ge=o((de[fe]*q+50)/100);ge=Math.min(Math.max(ge,1),255),c[T[fe]]=ge}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,Te=0;Te<8;Te++)for(var De=0;De<8;De++)d[Se]=1/(l[T[Se]]*Ae[Te]*Ae[De]*8),p[Se]=1/(c[T[Se]]*Ae[Te]*Ae[De]*8),Se++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,q){q&&ce(q),y=new Array,j=0,x=7,Y(65496),Y(65504),Y(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),Y(1),Y(1),Q(0),Q(0),function(){Y(65499),Y(132),Q(0);for(var ke=0;ke<64;ke++)Q(l[ke]);Q(1);for(var ze=0;ze<64;ze++)Q(c[ze])}(),function(ke,ze){Y(65472),Y(17),Q(8),Y(ze),Y(ke),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(P.width,P.height),function(){Y(65476),Y(418),Q(0);for(var ke=0;ke<16;ke++)Q(C[ke+1]);for(var ze=0;ze<=11;ze++)Q($[ze]);Q(16);for(var Xe=0;Xe<16;Xe++)Q(H[Xe+1]);for(var et=0;et<=161;et++)Q(L[et]);Q(1);for(var ot=0;ot<16;ot++)Q(D[ot+1]);for(var ct=0;ct<=11;ct++)Q(F[ct]);Q(17);for(var mt=0;mt<16;mt++)Q(U[mt+1]);for(var Je=0;Je<=161;Je++)Q(ee[Je])}(),Y(65498),Y(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var V=0,Z=0,se=0;j=0,x=7,this.encode.displayName="_encode_";for(var de,fe,ge,Ae,Se,Te,De,Ge,ye,J=P.data,Ze=P.width,qe=P.height,Ee=4*Ze,Ce=0;Ce<qe;){for(de=0;de<Ee;){for(Se=Ee*Ce+de,De=-1,Ge=0,ye=0;ye<64;ye++)Te=Se+(Ge=ye>>3)*Ee+(De=4*(7&ye)),Ce+Ge>=qe&&(Te-=Ee*(Ce+1+Ge-qe)),de+De>=Ee&&(Te-=de+De-Ee+4),fe=J[Te++],ge=J[Te++],Ae=J[Te++],w[ye]=(B[fe]+B[ge+256>>0]+B[Ae+512>>0]>>16)-128,_[ye]=(B[fe+768>>0]+B[ge+1024>>0]+B[Ae+1280>>0]>>16)-128,E[ye]=(B[fe+1280>>0]+B[ge+1536>>0]+B[Ae+1792>>0]>>16)-128;V=X(w,d,V,t,n),Z=X(_,p,Z,r,a),se=X(E,p,se,r,a),de+=32}Ce+=8}if(x>=0){var Oe=[];Oe[1]=x+1,Oe[0]=(1<<x+1)-1,re(Oe)}return Y(65497),new Uint8Array(y)},e=e||50,function(){for(var P=String.fromCharCode,q=0;q<256;q++)A[q]=P(q)}(),t=te(C,$),r=te(D,F),n=te(H,L),a=te(U,ee),function(){for(var P=1,q=2,V=1;V<=15;V++){for(var Z=P;Z<q;Z++)g[32767+Z]=V,m[32767+Z]=[],m[32767+Z][1]=V,m[32767+Z][0]=Z;for(var se=-(q-1);se<=-P;se++)g[32767+se]=V,m[32767+se]=[],m[32767+se][1]=V,m[32767+se][0]=q-1+se;P<<=1,q<<=1}}(),function(){for(var P=0;P<256;P++)B[P]=19595*P,B[P+256>>0]=38470*P,B[P+512>>0]=7471*P+32768,B[P+768>>0]=-11059*P,B[P+1024>>0]=-21709*P,B[P+1280>>0]=32768*P+8421375,B[P+1536>>0]=-27439*P,B[P+1792>>0]=-5329*P}(),ce(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function An(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bp(e){function t(C){if(!C)throw Error("assert :P")}function r(C,$,H){for(var L=0;4>L;L++)if(C[$+L]!=H.charCodeAt(L))return!0;return!1}function n(C,$,H,L,D){for(var F=0;F<D;F++)C[$+F]=H[L+F]}function a(C,$,H,L){for(var D=0;D<L;D++)C[$+D]=H}function s(C){return new Int32Array(C)}function o(C,$){for(var H=[],L=0;L<C;L++)H.push(new $);return H}function l(C,$){var H=[];return function L(D,F,U){for(var ee=U[F],te=0;te<ee&&(D.push(U.length>F+1?[]:new $),!(U.length<F+1));te++)L(D[te],F+1,U)}(H,0,C),H}var c=function(){var C=this;function $(u,h){for(var b=1<<h-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function H(u,h,b,S,k){t(!(S%b));do u[h+(S-=b)]=k;while(0<S)}function L(u,h,b,S,k){if(t(2328>=k),512>=k)var M=s(512);else if((M=s(k))==null)return 0;return function(I,R,z,G,ae,pe){var me,le,Ne=R,ve=1<<z,ie=s(16),oe=s(16);for(t(ae!=0),t(G!=null),t(I!=null),t(0<z),le=0;le<ae;++le){if(15<G[le])return 0;++ie[G[le]]}if(ie[0]==ae)return 0;for(oe[1]=0,me=1;15>me;++me){if(ie[me]>1<<me)return 0;oe[me+1]=oe[me]+ie[me]}for(le=0;le<ae;++le)me=G[le],0<G[le]&&(pe[oe[me]++]=le);if(oe[15]==1)return(G=new D).g=0,G.value=pe[0],H(I,Ne,1,ve,G),ve;var xe,je=-1,we=ve-1,Fe=0,Pe=1,He=1,Me=1<<z;for(le=0,me=1,ae=2;me<=z;++me,ae<<=1){if(Pe+=He<<=1,0>(He-=ie[me]))return 0;for(;0<ie[me];--ie[me])(G=new D).g=me,G.value=pe[le++],H(I,Ne+Fe,ae,Me,G),Fe=$(Fe,me)}for(me=z+1,ae=2;15>=me;++me,ae<<=1){if(Pe+=He<<=1,0>(He-=ie[me]))return 0;for(;0<ie[me];--ie[me]){if(G=new D,(Fe&we)!=je){for(Ne+=Me,xe=1<<(je=me)-z;15>je&&!(0>=(xe-=ie[je]));)++je,xe<<=1;ve+=Me=1<<(xe=je-z),I[R+(je=Fe&we)].g=xe+z,I[R+je].value=Ne-R-je}G.g=me-z,G.value=pe[le++],H(I,Ne+(Fe>>z),ae,Me,G),Fe=$(Fe,me)}}return Pe!=2*oe[15]-1?0:ve}(u,h,b,S,k,M)}function D(){this.value=this.g=0}function F(){this.value=this.g=0}function U(){this.G=o(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(cr,F)}function ee(u,h,b,S){t(u!=null),t(h!=null),t(2147483648>S),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=h,u.pa=b,u.Jd=h,u.Yc=b+S,u.Zc=4<=S?b+S-4+1:b,de(u)}function te(u,h){for(var b=0;0<h--;)b|=ge(u,128)<<h;return b}function re(u,h){var b=te(u,h);return fe(u)?-b:b}function Q(u,h,b,S){var k,M=0;for(t(u!=null),t(h!=null),t(4294967288>S),u.Sb=S,u.Ra=0,u.u=0,u.h=0,4<S&&(S=4),k=0;k<S;++k)M+=h[b+k]<<8*k;u.Ra=M,u.bb=S,u.oa=h,u.pa=b}function Y(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Hs-8>>>0,++u.bb,u.u-=8;V(u)&&(u.h=1,u.u=0)}function X(u,h){if(t(0<=h),!u.h&&h<=Ws){var b=q(u)&Us[h];return u.u+=h,Y(u),b}return u.h=1,u.u=0}function ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(u){return u.Ra>>>(u.u&Hs-1)>>>0}function V(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Hs}function Z(u,h){u.u=h,u.h=V(u)}function se(u){u.u>=Qi&&(t(u.u>=Qi),Y(u))}function de(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function fe(u){return te(u,1)}function ge(u,h){var b=u.Ca;0>u.b&&de(u);var S=u.b,k=b*h>>>8,M=(u.I>>>S>k)+0;for(M?(b-=k,u.I-=k+1<<S>>>0):b=k+1,S=b,k=0;256<=S;)k+=8,S>>=8;return S=7^k+kr[S],u.b-=S,u.Ca=(b<<S)-1,M}function Ae(u,h,b){u[h+0]=b>>24&255,u[h+1]=b>>16&255,u[h+2]=b>>8&255,u[h+3]=b>>0&255}function Se(u,h){return u[h+0]<<0|u[h+1]<<8}function Te(u,h){return Se(u,h)|u[h+2]<<16}function De(u,h){return Se(u,h)|Se(u,h+2)<<16}function Ge(u,h){var b=1<<h;return t(u!=null),t(0<h),u.X=s(b),u.X==null?0:(u.Mb=32-h,u.Xa=h,1)}function ye(u,h){t(u!=null),t(h!=null),t(u.Xa==h.Xa),n(h.X,0,u.X,0,1<<h.Xa)}function J(){this.X=[],this.Xa=this.Mb=0}function Ze(u,h,b,S){t(b!=null),t(S!=null);var k=b[0],M=S[0];return k==0&&(k=(u*M+h/2)/h),M==0&&(M=(h*k+u/2)/u),0>=k||0>=M?0:(b[0]=k,S[0]=M,1)}function qe(u,h){return u+(1<<h)-1>>>h}function Ee(u,h){return((4278255360&u)+(4278255360&h)>>>0&4278255360)+((16711935&u)+(16711935&h)>>>0&16711935)>>>0}function Ce(u,h){C[h]=function(b,S,k,M,I,R,z){var G;for(G=0;G<I;++G){var ae=C[u](R[z+G-1],k,M+G);R[z+G]=Ee(b[S+G],ae)}}}function Oe(){this.ud=this.hd=this.jd=0}function ke(u,h){return((4278124286&(u^h))>>>1)+(u&h)>>>0}function ze(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function Xe(u,h){return ze(u+(u-h+.5>>1))}function et(u,h,b){return Math.abs(h-b)-Math.abs(u-b)}function ot(u,h,b,S,k,M,I){for(S=M[I-1],b=0;b<k;++b)M[I+b]=S=Ee(u[h+b],S)}function ct(u,h,b,S,k){var M;for(M=0;M<b;++M){var I=u[h+M],R=I>>8&255,z=16711935&(z=(z=16711935&I)+((R<<16)+R));S[k+M]=(4278255360&I)+z>>>0}}function mt(u,h){h.jd=u>>0&255,h.hd=u>>8&255,h.ud=u>>16&255}function Je(u,h,b,S,k,M){var I;for(I=0;I<S;++I){var R=h[b+I],z=R>>>8,G=R,ae=255&(ae=(ae=R>>>16)+((u.jd<<24>>24)*(z<<24>>24)>>>5));G=255&(G=(G=G+((u.hd<<24>>24)*(z<<24>>24)>>>5))+((u.ud<<24>>24)*(ae<<24>>24)>>>5)),k[M+I]=(4278255360&R)+(ae<<16)+G}}function lt(u,h,b,S,k){C[h]=function(M,I,R,z,G,ae,pe,me,le){for(z=pe;z<me;++z)for(pe=0;pe<le;++pe)G[ae++]=k(R[S(M[I++])])},C[u]=function(M,I,R,z,G,ae,pe){var me=8>>M.b,le=M.Ea,Ne=M.K[0],ve=M.w;if(8>me)for(M=(1<<M.b)-1,ve=(1<<me)-1;I<R;++I){var ie,oe=0;for(ie=0;ie<le;++ie)ie&M||(oe=S(z[G++])),ae[pe++]=k(Ne[oe&ve]),oe>>=me}else C["VP8LMapColor"+b](z,G,Ne,ve,ae,pe,I,R,le)}}function Ie(u,h,b,S,k){for(b=h+b;h<b;){var M=u[h++];S[k++]=M>>16&255,S[k++]=M>>8&255,S[k++]=M>>0&255}}function hr(u,h,b,S,k){for(b=h+b;h<b;){var M=u[h++];S[k++]=M>>16&255,S[k++]=M>>8&255,S[k++]=M>>0&255,S[k++]=M>>24&255}}function pt(u,h,b,S,k){for(b=h+b;h<b;){var M=(I=u[h++])>>16&240|I>>12&15,I=I>>0&240|I>>28&15;S[k++]=M,S[k++]=I}}function pn(u,h,b,S,k){for(b=h+b;h<b;){var M=(I=u[h++])>>16&248|I>>13&7,I=I>>5&224|I>>3&31;S[k++]=M,S[k++]=I}}function jt(u,h,b,S,k){for(b=h+b;h<b;){var M=u[h++];S[k++]=M>>0&255,S[k++]=M>>8&255,S[k++]=M>>16&255}}function Mt(u,h,b,S,k,M){if(M==0)for(b=h+b;h<b;)Ae(S,((M=u[h++])[0]>>24|M[1]>>8&65280|M[2]<<8&16711680|M[3]<<24)>>>0),k+=32;else n(S,k,u,h,b)}function Pn(u,h){C[h][0]=C[u+"0"],C[h][1]=C[u+"1"],C[h][2]=C[u+"2"],C[h][3]=C[u+"3"],C[h][4]=C[u+"4"],C[h][5]=C[u+"5"],C[h][6]=C[u+"6"],C[h][7]=C[u+"7"],C[h][8]=C[u+"8"],C[h][9]=C[u+"9"],C[h][10]=C[u+"10"],C[h][11]=C[u+"11"],C[h][12]=C[u+"12"],C[h][13]=C[u+"13"],C[h][14]=C[u+"0"],C[h][15]=C[u+"0"]}function vt(u){return u==Ru||u==Fu||u==kl||u==$u}function Wa(){this.eb=[],this.size=this.A=this.fb=0}function Rt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function mn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Wa,this.f.kb=new Rt,this.sd=null}function Qn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ft(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function tt(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function bt(u,h){var b=u.T,S=h.ba.f.RGBA,k=S.eb,M=S.fb+u.ka*S.A,I=nn[h.ba.S],R=u.y,z=u.O,G=u.f,ae=u.N,pe=u.ea,me=u.W,le=h.cc,Ne=h.dc,ve=h.Mc,ie=h.Nc,oe=u.ka,xe=u.ka+u.T,je=u.U,we=je+1>>1;for(oe==0?I(R,z,null,null,G,ae,pe,me,G,ae,pe,me,k,M,null,null,je):(I(h.ec,h.fc,R,z,le,Ne,ve,ie,G,ae,pe,me,k,M-S.A,k,M,je),++b);oe+2<xe;oe+=2)le=G,Ne=ae,ve=pe,ie=me,ae+=u.Rc,me+=u.Rc,M+=2*S.A,I(R,(z+=2*u.fa)-u.fa,R,z,le,Ne,ve,ie,G,ae,pe,me,k,M-S.A,k,M,je);return z+=u.fa,u.j+xe<u.o?(n(h.ec,h.fc,R,z,je),n(h.cc,h.dc,G,ae,we),n(h.Mc,h.Nc,pe,me,we),b--):1&xe||I(R,z,null,null,G,ae,pe,me,G,ae,pe,me,k,M+S.A,null,null,je),b}function Ha(u,h,b){var S=u.F,k=[u.J];if(S!=null){var M=u.U,I=h.ba.S,R=I==Pl||I==kl;h=h.ba.f.RGBA;var z=[0],G=u.ka;z[0]=u.T,u.Kb&&(G==0?--z[0]:(--G,k[0]-=u.width),u.j+u.ka+u.T==u.o&&(z[0]=u.o-u.j-G));var ae=h.eb;G=h.fb+G*h.A,u=Ct(S,k[0],u.width,M,z,ae,G+(R?0:3),h.A),t(b==z),u&&vt(I)&&tn(ae,G,R,M,z,h.A)}return 0}function lr(u){var h=u.ma,b=h.ba.S,S=11>b,k=b==Ll||b==Dl||b==Pl||b==Iu||b==12||vt(b);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Ji(h.Oa,u,k?11:12))return 0;if(k&&vt(b)&&_e(),u.da)alert("todo:use_scaling");else{if(S){if(h.Ib=tt,u.Kb){if(b=u.U+1>>1,h.memory=s(u.U+2*b),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+u.U,h.Mc=h.cc,h.Nc=h.dc+b,h.Ib=bt,_e()}}else alert("todo:EmitYUV");k&&(h.Jb=Ha,S&&he())}if(S&&!Ef){for(u=0;256>u;++u)R1[u]=89858*(u-128)+Tl>>Ol,B1[u]=-22014*(u-128)+Tl,$1[u]=-45773*(u-128),F1[u]=113618*(u-128)+Tl>>Ol;for(u=io;u<zu;++u)h=76283*(u-16)+Tl>>Ol,q1[u-io]=Wr(h,255),z1[u-io]=Wr(h+8>>4,15);Ef=1}return 1}function kn(u){var h=u.ma,b=u.U,S=u.T;return t(!(1&u.ka)),0>=b||0>=S?0:(b=h.Ib(u,h),h.Jb!=null&&h.Jb(u,h,b),h.Dc+=b,1)}function On(u){u.ma.memory=null}function Ve(u,h,b,S){return X(u,8)!=47?0:(h[0]=X(u,14)+1,b[0]=X(u,14)+1,S[0]=X(u,1),X(u,3)!=0?0:!u.h)}function gn(u,h){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+X(h,b)+1}function Tn(u,h){return 120<h?h-120:1<=(b=((b=j1[h-1])>>4)*u+(8-(15&b)))?b:1;var b}function Dr(u,h,b){var S=q(b),k=u[h+=255&S].g-8;return 0<k&&(Z(b,b.u+8),S=q(b),h+=u[h].value,h+=S&(1<<k)-1),Z(b,b.u+u[h].g),u[h].value}function er(u,h,b){return b.g+=u.g,b.value+=u.value<<h>>>0,t(8>=b.g),u.g}function Xt(u,h,b){var S=u.xc;return t((h=S==0?0:u.vc[u.md*(b>>S)+(h>>S)])<u.Wb),u.Ya[h]}function Ur(u,h,b,S){var k=u.ab,M=u.c*h,I=u.C;h=I+h;var R=b,z=S;for(S=u.Ta,b=u.Ua;0<k--;){var G=u.gc[k],ae=I,pe=h,me=R,le=z,Ne=(z=S,R=b,G.Ea);switch(t(ae<pe),t(pe<=G.nc),G.hc){case 2:Nl(me,le,(pe-ae)*Ne,z,R);break;case 0:var ve=ae,ie=pe,oe=z,xe=R,je=(Me=G).Ea;ve==0&&(Tu(me,le,null,null,1,oe,xe),ot(me,le+1,0,0,je-1,oe,xe+1),le+=je,xe+=je,++ve);for(var we=1<<Me.b,Fe=we-1,Pe=qe(je,Me.b),He=Me.K,Me=Me.w+(ve>>Me.b)*Pe;ve<ie;){var gt=He,yt=Me,ft=1;for(eo(me,le,oe,xe-je,1,oe,xe);ft<je;){var ut=(ft&~Fe)+we;ut>je&&(ut=je),(0,wa[gt[yt++]>>8&15])(me,le+ +ft,oe,xe+ft-je,ut-ft,oe,xe+ft),ft=ut}le+=je,xe+=je,++ve&Fe||(Me+=Pe)}pe!=G.nc&&n(z,R-Ne,z,R+(pe-ae-1)*Ne,Ne);break;case 1:for(Ne=me,ie=le,je=(me=G.Ea)-(xe=me&~(oe=(le=1<<G.b)-1)),ve=qe(me,G.b),we=G.K,G=G.w+(ae>>G.b)*ve;ae<pe;){for(Fe=we,Pe=G,He=new Oe,Me=ie+xe,gt=ie+me;ie<Me;)mt(Fe[Pe++],He),Ja(He,Ne,ie,le,z,R),ie+=le,R+=le;ie<gt&&(mt(Fe[Pe++],He),Ja(He,Ne,ie,je,z,R),ie+=je,R+=je),++ae&oe||(G+=ve)}break;case 3:if(me==z&&le==R&&0<G.b){for(ie=z,me=Ne=R+(pe-ae)*Ne-(xe=(pe-ae)*qe(G.Ea,G.b)),le=z,oe=R,ve=[],xe=(je=xe)-1;0<=xe;--xe)ve[xe]=le[oe+xe];for(xe=je-1;0<=xe;--xe)ie[me+xe]=ve[xe];Zr(G,ae,pe,z,Ne,z,R)}else Zr(G,ae,pe,me,le,z,R)}R=S,z=b}z!=b&&n(S,b,R,z,M)}function As(u,h){var b=u.V,S=u.Ba+u.c*u.C,k=h-u.C;if(t(h<=u.l.o),t(16>=k),0<k){var M=u.l,I=u.Ta,R=u.Ua,z=M.width;if(Ur(u,k,b,S),k=R=[R],t((b=u.C)<(S=h)),t(M.v<M.va),S>M.o&&(S=M.o),b<M.j){var G=M.j-b;b=M.j,k[0]+=G*z}if(b>=S?b=0:(k[0]+=4*M.v,M.ka=b-M.j,M.U=M.va-M.v,M.T=S-b,b=1),b){if(R=R[0],11>(b=u.ca).S){var ae=b.f.RGBA,pe=(S=b.S,k=M.U,M=M.T,G=ae.eb,ae.A),me=M;for(ae=ae.fb+u.Ma*ae.A;0<me--;){var le=I,Ne=R,ve=k,ie=G,oe=ae;switch(S){case Cl:Or(le,Ne,ve,ie,oe);break;case Ll:Sr(le,Ne,ve,ie,oe);break;case Ru:Sr(le,Ne,ve,ie,oe),tn(ie,oe,0,ve,1,0);break;case bf:aa(le,Ne,ve,ie,oe);break;case Dl:Mt(le,Ne,ve,ie,oe,1);break;case Fu:Mt(le,Ne,ve,ie,oe,1),tn(ie,oe,0,ve,1,0);break;case Pl:Mt(le,Ne,ve,ie,oe,0);break;case kl:Mt(le,Ne,ve,ie,oe,0),tn(ie,oe,1,ve,1,0);break;case Iu:Na(le,Ne,ve,ie,oe);break;case $u:Na(le,Ne,ve,ie,oe),Et(ie,oe,ve,1,0);break;case yf:na(le,Ne,ve,ie,oe);break;default:t(0)}R+=z,ae+=pe}u.Ma+=M}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=b.height)}}u.C=h,t(u.C<=u.i)}function ea(u){var h;if(0<u.ua)return 0;for(h=0;h<u.Wb;++h){var b=u.Ya[h].G,S=u.Ya[h].H;if(0<b[1][S[1]+0].g||0<b[2][S[2]+0].g||0<b[3][S[3]+0].g)return 0}return 1}function vn(u,h,b,S,k,M){if(u.Z!=0){var I=u.qd,R=u.rd;for(t(Aa[u.Z]!=null);h<b;++h)Aa[u.Z](I,R,S,k,S,k,M),I=S,R=k,k+=M;u.qd=I,u.rd=R}}function bn(u,h){var b=u.l.ma,S=b.Z==0||b.Z==1?u.l.j:u.C;if(S=u.C<S?S:u.C,t(h<=u.l.o),h>S){var k=u.l.width,M=b.ca,I=b.tb+k*S,R=u.V,z=u.Ba+u.c*S,G=u.gc;t(u.ab==1),t(G[0].hc==3),jl(G[0],S,h,R,z,M,I),vn(b,S,h,M,I,k)}u.C=u.Ma=h}function yn(u,h,b,S,k,M,I){var R=u.$/S,z=u.$%S,G=u.m,ae=u.s,pe=b+u.$,me=pe;k=b+S*k;var le=b+S*M,Ne=280+ae.ua,ve=u.Pb?R:16777216,ie=0<ae.ua?ae.Wa:null,oe=ae.wc,xe=pe<le?Xt(ae,z,R):null;t(u.C<M),t(le<=k);var je=!1;e:for(;;){for(;je||pe<le;){var we=0;if(R>=ve){var Fe=pe-b;t((ve=u).Pb),ve.wd=ve.m,ve.xd=Fe,0<ve.s.ua&&ye(ve.s.Wa,ve.s.vb),ve=R+_1}if(z&oe||(xe=Xt(ae,z,R)),t(xe!=null),xe.Qb&&(h[pe]=xe.qb,je=!0),!je)if(se(G),xe.jc){we=G,Fe=h;var Pe=pe,He=xe.pd[q(we)&cr-1];t(xe.jc),256>He.g?(Z(we,we.u+He.g),Fe[Pe]=He.value,we=0):(Z(we,we.u+He.g-256),t(256<=He.value),we=He.value),we==0&&(je=!0)}else we=Dr(xe.G[0],xe.H[0],G);if(G.h)break;if(je||256>we){if(!je)if(xe.nd)h[pe]=(xe.qb|we<<8)>>>0;else{if(se(G),je=Dr(xe.G[1],xe.H[1],G),se(G),Fe=Dr(xe.G[2],xe.H[2],G),Pe=Dr(xe.G[3],xe.H[3],G),G.h)break;h[pe]=(Pe<<24|je<<16|we<<8|Fe)>>>0}if(je=!1,++pe,++z>=S&&(z=0,++R,I!=null&&R<=M&&!(R%16)&&I(u,R),ie!=null))for(;me<pe;)we=h[me++],ie.X[(506832829*we&4294967295)>>>ie.Mb]=we}else if(280>we){if(we=gn(we-256,G),Fe=Dr(xe.G[4],xe.H[4],G),se(G),Fe=Tn(S,Fe=gn(Fe,G)),G.h)break;if(pe-b<Fe||k-pe<we)break e;for(Pe=0;Pe<we;++Pe)h[pe+Pe]=h[pe+Pe-Fe];for(pe+=we,z+=we;z>=S;)z-=S,++R,I!=null&&R<=M&&!(R%16)&&I(u,R);if(t(pe<=k),z&oe&&(xe=Xt(ae,z,R)),ie!=null)for(;me<pe;)we=h[me++],ie.X[(506832829*we&4294967295)>>>ie.Mb]=we}else{if(!(we<Ne))break e;for(je=we-280,t(ie!=null);me<pe;)we=h[me++],ie.X[(506832829*we&4294967295)>>>ie.Mb]=we;we=pe,t(!(je>>>(Fe=ie).Xa)),h[we]=Fe.X[je],je=!0}je||t(G.h==V(G))}if(u.Pb&&G.h&&pe<k)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&ye(u.s.vb,u.s.Wa);else{if(G.h)break e;I!=null&&I(u,R>M?M:R),u.a=0,u.$=pe-b}return 1}return u.a=3,0}function Mn(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var h=u.Wa;h!=null&&(h.X=null),u.vb=null,t(u!=null)}function Jr(){var u=new Ou;return u==null?null:(u.a=0,u.xb=Nf,Pn("Predictor","VP8LPredictors"),Pn("Predictor","VP8LPredictors_C"),Pn("PredictorAdd","VP8LPredictorsAdd"),Pn("PredictorAdd","VP8LPredictorsAdd_C"),Nl=ct,Ja=Je,Or=Ie,Sr=hr,Na=pt,na=pn,aa=jt,C.VP8LMapColor32b=Gs,C.VP8LMapColor8b=Sl,u)}function In(u,h,b,S,k){var M=1,I=[u],R=[h],z=S.m,G=S.s,ae=null,pe=0;e:for(;;){if(b)for(;M&&X(z,1);){var me=I,le=R,Ne=S,ve=1,ie=Ne.m,oe=Ne.gc[Ne.ab],xe=X(ie,2);if(Ne.Oc&1<<xe)M=0;else{switch(Ne.Oc|=1<<xe,oe.hc=xe,oe.Ea=me[0],oe.nc=le[0],oe.K=[null],++Ne.ab,t(4>=Ne.ab),xe){case 0:case 1:oe.b=X(ie,3)+2,ve=In(qe(oe.Ea,oe.b),qe(oe.nc,oe.b),0,Ne,oe.K),oe.K=oe.K[0];break;case 3:var je,we=X(ie,8)+1,Fe=16<we?0:4<we?1:2<we?2:3;if(me[0]=qe(oe.Ea,Fe),oe.b=Fe,je=ve=In(we,1,0,Ne,oe.K)){var Pe,He=we,Me=oe,gt=1<<(8>>Me.b),yt=s(gt);if(yt==null)je=0;else{var ft=Me.K[0],ut=Me.w;for(yt[0]=Me.K[0][0],Pe=1;Pe<1*He;++Pe)yt[Pe]=Ee(ft[ut+Pe],yt[Pe-1]);for(;Pe<4*gt;++Pe)yt[Pe]=0;Me.K[0]=null,Me.K[0]=yt,je=1}}ve=je;break;case 2:break;default:t(0)}M=ve}}if(I=I[0],R=R[0],M&&X(z,1)&&!(M=1<=(pe=X(z,4))&&11>=pe)){S.a=3;break e}var St;if(St=M)t:{var Nt,st,Zt,Tr=S,Qt=I,Mr=R,xt=pe,Gr=b,Vr=Tr.m,sr=Tr.s,ur=[null],Ar=1,an=0,Bn=S1[xt];r:for(;;){if(Gr&&X(Vr,1)){var ir=X(Vr,3)+2,la=qe(Qt,ir),rs=qe(Mr,ir),Js=la*rs;if(!In(la,rs,0,Tr,ur))break r;for(ur=ur[0],sr.xc=ir,Nt=0;Nt<Js;++Nt){var Ea=ur[Nt]>>8&65535;ur[Nt]=Ea,Ea>=Ar&&(Ar=Ea+1)}}if(Vr.h)break r;for(st=0;5>st;++st){var Bt=xf[st];!st&&0<xt&&(Bt+=1<<xt),an<Bt&&(an=Bt)}var Uu=o(Ar*Bn,D),Df=Ar,Pf=o(Df,U);if(Pf==null)var Il=null;else t(65536>=Df),Il=Pf;var oo=s(an);if(Il==null||oo==null||Uu==null){Tr.a=1;break r}var Rl=Uu;for(Nt=Zt=0;Nt<Ar;++Nt){var Sn=Il[Nt],Zs=Sn.G,Qs=Sn.H,kf=0,Fl=1,Of=0;for(st=0;5>st;++st){Bt=xf[st],Zs[st]=Rl,Qs[st]=Zt,!st&&0<xt&&(Bt+=1<<xt);a:{var $l,Wu=Bt,Bl=Tr,lo=oo,H1=Rl,G1=Zt,Hu=0,Ca=Bl.m,V1=X(Ca,1);if(a(lo,0,0,Wu),V1){var Y1=X(Ca,1)+1,K1=X(Ca,1),Tf=X(Ca,K1==0?1:8);lo[Tf]=1,Y1==2&&(lo[Tf=X(Ca,8)]=1);var ql=1}else{var Mf=s(19),If=X(Ca,4)+4;if(19<If){Bl.a=3;var zl=0;break a}for($l=0;$l<If;++$l)Mf[N1[$l]]=X(Ca,3);var Gu=void 0,co=void 0,Rf=Bl,X1=Mf,Ul=Wu,Ff=lo,Vu=0,La=Rf.m,$f=8,Bf=o(128,D);n:for(;L(Bf,0,7,X1,19);){if(X(La,1)){var J1=2+2*X(La,3);if((Gu=2+X(La,J1))>Ul)break n}else Gu=Ul;for(co=0;co<Ul&&Gu--;){se(La);var qf=Bf[0+(127&q(La))];Z(La,La.u+qf.g);var ei=qf.value;if(16>ei)Ff[co++]=ei,ei!=0&&($f=ei);else{var Z1=ei==16,zf=ei-16,Q1=x1[zf],Uf=X(La,y1[zf])+Q1;if(co+Uf>Ul)break n;for(var e2=Z1?$f:0;0<Uf--;)Ff[co++]=e2}}Vu=1;break n}Vu||(Rf.a=3),ql=Vu}(ql=ql&&!Ca.h)&&(Hu=L(H1,G1,8,lo,Wu)),ql&&Hu!=0?zl=Hu:(Bl.a=3,zl=0)}if(zl==0)break r;if(Fl&&w1[st]==1&&(Fl=Rl[Zt].g==0),kf+=Rl[Zt].g,Zt+=zl,3>=st){var uo,Yu=oo[0];for(uo=1;uo<Bt;++uo)oo[uo]>Yu&&(Yu=oo[uo]);Of+=Yu}}if(Sn.nd=Fl,Sn.Qb=0,Fl&&(Sn.qb=(Zs[3][Qs[3]+0].value<<24|Zs[1][Qs[1]+0].value<<16|Zs[2][Qs[2]+0].value)>>>0,kf==0&&256>Zs[0][Qs[0]+0].value&&(Sn.Qb=1,Sn.qb+=Zs[0][Qs[0]+0].value<<8)),Sn.jc=!Sn.Qb&&6>Of,Sn.jc){var Wl,ca=Sn;for(Wl=0;Wl<cr;++Wl){var Da=Wl,Pa=ca.pd[Da],Hl=ca.G[0][ca.H[0]+Da];256<=Hl.value?(Pa.g=Hl.g+256,Pa.value=Hl.value):(Pa.g=0,Pa.value=0,Da>>=er(Hl,8,Pa),Da>>=er(ca.G[1][ca.H[1]+Da],16,Pa),Da>>=er(ca.G[2][ca.H[2]+Da],0,Pa),er(ca.G[3][ca.H[3]+Da],24,Pa))}}}sr.vc=ur,sr.Wb=Ar,sr.Ya=Il,sr.yc=Uu,St=1;break t}St=0}if(!(M=St)){S.a=3;break e}if(0<pe){if(G.ua=1<<pe,!Ge(G.Wa,pe)){S.a=1,M=0;break e}}else G.ua=0;var Ku=S,Wf=I,t2=R,Xu=Ku.s,Ju=Xu.xc;if(Ku.c=Wf,Ku.i=t2,Xu.md=qe(Wf,Ju),Xu.wc=Ju==0?-1:(1<<Ju)-1,b){S.xb=k1;break e}if((ae=s(I*R))==null){S.a=1,M=0;break e}M=(M=yn(S,ae,0,I,R,R,null))&&!z.h;break e}return M?(k!=null?k[0]=ae:(t(ae==null),t(b)),S.$=0,b||Mn(G)):Mn(G),M}function Ga(u,h){var b=u.c*u.i,S=b+h+16*h;return t(u.c<=h),u.V=s(S),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+h,1)}function Es(u,h){var b=u.C,S=h-b,k=u.V,M=u.Ba+u.c*b;for(t(h<=u.l.o);0<S;){var I=16<S?16:S,R=u.l.ma,z=u.l.width,G=z*I,ae=R.ca,pe=R.tb+z*b,me=u.Ta,le=u.Ua;Ur(u,I,k,M),Gt(me,le,ae,pe,G),vn(R,b,b+I,ae,pe,z),S-=I,k+=I*u.c,b+=I}t(b==h),u.C=u.Ma=h}function Cs(){this.ub=this.yd=this.td=this.Rb=0}function Ls(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ds(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function rl(){this.Yb=function(){var u=[];return function h(b,S,k){for(var M=k[S],I=0;I<M&&(b.push(k.length>S+1?[]:0),!(k.length<S+1));I++)h(b[I],S+1,k)}(u,0,[3,11]),u}()}function uu(){this.jb=s(3),this.Wc=l([4,8],rl),this.Xc=l([4,17],rl)}function du(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ps(){this.ld=this.La=this.dd=this.tc=0}function nl(){this.Na=this.la=0}function hu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Mi(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function fu(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ps),this.Y=0,this.ya=Array(new Mi),this.aa=0,this.l=new ks}function al(){this.y=s(16),this.f=s(8),this.ea=s(8)}function pu(){this.cb=this.a=0,this.sc="",this.m=new ce,this.Od=new Cs,this.Kc=new Ls,this.ed=new du,this.Qa=new Ds,this.Ic=this.$c=this.Aa=0,this.D=new fu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ce),this.ia=0,this.pb=o(4,hu),this.Pa=new uu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new al),this.Hd=0,this.rb=Array(new nl),this.sb=0,this.wa=Array(new Ps),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Mi),this.L=this.aa=0,this.gd=l([4,2],Ps),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ks(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function mu(){var u=new pu;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,so||(so=ol)),u}function Wt(u,h,b){return u.a==0&&(u.a=h,u.sc=b,u.cb=0),0}function sl(u,h,b){return 3<=b&&u[h+0]==157&&u[h+1]==1&&u[h+2]==42}function il(u,h){if(u==null)return 0;if(u.a=0,u.sc="OK",h==null)return Wt(u,2,"null VP8Io passed to VP8GetHeaders()");var b=h.data,S=h.w,k=h.ha;if(4>k)return Wt(u,7,"Truncated header.");var M=b[S+0]|b[S+1]<<8|b[S+2]<<16,I=u.Od;if(I.Rb=!(1&M),I.td=M>>1&7,I.yd=M>>4&1,I.ub=M>>5,3<I.td)return Wt(u,3,"Incorrect keyframe parameters.");if(!I.yd)return Wt(u,4,"Frame not displayable.");S+=3,k-=3;var R=u.Kc;if(I.Rb){if(7>k)return Wt(u,7,"cannot parse picture header");if(!sl(b,S,k))return Wt(u,3,"Bad code word");R.c=16383&(b[S+4]<<8|b[S+3]),R.Td=b[S+4]>>6,R.i=16383&(b[S+6]<<8|b[S+5]),R.Ud=b[S+6]>>6,S+=7,k-=7,u.za=R.c+15>>4,u.Ub=R.i+15>>4,h.width=R.c,h.height=R.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,a((M=u.Pa).jb,0,255,M.jb.length),t((M=u.Qa)!=null),M.Cb=0,M.Bb=0,M.Fb=1,a(M.Zb,0,0,M.Zb.length),a(M.Lb,0,0,M.Lb)}if(I.ub>k)return Wt(u,7,"bad partition length");ee(M=u.m,b,S,I.ub),S+=I.ub,k-=I.ub,I.Rb&&(R.Ld=fe(M),R.Kd=fe(M)),R=u.Qa;var z,G=u.Pa;if(t(M!=null),t(R!=null),R.Cb=fe(M),R.Cb){if(R.Bb=fe(M),fe(M)){for(R.Fb=fe(M),z=0;4>z;++z)R.Zb[z]=fe(M)?re(M,7):0;for(z=0;4>z;++z)R.Lb[z]=fe(M)?re(M,6):0}if(R.Bb)for(z=0;3>z;++z)G.jb[z]=fe(M)?te(M,8):255}else R.Bb=0;if(M.Ka)return Wt(u,3,"cannot parse segment header");if((R=u.ed).zd=fe(M),R.Tb=te(M,6),R.wb=te(M,3),R.Pc=fe(M),R.Pc&&fe(M)){for(G=0;4>G;++G)fe(M)&&(R.vd[G]=re(M,6));for(G=0;4>G;++G)fe(M)&&(R.od[G]=re(M,6))}if(u.L=R.Tb==0?0:R.zd?1:2,M.Ka)return Wt(u,3,"cannot parse filter header");var ae=k;if(k=z=S,S=z+ae,R=ae,u.Xb=(1<<te(u.m,2))-1,ae<3*(G=u.Xb))b=7;else{for(z+=3*G,R-=3*G,ae=0;ae<G;++ae){var pe=b[k+0]|b[k+1]<<8|b[k+2]<<16;pe>R&&(pe=R),ee(u.Jc[+ae],b,z,pe),z+=pe,R-=pe,k+=3}ee(u.Jc[+G],b,z,R),b=z<S?0:5}if(b!=0)return Wt(u,b,"cannot parse partitions");for(b=te(z=u.m,7),k=fe(z)?re(z,4):0,S=fe(z)?re(z,4):0,R=fe(z)?re(z,4):0,G=fe(z)?re(z,4):0,z=fe(z)?re(z,4):0,ae=u.Qa,pe=0;4>pe;++pe){if(ae.Cb){var me=ae.Zb[pe];ae.Fb||(me+=b)}else{if(0<pe){u.pb[pe]=u.pb[0];continue}me=b}var le=u.pb[pe];le.Sc[0]=Bu[Wr(me+k,127)],le.Sc[1]=qu[Wr(me+0,127)],le.Eb[0]=2*Bu[Wr(me+S,127)],le.Eb[1]=101581*qu[Wr(me+R,127)]>>16,8>le.Eb[1]&&(le.Eb[1]=8),le.Qc[0]=Bu[Wr(me+G,117)],le.Qc[1]=qu[Wr(me+z,127)],le.lc=me+z}if(!I.Rb)return Wt(u,4,"Not a key frame.");for(fe(M),I=u.Pa,b=0;4>b;++b){for(k=0;8>k;++k)for(S=0;3>S;++S)for(R=0;11>R;++R)G=ge(M,D1[b][k][S][R])?te(M,8):C1[b][k][S][R],I.Wc[b][k].Yb[S][R]=G;for(k=0;17>k;++k)I.Xc[b][k]=I.Wc[b][P1[k]]}return u.kc=fe(M),u.kc&&(u.Bd=te(M,8)),u.cb=1}function ol(u,h,b,S,k,M,I){var R=h[k].Yb[b];for(b=0;16>k;++k){if(!ge(u,R[b+0]))return k;for(;!ge(u,R[b+1]);)if(R=h[++k].Yb[0],b=0,k==16)return 16;var z=h[k+1].Yb;if(ge(u,R[b+2])){var G=u,ae=0;if(ge(G,(me=R)[(pe=b)+3]))if(ge(G,me[pe+6])){for(R=0,pe=2*(ae=ge(G,me[pe+8]))+(me=ge(G,me[pe+9+ae])),ae=0,me=A1[pe];me[R];++R)ae+=ae+ge(G,me[R]);ae+=3+(8<<pe)}else ge(G,me[pe+7])?(ae=7+2*ge(G,165),ae+=ge(G,145)):ae=5+ge(G,159);else ae=ge(G,me[pe+4])?3+ge(G,me[pe+5]):2;R=z[2]}else ae=1,R=z[1];z=I+E1[k],0>(G=u).b&&de(G);var pe,me=G.b,le=(pe=G.Ca>>1)-(G.I>>me)>>31;--G.b,G.Ca+=le,G.Ca|=1,G.I-=(pe+1&le)<<me,M[z]=((ae^le)-le)*S[(0<k)+0]}return 16}function Ii(u){var h=u.rb[u.sb-1];h.la=0,h.Na=0,a(u.zc,0,0,u.zc.length),u.ja=0}function gu(u,h){if(u==null)return 0;if(h==null)return Wt(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!il(u,h))return 0;if(t(u.cb),h.ac==null||h.ac(h)){h.ob&&(u.L=0);var b=Ml[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=h.v-b>>4,u.zb=h.j-b>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=h.o+15+b>>4,u.Hb=h.va+15+b>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var S=u.ed;for(b=0;4>b;++b){var k;if(u.Qa.Cb){var M=u.Qa.Lb[b];u.Qa.Fb||(M+=S.Tb)}else M=S.Tb;for(k=0;1>=k;++k){var I=u.gd[b][k],R=M;if(S.Pc&&(R+=S.vd[0],k&&(R+=S.od[0])),0<(R=0>R?0:63<R?63:R)){var z=R;0<S.wb&&(z=4<S.wb?z>>2:z>>1)>9-S.wb&&(z=9-S.wb),1>z&&(z=1),I.dd=z,I.tc=2*R+z,I.ld=40<=R?2:15<=R?1:0}else I.tc=0;I.La=k}}}b=0}else Wt(u,6,"Frame setup failed"),b=u.a;if(b=b==0){if(b){u.$c=0,0<u.Aa||(u.Ic=W1);e:{b=u.Ic,S=4*(z=u.za);var G=32*z,ae=z+1,pe=0<u.L?z*(0<u.Aa?2:1):0,me=(u.Aa==2?2:1)*z;if((I=S+832+(k=3*(16*b+Ml[u.L])/2*G)+(M=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=I)b=0;else{if(I>u.Vb){if(u.Vb=0,u.Ec=s(I),u.Fc=0,u.Ec==null){b=Wt(u,1,"no memory during frame initialization.");break e}u.Vb=I}I=u.Ec,R=u.Fc,u.Ac=I,u.Bc=R,R+=S,u.Gd=o(G,al),u.Hd=0,u.rb=o(ae+1,nl),u.sb=1,u.wa=pe?o(pe,Ps):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=z),t(!0),u.oc=I,u.pc=R,R+=832,u.ya=o(me,Mi),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=z),u.R=16*z,u.B=8*z,z=(G=Ml[u.L])*u.R,G=G/2*u.B,u.sa=I,u.ta=R+z,u.qa=u.sa,u.ra=u.ta+16*b*u.R+G,u.Ha=u.qa,u.Ia=u.ra+8*b*u.B+G,u.$c=0,R+=k,u.mb=M?I:null,u.nb=M?R:null,t(R+M<=u.Fc+u.Vb),Ii(u),a(u.Ac,u.Bc,0,S),b=1}}if(b){if(h.ka=0,h.y=u.sa,h.O=u.ta,h.f=u.qa,h.N=u.ra,h.ea=u.Ha,h.Vd=u.Ia,h.fa=u.R,h.Rc=u.B,h.F=null,h.J=0,!Al){for(b=-255;255>=b;++b)tr[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)ia[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)ao[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)Xs[255+b]=0>b?0:255<b?255:b;Al=1}Vs=yu,sa=vu,to=cl,_r=bu,Qr=ul,Ht=ll,Ys=zi,_l=Ka,ro=ku,Za=Ui,Qa=Pu,ja=Fs,es=Wi,Ks=yl,ts=bl,Sa=Fn,no=ra,en=Du,jn[0]=Rn,jn[1]=xu,jn[2]=Su,jn[3]=_u,jn[4]=fl,jn[5]=Is,jn[6]=pl,jn[7]=$i,jn[8]=Eu,jn[9]=Au,_a[0]=dl,_a[1]=Nu,_a[2]=ta,_a[3]=Ts,_a[4]=fr,_a[5]=ju,_a[6]=hl,oa[0]=ba,oa[1]=wu,oa[2]=Cu,oa[3]=Bi,oa[4]=Ya,oa[5]=Lu,oa[6]=qi,b=1}else b=0}b&&(b=function(le,Ne){for(le.M=0;le.M<le.Va;++le.M){var ve,ie=le.Jc[le.M&le.Xb],oe=le.m,xe=le;for(ve=0;ve<xe.za;++ve){var je=oe,we=xe,Fe=we.Ac,Pe=we.Bc+4*ve,He=we.zc,Me=we.ya[we.aa+ve];if(we.Qa.Bb?Me.$b=ge(je,we.Pa.jb[0])?2+ge(je,we.Pa.jb[2]):ge(je,we.Pa.jb[1]):Me.$b=0,we.kc&&(Me.Ad=ge(je,we.Bd)),Me.Za=!ge(je,145)+0,Me.Za){var gt=Me.Ob,yt=0;for(we=0;4>we;++we){var ft,ut=He[0+we];for(ft=0;4>ft;++ft){ut=L1[Fe[Pe+ft]][ut];for(var St=wf[ge(je,ut[0])];0<St;)St=wf[2*St+ge(je,ut[St])];ut=-St,Fe[Pe+ft]=ut}n(gt,yt,Fe,Pe,4),yt+=4,He[0+we]=ut}}else ut=ge(je,156)?ge(je,128)?1:3:ge(je,163)?2:0,Me.Ob[0]=ut,a(Fe,Pe,ut,4),a(He,0,ut,4);Me.Dd=ge(je,142)?ge(je,114)?ge(je,183)?1:3:2:0}if(xe.m.Ka)return Wt(le,7,"Premature end-of-partition0 encountered.");for(;le.ja<le.za;++le.ja){if(xe=ie,je=(oe=le).rb[oe.sb-1],Fe=oe.rb[oe.sb+oe.ja],ve=oe.ya[oe.aa+oe.ja],Pe=oe.kc?ve.Ad:0)je.la=Fe.la=0,ve.Za||(je.Na=Fe.Na=0),ve.Hc=0,ve.Gc=0,ve.ia=0;else{var Nt,st;if(je=Fe,Fe=xe,Pe=oe.Pa.Xc,He=oe.ya[oe.aa+oe.ja],Me=oe.pb[He.$b],we=He.ad,gt=0,yt=oe.rb[oe.sb-1],ut=ft=0,a(we,gt,0,384),He.Za)var Zt=0,Tr=Pe[3];else{St=s(16);var Qt=je.Na+yt.Na;if(Qt=so(Fe,Pe[1],Qt,Me.Eb,0,St,0),je.Na=yt.Na=(0<Qt)+0,1<Qt)Vs(St,0,we,gt);else{var Mr=St[0]+3>>3;for(St=0;256>St;St+=16)we[gt+St]=Mr}Zt=1,Tr=Pe[0]}var xt=15&je.la,Gr=15&yt.la;for(St=0;4>St;++St){var Vr=1&Gr;for(Mr=st=0;4>Mr;++Mr)xt=xt>>1|(Vr=(Qt=so(Fe,Tr,Qt=Vr+(1&xt),Me.Sc,Zt,we,gt))>Zt)<<7,st=st<<2|(3<Qt?3:1<Qt?2:we[gt+0]!=0),gt+=16;xt>>=4,Gr=Gr>>1|Vr<<7,ft=(ft<<8|st)>>>0}for(Tr=xt,Zt=Gr>>4,Nt=0;4>Nt;Nt+=2){for(st=0,xt=je.la>>4+Nt,Gr=yt.la>>4+Nt,St=0;2>St;++St){for(Vr=1&Gr,Mr=0;2>Mr;++Mr)Qt=Vr+(1&xt),xt=xt>>1|(Vr=0<(Qt=so(Fe,Pe[2],Qt,Me.Qc,0,we,gt)))<<3,st=st<<2|(3<Qt?3:1<Qt?2:we[gt+0]!=0),gt+=16;xt>>=2,Gr=Gr>>1|Vr<<5}ut|=st<<4*Nt,Tr|=xt<<4<<Nt,Zt|=(240&Gr)<<Nt}je.la=Tr,yt.la=Zt,He.Hc=ft,He.Gc=ut,He.ia=43690&ut?0:Me.ia,Pe=!(ft|ut)}if(0<oe.L&&(oe.wa[oe.Y+oe.ja]=oe.gd[ve.$b][ve.Za],oe.wa[oe.Y+oe.ja].La|=!Pe),xe.Ka)return Wt(le,7,"Premature end-of-file encountered.")}if(Ii(le),oe=Ne,xe=1,ve=(ie=le).D,je=0<ie.L&&ie.M>=ie.zb&&ie.M<=ie.Va,ie.Aa==0)e:{if(ve.M=ie.M,ve.uc=je,Xi(ie,ve),xe=1,ve=(st=ie.D).Nb,je=(ut=Ml[ie.L])*ie.R,Fe=ut/2*ie.B,St=16*ve*ie.R,Mr=8*ve*ie.B,Pe=ie.sa,He=ie.ta-je+St,Me=ie.qa,we=ie.ra-Fe+Mr,gt=ie.Ha,yt=ie.Ia-Fe+Mr,Gr=(xt=st.M)==0,ft=xt>=ie.Va-1,ie.Aa==2&&Xi(ie,st),st.uc)for(Vr=(Qt=ie).D.M,t(Qt.D.uc),st=Qt.yb;st<Qt.Hb;++st){Zt=st,Tr=Vr;var sr=(ur=(Bt=Qt).D).Nb;Nt=Bt.R;var ur=ur.wa[ur.Y+Zt],Ar=Bt.sa,an=Bt.ta+16*sr*Nt+16*Zt,Bn=ur.dd,ir=ur.tc;if(ir!=0)if(t(3<=ir),Bt.L==1)0<Zt&&Sa(Ar,an,Nt,ir+4),ur.La&&en(Ar,an,Nt,ir),0<Tr&&ts(Ar,an,Nt,ir+4),ur.La&&no(Ar,an,Nt,ir);else{var la=Bt.B,rs=Bt.qa,Js=Bt.ra+8*sr*la+8*Zt,Ea=Bt.Ha,Bt=Bt.Ia+8*sr*la+8*Zt;sr=ur.ld,0<Zt&&(_l(Ar,an,Nt,ir+4,Bn,sr),Za(rs,Js,Ea,Bt,la,ir+4,Bn,sr)),ur.La&&(ja(Ar,an,Nt,ir,Bn,sr),Ks(rs,Js,Ea,Bt,la,ir,Bn,sr)),0<Tr&&(Ys(Ar,an,Nt,ir+4,Bn,sr),ro(rs,Js,Ea,Bt,la,ir+4,Bn,sr)),ur.La&&(Qa(Ar,an,Nt,ir,Bn,sr),es(rs,Js,Ea,Bt,la,ir,Bn,sr))}}if(ie.ia&&alert("todo:DitherRow"),oe.put!=null){if(st=16*xt,xt=16*(xt+1),Gr?(oe.y=ie.sa,oe.O=ie.ta+St,oe.f=ie.qa,oe.N=ie.ra+Mr,oe.ea=ie.Ha,oe.W=ie.Ia+Mr):(st-=ut,oe.y=Pe,oe.O=He,oe.f=Me,oe.N=we,oe.ea=gt,oe.W=yt),ft||(xt-=ut),xt>oe.o&&(xt=oe.o),oe.F=null,oe.J=null,ie.Fa!=null&&0<ie.Fa.length&&st<xt&&(oe.J=Yi(ie,oe,st,xt-st),oe.F=ie.mb,oe.F==null&&oe.F.length==0)){xe=Wt(ie,3,"Could not decode alpha data.");break e}st<oe.j&&(ut=oe.j-st,st=oe.j,t(!(1&ut)),oe.O+=ie.R*ut,oe.N+=ie.B*(ut>>1),oe.W+=ie.B*(ut>>1),oe.F!=null&&(oe.J+=oe.width*ut)),st<xt&&(oe.O+=oe.v,oe.N+=oe.v>>1,oe.W+=oe.v>>1,oe.F!=null&&(oe.J+=oe.v),oe.ka=st-oe.j,oe.U=oe.va-oe.v,oe.T=xt-st,xe=oe.put(oe))}ve+1!=ie.Ic||ft||(n(ie.sa,ie.ta-je,Pe,He+16*ie.R,je),n(ie.qa,ie.ra-Fe,Me,we+8*ie.B,Fe),n(ie.Ha,ie.Ia-Fe,gt,yt+8*ie.B,Fe))}if(!xe)return Wt(le,6,"Output aborted.")}return 1}(u,h)),h.bc!=null&&h.bc(h),b&=1}return b?(u.cb=0,b):0}function xn(u,h,b,S,k){k=u[h+b+32*S]+(k>>3),u[h+b+32*S]=-256&k?0>k?0:255:k}function Os(u,h,b,S,k,M){xn(u,h,0,b,S+k),xn(u,h,1,b,S+M),xn(u,h,2,b,S-M),xn(u,h,3,b,S-k)}function Pr(u){return(20091*u>>16)+u}function Ri(u,h,b,S){var k,M=0,I=s(16);for(k=0;4>k;++k){var R=u[h+0]+u[h+8],z=u[h+0]-u[h+8],G=(35468*u[h+4]>>16)-Pr(u[h+12]),ae=Pr(u[h+4])+(35468*u[h+12]>>16);I[M+0]=R+ae,I[M+1]=z+G,I[M+2]=z-G,I[M+3]=R-ae,M+=4,h++}for(k=M=0;4>k;++k)R=(u=I[M+0]+4)+I[M+8],z=u-I[M+8],G=(35468*I[M+4]>>16)-Pr(I[M+12]),xn(b,S,0,0,R+(ae=Pr(I[M+4])+(35468*I[M+12]>>16))),xn(b,S,1,0,z+G),xn(b,S,2,0,z-G),xn(b,S,3,0,R-ae),M++,S+=32}function ll(u,h,b,S){var k=u[h+0]+4,M=35468*u[h+4]>>16,I=Pr(u[h+4]),R=35468*u[h+1]>>16;Os(b,S,0,k+I,u=Pr(u[h+1]),R),Os(b,S,1,k+M,u,R),Os(b,S,2,k-M,u,R),Os(b,S,3,k-I,u,R)}function vu(u,h,b,S,k){Ri(u,h,b,S),k&&Ri(u,h+16,b,S+4)}function cl(u,h,b,S){sa(u,h+0,b,S,1),sa(u,h+32,b,S+128,1)}function bu(u,h,b,S){var k;for(u=u[h+0]+4,k=0;4>k;++k)for(h=0;4>h;++h)xn(b,S,h,k,u)}function ul(u,h,b,S){u[h+0]&&_r(u,h+0,b,S),u[h+16]&&_r(u,h+16,b,S+4),u[h+32]&&_r(u,h+32,b,S+128),u[h+48]&&_r(u,h+48,b,S+128+4)}function yu(u,h,b,S){var k,M=s(16);for(k=0;4>k;++k){var I=u[h+0+k]+u[h+12+k],R=u[h+4+k]+u[h+8+k],z=u[h+4+k]-u[h+8+k],G=u[h+0+k]-u[h+12+k];M[0+k]=I+R,M[8+k]=I-R,M[4+k]=G+z,M[12+k]=G-z}for(k=0;4>k;++k)I=(u=M[0+4*k]+3)+M[3+4*k],R=M[1+4*k]+M[2+4*k],z=M[1+4*k]-M[2+4*k],G=u-M[3+4*k],b[S+0]=I+R>>3,b[S+16]=G+z>>3,b[S+32]=I-R>>3,b[S+48]=G-z>>3,S+=64}function Fi(u,h,b){var S,k=h-32,M=Hr,I=255-u[k-1];for(S=0;S<b;++S){var R,z=M,G=I+u[h-1];for(R=0;R<b;++R)u[h+R]=z[G+u[k+R]];h+=32}}function xu(u,h){Fi(u,h,4)}function wu(u,h){Fi(u,h,8)}function Nu(u,h){Fi(u,h,16)}function ta(u,h){var b;for(b=0;16>b;++b)n(u,h+32*b,u,h-32,16)}function Ts(u,h){var b;for(b=16;0<b;--b)a(u,h,u[h-1],16),h+=32}function Ms(u,h,b){var S;for(S=0;16>S;++S)a(h,b+32*S,u,16)}function dl(u,h){var b,S=16;for(b=0;16>b;++b)S+=u[h-1+32*b]+u[h+b-32];Ms(S>>5,u,h)}function fr(u,h){var b,S=8;for(b=0;16>b;++b)S+=u[h-1+32*b];Ms(S>>4,u,h)}function ju(u,h){var b,S=8;for(b=0;16>b;++b)S+=u[h+b-32];Ms(S>>4,u,h)}function hl(u,h){Ms(128,u,h)}function Qe(u,h,b){return u+2*h+b+2>>2}function Su(u,h){var b,S=h-32;for(S=new Uint8Array([Qe(u[S-1],u[S+0],u[S+1]),Qe(u[S+0],u[S+1],u[S+2]),Qe(u[S+1],u[S+2],u[S+3]),Qe(u[S+2],u[S+3],u[S+4])]),b=0;4>b;++b)n(u,h+32*b,S,0,S.length)}function _u(u,h){var b=u[h-1],S=u[h-1+32],k=u[h-1+64],M=u[h-1+96];Ae(u,h+0,16843009*Qe(u[h-1-32],b,S)),Ae(u,h+32,16843009*Qe(b,S,k)),Ae(u,h+64,16843009*Qe(S,k,M)),Ae(u,h+96,16843009*Qe(k,M,M))}function Rn(u,h){var b,S=4;for(b=0;4>b;++b)S+=u[h+b-32]+u[h-1+32*b];for(S>>=3,b=0;4>b;++b)a(u,h+32*b,S,4)}function fl(u,h){var b=u[h-1+0],S=u[h-1+32],k=u[h-1+64],M=u[h-1-32],I=u[h+0-32],R=u[h+1-32],z=u[h+2-32],G=u[h+3-32];u[h+0+96]=Qe(S,k,u[h-1+96]),u[h+1+96]=u[h+0+64]=Qe(b,S,k),u[h+2+96]=u[h+1+64]=u[h+0+32]=Qe(M,b,S),u[h+3+96]=u[h+2+64]=u[h+1+32]=u[h+0+0]=Qe(I,M,b),u[h+3+64]=u[h+2+32]=u[h+1+0]=Qe(R,I,M),u[h+3+32]=u[h+2+0]=Qe(z,R,I),u[h+3+0]=Qe(G,z,R)}function pl(u,h){var b=u[h+1-32],S=u[h+2-32],k=u[h+3-32],M=u[h+4-32],I=u[h+5-32],R=u[h+6-32],z=u[h+7-32];u[h+0+0]=Qe(u[h+0-32],b,S),u[h+1+0]=u[h+0+32]=Qe(b,S,k),u[h+2+0]=u[h+1+32]=u[h+0+64]=Qe(S,k,M),u[h+3+0]=u[h+2+32]=u[h+1+64]=u[h+0+96]=Qe(k,M,I),u[h+3+32]=u[h+2+64]=u[h+1+96]=Qe(M,I,R),u[h+3+64]=u[h+2+96]=Qe(I,R,z),u[h+3+96]=Qe(R,z,z)}function Is(u,h){var b=u[h-1+0],S=u[h-1+32],k=u[h-1+64],M=u[h-1-32],I=u[h+0-32],R=u[h+1-32],z=u[h+2-32],G=u[h+3-32];u[h+0+0]=u[h+1+64]=M+I+1>>1,u[h+1+0]=u[h+2+64]=I+R+1>>1,u[h+2+0]=u[h+3+64]=R+z+1>>1,u[h+3+0]=z+G+1>>1,u[h+0+96]=Qe(k,S,b),u[h+0+64]=Qe(S,b,M),u[h+0+32]=u[h+1+96]=Qe(b,M,I),u[h+1+32]=u[h+2+96]=Qe(M,I,R),u[h+2+32]=u[h+3+96]=Qe(I,R,z),u[h+3+32]=Qe(R,z,G)}function $i(u,h){var b=u[h+0-32],S=u[h+1-32],k=u[h+2-32],M=u[h+3-32],I=u[h+4-32],R=u[h+5-32],z=u[h+6-32],G=u[h+7-32];u[h+0+0]=b+S+1>>1,u[h+1+0]=u[h+0+64]=S+k+1>>1,u[h+2+0]=u[h+1+64]=k+M+1>>1,u[h+3+0]=u[h+2+64]=M+I+1>>1,u[h+0+32]=Qe(b,S,k),u[h+1+32]=u[h+0+96]=Qe(S,k,M),u[h+2+32]=u[h+1+96]=Qe(k,M,I),u[h+3+32]=u[h+2+96]=Qe(M,I,R),u[h+3+64]=Qe(I,R,z),u[h+3+96]=Qe(R,z,G)}function Au(u,h){var b=u[h-1+0],S=u[h-1+32],k=u[h-1+64],M=u[h-1+96];u[h+0+0]=b+S+1>>1,u[h+2+0]=u[h+0+32]=S+k+1>>1,u[h+2+32]=u[h+0+64]=k+M+1>>1,u[h+1+0]=Qe(b,S,k),u[h+3+0]=u[h+1+32]=Qe(S,k,M),u[h+3+32]=u[h+1+64]=Qe(k,M,M),u[h+3+64]=u[h+2+64]=u[h+0+96]=u[h+1+96]=u[h+2+96]=u[h+3+96]=M}function Eu(u,h){var b=u[h-1+0],S=u[h-1+32],k=u[h-1+64],M=u[h-1+96],I=u[h-1-32],R=u[h+0-32],z=u[h+1-32],G=u[h+2-32];u[h+0+0]=u[h+2+32]=b+I+1>>1,u[h+0+32]=u[h+2+64]=S+b+1>>1,u[h+0+64]=u[h+2+96]=k+S+1>>1,u[h+0+96]=M+k+1>>1,u[h+3+0]=Qe(R,z,G),u[h+2+0]=Qe(I,R,z),u[h+1+0]=u[h+3+32]=Qe(b,I,R),u[h+1+32]=u[h+3+64]=Qe(S,b,I),u[h+1+64]=u[h+3+96]=Qe(k,S,b),u[h+1+96]=Qe(M,k,S)}function Cu(u,h){var b;for(b=0;8>b;++b)n(u,h+32*b,u,h-32,8)}function Bi(u,h){var b;for(b=0;8>b;++b)a(u,h,u[h-1],8),h+=32}function Va(u,h,b){var S;for(S=0;8>S;++S)a(h,b+32*S,u,8)}function ba(u,h){var b,S=8;for(b=0;8>b;++b)S+=u[h+b-32]+u[h-1+32*b];Va(S>>4,u,h)}function Lu(u,h){var b,S=4;for(b=0;8>b;++b)S+=u[h+b-32];Va(S>>3,u,h)}function Ya(u,h){var b,S=4;for(b=0;8>b;++b)S+=u[h-1+32*b];Va(S>>3,u,h)}function qi(u,h){Va(128,u,h)}function Rs(u,h,b){var S=u[h-b],k=u[h+0],M=3*(k-S)+Mu[1020+u[h-2*b]-u[h+b]],I=El[112+(M+4>>3)];u[h-b]=Hr[255+S+El[112+(M+3>>3)]],u[h+0]=Hr[255+k-I]}function ml(u,h,b,S){var k=u[h+0],M=u[h+b];return rn[255+u[h-2*b]-u[h-b]]>S||rn[255+M-k]>S}function gl(u,h,b,S){return 4*rn[255+u[h-b]-u[h+0]]+rn[255+u[h-2*b]-u[h+b]]<=S}function vl(u,h,b,S,k){var M=u[h-3*b],I=u[h-2*b],R=u[h-b],z=u[h+0],G=u[h+b],ae=u[h+2*b],pe=u[h+3*b];return 4*rn[255+R-z]+rn[255+I-G]>S?0:rn[255+u[h-4*b]-M]<=k&&rn[255+M-I]<=k&&rn[255+I-R]<=k&&rn[255+pe-ae]<=k&&rn[255+ae-G]<=k&&rn[255+G-z]<=k}function bl(u,h,b,S){var k=2*S+1;for(S=0;16>S;++S)gl(u,h+S,b,k)&&Rs(u,h+S,b)}function Fn(u,h,b,S){var k=2*S+1;for(S=0;16>S;++S)gl(u,h+S*b,1,k)&&Rs(u,h+S*b,1)}function ra(u,h,b,S){var k;for(k=3;0<k;--k)bl(u,h+=4*b,b,S)}function Du(u,h,b,S){var k;for(k=3;0<k;--k)Fn(u,h+=4,b,S)}function ya(u,h,b,S,k,M,I,R){for(M=2*M+1;0<k--;){if(vl(u,h,b,M,I))if(ml(u,h,b,R))Rs(u,h,b);else{var z=u,G=h,ae=b,pe=z[G-2*ae],me=z[G-ae],le=z[G+0],Ne=z[G+ae],ve=z[G+2*ae],ie=27*(xe=Mu[1020+3*(le-me)+Mu[1020+pe-Ne]])+63>>7,oe=18*xe+63>>7,xe=9*xe+63>>7;z[G-3*ae]=Hr[255+z[G-3*ae]+xe],z[G-2*ae]=Hr[255+pe+oe],z[G-ae]=Hr[255+me+ie],z[G+0]=Hr[255+le-ie],z[G+ae]=Hr[255+Ne-oe],z[G+2*ae]=Hr[255+ve-xe]}h+=S}}function wn(u,h,b,S,k,M,I,R){for(M=2*M+1;0<k--;){if(vl(u,h,b,M,I))if(ml(u,h,b,R))Rs(u,h,b);else{var z=u,G=h,ae=b,pe=z[G-ae],me=z[G+0],le=z[G+ae],Ne=El[112+((ve=3*(me-pe))+4>>3)],ve=El[112+(ve+3>>3)],ie=Ne+1>>1;z[G-2*ae]=Hr[255+z[G-2*ae]+ie],z[G-ae]=Hr[255+pe+ve],z[G+0]=Hr[255+me-Ne],z[G+ae]=Hr[255+le-ie]}h+=S}}function zi(u,h,b,S,k,M){ya(u,h,b,1,16,S,k,M)}function Ka(u,h,b,S,k,M){ya(u,h,1,b,16,S,k,M)}function Pu(u,h,b,S,k,M){var I;for(I=3;0<I;--I)wn(u,h+=4*b,b,1,16,S,k,M)}function Fs(u,h,b,S,k,M){var I;for(I=3;0<I;--I)wn(u,h+=4,1,b,16,S,k,M)}function ku(u,h,b,S,k,M,I,R){ya(u,h,k,1,8,M,I,R),ya(b,S,k,1,8,M,I,R)}function Ui(u,h,b,S,k,M,I,R){ya(u,h,1,k,8,M,I,R),ya(b,S,1,k,8,M,I,R)}function Wi(u,h,b,S,k,M,I,R){wn(u,h+4*k,k,1,8,M,I,R),wn(b,S+4*k,k,1,8,M,I,R)}function yl(u,h,b,S,k,M,I,R){wn(u,h+4,1,k,8,M,I,R),wn(b,S+4,1,k,8,M,I,R)}function $s(){this.ba=new mn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ft,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hi(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Gi(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xl(){this.ua=0,this.Wa=new J,this.vb=new J,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new D}function Ou(){this.xb=this.a=0,this.l=new ks,this.ca=new mn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xl,this.ab=0,this.gc=o(4,Gi),this.Oc=0}function Bs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ks,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Xa(u,h,b,S,k,M,I){for(u=u==null?0:u[h+0],h=0;h<I;++h)k[M+h]=u+b[S+h]&255,u=k[M+h]}function Vi(u,h,b,S,k,M,I){var R;if(u==null)Xa(null,null,b,S,k,M,I);else for(R=0;R<I;++R)k[M+R]=u[h+R]+b[S+R]&255}function xa(u,h,b,S,k,M,I){if(u==null)Xa(null,null,b,S,k,M,I);else{var R,z=u[h+0],G=z,ae=z;for(R=0;R<I;++R)G=ae+(z=u[h+R])-G,ae=b[S+R]+(-256&G?0>G?0:255:G)&255,G=z,k[M+R]=ae}}function Yi(u,h,b,S){var k=h.width,M=h.o;if(t(u!=null&&h!=null),0>b||0>=S||b+S>M)return null;if(!u.Cc){if(u.ga==null){var I;if(u.ga=new Bs,(I=u.ga==null)||(I=h.width*h.o,t(u.Gb.length==0),u.Gb=s(I),u.Uc=0,u.Gb==null?I=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,I=1),I=!I),!I){I=u.ga;var R=u.Fa,z=u.P,G=u.qc,ae=u.mb,pe=u.nb,me=z+1,le=G-1,Ne=I.l;if(t(R!=null&&ae!=null&&h!=null),Aa[0]=null,Aa[1]=Xa,Aa[2]=Vi,Aa[3]=xa,I.ca=ae,I.tb=pe,I.c=h.width,I.i=h.height,t(0<I.c&&0<I.i),1>=G)h=0;else if(I.$a=R[z+0]>>0&3,I.Z=R[z+0]>>2&3,I.Lc=R[z+0]>>4&3,z=R[z+0]>>6&3,0>I.$a||1<I.$a||4<=I.Z||1<I.Lc||z)h=0;else if(Ne.put=kn,Ne.ac=lr,Ne.bc=On,Ne.ma=I,Ne.width=h.width,Ne.height=h.height,Ne.Da=h.Da,Ne.v=h.v,Ne.va=h.va,Ne.j=h.j,Ne.o=h.o,I.$a)e:{t(I.$a==1),h=Jr();t:for(;;){if(h==null){h=0;break e}if(t(I!=null),I.mc=h,h.c=I.c,h.i=I.i,h.l=I.l,h.l.ma=I,h.l.width=I.c,h.l.height=I.i,h.a=0,Q(h.m,R,me,le),!In(I.c,I.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&ea(h.s)?(I.ic=1,R=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(R),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(I.ic=0,h=Ga(h,I.c)),!h))break t;h=1;break e}I.mc=null,h=0}else h=le>=I.c*I.i;I=!h}if(I)return null;u.ga.Lc!=1?u.Ga=0:S=M-b}t(u.ga!=null),t(b+S<=M);e:{if(h=(R=u.ga).c,M=R.l.o,R.$a==0){if(me=u.rc,le=u.Vc,Ne=u.Fa,z=u.P+1+b*h,G=u.mb,ae=u.nb+b*h,t(z<=u.P+u.qc),R.Z!=0)for(t(Aa[R.Z]!=null),I=0;I<S;++I)Aa[R.Z](me,le,Ne,z,G,ae,h),me=G,le=ae,ae+=h,z+=h;else for(I=0;I<S;++I)n(G,ae,Ne,z,h),me=G,le=ae,ae+=h,z+=h;u.rc=me,u.Vc=le}else{if(t(R.mc!=null),h=b+S,t((I=R.mc)!=null),t(h<=I.i),I.C>=h)h=1;else if(R.ic||he(),R.ic){R=I.V,me=I.Ba,le=I.c;var ve=I.i,ie=(Ne=1,z=I.$/le,G=I.$%le,ae=I.m,pe=I.s,I.$),oe=le*ve,xe=le*h,je=pe.wc,we=ie<xe?Xt(pe,G,z):null;t(ie<=oe),t(h<=ve),t(ea(pe));t:for(;;){for(;!ae.h&&ie<xe;){if(G&je||(we=Xt(pe,G,z)),t(we!=null),se(ae),256>(ve=Dr(we.G[0],we.H[0],ae)))R[me+ie]=ve,++ie,++G>=le&&(G=0,++z<=h&&!(z%16)&&bn(I,z));else{if(!(280>ve)){Ne=0;break t}ve=gn(ve-256,ae);var Fe,Pe=Dr(we.G[4],we.H[4],ae);if(se(ae),!(ie>=(Pe=Tn(le,Pe=gn(Pe,ae)))&&oe-ie>=ve)){Ne=0;break t}for(Fe=0;Fe<ve;++Fe)R[me+ie+Fe]=R[me+ie+Fe-Pe];for(ie+=ve,G+=ve;G>=le;)G-=le,++z<=h&&!(z%16)&&bn(I,z);ie<xe&&G&je&&(we=Xt(pe,G,z))}t(ae.h==V(ae))}bn(I,z>h?h:z);break t}!Ne||ae.h&&ie<oe?(Ne=0,I.a=ae.h?5:3):I.$=ie,h=Ne}else h=yn(I,I.V,I.Ba,I.c,I.i,h,Es);if(!h){S=0;break e}}b+S>=M&&(u.Cc=1),S=1}if(!S)return null;if(u.Cc&&((S=u.ga)!=null&&(S.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*k}function v(u,h,b,S,k,M){for(;0<k--;){var I,R=u,z=h+(b?1:0),G=u,ae=h+(b?0:3);for(I=0;I<S;++I){var pe=G[ae+4*I];pe!=255&&(pe*=32897,R[z+4*I+0]=R[z+4*I+0]*pe>>23,R[z+4*I+1]=R[z+4*I+1]*pe>>23,R[z+4*I+2]=R[z+4*I+2]*pe>>23)}h+=M}}function O(u,h,b,S,k){for(;0<S--;){var M;for(M=0;M<b;++M){var I=u[h+2*M+0],R=15&(G=u[h+2*M+1]),z=4369*R,G=(240&G|G>>4)*z>>16;u[h+2*M+0]=(240&I|I>>4)*z>>16&240|(15&I|I<<4)*z>>16>>4&15,u[h+2*M+1]=240&G|R}h+=k}}function K(u,h,b,S,k,M,I,R){var z,G,ae=255;for(G=0;G<k;++G){for(z=0;z<S;++z){var pe=u[h+z];M[I+4*z]=pe,ae&=pe}h+=b,I+=R}return ae!=255}function ne(u,h,b,S,k){var M;for(M=0;M<k;++M)b[S+M]=u[h+M]>>8}function he(){tn=v,Et=O,Ct=K,Gt=ne}function be(u,h,b){C[u]=function(S,k,M,I,R,z,G,ae,pe,me,le,Ne,ve,ie,oe,xe,je){var we,Fe=je-1>>1,Pe=R[z+0]|G[ae+0]<<16,He=pe[me+0]|le[Ne+0]<<16;t(S!=null);var Me=3*Pe+He+131074>>2;for(h(S[k+0],255&Me,Me>>16,ve,ie),M!=null&&(Me=3*He+Pe+131074>>2,h(M[I+0],255&Me,Me>>16,oe,xe)),we=1;we<=Fe;++we){var gt=R[z+we]|G[ae+we]<<16,yt=pe[me+we]|le[Ne+we]<<16,ft=Pe+gt+He+yt+524296,ut=ft+2*(gt+He)>>3;Me=ut+Pe>>1,Pe=(ft=ft+2*(Pe+yt)>>3)+gt>>1,h(S[k+2*we-1],255&Me,Me>>16,ve,ie+(2*we-1)*b),h(S[k+2*we-0],255&Pe,Pe>>16,ve,ie+(2*we-0)*b),M!=null&&(Me=ft+He>>1,Pe=ut+yt>>1,h(M[I+2*we-1],255&Me,Me>>16,oe,xe+(2*we-1)*b),h(M[I+2*we+0],255&Pe,Pe>>16,oe,xe+(2*we+0)*b)),Pe=gt,He=yt}1&je||(Me=3*Pe+He+131074>>2,h(S[k+je-1],255&Me,Me>>16,ve,ie+(je-1)*b),M!=null&&(Me=3*He+Pe+131074>>2,h(M[I+je-1],255&Me,Me>>16,oe,xe+(je-1)*b)))}}function _e(){nn[Cl]=O1,nn[Ll]=jf,nn[bf]=T1,nn[Dl]=Sf,nn[Pl]=_f,nn[Iu]=Af,nn[yf]=M1,nn[Ru]=jf,nn[Fu]=Sf,nn[kl]=_f,nn[$u]=Af}function Re(u){return u&-16384?0>u?0:255:u>>I1}function We(u,h){return Re((19077*u>>8)+(26149*h>>8)-14234)}function at(u,h,b){return Re((19077*u>>8)-(6419*h>>8)-(13320*b>>8)+8708)}function rt(u,h){return Re((19077*u>>8)+(33050*h>>8)-17685)}function ht(u,h,b,S,k){S[k+0]=We(u,b),S[k+1]=at(u,h,b),S[k+2]=rt(u,h)}function It(u,h,b,S,k){S[k+0]=rt(u,h),S[k+1]=at(u,h,b),S[k+2]=We(u,b)}function $t(u,h,b,S,k){var M=at(u,h,b);h=M<<3&224|rt(u,h)>>3,S[k+0]=248&We(u,b)|M>>5,S[k+1]=h}function Jt(u,h,b,S,k){var M=240&rt(u,h)|15;S[k+0]=240&We(u,b)|at(u,h,b)>>4,S[k+1]=M}function pr(u,h,b,S,k){S[k+0]=255,ht(u,h,b,S,k+1)}function ar(u,h,b,S,k){It(u,h,b,S,k),S[k+3]=255}function Nn(u,h,b,S,k){ht(u,h,b,S,k),S[k+3]=255}function Wr(u,h){return 0>u?0:u>h?h:u}function $n(u,h,b){C[u]=function(S,k,M,I,R,z,G,ae,pe){for(var me=ae+(-2&pe)*b;ae!=me;)h(S[k+0],M[I+0],R[z+0],G,ae),h(S[k+1],M[I+0],R[z+0],G,ae+b),k+=2,++I,++z,ae+=2*b;1&pe&&h(S[k+0],M[I+0],R[z+0],G,ae)}}function wl(u,h,b){return b==0?u==0?h==0?6:5:h==0?4:0:b}function Ki(u,h,b,S,k){switch(u>>>30){case 3:sa(h,b,S,k,0);break;case 2:Ht(h,b,S,k);break;case 1:_r(h,b,S,k)}}function Xi(u,h){var b,S,k=h.M,M=h.Nb,I=u.oc,R=u.pc+40,z=u.oc,G=u.pc+584,ae=u.oc,pe=u.pc+600;for(b=0;16>b;++b)I[R+32*b-1]=129;for(b=0;8>b;++b)z[G+32*b-1]=129,ae[pe+32*b-1]=129;for(0<k?I[R-1-32]=z[G-1-32]=ae[pe-1-32]=129:(a(I,R-32-1,127,21),a(z,G-32-1,127,9),a(ae,pe-32-1,127,9)),S=0;S<u.za;++S){var me=h.ya[h.aa+S];if(0<S){for(b=-1;16>b;++b)n(I,R+32*b-4,I,R+32*b+12,4);for(b=-1;8>b;++b)n(z,G+32*b-4,z,G+32*b+4,4),n(ae,pe+32*b-4,ae,pe+32*b+4,4)}var le=u.Gd,Ne=u.Hd+S,ve=me.ad,ie=me.Hc;if(0<k&&(n(I,R-32,le[Ne].y,0,16),n(z,G-32,le[Ne].f,0,8),n(ae,pe-32,le[Ne].ea,0,8)),me.Za){var oe=I,xe=R-32+16;for(0<k&&(S>=u.za-1?a(oe,xe,le[Ne].y[15],4):n(oe,xe,le[Ne+1].y,0,4)),b=0;4>b;b++)oe[xe+128+b]=oe[xe+256+b]=oe[xe+384+b]=oe[xe+0+b];for(b=0;16>b;++b,ie<<=2)oe=I,xe=R+Cf[b],jn[me.Ob[b]](oe,xe),Ki(ie,ve,16*+b,oe,xe)}else if(oe=wl(S,k,me.Ob[0]),_a[oe](I,R),ie!=0)for(b=0;16>b;++b,ie<<=2)Ki(ie,ve,16*+b,I,R+Cf[b]);for(b=me.Gc,oe=wl(S,k,me.Dd),oa[oe](z,G),oa[oe](ae,pe),ie=ve,oe=z,xe=G,255&(me=b>>0)&&(170&me?to(ie,256,oe,xe):Qr(ie,256,oe,xe)),me=ae,ie=pe,255&(b>>=8)&&(170&b?to(ve,320,me,ie):Qr(ve,320,me,ie)),k<u.Ub-1&&(n(le[Ne].y,0,I,R+480,16),n(le[Ne].f,0,z,G+224,8),n(le[Ne].ea,0,ae,pe+224,8)),b=8*M*u.B,le=u.sa,Ne=u.ta+16*S+16*M*u.R,ve=u.qa,me=u.ra+8*S+b,ie=u.Ha,oe=u.Ia+8*S+b,b=0;16>b;++b)n(le,Ne+b*u.R,I,R+32*b,16);for(b=0;8>b;++b)n(ve,me+b*u.B,z,G+32*b,8),n(ie,oe+b*u.B,ae,pe+32*b,8)}}function qs(u,h,b,S,k,M,I,R,z){var G=[0],ae=[0],pe=0,me=z!=null?z.kd:0,le=z??new Hi;if(u==null||12>b)return 7;le.data=u,le.w=h,le.ha=b,h=[h],b=[b],le.gb=[le.gb];e:{var Ne=h,ve=b,ie=le.gb;if(t(u!=null),t(ve!=null),t(ie!=null),ie[0]=0,12<=ve[0]&&!r(u,Ne[0],"RIFF")){if(r(u,Ne[0]+8,"WEBP")){ie=3;break e}var oe=De(u,Ne[0]+4);if(12>oe||4294967286<oe){ie=3;break e}if(me&&oe>ve[0]-8){ie=7;break e}ie[0]=oe,Ne[0]+=12,ve[0]-=12}ie=0}if(ie!=0)return ie;for(oe=0<le.gb[0],b=b[0];;){e:{var xe=u;ve=h,ie=b;var je=G,we=ae,Fe=Ne=[0];if((Me=pe=[pe])[0]=0,8>ie[0])ie=7;else{if(!r(xe,ve[0],"VP8X")){if(De(xe,ve[0]+4)!=10){ie=3;break e}if(18>ie[0]){ie=7;break e}var Pe=De(xe,ve[0]+8),He=1+Te(xe,ve[0]+12);if(2147483648<=He*(xe=1+Te(xe,ve[0]+15))){ie=3;break e}Fe!=null&&(Fe[0]=Pe),je!=null&&(je[0]=He),we!=null&&(we[0]=xe),ve[0]+=18,ie[0]-=18,Me[0]=1}ie=0}}if(pe=pe[0],Ne=Ne[0],ie!=0)return ie;if(ve=!!(2&Ne),!oe&&pe)return 3;if(M!=null&&(M[0]=!!(16&Ne)),I!=null&&(I[0]=ve),R!=null&&(R[0]=0),I=G[0],Ne=ae[0],pe&&ve&&z==null){ie=0;break}if(4>b){ie=7;break}if(oe&&pe||!oe&&!pe&&!r(u,h[0],"ALPH")){b=[b],le.na=[le.na],le.P=[le.P],le.Sa=[le.Sa];e:{Pe=u,ie=h,oe=b;var Me=le.gb;je=le.na,we=le.P,Fe=le.Sa,He=22,t(Pe!=null),t(oe!=null),xe=ie[0];var gt=oe[0];for(t(je!=null),t(Fe!=null),je[0]=null,we[0]=null,Fe[0]=0;;){if(ie[0]=xe,oe[0]=gt,8>gt){ie=7;break e}var yt=De(Pe,xe+4);if(4294967286<yt){ie=3;break e}var ft=8+yt+1&-2;if(He+=ft,0<Me&&He>Me){ie=3;break e}if(!r(Pe,xe,"VP8 ")||!r(Pe,xe,"VP8L")){ie=0;break e}if(gt[0]<ft){ie=7;break e}r(Pe,xe,"ALPH")||(je[0]=Pe,we[0]=xe+8,Fe[0]=yt),xe+=ft,gt-=ft}}if(b=b[0],le.na=le.na[0],le.P=le.P[0],le.Sa=le.Sa[0],ie!=0)break}b=[b],le.Ja=[le.Ja],le.xa=[le.xa];e:if(Me=u,ie=h,oe=b,je=le.gb[0],we=le.Ja,Fe=le.xa,Pe=ie[0],xe=!r(Me,Pe,"VP8 "),He=!r(Me,Pe,"VP8L"),t(Me!=null),t(oe!=null),t(we!=null),t(Fe!=null),8>oe[0])ie=7;else{if(xe||He){if(Me=De(Me,Pe+4),12<=je&&Me>je-12){ie=3;break e}if(me&&Me>oe[0]-8){ie=7;break e}we[0]=Me,ie[0]+=8,oe[0]-=8,Fe[0]=He}else Fe[0]=5<=oe[0]&&Me[Pe+0]==47&&!(Me[Pe+4]>>5),we[0]=oe[0];ie=0}if(b=b[0],le.Ja=le.Ja[0],le.xa=le.xa[0],h=h[0],ie!=0)break;if(4294967286<le.Ja)return 3;if(R==null||ve||(R[0]=le.xa?2:1),I=[I],Ne=[Ne],le.xa){if(5>b){ie=7;break}R=I,me=Ne,ve=M,u==null||5>b?u=0:5<=b&&u[h+0]==47&&!(u[h+4]>>5)?(oe=[0],Me=[0],je=[0],Q(we=new P,u,h,b),Ve(we,oe,Me,je)?(R!=null&&(R[0]=oe[0]),me!=null&&(me[0]=Me[0]),ve!=null&&(ve[0]=je[0]),u=1):u=0):u=0}else{if(10>b){ie=7;break}R=Ne,u==null||10>b||!sl(u,h+3,b-3)?u=0:(me=u[h+0]|u[h+1]<<8|u[h+2]<<16,ve=16383&(u[h+7]<<8|u[h+6]),u=16383&(u[h+9]<<8|u[h+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=le.Ja||!ve||!u?u=0:(I&&(I[0]=ve),R&&(R[0]=u),u=1))}if(!u||(I=I[0],Ne=Ne[0],pe&&(G[0]!=I||ae[0]!=Ne)))return 3;z!=null&&(z[0]=le,z.offset=h-z.w,t(4294967286>h-z.w),t(z.offset==z.ha-b));break}return ie==0||ie==7&&pe&&z==null?(M!=null&&(M[0]|=le.na!=null&&0<le.na.length),S!=null&&(S[0]=I),k!=null&&(k[0]=Ne),0):ie}function Ji(u,h,b){var S=h.width,k=h.height,M=0,I=0,R=S,z=k;if(h.Da=u!=null&&0<u.Da,h.Da&&(R=u.cd,z=u.bd,M=u.v,I=u.j,11>b||(M&=-2,I&=-2),0>M||0>I||0>=R||0>=z||M+R>S||I+z>k))return 0;if(h.v=M,h.j=I,h.va=M+R,h.o=I+z,h.U=R,h.T=z,h.da=u!=null&&0<u.da,h.da){if(!Ze(R,z,b=[u.ib],M=[u.hb]))return 0;h.ib=b[0],h.hb=M[0]}return h.ob=u!=null&&u.ob,h.Kb=u==null||!u.Sd,h.da&&(h.ob=h.ib<3*S/4&&h.hb<3*k/4,h.Kb=0),1}function Zi(u){if(u==null)return 2;if(11>u.S){var h=u.f.RGBA;h.fb+=(u.height-1)*h.A,h.A=-h.A}else h=u.f.kb,u=u.height,h.O+=(u-1)*h.fa,h.fa=-h.fa,h.N+=(u-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(u-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(u-1)*h.lb,h.lb=-h.lb);return 0}function zs(u,h,b,S){if(S==null||0>=u||0>=h)return 2;if(b!=null){if(b.Da){var k=b.cd,M=b.bd,I=-2&b.v,R=-2&b.j;if(0>I||0>R||0>=k||0>=M||I+k>u||R+M>h)return 2;u=k,h=M}if(b.da){if(!Ze(u,h,k=[b.ib],M=[b.hb]))return 2;u=k[0],h=M[0]}}S.width=u,S.height=h;e:{var z=S.width,G=S.height;if(u=S.S,0>=z||0>=G||!(u>=Cl&&13>u))u=2;else{if(0>=S.Rd&&S.sd==null){I=M=k=h=0;var ae=(R=z*Lf[u])*G;if(11>u||(M=(G+1)/2*(h=(z+1)/2),u==12&&(I=(k=z)*G)),(G=s(ae+2*M+I))==null){u=1;break e}S.sd=G,11>u?((z=S.f.RGBA).eb=G,z.fb=0,z.A=R,z.size=ae):((z=S.f.kb).y=G,z.O=0,z.fa=R,z.Fd=ae,z.f=G,z.N=0+ae,z.Ab=h,z.Cd=M,z.ea=G,z.W=0+ae+M,z.Db=h,z.Ed=M,u==12&&(z.F=G,z.J=0+ae+2*M),z.Tc=I,z.lb=k)}if(h=1,k=S.S,M=S.width,I=S.height,k>=Cl&&13>k)if(11>k)u=S.f.RGBA,h&=(R=Math.abs(u.A))*(I-1)+M<=u.size,h&=R>=M*Lf[k],h&=u.eb!=null;else{u=S.f.kb,R=(M+1)/2,ae=(I+1)/2,z=Math.abs(u.fa),G=Math.abs(u.Ab);var pe=Math.abs(u.Db),me=Math.abs(u.lb),le=me*(I-1)+M;h&=z*(I-1)+M<=u.Fd,h&=G*(ae-1)+R<=u.Cd,h=(h&=pe*(ae-1)+R<=u.Ed)&z>=M&G>=R&pe>=R,h&=u.y!=null,h&=u.f!=null,h&=u.ea!=null,k==12&&(h&=me>=M,h&=le<=u.Tc,h&=u.F!=null)}else h=0;u=h?0:2}}return u!=0||b!=null&&b.fd&&(u=Zi(S)),u}var cr=64,Us=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ws=24,Hs=32,Qi=8,kr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ce("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(u){return u},C.Predictor2=function(u,h,b){return h[b+0]},C.Predictor3=function(u,h,b){return h[b+1]},C.Predictor4=function(u,h,b){return h[b-1]},C.Predictor5=function(u,h,b){return ke(ke(u,h[b+1]),h[b+0])},C.Predictor6=function(u,h,b){return ke(u,h[b-1])},C.Predictor7=function(u,h,b){return ke(u,h[b+0])},C.Predictor8=function(u,h,b){return ke(h[b-1],h[b+0])},C.Predictor9=function(u,h,b){return ke(h[b+0],h[b+1])},C.Predictor10=function(u,h,b){return ke(ke(u,h[b-1]),ke(h[b+0],h[b+1]))},C.Predictor11=function(u,h,b){var S=h[b+0];return 0>=et(S>>24&255,u>>24&255,(h=h[b-1])>>24&255)+et(S>>16&255,u>>16&255,h>>16&255)+et(S>>8&255,u>>8&255,h>>8&255)+et(255&S,255&u,255&h)?S:u},C.Predictor12=function(u,h,b){var S=h[b+0];return(ze((u>>24&255)+(S>>24&255)-((h=h[b-1])>>24&255))<<24|ze((u>>16&255)+(S>>16&255)-(h>>16&255))<<16|ze((u>>8&255)+(S>>8&255)-(h>>8&255))<<8|ze((255&u)+(255&S)-(255&h)))>>>0},C.Predictor13=function(u,h,b){var S=h[b-1];return(Xe((u=ke(u,h[b+0]))>>24&255,S>>24&255)<<24|Xe(u>>16&255,S>>16&255)<<16|Xe(u>>8&255,S>>8&255)<<8|Xe(u>>0&255,S>>0&255))>>>0};var Tu=C.PredictorAdd0;C.PredictorAdd1=ot,Ce("Predictor2","PredictorAdd2"),Ce("Predictor3","PredictorAdd3"),Ce("Predictor4","PredictorAdd4"),Ce("Predictor5","PredictorAdd5"),Ce("Predictor6","PredictorAdd6"),Ce("Predictor7","PredictorAdd7"),Ce("Predictor8","PredictorAdd8"),Ce("Predictor9","PredictorAdd9"),Ce("Predictor10","PredictorAdd10"),Ce("Predictor11","PredictorAdd11"),Ce("Predictor12","PredictorAdd12"),Ce("Predictor13","PredictorAdd13");var eo=C.PredictorAdd2;lt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var Nl,Zr=C.ColorIndexInverseTransform,Gs=C.MapARGB,jl=C.VP8LColorIndexInverseTransformAlpha,Sl=C.MapAlpha,wa=C.VP8LPredictorsAdd=[];wa.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Ja,Or,Sr,Na,na,aa,Vs,sa,Ht,to,_r,Qr,Ys,_l,ro,Za,Qa,ja,es,Ks,ts,Sa,no,en,tn,Et,Ct,Gt,tr=s(511),ia=s(2041),ao=s(225),Xs=s(767),Al=0,Mu=ia,El=ao,Hr=Xs,rn=tr,Cl=0,Ll=1,bf=2,Dl=3,Pl=4,Iu=5,yf=6,Ru=7,Fu=8,kl=9,$u=10,y1=[2,3,7],x1=[3,3,11],xf=[280,256,256,256,40],w1=[0,1,1,1,0],N1=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],j1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],S1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_1=8,Bu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],qu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],so=null,A1=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],E1=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],wf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],C1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],L1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],D1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],P1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_a=[],jn=[],oa=[],k1=1,Nf=2,Aa=[],nn=[];be("UpsampleRgbLinePair",ht,3),be("UpsampleBgrLinePair",It,3),be("UpsampleRgbaLinePair",Nn,4),be("UpsampleBgraLinePair",ar,4),be("UpsampleArgbLinePair",pr,4),be("UpsampleRgba4444LinePair",Jt,2),be("UpsampleRgb565LinePair",$t,2);var O1=C.UpsampleRgbLinePair,T1=C.UpsampleBgrLinePair,jf=C.UpsampleRgbaLinePair,Sf=C.UpsampleBgraLinePair,_f=C.UpsampleArgbLinePair,Af=C.UpsampleRgba4444LinePair,M1=C.UpsampleRgb565LinePair,Ol=16,Tl=1<<Ol-1,io=-227,zu=482,I1=6,Ef=0,R1=s(256),F1=s(256),$1=s(256),B1=s(256),q1=s(zu-io),z1=s(zu-io);$n("YuvToRgbRow",ht,3),$n("YuvToBgrRow",It,3),$n("YuvToRgbaRow",Nn,4),$n("YuvToBgraRow",ar,4),$n("YuvToArgbRow",pr,4),$n("YuvToRgba4444Row",Jt,2),$n("YuvToRgb565Row",$t,2);var Cf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ml=[0,2,8],U1=[8,7,6,4,4,2,2,2,1,1,1,1],W1=1;this.WebPDecodeRGBA=function(u,h,b,S,k){var M=Ll,I=new $s,R=new mn;I.ba=R,R.S=M,R.width=[R.width],R.height=[R.height];var z=R.width,G=R.height,ae=new Qn;if(ae==null||u==null)var pe=2;else t(ae!=null),pe=qs(u,h,b,ae.width,ae.height,ae.Pd,ae.Qd,ae.format,null);if(pe!=0?z=0:(z!=null&&(z[0]=ae.width[0]),G!=null&&(G[0]=ae.height[0]),z=1),z){R.width=R.width[0],R.height=R.height[0],S!=null&&(S[0]=R.width),k!=null&&(k[0]=R.height);e:{if(S=new ks,(k=new Hi).data=u,k.w=h,k.ha=b,k.kd=1,h=[0],t(k!=null),((u=qs(k.data,k.w,k.ha,null,null,null,h,null,k))==0||u==7)&&h[0]&&(u=4),(h=u)==0){if(t(I!=null),S.data=k.data,S.w=k.w+k.offset,S.ha=k.ha-k.offset,S.put=kn,S.ac=lr,S.bc=On,S.ma=I,k.xa){if((u=Jr())==null){I=1;break e}if(function(me,le){var Ne=[0],ve=[0],ie=[0];t:for(;;){if(me==null)return 0;if(le==null)return me.a=2,0;if(me.l=le,me.a=0,Q(me.m,le.data,le.w,le.ha),!Ve(me.m,Ne,ve,ie)){me.a=3;break t}if(me.xb=Nf,le.width=Ne[0],le.height=ve[0],!In(Ne[0],ve[0],1,me,null))break t;return 1}return t(me.a!=0),0}(u,S)){if(S=(h=zs(S.width,S.height,I.Oa,I.ba))==0){t:{S=u;r:for(;;){if(S==null){S=0;break t}if(t(S.s.yc!=null),t(S.s.Ya!=null),t(0<S.s.Wb),t((b=S.l)!=null),t((k=b.ma)!=null),S.xb!=0){if(S.ca=k.ba,S.tb=k.tb,t(S.ca!=null),!Ji(k.Oa,b,Dl)){S.a=2;break r}if(!Ga(S,b.width)||b.da)break r;if((b.da||vt(S.ca.S))&&he(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&he()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!Ge(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!yn(S,S.V,S.Ba,S.c,S.i,b.o,As))break r;k.Dc=S.Ma,S=1;break t}t(S.a!=0),S=0}S=!S}S&&(h=u.a)}else h=u.a}else{if((u=new mu)==null){I=1;break e}if(u.Fa=k.na,u.P=k.P,u.qc=k.Sa,il(u,S)){if((h=zs(S.width,S.height,I.Oa,I.ba))==0){if(u.Aa=0,b=I.Oa,t((k=u)!=null),b!=null){if(0<(z=0>(z=b.Md)?0:100<z?255:255*z/100)){for(G=ae=0;4>G;++G)12>(pe=k.pb[G]).lc&&(pe.ia=z*U1[0>pe.lc?0:pe.lc]>>3),ae|=pe.ia;ae&&(alert("todo:VP8InitRandom"),k.ia=1)}k.Ga=b.Id,100<k.Ga?k.Ga=100:0>k.Ga&&(k.Ga=0)}gu(u,S)||(h=u.a)}}else h=u.a}h==0&&I.Oa!=null&&I.Oa.fd&&(h=Zi(I.ba))}I=h}M=I!=0?null:11>M?R.f.RGBA.eb:R.f.kb.y}else M=null;return M};var Lf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(C,$){for(var H="",L=0;L<4;L++)H+=String.fromCharCode(C[$++]);return H}function p(C,$){return(C[$+0]<<0|C[$+1]<<8|C[$+2]<<16)>>>0}function m(C,$){return(C[$+0]<<0|C[$+1]<<8|C[$+2]<<16|C[$+3]<<24)>>>0}new c;var g=[0],f=[0],N=[],y=new c,j=e,x=function(C,$){var H={},L=0,D=!1,F=0,U=0;if(H.frames=[],!function(q,V,Z,se){for(var de=0;de<se;de++)if(q[V+de]!=Z.charCodeAt(de))return!0;return!1}(C,$,"RIFF",4)){for(m(C,$+=4),$+=8;$<C.length;){var ee=d(C,$),te=m(C,$+=4);$+=4;var re=te+(1&te);switch(ee){case"VP8 ":case"VP8L":H.frames[L]===void 0&&(H.frames[L]={}),(X=H.frames[L]).src_off=D?U:$-8,X.src_size=F+te+8,L++,D&&(D=!1,F=0,U=0);break;case"VP8X":(X=H.header={}).feature_flags=C[$];var Q=$+4;X.canvas_width=1+p(C,Q),Q+=3,X.canvas_height=1+p(C,Q),Q+=3;break;case"ALPH":D=!0,F=re+8,U=$-8;break;case"ANIM":(X=H.header).bgcolor=m(C,$),Q=$+4,X.loop_count=(ce=C)[(P=Q)+0]<<0|ce[P+1]<<8,Q+=2;break;case"ANMF":var Y,X;(X=H.frames[L]={}).offset_x=2*p(C,$),$+=3,X.offset_y=2*p(C,$),$+=3,X.width=1+p(C,$),$+=3,X.height=1+p(C,$),$+=3,X.duration=p(C,$),$+=3,Y=C[$++],X.dispose=1&Y,X.blend=Y>>1&1}ee!="ANMF"&&($+=re)}var ce,P;return H}}(j,0);x.response=j,x.rgbaoutput=!0,x.dataurl=!1;var w=x.header?x.header:null,_=x.frames?x.frames:null;if(w){w.loop_counter=w.loop_count,g=[w.canvas_height],f=[w.canvas_width];for(var E=0;E<_.length&&_[E].blend!=0;E++);}var A=_[0],B=y.WebPDecodeRGBA(j,A.src_off,A.src_size,f,g);A.rgba=B,A.imgwidth=f[0],A.imgheight=g[0];for(var T=0;T<f[0]*g[0]*4;T++)N[T]=B[T];return this.width=f,this.height=g,this.data=N,this}(function(e){var t=function(){return typeof Fd=="function"},r=function(g,f,N,y){var j=4,x=o;switch(y){case e.image_compression.FAST:j=1,x=s;break;case e.image_compression.MEDIUM:j=6,x=l;break;case e.image_compression.SLOW:j=9,x=c}g=n(g,f,N,x);var w=Fd(g,{level:j});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(g,f,N,y){for(var j,x,w,_=g.length/f,E=new Uint8Array(g.length+_),A=p(),B=0;B<_;B+=1){if(w=B*f,j=g.subarray(w,w+f),y)E.set(y(j,N,x),w+B);else{for(var T,C=A.length,$=[];T<C;T+=1)$[T]=A[T](j,N,x);var H=m($.concat());E.set($[H],w+B)}x=j}return E},a=function(g){var f=Array.apply([],g);return f.unshift(0),f},s=function(g,f){var N,y=[],j=g.length;y[0]=1;for(var x=0;x<j;x+=1)N=g[x-f]||0,y[x+1]=g[x]-N+256&255;return y},o=function(g,f,N){var y,j=[],x=g.length;j[0]=2;for(var w=0;w<x;w+=1)y=N&&N[w]||0,j[w+1]=g[w]-y+256&255;return j},l=function(g,f,N){var y,j,x=[],w=g.length;x[0]=3;for(var _=0;_<w;_+=1)y=g[_-f]||0,j=N&&N[_]||0,x[_+1]=g[_]+256-(y+j>>>1)&255;return x},c=function(g,f,N){var y,j,x,w,_=[],E=g.length;_[0]=4;for(var A=0;A<E;A+=1)y=g[A-f]||0,j=N&&N[A]||0,x=N&&N[A-f]||0,w=d(y,j,x),_[A+1]=g[A]-w+256&255;return _},d=function(g,f,N){if(g===f&&f===N)return g;var y=Math.abs(f-N),j=Math.abs(g-N),x=Math.abs(g+f-N-N);return y<=j&&y<=x?g:j<=x?f:N},p=function(){return[a,s,o,l,c]},m=function(g){var f=g.map(function(N){return N.reduce(function(y,j){return y+Math.abs(j)},0)});return f.indexOf(Math.min.apply(null,f))};e.processPNG=function(g,f,N,y){var j,x,w,_,E,A,B,T,C,$,H,L,D,F,U,ee=this.decode.FLATE_DECODE,te="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(w=new ey(g)).imgData,x=w.bits,j=w.colorSpace,E=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){C=(T=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,H=new Uint8Array(C*w.colors),$=new Uint8Array(C);var re,Q=w.pixelBitlength-w.bits;for(F=0,U=0;F<C;F++){for(D=T[F],re=0;re<Q;)H[U++]=D>>>re&255,re+=w.bits;$[F]=D>>>re&255}}if(w.bits===16){C=(T=new Uint32Array(w.decodePixels().buffer)).length,H=new Uint8Array(C*(32/w.pixelBitlength)*w.colors),$=new Uint8Array(C*(32/w.pixelBitlength)),L=w.colors>1,F=0,U=0;for(var Y=0;F<C;)D=T[F++],H[U++]=D>>>0&255,L&&(H[U++]=D>>>16&255,D=T[F++],H[U++]=D>>>0&255),$[Y++]=D>>>16&255;x=8}y!==e.image_compression.NONE&&t()?(g=r(H,w.width*w.colors,w.colors,y),B=r($,w.width,1,y)):(g=H,B=$,ee=void 0)}if(w.colorType===3&&(j=this.color_spaces.INDEXED,A=w.palette,w.transparency.indexed)){var X=w.transparency.indexed,ce=0;for(F=0,C=X.length;F<C;++F)ce+=X[F];if((ce/=255)===C-1&&X.indexOf(0)!==-1)_=[X.indexOf(0)];else if(ce!==C){for(T=w.decodePixels(),$=new Uint8Array(T.length),F=0,C=T.length;F<C;F++)$[F]=X[T[F]];B=r($,w.width,1)}}var P=function(q){var V;switch(q){case e.image_compression.FAST:V=11;break;case e.image_compression.MEDIUM:V=13;break;case e.image_compression.SLOW:V=14;break;default:V=12}return V}(y);return ee===this.decode.FLATE_DECODE&&(te="/Predictor "+P+" "),te+="/Colors "+E+" /BitsPerComponent "+x+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:N,data:g,index:f,filter:ee,decodeParameters:te,transparency:_,palette:A,sMask:B,predictor:P,width:w.width,height:w.height,bitsPerComponent:x,colorSpace:j}}}})(Ye.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new ty(t),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},p=new cd(100).encode(d,100);return e.processJPEG.call(this,p,r,n,a)},e.processGIF87A=e.processGIF89A}(Ye.API),An.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},An.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){_t.log("bit decode error:"+r)}},An.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},An.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},An.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},An.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,d=s>>15?255:0,p=n*this.width*4+4*a;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=o,this.data[p+3]=d}this.pos+=e}},An.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,p=a*this.width*4+4*s;this.data[p]=d,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=255}this.pos+=e}},An.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},An.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},An.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new An(t,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},d=new cd(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}}(Ye.API),bp.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new bp(t),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},d=new cd(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}}(Ye.API),Ye.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var p=n[d],m=n[d+1],g=n[d+2],f=n[d+3];s[l++]=p,s[l++]=m,s[l++]=g,o[c++]=f}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:N,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ye.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ri=Ye.API,Xl=ri.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,p=d.fof?d.fof:1,m=t.doKerning!==!1,g=0,f=e.length,N=0,y=l[0]||c,j=[];for(r=0;r<f;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?j.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(g=m&&dt(d[n])==="object"&&!isNaN(parseInt(d[n][N],10))?d[n][N]/p:0,j.push((l[n]||y)/c+g)),N=n;return j},pp=ri.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return ri.processArabic&&(e=ri.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Xl.apply(this,arguments).reduce(function(s,o){return s+o},0)},mp=function(e,t,r,n){for(var a=[],s=0,o=e.length,l=0;s!==o&&l+t[s]<r;)l+=t[s],s++;a.push(e.slice(0,s));var c=s;for(l=0;s!==o;)l+t[s]>n&&(a.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},gp=function(e,t,r){r||(r={});var n,a,s,o,l,c,d,p=[],m=[p],g=r.textIndent||0,f=0,N=0,y=e.split(" "),j=Xl.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),w=[];y.map(function(E){(E=E.split(/\s*\n/)).length>1?w=w.concat(E.map(function(A,B){return(B&&A.length?`
`:"")+A})):w.push(E[0])}),y=w,c=pp.apply(this,[x,r])}for(s=0,o=y.length;s<o;s++){var _=0;if(n=y[s],c&&n[0]==`
`&&(n=n.substr(1),_=1),g+f+(N=(a=Xl.apply(this,[n,r])).reduce(function(E,A){return E+A},0))>t||_){if(N>t){for(l=mp.apply(this,[n,a,t-(g+f),t]),p.push(l.shift()),p=[l.pop()];l.length;)m.push([l.shift()]);N=a.slice(n.length-(p[0]?p[0].length:0)).reduce(function(E,A){return E+A},0)}else p=[n];m.push(p),g=N+c,f=j}else p.push(n),g+=f+N,f=j}return d=c?function(E,A){return(A?x:"")+E.join(" ")}:function(E){return E.join(" ")},m.map(d)},ri.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat(gp.apply(this,[n[l],o,s]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(m){return"0x"+parseInt(m,10).toString(16)},o=e.__fontmetrics__.compress=function(m){var g,f,N,y,j=["{"];for(var x in m){if(g=m[x],isNaN(parseInt(x,10))?f="'"+x+"'":(x=parseInt(x,10),f=(f=s(x).slice(2)).slice(0,-1)+n[f.slice(-1)]),typeof g=="number")g<0?(N=s(g).slice(3),y="-"):(N=s(g).slice(2),y=""),N=y+N.slice(0,-1)+n[N.slice(-1)];else{if(dt(g)!=="object")throw new Error("Don't know what to do with value type "+dt(g)+".");N=o(g)}j.push(f+N)}return j.push("}"),j.join("")},l=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,f,N,y,j={},x=1,w=j,_=[],E="",A="",B=m.length-1,T=1;T<B;T+=1)(y=m[T])=="'"?g?(N=g.join(""),g=void 0):g=[]:g?g.push(y):y=="{"?(_.push([w,N]),w={},N=void 0):y=="}"?((f=_.pop())[0][f[1]]=w,N=void 0,w=f[0]):y=="-"?x=-1:N===void 0?r.hasOwnProperty(y)?(E+=r[y],N=parseInt(E,16)*x,x=1,E=""):E+=y:r.hasOwnProperty(y)?(A+=r[y],w[N]=parseInt(A,16)*x,x=1,N=void 0,A=""):A+=y;return j},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var g=m.font,f=p.Unicode[g.postScriptName];f&&(g.metadata.Unicode={},g.metadata.Unicode.widths=f.widths,g.metadata.Unicode.kerning=f.kerning);var N=d.Unicode[g.postScriptName];N&&(g.metadata.Unicode.encoding=N,g.encoding=N.codePages[0])}])}(Ye.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(wo(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(Ye),function(e){function t(){return(Ke.canvg?Promise.resolve(Ke.canvg):Pd(()=>import("./index.es-DSS-Huz6.js"),__vite__mapDeps([0,1,2,3,4]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Ye.API.addSvgAsImage=function(r,n,a,s,o,l,c,d){if(isNaN(n)||isNaN(a))throw _t.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw _t.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=o;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return t().then(function(N){return N.fromString(m,r,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(g)}).then(function(){f.addImage(p.toDataURL("image/jpeg",1),n,a,s,o,c,d)})}}(),Ye.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Ye.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,p=0,m=0;function g(N,y){var j,x=!1;for(j=0;j<N.length;j+=1)N[j]===y&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=l.length;for(m=0;m<f;m+=1)r[l[m]].value=r[l[m]].defaultValue,r[l[m]].explicitSet=!1}if(dt(e)==="object"){for(a in e)if(s=e[a],g(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&g(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(d=0;d<s.length;d+=1)if(n=!0,s[d].length===1&&typeof s[d][0]=="number")c.push(String(s[d]-1));else if(s[d].length>1){for(p=0;p<s[d].length;p+=1)typeof s[d][p]!="number"&&(n=!1);n===!0&&c.push([s[d][0]-1,s[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,y=[];for(N in r)r[N].explicitSet===!0&&(r[N].type==="name"?y.push("/"+N+" /"+r[N].value):y.push("/"+N+" "+r[N].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Ye.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],p=[""],m=0,g=s.length;m<g;++m){if(l=o.metadata.characterToGlyph(s.charCodeAt(m)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return p.join("");l=l.toString(16),p.push(d[4-l.length],l)}return p.join("")},n=function(s){var o,l,c,d,p,m,g;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,g=(l=Object.keys(s).sort(function(f,N){return f-N})).length;m<g;m++)o=l[m],c.length>=100&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(d=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,d=o.newObject,p=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,g=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",N=0;N<g.length;N++)f+=String.fromCharCode(g[N]);var y=d();p({data:f,addLength1:!0,objectId:y}),c("endobj");var j=d();p({data:n(l.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var x=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ii(l.fontName)),c("/FontFile2 "+y+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+ii(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+e.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+j+" 0 R"),c("/BaseFont /"+ii(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,d=o.newObject,p=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,g="",f=0;f<m.length;f++)g+=String.fromCharCode(m[f]);var N=d();p({data:g,addLength1:!0,objectId:N}),c("endobj");var y=d();p({data:n(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var j=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+N+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+ii(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+ii(l.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,d=s.y,p=s.options||{},m=s.mutex||{},g=m.pdfEscape,f=m.activeFontKey,N=m.fonts,y=f,j="",x=0,w="",_=N[y].encoding;if(N[y].encoding!=="Identity-H")return{text:l,x:c,y:d,options:p,mutex:m};for(w=l,y=f,Array.isArray(l)&&(w=l[0]),x=0;x<w.length;x+=1)N[y].metadata.hasOwnProperty("cmap")&&(o=N[y].metadata.cmap.unicode.codeMap[w[x].charCodeAt(0)]),o||w[x].charCodeAt(0)<256&&N[y].metadata.hasOwnProperty("Unicode")?j+=w[x]:j+="";var E="";return parseInt(y.slice(1))<14||_==="WinAnsiEncoding"?E=g(j,y).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(E=r(j,N[y])),m.isHex=!0,{text:E,x:c,y:d,options:p,mutex:m}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(Ye),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Ye.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,o,l,c,d,p,m=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,_=0;this.__bidiEngine__={};var E=function(L){var D=L.charCodeAt(),F=D>>8,U=y[F];return U!==void 0?m[256*U+(255&D)]:F===252||F===253?"AL":x.test(F)?"L":F===8?"R":"N"},A=function(L){for(var D,F=0;F<L.length;F++){if((D=E(L.charAt(F)))==="L")return!1;if(D==="R")return!0}return!1},B=function(L,D,F,U){var ee,te,re,Q,Y=D[U];switch(Y){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(Y="AN");break;case"AL":w=!0,Y="R";break;case"WS":Y="N";break;case"CS":U<1||U+1>=D.length||(ee=F[U-1])!=="EN"&&ee!=="AN"||(te=D[U+1])!=="EN"&&te!=="AN"?Y="N":w&&(te="AN"),Y=te===ee?te:"N";break;case"ES":Y=(ee=U>0?F[U-1]:"B")==="EN"&&U+1<D.length&&D[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&F[U-1]==="EN"){Y="EN";break}if(w){Y="N";break}for(re=U+1,Q=D.length;re<Q&&D[re]==="ET";)re++;Y=re<Q&&D[re]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(Q=D.length,re=U+1;re<Q&&D[re]==="NSM";)re++;if(re<Q){var X=L[U],ce=X>=1425&&X<=2303||X===64286;if(ee=D[re],ce&&(ee==="R"||ee==="AL")){Y="R";break}}}Y=U<1||(ee=D[U-1])==="B"?"N":F[U-1];break;case"B":w=!1,a=!0,Y=_;break;case"S":s=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":Y="N"}return Y},T=function(L,D,F){var U=L.split("");return F&&C(U,F,{hiLevel:_}),U.reverse(),D&&D.reverse(),U.join("")},C=function(L,D,F){var U,ee,te,re,Q,Y=-1,X=L.length,ce=0,P=[],q=_?f:g,V=[];for(w=!1,a=!1,s=!1,ee=0;ee<X;ee++)V[ee]=E(L[ee]);for(te=0;te<X;te++){if(Q=ce,P[te]=B(L,V,P,te),U=240&(ce=q[Q][N[P[te]]]),ce&=15,D[te]=re=q[ce][5],U>0)if(U===16){for(ee=Y;ee<te;ee++)D[ee]=1;Y=-1}else Y=-1;if(q[ce][6])Y===-1&&(Y=te);else if(Y>-1){for(ee=Y;ee<te;ee++)D[ee]=re;Y=-1}V[te]==="B"&&(D[te]=0),F.hiLevel|=re}s&&function(Z,se,de){for(var fe=0;fe<de;fe++)if(Z[fe]==="S"){se[fe]=_;for(var ge=fe-1;ge>=0&&Z[ge]==="WS";ge--)se[ge]=_}}(V,D,X)},$=function(L,D,F,U,ee){if(!(ee.hiLevel<L)){if(L===1&&_===1&&!a)return D.reverse(),void(F&&F.reverse());for(var te,re,Q,Y,X=D.length,ce=0;ce<X;){if(U[ce]>=L){for(Q=ce+1;Q<X&&U[Q]>=L;)Q++;for(Y=ce,re=Q-1;Y<re;Y++,re--)te=D[Y],D[Y]=D[re],D[re]=te,F&&(te=F[Y],F[Y]=F[re],F[re]=te);ce=Q}ce++}}},H=function(L,D,F){var U=L.split(""),ee={hiLevel:_};return F||(F=[]),C(U,F,ee),function(te,re,Q){if(Q.hiLevel!==0&&p)for(var Y,X=0;X<te.length;X++)re[X]===1&&(Y=j.indexOf(te[X]))>=0&&(te[X]=j[Y+1])}(U,F,ee),$(2,U,D,F,ee),$(1,U,D,F,ee),U.join("")};return this.__bidiEngine__.doBidiReorder=function(L,D,F){if(function(ee,te){if(te)for(var re=0;re<ee.length;re++)te[re]=re;l===void 0&&(l=A(ee)),d===void 0&&(d=A(ee))}(L,D),o||!c||d)if(o&&c&&l^d)_=l?1:0,L=T(L,D,F);else if(!o&&c&&d)_=l?1:0,L=H(L,D,F),L=T(L,D);else if(!o||l||c||d){if(o&&!c&&l^d)L=T(L,D),l?(_=0,L=H(L,D,F)):(_=1,L=H(L,D,F),L=T(L,D));else if(o&&l&&!c&&d)_=1,L=H(L,D,F),L=T(L,D);else if(!o&&!c&&l^d){var U=p;l?(_=1,L=H(L,D,F),_=0,p=!1,L=H(L,D,F),p=U):(_=0,L=H(L,D,F),L=T(L,D),_=1,p=!1,L=H(L,D,F),p=U,L=T(L,D))}}else _=0,L=H(L,D,F);else _=l?1:0,L=H(L,D,F);return L},this.__bidiEngine__.setOptions=function(L){L&&(o=L.isInputVisual,c=L.isOutputVisual,l=L.isInputRtl,d=L.isOutputRtl,p=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Ye),Ye.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Ra(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new gy(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ry(this.contents),this.head=new ay(this),this.name=new cy(this),this.cmap=new s0(this),this.toUnicode={},this.hhea=new sy(this),this.maxp=new uy(this),this.hmtx=new dy(this),this.post=new oy(this),this.os2=new iy(this),this.loca=new my(this),this.glyf=new hy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Dn,Ra=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),ry=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,o,l,c,d,p,m,g,f,N,y;for(y in f=Object.keys(r).length,c=Math.log(2),m=16*Math.floor(Math.log(f)/c),o=Math.floor(m/c),p=16*f-m,(a=new Ra).writeInt(this.scalarType),a.writeShort(f),a.writeShort(m),a.writeShort(o),a.writeShort(p),s=16*f,d=a.pos+s,l=null,N=[],r)for(g=r[y],a.writeString(y),a.writeInt(e(g)),a.writeInt(d),a.writeInt(g.length),N=N.concat(g),y==="head"&&(l=d),d+=g.length;d%4;)N.push(0),d++;return a.write(N),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,o;for(r=i0.call(r);r.length%4;)r.push(0);for(s=new Ra(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),ny={}.hasOwnProperty,Jn=function(e,t){for(var r in t)ny.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Dn=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var ay=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Jn(t,Dn),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Ra).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),yp=function(){function e(t,r){var n,a,s,o,l,c,d,p,m,g,f,N,y,j,x,w,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(f=t.readUInt16(),g=f/2,t.pos+=6,s=function(){var E,A;for(A=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)A.push(t.readUInt16());return A}(),t.pos+=2,y=function(){var E,A;for(A=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)A.push(t.readUInt16());return A}(),d=function(){var E,A;for(A=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)A.push(t.readUInt16());return A}(),p=function(){var E,A;for(A=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)A.push(t.readUInt16());return A}(),a=(this.length-t.pos+this.offset)/2,l=function(){var E,A;for(A=[],c=E=0;0<=a?E<a:E>a;c=0<=a?++E:--E)A.push(t.readUInt16());return A}(),c=x=0,_=s.length;x<_;c=++x)for(j=s[c],n=w=N=y[c];N<=j?w<=j:w>=j;n=N<=j?++w:--w)p[c]===0?o=n+d[c]:(o=l[p[c]/2+(n-N)-(g-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}t.pos=m}return e.encode=function(t,r){var n,a,s,o,l,c,d,p,m,g,f,N,y,j,x,w,_,E,A,B,T,C,$,H,L,D,F,U,ee,te,re,Q,Y,X,ce,P,q,V,Z,se,de,fe,ge,Ae,Se,Te;switch(U=new Ra,o=Object.keys(t).sort(function(De,Ge){return De-Ge}),r){case"macroman":for(y=0,j=function(){var De=[];for(N=0;N<256;++N)De.push(0);return De}(),w={0:0},s={},ee=0,Y=o.length;ee<Y;ee++)w[ge=t[a=o[ee]]]==null&&(w[ge]=++y),s[a]={old:t[a],new:w[t[a]]},j[a]=w[t[a]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(j),{charMap:s,subtable:U.data,maxGlyphID:y+1};case"unicode":for(D=[],m=[],_=0,w={},n={},x=d=null,te=0,X=o.length;te<X;te++)w[A=t[a=o[te]]]==null&&(w[A]=++_),n[a]={old:A,new:w[A]},l=w[A]-a,x!=null&&l===d||(x&&m.push(x),D.push(a),d=l),x=a;for(x&&m.push(x),m.push(65535),D.push(65535),H=2*($=D.length),C=2*Math.pow(Math.log($)/Math.LN2,2),g=Math.log(C/2)/Math.LN2,T=2*$-C,c=[],B=[],f=[],N=re=0,ce=D.length;re<ce;N=++re){if(L=D[N],p=m[N],L===65535){c.push(0),B.push(0);break}if(L-(F=n[L].new)>=32768)for(c.push(0),B.push(2*(f.length+$-N)),a=Q=L;L<=p?Q<=p:Q>=p;a=L<=p?++Q:--Q)f.push(n[a].new);else c.push(F-L),B.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*$+2*f.length),U.writeUInt16(0),U.writeUInt16(H),U.writeUInt16(C),U.writeUInt16(g),U.writeUInt16(T),de=0,P=m.length;de<P;de++)a=m[de],U.writeUInt16(a);for(U.writeUInt16(0),fe=0,q=D.length;fe<q;fe++)a=D[fe],U.writeUInt16(a);for(Ae=0,V=c.length;Ae<V;Ae++)l=c[Ae],U.writeUInt16(l);for(Se=0,Z=B.length;Se<Z;Se++)E=B[Se],U.writeUInt16(E);for(Te=0,se=f.length;Te<se;Te++)y=f[Te],U.writeUInt16(y);return{charMap:n,subtable:U.data,maxGlyphID:_+1}}},e}(),s0=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Jn(t,Dn),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new yp(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=yp.encode(r,n),(s=new Ra).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),sy=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Jn(t,Dn),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),iy=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Jn(t,Dn),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),oy=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Jn(t,Dn),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),ly=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},cy=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Jn(t,Dn),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,o,l,c,d,p,m,g,f;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=m=0,g=a.length;m<g;o=++m)s=a[o],r.pos=s.offset,p=r.readString(s.length),l=new ly(p,s),d[f=s.nameID]==null&&(d[f]=[]),d[s.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),uy=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Jn(t,Dn),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),dy=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Jn(t,Dn),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,o,l,c,d;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,m;for(m=[],n=p=0;0<=s?p<s:p>s;n=0<=s?++p:--p)m.push(r.readInt16());return m}(),this.widths=(function(){var p,m,g,f;for(f=[],p=0,m=(g=this.metrics).length;p<m;p++)o=g[p],f.push(o.advance);return f}).call(this),a=this.widths[this.widths.length-1],d=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)d.push(this.widths.push(a));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),i0=[].slice,hy=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Jn(t,Dn),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,o,l,c,d,p,m,g;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(s=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Ra(n.read(s))).readShort(),p=c.readShort(),g=c.readShort(),d=c.readShort(),m=c.readShort(),this.cache[r]=l===-1?new py(c,p,g,d,m):new fy(c,l,p,g,d,m),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,o,l,c,d;for(l=[],o=[],c=0,d=n.length;c<d;c++)s=r[n[c]],o.push(l.length),s&&(l=l.concat(s.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),fy=function(){function e(t,r,n,a,s,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),py=function(){function e(t,r,n,a,s){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Ra(i0.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),my=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Jn(t,Dn),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,o=0,l=0;l<a.length;++l)if(a[l]=s,o<n.length&&n[o]==l){++o,a[l]=s;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(s+=d)}for(var p=new Array(4*a.length),m=0;m<a.length;++m)p[4*m+3]=255&a[m],p[4*m+2]=(65280&a[m])>>8,p[4*m+1]=(16711680&a[m])>>16,p[4*m]=(4278190080&a[m])>>24;return p},t}(),gy=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[s=t[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,o,l,c,d,p,m,g,f,N,y,j,x;for(a in n=s0.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},x=n.charMap)f[(c=x[a]).old]=c.new;for(N in g=n.maxGlyphID,o)N in f||(f[N]=g++);return p=function(w){var _,E;for(_ in E={},w)E[w[_]]=_;return E}(f),m=Object.keys(p).sort(function(w,_){return w-_}),y=function(){var w,_,E;for(E=[],w=0,_=m.length;w<_;w++)l=m[w],E.push(p[l]);return E}(),s=this.font.glyf.encode(o,y,f),d=this.font.loca.encode(s.offsets,y),j={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},e}();Ye.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)n=r[l],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+r},t}();function vy(){const[e,t]=W.useState({title:"",description:"",event_date:"",start_time:"",end_time:"",location:"",school_level:"elementary",category:"",visibility:"public",estimated_budget:"",share_public:!1}),[r,n]=W.useState(""),[a,s]=W.useState(""),[o,l]=W.useState(!1),[c,d]=W.useState({type:"",season:"",audience:"",theme:"",goal:""}),[p,m]=W.useState(""),g=w=>{const{name:_,value:E,type:A,checked:B}=w.target;t(T=>({...T,[_]:A==="checkbox"?B:E}))},f=async w=>{w.preventDefault(),n(""),s("");const{data:{session:_},error:E}=await Ue.auth.getSession();if(E||!(_!=null&&_.access_token)){s("Authentication error. Please log in again.");return}try{const A=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_.access_token}`},body:JSON.stringify(e)}),B=await A.json();if(!A.ok){s(B.error||"Failed to create event");return}n("Event created successfully!"),t({title:"",description:"",event_date:"",start_time:"",end_time:"",location:"",school_level:"elementary",category:"",visibility:"public",estimated_budget:"",share_public:!1})}catch(A){s("Failed to connect to server."),console.error("Submit error:",A)}},N=w=>{const{name:_,value:E}=w.target;d(A=>({...A,[_]:E}))},y=async()=>{m("Generating...");try{const{data:w}=await Er.post("/api/ai/generate-event",c);m(w.result)}catch{m("AI generation failed.")}},j=()=>{try{const w=JSON.parse(p);t(_=>({..._,title:w.title||"",description:w.description||"",event_date:w.event_date||"",category:w.category||"",school_level:w.school_level||"",location:w.location||"",estimated_budget:w.estimated_budget||""}))}catch(w){alert("Failed to parse AI response. Please review the output and enter manually."),console.error("Parse error:",w)}},x=()=>{try{const w=JSON.parse(p),_=new Ye;_.setFontSize(14),_.text(w.title||"Event Summary",10,20),_.setFontSize(10),_.text(`Date: ${w.event_date||"TBD"}`,10,30),_.text(`Category: ${w.category||"N/A"}`,10,36),_.text(`School Level: ${w.school_level||"N/A"}`,10,42),_.setFontSize(12),_.text("Description:",10,52),_.setFontSize(10),_.text(_.splitTextToSize(w.description||"",180),10,58),_.setFontSize(12),_.text("Planning Tasks:",10,100),(w.tasks||[]).forEach((A,B)=>{_.text(`- ${A}`,10,106+B*6)}),_.save(`${w.title||"event-summary"}.pdf`)}catch(w){alert("Unable to print. Please check that the AI returned a valid result."),console.error("Print error:",w)}};return i.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Create New Event"}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsx("input",{name:"title",value:e.title,onChange:g,placeholder:"Event Title",className:"w-full border p-2",required:!0}),i.jsx("textarea",{name:"description",value:e.description,onChange:g,placeholder:"Description",className:"w-full border p-2"}),i.jsx("input",{type:"date",name:"event_date",value:e.event_date,onChange:g,className:"w-full border p-2",required:!0}),i.jsx("input",{type:"time",name:"start_time",value:e.start_time,onChange:g,className:"w-full border p-2"}),i.jsx("input",{type:"time",name:"end_time",value:e.end_time,onChange:g,className:"w-full border p-2"}),i.jsx("input",{name:"location",value:e.location,onChange:g,placeholder:"Location",className:"w-full border p-2"}),i.jsxs("select",{name:"school_level",value:e.school_level,onChange:g,className:"w-full border p-2",children:[i.jsx("option",{value:"elementary",children:"Elementary"}),i.jsx("option",{value:"upper_elementary",children:"Upper Elementary"}),i.jsx("option",{value:"middle",children:"Middle"}),i.jsx("option",{value:"junior_high",children:"Junior High"}),i.jsx("option",{value:"high",children:"High School"})]}),i.jsx("input",{name:"category",value:e.category,onChange:g,placeholder:"Category (e.g., Fundraiser)",className:"w-full border p-2"}),i.jsx("input",{name:"estimated_budget",value:e.estimated_budget,onChange:g,placeholder:"Estimated Budget",className:"w-full border p-2"}),i.jsxs("select",{name:"visibility",value:e.visibility,onChange:g,className:"w-full border p-2",children:[i.jsx("option",{value:"public",children:"Public"}),i.jsx("option",{value:"private",children:"Private"})]}),i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",name:"share_public",checked:e.share_public,onChange:g}),i.jsx("span",{children:"Share this event to the PTO Connect Idea Library"})]}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:"Create Event"}),r&&i.jsx("p",{className:"text-green-600",children:r}),a&&i.jsx("p",{className:"text-red-600",children:a})]}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("button",{onClick:()=>l(!o),className:"text-blue-600 underline",children:o?"Hide AI Event Assistant":"Use AI Event Assistant"}),o&&i.jsxs("div",{className:"mt-4 space-y-3",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"AI Event Assistant"}),i.jsx("input",{type:"text",name:"type",placeholder:"Event Type",value:c.type,onChange:N,className:"w-full border p-2"}),i.jsx("input",{type:"text",name:"season",placeholder:"Season or Month",value:c.season,onChange:N,className:"w-full border p-2"}),i.jsx("input",{type:"text",name:"audience",placeholder:"Audience (e.g. families, teachers)",value:c.audience,onChange:N,className:"w-full border p-2"}),i.jsx("input",{type:"text",name:"theme",placeholder:"Theme (e.g. fall festival)",value:c.theme,onChange:N,className:"w-full border p-2"}),i.jsx("input",{type:"text",name:"goal",placeholder:"Goal (e.g. raise funds for library)",value:c.goal,onChange:N,className:"w-full border p-2"}),i.jsx("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Generate Event Idea"}),p&&i.jsxs("div",{className:"border p-4 mt-4 bg-gray-50 rounded",children:[i.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:p}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx("button",{onClick:j,className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600",children:"Use This Event"}),i.jsx("button",{onClick:x,className:"bg-gray-600 text-white px-3 py-1 rounded hover:bg-gray-700",children:"Print Summary"})]})]})]})]})]})}function by(){const[e,t]=W.useState(null),[r,n]=W.useState(""),a=Xr(),{id:s}=zo();W.useEffect(()=>{async function c(){const{data:d,error:p}=await Ue.from("events").select("*").eq("id",s).single();p?(n("Failed to load event."),console.error(p)):t(d)}c()},[s]);const o=c=>{const{name:d,value:p,type:m,checked:g}=c.target;t(f=>({...f,[d]:m==="checkbox"?g:p}))},l=async c=>{c.preventDefault();const{error:d}=await Ue.from("events").update({title:e.title,event_date:e.event_date,category:e.category,school_level:e.school_level,share_public:e.share_public}).eq("id",s);d?(n("Update failed."),console.error(d)):a("/events")};return e?i.jsxs("div",{className:"max-w-xl mx-auto mt-8 p-6 bg-white shadow rounded",children:[i.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Edit Event"}),r&&i.jsx("p",{className:"text-red-500 mb-2",children:r}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsx("input",{type:"text",name:"title",value:e.title,onChange:o,className:"w-full border p-2 rounded",required:!0}),i.jsx("input",{type:"date",name:"event_date",value:e.event_date,onChange:o,className:"w-full border p-2 rounded",required:!0}),i.jsxs("select",{name:"category",value:e.category,onChange:o,className:"w-full border p-2 rounded",required:!0,children:[i.jsx("option",{value:"Fundraiser",children:"Fundraiser"}),i.jsx("option",{value:"Meeting",children:"Meeting"}),i.jsx("option",{value:"Celebration",children:"Celebration"}),i.jsx("option",{value:"Other",children:"Other"})]}),i.jsxs("select",{name:"school_level",value:e.school_level,onChange:o,className:"w-full border p-2 rounded",required:!0,children:[i.jsx("option",{value:"Elementary",children:"Elementary"}),i.jsx("option",{value:"Middle",children:"Middle"}),i.jsx("option",{value:"High",children:"High"})]}),i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",name:"share_public",checked:e.share_public,onChange:o}),i.jsx("span",{children:"Share Publicly"})]}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Save Changes"})]})]}):i.jsx("p",{className:"p-4",children:"Loading event..."})}function yy(e,t){if(dt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o0(e){var t=yy(e,"string");return dt(t)=="symbol"?t:t+""}function us(e,t,r){return(t=o0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xp(Object(r),!0).forEach(function(n){us(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ic(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Xn(e,t){if(e==null)return{};var r,n,a=Ic(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o0(n.key),n)}}function nr(e,t,r){return t&&wp(e.prototype,t),r&&wp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bc(e){return bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bc(e)}function l0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l0=function(){return!!e})()}function xy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wy(e,t){if(t&&(dt(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xy(e)}function Nr(e,t,r){return t=bc(t),wy(e,l0()?Reflect.construct(t,r||[],bc(e).constructor):t.apply(e,r))}function yc(e,t){return yc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},yc(e,t)}function jr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yc(e,t)}function c0(e){if(Array.isArray(e))return e}function Ny(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(p){d=!0,a=p}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Hd(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jh(e,t){if(e){if(typeof e=="string")return Hd(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hd(e,t):void 0}}function u0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(e,t){return c0(e)||Ny(e,t)||jh(e,t)||u0()}function d0(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=d0(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Ut(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=d0(e))&&(n&&(n+=" "),n+=t);return n}function zt(){return zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zt.apply(null,arguments)}var jy=function(e,t,r,n,a,s,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,a,s,o,l],p=0;c=new Error(t.replace(/%s/g,function(){return d[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Sy=jy;const Co=qr(Sy);var _y=function(){};function Ay(e,t){var r={};return Object.keys(e).forEach(function(n){r[lc(n)]=_y}),r}function Np(e,t){return e[t]!==void 0}function lc(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Ey(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function Cy(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,yc(e,t)}function h0(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function f0(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function p0(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}h0.__suppressDeprecationWarning=!0;f0.__suppressDeprecationWarning=!0;p0.__suppressDeprecationWarning=!0;function Ly(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,a=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?a="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(a="UNSAFE_componentWillUpdate"),r!==null||n!==null||a!==null){var s=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(a!==null?`
  `+a:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=h0,t.componentWillReceiveProps=f0),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=p0;var l=t.componentDidUpdate;t.componentDidUpdate=function(d,p,m){var g=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:m;l.call(this,d,p,g)}}return e}var Dy="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function m0(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",a=Ey(e),s=Object.keys(t),o=s.map(lc);a||!r.length||Co(!1);var l=function(d){Cy(p,d);function p(){for(var g,f=arguments.length,N=new Array(f),y=0;y<f;y++)N[y]=arguments[y];g=d.call.apply(d,[this].concat(N))||this,g.handlers=Object.create(null),s.forEach(function(x){var w=t[x],_=function(A){if(g.props[w]){var B;g._notifying=!0;for(var T=arguments.length,C=new Array(T>1?T-1:0),$=1;$<T;$++)C[$-1]=arguments[$];(B=g.props)[w].apply(B,[A].concat(C)),g._notifying=!1}g.unmounted||g.setState(function(H){var L,D=H.values;return{values:zt(Object.create(null),D,(L={},L[x]=A,L))}})};g.handlers[w]=_}),r.length&&(g.attachRef=function(x){g.inner=x});var j=Object.create(null);return s.forEach(function(x){j[x]=g.props[lc(x)]}),g.state={values:j,prevProps:{}},g}var m=p.prototype;return m.shouldComponentUpdate=function(){return!this._notifying},p.getDerivedStateFromProps=function(f,N){var y=N.values,j=N.prevProps,x={values:zt(Object.create(null),y),prevProps:{}};return s.forEach(function(w){x.prevProps[w]=f[w],!Np(f,w)&&Np(j,w)&&(x.values[w]=f[lc(w)])}),x},m.componentWillUnmount=function(){this.unmounted=!0},m.render=function(){var f=this,N=this.props,y=N.innerRef,j=Ic(N,["innerRef"]);o.forEach(function(w){delete j[w]});var x={};return s.forEach(function(w){var _=f.props[w];x[w]=_!==void 0?_:f.state.values[w]}),ue.createElement(e,zt({},j,x,this.handlers,{ref:y||this.attachRef}))},p}(ue.Component);Ly(l),l.displayName="Uncontrolled("+n+")",l.propTypes=zt({innerRef:function(){}},Ay(t)),r.forEach(function(d){l.prototype[d]=function(){var m;return(m=this.inner)[d].apply(m,arguments)}});var c=l;return ue.forwardRef&&(c=ue.forwardRef(function(d,p){return ue.createElement(l,zt({},d,{innerRef:p,__source:{fileName:Dy,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,p,m){return p===void 0&&(p={}),m0(d,zt({},t,p),m)},c}var xc="milliseconds",Lo="seconds",Do="minutes",Po="hours",gs="day",pi="week",ko="month",vs="year",bs="decade",ys="century",g0={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},Py={month:1,year:12,decade:10*12,century:100*12};function ky(e){return[31,Oy(e),31,30,31,30,31,31,30,31,30,31]}function Oy(e){return e%4===0&&e%100!==0||e%400===0?29:28}function Cn(e,t,r){switch(e=new Date(e),r){case xc:case Lo:case Do:case Po:case gs:case pi:return Ty(e,t*g0[r]);case ko:case vs:case bs:case ys:return My(e,t*Py[r])}throw new TypeError('Invalid units: "'+r+'"')}function Ty(e,t){var r=new Date(+e+t);return Iy(e,r)}function My(e,t){var r=e.getFullYear(),n=e.getMonth(),a=e.getDate(),s=r*12+n+t,o=Math.trunc(s/12),l=s%12,c=Math.min(a,ky(o)[l]),d=new Date(e);return d.setFullYear(o),d.setDate(1),d.setMonth(l),d.setDate(c),d}function Iy(e,t){var r=e.getTimezoneOffset(),n=t.getTimezoneOffset(),a=n-r;return new Date(+t+a*g0.minutes)}function Oo(e,t,r){return Cn(e,-t,r)}function dr(e,t,r){switch(e=new Date(e),t){case ys:case bs:case vs:e=Nc(e,0);case ko:e=w0(e,1);case pi:case gs:e=Io(e,0);case Po:e=mi(e,0);case Do:e=Mo(e,0);case Lo:e=To(e,0)}return t===bs&&(e=Oo(e,xs(e)%10,"year")),t===ys&&(e=Oo(e,xs(e)%100,"year")),t===pi&&(e=N0(e,0,r)),e}function wc(e,t,r){switch(e=new Date(e),e=dr(e,t,r),t){case ys:case bs:case vs:case ko:case pi:e=Cn(e,1,t),e=Oo(e,1,gs),e.setHours(23,59,59,999);break;case gs:e.setHours(23,59,59,999);break;case Po:case Do:case Lo:e=Cn(e,1,t),e=Oo(e,1,xc)}return e}var Ni=Si(function(e,t){return e===t}),Sh=Si(function(e,t){return e!==t}),Rc=Si(function(e,t){return e>t}),Wo=Si(function(e,t){return e>=t}),_h=Si(function(e,t){return e<t}),ji=Si(function(e,t){return e<=t});function v0(){return new Date(Math.min.apply(Math,arguments))}function b0(){return new Date(Math.max.apply(Math,arguments))}function y0(e,t,r,n){return n=n||"day",(!t||Wo(e,t,n))&&(!r||ji(e,r,n))}var To=qa("Milliseconds"),Mo=qa("Seconds"),mi=qa("Minutes"),Io=qa("Hours"),x0=qa("Day"),w0=qa("Date"),Nc=qa("Month"),xs=qa("FullYear");function Ry(e,t){return t===void 0?xs(dr(e,bs)):Cn(e,t+10,vs)}function Fy(e,t){return t===void 0?xs(dr(e,ys)):Cn(e,t+100,vs)}function N0(e,t,r){var n=(x0(e)+7-(r||0))%7;return t===void 0?n:Cn(e,t-n,gs)}function $y(e,t,r,n){var a,s,o;switch(r){case xc:case Lo:case Do:case Po:case gs:case pi:a=t.getTime()-e.getTime();break;case ko:case vs:case bs:case ys:a=(xs(t)-xs(e))*12+Nc(t)-Nc(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case xc:s=1;break;case Lo:s=1e3;break;case Do:s=1e3*60;break;case Po:s=1e3*60*60;break;case gs:s=1e3*60*60*24;break;case pi:s=1e3*60*60*24*7;break;case ko:s=1;break;case vs:s=12;break;case bs:s=120;break;case ys:s=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return o=a/s,n?o:Math.round(o)}function qa(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,n){if(n===void 0)return r["get"+e]();var a=new Date(r);return a["set"+e](n),t&&a["get"+e]()!=n&&(e==="Hours"||n>=t&&a.getHours()-r.getHours()<Math.floor(n/t))&&a["set"+e](n+t),a}}function Si(e){return function(t,r,n){return e(+dr(t,n),+dr(r,n))}}const jp=Object.freeze(Object.defineProperty({__proto__:null,add:Cn,century:Fy,date:w0,day:x0,decade:Ry,diff:$y,endOf:wc,eq:Ni,gt:Rc,gte:Wo,hours:Io,inRange:y0,lt:_h,lte:ji,max:b0,milliseconds:To,min:v0,minutes:mi,month:Nc,neq:Sh,seconds:Mo,startOf:dr,subtract:Oo,weekday:N0,year:xs},Symbol.toStringTag,{value:"Module"}));function By(e){if(Array.isArray(e))return Hd(e)}function j0(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qy(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cc(e){return By(e)||j0(e)||jh(e)||qy()}function zy(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}var S0=zy;function Uy(e,t){return e===t||e!==e&&t!==t}var Ho=Uy,Wy=typeof cn=="object"&&cn&&cn.Object===Object&&cn,_0=Wy,Hy=_0,Gy=typeof self=="object"&&self&&self.Object===Object&&self,Vy=Hy||Gy||Function("return this")(),Zn=Vy,Yy=Zn,Ky=Yy.Symbol,_i=Ky,Sp=_i,A0=Object.prototype,Xy=A0.hasOwnProperty,Jy=A0.toString,po=Sp?Sp.toStringTag:void 0;function Zy(e){var t=Xy.call(e,po),r=e[po];try{e[po]=void 0;var n=!0}catch{}var a=Jy.call(e);return n&&(t?e[po]=r:delete e[po]),a}var Qy=Zy,ex=Object.prototype,tx=ex.toString;function rx(e){return tx.call(e)}var nx=rx,_p=_i,ax=Qy,sx=nx,ix="[object Null]",ox="[object Undefined]",Ap=_p?_p.toStringTag:void 0;function lx(e){return e==null?e===void 0?ox:ix:Ap&&Ap in Object(e)?ax(e):sx(e)}var Ai=lx;function cx(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var va=cx,ux=Ai,dx=va,hx="[object AsyncFunction]",fx="[object Function]",px="[object GeneratorFunction]",mx="[object Proxy]";function gx(e){if(!dx(e))return!1;var t=ux(e);return t==fx||t==px||t==hx||t==mx}var Ah=gx,vx=9007199254740991;function bx(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vx}var Eh=bx,yx=Ah,xx=Eh;function wx(e){return e!=null&&xx(e.length)&&!yx(e)}var Go=wx,Nx=9007199254740991,jx=/^(?:0|[1-9]\d*)$/;function Sx(e,t){var r=typeof e;return t=t??Nx,!!t&&(r=="number"||r!="symbol"&&jx.test(e))&&e>-1&&e%1==0&&e<t}var Ch=Sx,_x=Ho,Ax=Go,Ex=Ch,Cx=va;function Lx(e,t,r){if(!Cx(r))return!1;var n=typeof t;return(n=="number"?Ax(r)&&Ex(t,r.length):n=="string"&&t in r)?_x(r[t],e):!1}var Fc=Lx,Dx=/\s/;function Px(e){for(var t=e.length;t--&&Dx.test(e.charAt(t)););return t}var kx=Px,Ox=kx,Tx=/^\s+/;function Mx(e){return e&&e.slice(0,Ox(e)+1).replace(Tx,"")}var Ix=Mx;function Rx(e){return e!=null&&typeof e=="object"}var za=Rx,Fx=Ai,$x=za,Bx="[object Symbol]";function qx(e){return typeof e=="symbol"||$x(e)&&Fx(e)==Bx}var Vo=qx,zx=Ix,Ep=va,Ux=Vo,Cp=NaN,Wx=/^[-+]0x[0-9a-f]+$/i,Hx=/^0b[01]+$/i,Gx=/^0o[0-7]+$/i,Vx=parseInt;function Yx(e){if(typeof e=="number")return e;if(Ux(e))return Cp;if(Ep(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ep(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=zx(e);var r=Hx.test(e);return r||Gx.test(e)?Vx(e.slice(2),r?2:8):Wx.test(e)?Cp:+e}var Kx=Yx,Xx=Kx,Lp=1/0,Jx=17976931348623157e292;function Zx(e){if(!e)return e===0?e:0;if(e=Xx(e),e===Lp||e===-Lp){var t=e<0?-1:1;return t*Jx}return e===e?e:0}var E0=Zx,Qx=E0;function e5(e){var t=Qx(e),r=t%1;return t===t?r?t-r:t:0}var C0=e5,t5=S0,r5=Fc,n5=C0,a5=Math.ceil,s5=Math.max;function i5(e,t,r){(r?r5(e,t,r):t===void 0)?t=1:t=s5(n5(t),0);var n=e==null?0:e.length;if(!n||t<1)return[];for(var a=0,s=0,o=Array(a5(n/t));a<n;)o[s++]=t5(e,a,a+=t);return o}var o5=i5;const l5=qr(o5);function Yo(e){return e&&e.ownerDocument||document}function c5(e){var t=Yo(e);return t&&t.defaultView||window}function u5(e,t){return c5(e).getComputedStyle(e,t)}var d5=/([A-Z])/g;function h5(e){return e.replace(d5,"-$1").toLowerCase()}var f5=/^ms-/;function Jl(e){return h5(e).replace(f5,"-ms-")}var p5=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function m5(e){return!!(e&&p5.test(e))}function oi(e,t){var r="",n="";if(typeof t=="string")return e.style.getPropertyValue(Jl(t))||u5(e).getPropertyValue(Jl(t));Object.keys(t).forEach(function(a){var s=t[a];!s&&s!==0?e.style.removeProperty(Jl(a)):m5(a)?n+=a+"("+s+") ":r+=Jl(a)+": "+s+";"}),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r}function Ro(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function g5(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function Lh(e){return"window"in e&&e.window===e?e:g5(e)&&e.defaultView||!1}function L0(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(n,a){var s=Lh(n);if(a===void 0)return s?s[e]:n[t];s?s.scrollTo(s[e],a):n[t]=a}return r}const D0=L0("pageXOffset"),P0=L0("pageYOffset");function fs(e){var t=Yo(e),r={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return!n||!Ro(n,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+P0(n)-(n.clientTop||0),left:r.left+D0(n)-(n.clientLeft||0),width:r.width,height:r.height}),r}var v5=function(t){return!!t&&"offsetParent"in t};function b5(e){for(var t=Yo(e),r=e&&e.offsetParent;v5(r)&&r.nodeName!=="HTML"&&oi(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var y5=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function k0(e,t){var r={top:0,left:0},n;if(oi(e,"position")==="fixed")n=e.getBoundingClientRect();else{var a=t||b5(e);n=fs(e),y5(a)!=="html"&&(r=fs(a));var s=String(oi(a,"borderTopWidth")||0);r.top+=parseInt(s,10)-P0(a)||0;var o=String(oi(a,"borderLeftWidth")||0);r.left+=parseInt(o,10)-D0(a)||0}var l=String(oi(e,"marginTop")||0),c=String(oi(e,"marginLeft")||0);return zt({},n,{top:n.top-r.top-(parseInt(l,10)||0),left:n.left-r.left-(parseInt(c,10)||0)})}const Dh=!!(typeof window<"u"&&window.document&&window.document.createElement);var Dp=new Date().getTime();function x5(e){var t=new Date().getTime(),r=Math.max(0,16-(t-Dp)),n=setTimeout(e,r);return Dp=t,n}var w5=["","webkit","moz","o","ms"],Gd="clearTimeout",Vd=x5,Pp=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};Dh&&w5.some(function(e){var t=Pp(e,"request");return t in window&&(Gd=Pp(e,"cancel"),Vd=function(n){return window[t](n)}),!!Vd});var kp=function(t){typeof window[Gd]=="function"&&window[Gd](t)},O0=Vd,ud;function N5(e,t){if(!ud){var r=document.body,n=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;ud=function(s,o){return n.call(s,o)}}return ud(e,t)}var j5=Function.prototype.bind.call(Function.prototype.call,[].slice);function S5(e,t){return j5(e.querySelectorAll(t))}var Yd=!1,Kd=!1;try{var dd={get passive(){return Yd=!0},get once(){return Kd=Yd=!0}};Dh&&(window.addEventListener("test",dd,dd),window.removeEventListener("test",dd,!0))}catch{}function _5(e,t,r,n){if(n&&typeof n!="boolean"&&!Kd){var a=n.once,s=n.capture,o=r;!Kd&&a&&(o=r.__once||function l(c){this.removeEventListener(t,l,s),r.call(this,c)},r.__once=o),e.addEventListener(t,o,Yd?n:s)}e.addEventListener(t,r,n)}function A5(e){const t=W.useRef(e);return W.useEffect(()=>{t.current=e},[e]),t}function Op(e){const t=A5(e);return W.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function Tp(){return W.useState(null)}function E5(){const e=W.useRef(!0),t=W.useRef(()=>e.current);return W.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function C5(e){const t=E5();return[e[0],W.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var Fr="top",un="bottom",dn="right",$r="left",Ph="auto",Ko=[Fr,un,dn,$r],gi="start",Fo="end",L5="clippingParents",T0="viewport",mo="popper",D5="reference",Mp=Ko.reduce(function(e,t){return e.concat([t+"-"+gi,t+"-"+Fo])},[]),kh=[].concat(Ko,[Ph]).reduce(function(e,t){return e.concat([t,t+"-"+gi,t+"-"+Fo])},[]),P5="beforeRead",k5="read",O5="afterRead",T5="beforeMain",M5="main",I5="afterMain",R5="beforeWrite",F5="write",$5="afterWrite",B5=[P5,k5,O5,T5,M5,I5,R5,F5,$5];function Yn(e){return e.split("-")[0]}function Kr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ws(e){var t=Kr(e).Element;return e instanceof t||e instanceof Element}function Kn(e){var t=Kr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Oh(e){if(typeof ShadowRoot>"u")return!1;var t=Kr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var ps=Math.max,jc=Math.min,vi=Math.round;function Xd(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function M0(){return!/^((?!chrome|android).)*safari/i.test(Xd())}function bi(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),a=1,s=1;t&&Kn(e)&&(a=e.offsetWidth>0&&vi(n.width)/e.offsetWidth||1,s=e.offsetHeight>0&&vi(n.height)/e.offsetHeight||1);var o=ws(e)?Kr(e):window,l=o.visualViewport,c=!M0()&&r,d=(n.left+(c&&l?l.offsetLeft:0))/a,p=(n.top+(c&&l?l.offsetTop:0))/s,m=n.width/a,g=n.height/s;return{width:m,height:g,top:p,right:d+m,bottom:p+g,left:d,x:d,y:p}}function Th(e){var t=bi(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function I0(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Oh(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Fa(e){return e?(e.nodeName||"").toLowerCase():null}function ga(e){return Kr(e).getComputedStyle(e)}function q5(e){return["table","td","th"].indexOf(Fa(e))>=0}function Ua(e){return((ws(e)?e.ownerDocument:e.document)||window.document).documentElement}function $c(e){return Fa(e)==="html"?e:e.assignedSlot||e.parentNode||(Oh(e)?e.host:null)||Ua(e)}function Ip(e){return!Kn(e)||ga(e).position==="fixed"?null:e.offsetParent}function z5(e){var t=/firefox/i.test(Xd()),r=/Trident/i.test(Xd());if(r&&Kn(e)){var n=ga(e);if(n.position==="fixed")return null}var a=$c(e);for(Oh(a)&&(a=a.host);Kn(a)&&["html","body"].indexOf(Fa(a))<0;){var s=ga(a);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return a;a=a.parentNode}return null}function Xo(e){for(var t=Kr(e),r=Ip(e);r&&q5(r)&&ga(r).position==="static";)r=Ip(r);return r&&(Fa(r)==="html"||Fa(r)==="body"&&ga(r).position==="static")?t:r||z5(e)||t}function Mh(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function No(e,t,r){return ps(e,jc(t,r))}function U5(e,t,r){var n=No(e,t,r);return n>r?r:n}function R0(){return{top:0,right:0,bottom:0,left:0}}function F0(e){return Object.assign({},R0(),e)}function $0(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var W5=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,F0(typeof t!="number"?t:$0(t,Ko))};function H5(e){var t,r=e.state,n=e.name,a=e.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,l=Yn(r.placement),c=Mh(l),d=[$r,dn].indexOf(l)>=0,p=d?"height":"width";if(!(!s||!o)){var m=W5(a.padding,r),g=Th(s),f=c==="y"?Fr:$r,N=c==="y"?un:dn,y=r.rects.reference[p]+r.rects.reference[c]-o[c]-r.rects.popper[p],j=o[c]-r.rects.reference[c],x=Xo(s),w=x?c==="y"?x.clientHeight||0:x.clientWidth||0:0,_=y/2-j/2,E=m[f],A=w-g[p]-m[N],B=w/2-g[p]/2+_,T=No(E,B,A),C=c;r.modifiersData[n]=(t={},t[C]=T,t.centerOffset=T-B,t)}}function G5(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||I0(t.elements.popper,a)&&(t.elements.arrow=a))}const V5={name:"arrow",enabled:!0,phase:"main",fn:H5,effect:G5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function yi(e){return e.split("-")[1]}var Y5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function K5(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:vi(r*a)/a||0,y:vi(n*a)/a||0}}function Rp(e){var t,r=e.popper,n=e.popperRect,a=e.placement,s=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,p=e.roundOffsets,m=e.isFixed,g=o.x,f=g===void 0?0:g,N=o.y,y=N===void 0?0:N,j=typeof p=="function"?p({x:f,y}):{x:f,y};f=j.x,y=j.y;var x=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),_=$r,E=Fr,A=window;if(d){var B=Xo(r),T="clientHeight",C="clientWidth";if(B===Kr(r)&&(B=Ua(r),ga(B).position!=="static"&&l==="absolute"&&(T="scrollHeight",C="scrollWidth")),B=B,a===Fr||(a===$r||a===dn)&&s===Fo){E=un;var $=m&&B===A&&A.visualViewport?A.visualViewport.height:B[T];y-=$-n.height,y*=c?1:-1}if(a===$r||(a===Fr||a===un)&&s===Fo){_=dn;var H=m&&B===A&&A.visualViewport?A.visualViewport.width:B[C];f-=H-n.width,f*=c?1:-1}}var L=Object.assign({position:l},d&&Y5),D=p===!0?K5({x:f,y},Kr(r)):{x:f,y};if(f=D.x,y=D.y,c){var F;return Object.assign({},L,(F={},F[E]=w?"0":"",F[_]=x?"0":"",F.transform=(A.devicePixelRatio||1)<=1?"translate("+f+"px, "+y+"px)":"translate3d("+f+"px, "+y+"px, 0)",F))}return Object.assign({},L,(t={},t[E]=w?y+"px":"",t[_]=x?f+"px":"",t.transform="",t))}function X5(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,s=r.adaptive,o=s===void 0?!0:s,l=r.roundOffsets,c=l===void 0?!0:l,d={placement:Yn(t.placement),variation:yi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Rp(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Rp(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const J5={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:X5,data:{}};var Zl={passive:!0};function Z5(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,s=a===void 0?!0:a,o=n.resize,l=o===void 0?!0:o,c=Kr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&d.forEach(function(p){p.addEventListener("scroll",r.update,Zl)}),l&&c.addEventListener("resize",r.update,Zl),function(){s&&d.forEach(function(p){p.removeEventListener("scroll",r.update,Zl)}),l&&c.removeEventListener("resize",r.update,Zl)}}const Q5={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Z5,data:{}};var ew={left:"right",right:"left",bottom:"top",top:"bottom"};function uc(e){return e.replace(/left|right|bottom|top/g,function(t){return ew[t]})}var tw={start:"end",end:"start"};function Fp(e){return e.replace(/start|end/g,function(t){return tw[t]})}function Ih(e){var t=Kr(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Rh(e){return bi(Ua(e)).left+Ih(e).scrollLeft}function rw(e,t){var r=Kr(e),n=Ua(e),a=r.visualViewport,s=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){s=a.width,o=a.height;var d=M0();(d||!d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:s,height:o,x:l+Rh(e),y:c}}function nw(e){var t,r=Ua(e),n=Ih(e),a=(t=e.ownerDocument)==null?void 0:t.body,s=ps(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=ps(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),l=-n.scrollLeft+Rh(e),c=-n.scrollTop;return ga(a||r).direction==="rtl"&&(l+=ps(r.clientWidth,a?a.clientWidth:0)-s),{width:s,height:o,x:l,y:c}}function Fh(e){var t=ga(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function B0(e){return["html","body","#document"].indexOf(Fa(e))>=0?e.ownerDocument.body:Kn(e)&&Fh(e)?e:B0($c(e))}function jo(e,t){var r;t===void 0&&(t=[]);var n=B0(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=Kr(n),o=a?[s].concat(s.visualViewport||[],Fh(n)?n:[]):n,l=t.concat(o);return a?l:l.concat(jo($c(o)))}function Jd(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function aw(e,t){var r=bi(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function $p(e,t,r){return t===T0?Jd(rw(e,r)):ws(t)?aw(t,r):Jd(nw(Ua(e)))}function sw(e){var t=jo($c(e)),r=["absolute","fixed"].indexOf(ga(e).position)>=0,n=r&&Kn(e)?Xo(e):e;return ws(n)?t.filter(function(a){return ws(a)&&I0(a,n)&&Fa(a)!=="body"}):[]}function iw(e,t,r,n){var a=t==="clippingParents"?sw(e):[].concat(t),s=[].concat(a,[r]),o=s[0],l=s.reduce(function(c,d){var p=$p(e,d,n);return c.top=ps(p.top,c.top),c.right=jc(p.right,c.right),c.bottom=jc(p.bottom,c.bottom),c.left=ps(p.left,c.left),c},$p(e,o,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function q0(e){var t=e.reference,r=e.element,n=e.placement,a=n?Yn(n):null,s=n?yi(n):null,o=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,c;switch(a){case Fr:c={x:o,y:t.y-r.height};break;case un:c={x:o,y:t.y+t.height};break;case dn:c={x:t.x+t.width,y:l};break;case $r:c={x:t.x-r.width,y:l};break;default:c={x:t.x,y:t.y}}var d=a?Mh(a):null;if(d!=null){var p=d==="y"?"height":"width";switch(s){case gi:c[d]=c[d]-(t[p]/2-r[p]/2);break;case Fo:c[d]=c[d]+(t[p]/2-r[p]/2);break}}return c}function $o(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,s=r.strategy,o=s===void 0?e.strategy:s,l=r.boundary,c=l===void 0?L5:l,d=r.rootBoundary,p=d===void 0?T0:d,m=r.elementContext,g=m===void 0?mo:m,f=r.altBoundary,N=f===void 0?!1:f,y=r.padding,j=y===void 0?0:y,x=F0(typeof j!="number"?j:$0(j,Ko)),w=g===mo?D5:mo,_=e.rects.popper,E=e.elements[N?w:g],A=iw(ws(E)?E:E.contextElement||Ua(e.elements.popper),c,p,o),B=bi(e.elements.reference),T=q0({reference:B,element:_,placement:a}),C=Jd(Object.assign({},_,T)),$=g===mo?C:B,H={top:A.top-$.top+x.top,bottom:$.bottom-A.bottom+x.bottom,left:A.left-$.left+x.left,right:$.right-A.right+x.right},L=e.modifiersData.offset;if(g===mo&&L){var D=L[a];Object.keys(H).forEach(function(F){var U=[dn,un].indexOf(F)>=0?1:-1,ee=[Fr,un].indexOf(F)>=0?"y":"x";H[F]+=D[ee]*U})}return H}function ow(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,s=r.rootBoundary,o=r.padding,l=r.flipVariations,c=r.allowedAutoPlacements,d=c===void 0?kh:c,p=yi(n),m=p?l?Mp:Mp.filter(function(N){return yi(N)===p}):Ko,g=m.filter(function(N){return d.indexOf(N)>=0});g.length===0&&(g=m);var f=g.reduce(function(N,y){return N[y]=$o(e,{placement:y,boundary:a,rootBoundary:s,padding:o})[Yn(y)],N},{});return Object.keys(f).sort(function(N,y){return f[N]-f[y]})}function lw(e){if(Yn(e)===Ph)return[];var t=uc(e);return[Fp(e),t,Fp(t)]}function cw(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,s=a===void 0?!0:a,o=r.altAxis,l=o===void 0?!0:o,c=r.fallbackPlacements,d=r.padding,p=r.boundary,m=r.rootBoundary,g=r.altBoundary,f=r.flipVariations,N=f===void 0?!0:f,y=r.allowedAutoPlacements,j=t.options.placement,x=Yn(j),w=x===j,_=c||(w||!N?[uc(j)]:lw(j)),E=[j].concat(_).reduce(function(V,Z){return V.concat(Yn(Z)===Ph?ow(t,{placement:Z,boundary:p,rootBoundary:m,padding:d,flipVariations:N,allowedAutoPlacements:y}):Z)},[]),A=t.rects.reference,B=t.rects.popper,T=new Map,C=!0,$=E[0],H=0;H<E.length;H++){var L=E[H],D=Yn(L),F=yi(L)===gi,U=[Fr,un].indexOf(D)>=0,ee=U?"width":"height",te=$o(t,{placement:L,boundary:p,rootBoundary:m,altBoundary:g,padding:d}),re=U?F?dn:$r:F?un:Fr;A[ee]>B[ee]&&(re=uc(re));var Q=uc(re),Y=[];if(s&&Y.push(te[D]<=0),l&&Y.push(te[re]<=0,te[Q]<=0),Y.every(function(V){return V})){$=L,C=!1;break}T.set(L,Y)}if(C)for(var X=N?3:1,ce=function(Z){var se=E.find(function(de){var fe=T.get(de);if(fe)return fe.slice(0,Z).every(function(ge){return ge})});if(se)return $=se,"break"},P=X;P>0;P--){var q=ce(P);if(q==="break")break}t.placement!==$&&(t.modifiersData[n]._skip=!0,t.placement=$,t.reset=!0)}}const uw={name:"flip",enabled:!0,phase:"main",fn:cw,requiresIfExists:["offset"],data:{_skip:!1}};function Bp(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function qp(e){return[Fr,dn,un,$r].some(function(t){return e[t]>=0})}function dw(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,s=t.modifiersData.preventOverflow,o=$o(t,{elementContext:"reference"}),l=$o(t,{altBoundary:!0}),c=Bp(o,n),d=Bp(l,a,s),p=qp(c),m=qp(d);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":m})}const hw={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:dw};function fw(e,t,r){var n=Yn(e),a=[$r,Fr].indexOf(n)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=s[0],l=s[1];return o=o||0,l=(l||0)*a,[$r,dn].indexOf(n)>=0?{x:l,y:o}:{x:o,y:l}}function pw(e){var t=e.state,r=e.options,n=e.name,a=r.offset,s=a===void 0?[0,0]:a,o=kh.reduce(function(p,m){return p[m]=fw(m,t.rects,s),p},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=o}const mw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:pw};function gw(e){var t=e.state,r=e.name;t.modifiersData[r]=q0({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const vw={name:"popperOffsets",enabled:!0,phase:"read",fn:gw,data:{}};function bw(e){return e==="x"?"y":"x"}function yw(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,s=a===void 0?!0:a,o=r.altAxis,l=o===void 0?!1:o,c=r.boundary,d=r.rootBoundary,p=r.altBoundary,m=r.padding,g=r.tether,f=g===void 0?!0:g,N=r.tetherOffset,y=N===void 0?0:N,j=$o(t,{boundary:c,rootBoundary:d,padding:m,altBoundary:p}),x=Yn(t.placement),w=yi(t.placement),_=!w,E=Mh(x),A=bw(E),B=t.modifiersData.popperOffsets,T=t.rects.reference,C=t.rects.popper,$=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,H=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),L=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(B){if(s){var F,U=E==="y"?Fr:$r,ee=E==="y"?un:dn,te=E==="y"?"height":"width",re=B[E],Q=re+j[U],Y=re-j[ee],X=f?-C[te]/2:0,ce=w===gi?T[te]:C[te],P=w===gi?-C[te]:-T[te],q=t.elements.arrow,V=f&&q?Th(q):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:R0(),se=Z[U],de=Z[ee],fe=No(0,T[te],V[te]),ge=_?T[te]/2-X-fe-se-H.mainAxis:ce-fe-se-H.mainAxis,Ae=_?-T[te]/2+X+fe+de+H.mainAxis:P+fe+de+H.mainAxis,Se=t.elements.arrow&&Xo(t.elements.arrow),Te=Se?E==="y"?Se.clientTop||0:Se.clientLeft||0:0,De=(F=L==null?void 0:L[E])!=null?F:0,Ge=re+ge-De-Te,ye=re+Ae-De,J=No(f?jc(Q,Ge):Q,re,f?ps(Y,ye):Y);B[E]=J,D[E]=J-re}if(l){var Ze,qe=E==="x"?Fr:$r,Ee=E==="x"?un:dn,Ce=B[A],Oe=A==="y"?"height":"width",ke=Ce+j[qe],ze=Ce-j[Ee],Xe=[Fr,$r].indexOf(x)!==-1,et=(Ze=L==null?void 0:L[A])!=null?Ze:0,ot=Xe?ke:Ce-T[Oe]-C[Oe]-et+H.altAxis,ct=Xe?Ce+T[Oe]+C[Oe]-et-H.altAxis:ze,mt=f&&Xe?U5(ot,Ce,ct):No(f?ot:ke,Ce,f?ct:ze);B[A]=mt,D[A]=mt-Ce}t.modifiersData[n]=D}}const xw={name:"preventOverflow",enabled:!0,phase:"main",fn:yw,requiresIfExists:["offset"]};function ww(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Nw(e){return e===Kr(e)||!Kn(e)?Ih(e):ww(e)}function jw(e){var t=e.getBoundingClientRect(),r=vi(t.width)/e.offsetWidth||1,n=vi(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Sw(e,t,r){r===void 0&&(r=!1);var n=Kn(t),a=Kn(t)&&jw(t),s=Ua(t),o=bi(e,a,r),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((Fa(t)!=="body"||Fh(s))&&(l=Nw(t)),Kn(t)?(c=bi(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=Rh(s))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function _w(e){var t=new Map,r=new Set,n=[];e.forEach(function(s){t.set(s.name,s)});function a(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(l){if(!r.has(l)){var c=t.get(l);c&&a(c)}}),n.push(s)}return e.forEach(function(s){r.has(s.name)||a(s)}),n}function Aw(e){var t=_w(e);return B5.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function Ew(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Cw(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var zp={placement:"bottom",modifiers:[],strategy:"absolute"};function Up(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Lw(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,s=a===void 0?zp:a;return function(l,c,d){d===void 0&&(d=s);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},zp,s),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},m=[],g=!1,f={state:p,setOptions:function(x){var w=typeof x=="function"?x(p.options):x;y(),p.options=Object.assign({},s,p.options,w),p.scrollParents={reference:ws(l)?jo(l):l.contextElement?jo(l.contextElement):[],popper:jo(c)};var _=Aw(Cw([].concat(n,p.options.modifiers)));return p.orderedModifiers=_.filter(function(E){return E.enabled}),N(),f.update()},forceUpdate:function(){if(!g){var x=p.elements,w=x.reference,_=x.popper;if(Up(w,_)){p.rects={reference:Sw(w,Xo(_),p.options.strategy==="fixed"),popper:Th(_)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(H){return p.modifiersData[H.name]=Object.assign({},H.data)});for(var E=0;E<p.orderedModifiers.length;E++){if(p.reset===!0){p.reset=!1,E=-1;continue}var A=p.orderedModifiers[E],B=A.fn,T=A.options,C=T===void 0?{}:T,$=A.name;typeof B=="function"&&(p=B({state:p,options:C,name:$,instance:f})||p)}}}},update:Ew(function(){return new Promise(function(j){f.forceUpdate(),j(p)})}),destroy:function(){y(),g=!0}};if(!Up(l,c))return f;f.setOptions(d).then(function(j){!g&&d.onFirstUpdate&&d.onFirstUpdate(j)});function N(){p.orderedModifiers.forEach(function(j){var x=j.name,w=j.options,_=w===void 0?{}:w,E=j.effect;if(typeof E=="function"){var A=E({state:p,name:x,instance:f,options:_}),B=function(){};m.push(A||B)}})}function y(){m.forEach(function(j){return j()}),m=[]}return f}}var Dw=Lw({defaultModifiers:[hw,vw,J5,Q5,mw,uw,xw,V5]}),Wp=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},Pw={name:"applyStyles",enabled:!1},kw={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var n=r.elements,a=n.reference,s=n.popper;if("removeAttribute"in a){var o=(a.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==s.id});o.length?a.setAttribute("aria-describedby",o.join(",")):a.removeAttribute("aria-describedby")}}},fn:function(t){var r,n=t.state,a=n.elements,s=a.popper,o=a.reference,l=(r=s.getAttribute("role"))==null?void 0:r.toLowerCase();if(s.id&&l==="tooltip"&&"setAttribute"in o){var c=o.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(s.id)!==-1)return;o.setAttribute("aria-describedby",c?c+","+s.id:s.id)}}},Ow=[];function Tw(e,t,r){var n=r===void 0?{}:r,a=n.enabled,s=a===void 0?!0:a,o=n.placement,l=o===void 0?"bottom":o,c=n.strategy,d=c===void 0?"absolute":c,p=n.modifiers,m=p===void 0?Ow:p,g=Ic(n,["enabled","placement","strategy","modifiers"]),f=W.useRef(),N=W.useCallback(function(){var E;(E=f.current)==null||E.update()},[]),y=W.useCallback(function(){var E;(E=f.current)==null||E.forceUpdate()},[]),j=C5(W.useState({placement:l,update:N,forceUpdate:y,attributes:{},styles:{popper:Wp(d),arrow:{}}})),x=j[0],w=j[1],_=W.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(A){var B=A.state,T={},C={};Object.keys(B.elements).forEach(function($){T[$]=B.styles[$],C[$]=B.attributes[$]}),w({state:B,styles:T,attributes:C,update:N,forceUpdate:y,placement:B.placement})}}},[N,y,w]);return W.useEffect(function(){!f.current||!s||f.current.setOptions({placement:l,strategy:d,modifiers:[].concat(m,[_,Pw])})},[d,l,_,s]),W.useEffect(function(){if(!(!s||e==null||t==null))return f.current=Dw(e,t,zt({},g,{placement:l,strategy:d,modifiers:[].concat(m,[kw,_])})),function(){f.current!=null&&(f.current.destroy(),f.current=void 0,w(function(E){return zt({},E,{attributes:{},styles:{popper:Wp(d)}})}))}},[s,e,t]),x}function Mw(e,t,r,n){var a=n&&typeof n!="boolean"?n.capture:n;e.removeEventListener(t,r,a),r.__once&&e.removeEventListener(t,r.__once,a)}function xo(e,t,r,n){return _5(e,t,r,n),function(){Mw(e,t,r,n)}}var Iw=function(){},Rw=Iw;const Fw=qr(Rw);function $w(e){return e&&"setState"in e?Mg.findDOMNode(e):e??null}const Bw=function(e){return Yo($w(e))};var qw=27,Hp=function(){};function zw(e){return e.button===0}function Uw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Gp=function(t){return t&&("current"in t?t.current:t)};function Ww(e,t,r){var n=r===void 0?{}:r,a=n.disabled,s=n.clickTrigger,o=s===void 0?"click":s,l=W.useRef(!1),c=t||Hp,d=W.useCallback(function(g){var f,N=Gp(e);Fw(!!N,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!N||Uw(g)||!zw(g)||!!Ro(N,(f=g.composedPath==null?void 0:g.composedPath()[0])!=null?f:g.target)},[e]),p=Op(function(g){l.current||c(g)}),m=Op(function(g){g.keyCode===qw&&c(g)});W.useEffect(function(){if(!(a||e==null)){var g=window.event,f=Bw(Gp(e)),N=xo(f,o,d,!0),y=xo(f,o,function(w){if(w===g){g=void 0;return}p(w)}),j=xo(f,"keyup",function(w){if(w===g){g=void 0;return}m(w)}),x=[];return"ontouchstart"in f.documentElement&&(x=[].slice.call(f.body.children).map(function(w){return xo(w,"mousemove",Hp)})),function(){N(),y(),j(),x.forEach(function(w){return w()})}}},[e,a,o,d,p,m])}function Hw(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function Gw(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function Vw(e){var t,r,n,a,s=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,p=e.fixed,m=e.containerPadding,g=e.arrowElement,f=e.popperConfig,N=f===void 0?{}:f,y=Hw(N.modifiers);return zt({},N,{placement:l,enabled:s,strategy:p?"fixed":N.strategy,modifiers:Gw(zt({},y,{eventListeners:{enabled:o},preventOverflow:zt({},y.preventOverflow,{options:m?zt({padding:m},(t=y.preventOverflow)==null?void 0:t.options):(r=y.preventOverflow)==null?void 0:r.options}),offset:{options:zt({offset:d},(n=y.offset)==null?void 0:n.options)},arrow:zt({},y.arrow,{enabled:!!g,options:zt({},(a=y.arrow)==null?void 0:a.options,{element:g})}),flip:zt({enabled:!!c},y.flip)}))})}function Yw(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Kw(e,t){e.classList?e.classList.add(t):Yw(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Vp(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Xw(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Vp(e.className,t):e.setAttribute("class",Vp(e.className&&e.className.baseVal||"",t))}var Ql;function $h(e){if((!Ql&&Ql!==0||e)&&Dh){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Ql=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Ql}var hd=function(t){var r;return typeof document>"u"?null:t==null?Yo().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function Yp(e,t){var r=W.useState(function(){return hd(e)}),n=r[0],a=r[1];if(!n){var s=hd(e);s&&a(s)}return W.useEffect(function(){},[t,n]),W.useEffect(function(){var o=hd(e);o!==n&&a(o)},[e,n]),n}const Kp=e=>!e||typeof e=="function"?e:t=>{e.current=t};function Jw(e,t){const r=Kp(e),n=Kp(t);return a=>{r&&r(a),n&&n(a)}}function Zw(e,t){return W.useMemo(()=>Jw(e,t),[e,t])}var Bh=ue.forwardRef(function(e,t){var r=e.flip,n=e.offset,a=e.placement,s=e.containerPadding,o=s===void 0?5:s,l=e.popperConfig,c=l===void 0?{}:l,d=e.transition,p=Tp(),m=p[0],g=p[1],f=Tp(),N=f[0],y=f[1],j=Zw(g,t),x=Yp(e.container),w=Yp(e.target),_=W.useState(!e.show),E=_[0],A=_[1],B=Tw(w,m,Vw({placement:a,enableEvents:!!e.show,containerPadding:o||5,flip:r,offset:n,arrowElement:N,popperConfig:c})),T=B.styles,C=B.attributes,$=Ic(B,["styles","attributes"]);e.show?E&&A(!1):!e.transition&&!E&&A(!0);var H=function(){A(!0),e.onExited&&e.onExited.apply(e,arguments)},L=e.show||d&&!E;if(Ww(m,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!L)return null;var D=e.children(zt({},$,{show:!!e.show,props:zt({},C.popper,{style:T.popper,ref:j}),arrowProps:zt({},C.arrow,{style:T.arrow,ref:y})}));if(d){var F=e.onExit,U=e.onExiting,ee=e.onEnter,te=e.onEntering,re=e.onEntered;D=ue.createElement(d,{in:e.show,appear:!0,onExit:F,onExiting:U,onExited:H,onEnter:ee,onEntering:te,onEntered:re},D)}return x?Mg.createPortal(D,x):null});Bh.displayName="Overlay";Bh.propTypes={show:Le.bool,placement:Le.oneOf(kh),target:Le.any,container:Le.any,flip:Le.bool,children:Le.func.isRequired,containerPadding:Le.number,popperConfig:Le.object,rootClose:Le.bool,rootCloseEvent:Le.oneOf(["click","mousedown"]),rootCloseDisabled:Le.bool,onHide:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];if(t.rootClose){var s;return(s=Le.func).isRequired.apply(s,[t].concat(n))}return Le.func.apply(Le,[t].concat(n))},transition:Le.elementType,onEnter:Le.func,onEntering:Le.func,onEntered:Le.func,onExit:Le.func,onExiting:Le.func,onExited:Le.func};function Qw(){this.__data__=[],this.size=0}var eN=Qw,tN=Ho;function rN(e,t){for(var r=e.length;r--;)if(tN(e[r][0],t))return r;return-1}var Bc=rN,nN=Bc,aN=Array.prototype,sN=aN.splice;function iN(e){var t=this.__data__,r=nN(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():sN.call(t,r,1),--this.size,!0}var oN=iN,lN=Bc;function cN(e){var t=this.__data__,r=lN(t,e);return r<0?void 0:t[r][1]}var uN=cN,dN=Bc;function hN(e){return dN(this.__data__,e)>-1}var fN=hN,pN=Bc;function mN(e,t){var r=this.__data__,n=pN(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var gN=mN,vN=eN,bN=oN,yN=uN,xN=fN,wN=gN;function Ei(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ei.prototype.clear=vN;Ei.prototype.delete=bN;Ei.prototype.get=yN;Ei.prototype.has=xN;Ei.prototype.set=wN;var qc=Ei,NN=qc;function jN(){this.__data__=new NN,this.size=0}var SN=jN;function _N(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var AN=_N;function EN(e){return this.__data__.get(e)}var CN=EN;function LN(e){return this.__data__.has(e)}var DN=LN,PN=Zn,kN=PN["__core-js_shared__"],ON=kN,fd=ON,Xp=function(){var e=/[^.]+$/.exec(fd&&fd.keys&&fd.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function TN(e){return!!Xp&&Xp in e}var MN=TN,IN=Function.prototype,RN=IN.toString;function FN(e){if(e!=null){try{return RN.call(e)}catch{}try{return e+""}catch{}}return""}var z0=FN,$N=Ah,BN=MN,qN=va,zN=z0,UN=/[\\^$.*+?()[\]{}|]/g,WN=/^\[object .+?Constructor\]$/,HN=Function.prototype,GN=Object.prototype,VN=HN.toString,YN=GN.hasOwnProperty,KN=RegExp("^"+VN.call(YN).replace(UN,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function XN(e){if(!qN(e)||BN(e))return!1;var t=$N(e)?KN:WN;return t.test(zN(e))}var JN=XN;function ZN(e,t){return e==null?void 0:e[t]}var QN=ZN,e3=JN,t3=QN;function r3(e,t){var r=t3(e,t);return e3(r)?r:void 0}var _s=r3,n3=_s,a3=Zn,s3=n3(a3,"Map"),qh=s3,i3=_s,o3=i3(Object,"create"),zc=o3,Jp=zc;function l3(){this.__data__=Jp?Jp(null):{},this.size=0}var c3=l3;function u3(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var d3=u3,h3=zc,f3="__lodash_hash_undefined__",p3=Object.prototype,m3=p3.hasOwnProperty;function g3(e){var t=this.__data__;if(h3){var r=t[e];return r===f3?void 0:r}return m3.call(t,e)?t[e]:void 0}var v3=g3,b3=zc,y3=Object.prototype,x3=y3.hasOwnProperty;function w3(e){var t=this.__data__;return b3?t[e]!==void 0:x3.call(t,e)}var N3=w3,j3=zc,S3="__lodash_hash_undefined__";function _3(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=j3&&t===void 0?S3:t,this}var A3=_3,E3=c3,C3=d3,L3=v3,D3=N3,P3=A3;function Ci(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ci.prototype.clear=E3;Ci.prototype.delete=C3;Ci.prototype.get=L3;Ci.prototype.has=D3;Ci.prototype.set=P3;var k3=Ci,Zp=k3,O3=qc,T3=qh;function M3(){this.size=0,this.__data__={hash:new Zp,map:new(T3||O3),string:new Zp}}var I3=M3;function R3(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var F3=R3,$3=F3;function B3(e,t){var r=e.__data__;return $3(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Uc=B3,q3=Uc;function z3(e){var t=q3(this,e).delete(e);return this.size-=t?1:0,t}var U3=z3,W3=Uc;function H3(e){return W3(this,e).get(e)}var G3=H3,V3=Uc;function Y3(e){return V3(this,e).has(e)}var K3=Y3,X3=Uc;function J3(e,t){var r=X3(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Z3=J3,Q3=I3,e4=U3,t4=G3,r4=K3,n4=Z3;function Li(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Li.prototype.clear=Q3;Li.prototype.delete=e4;Li.prototype.get=t4;Li.prototype.has=r4;Li.prototype.set=n4;var zh=Li,a4=qc,s4=qh,i4=zh,o4=200;function l4(e,t){var r=this.__data__;if(r instanceof a4){var n=r.__data__;if(!s4||n.length<o4-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new i4(n)}return r.set(e,t),this.size=r.size,this}var c4=l4,u4=qc,d4=SN,h4=AN,f4=CN,p4=DN,m4=c4;function Di(e){var t=this.__data__=new u4(e);this.size=t.size}Di.prototype.clear=d4;Di.prototype.delete=h4;Di.prototype.get=f4;Di.prototype.has=p4;Di.prototype.set=m4;var Uh=Di,g4="__lodash_hash_undefined__";function v4(e){return this.__data__.set(e,g4),this}var b4=v4;function y4(e){return this.__data__.has(e)}var x4=y4,w4=zh,N4=b4,j4=x4;function Sc(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new w4;++t<r;)this.add(e[t])}Sc.prototype.add=Sc.prototype.push=N4;Sc.prototype.has=j4;var S4=Sc;function _4(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var A4=_4;function E4(e,t){return e.has(t)}var C4=E4,L4=S4,D4=A4,P4=C4,k4=1,O4=2;function T4(e,t,r,n,a,s){var o=r&k4,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=s.get(e),p=s.get(t);if(d&&p)return d==t&&p==e;var m=-1,g=!0,f=r&O4?new L4:void 0;for(s.set(e,t),s.set(t,e);++m<l;){var N=e[m],y=t[m];if(n)var j=o?n(y,N,m,t,e,s):n(N,y,m,e,t,s);if(j!==void 0){if(j)continue;g=!1;break}if(f){if(!D4(t,function(x,w){if(!P4(f,w)&&(N===x||a(N,x,r,n,s)))return f.push(w)})){g=!1;break}}else if(!(N===y||a(N,y,r,n,s))){g=!1;break}}return s.delete(e),s.delete(t),g}var U0=T4,M4=Zn,I4=M4.Uint8Array,W0=I4;function R4(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var F4=R4;function $4(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var B4=$4,Qp=_i,em=W0,q4=Ho,z4=U0,U4=F4,W4=B4,H4=1,G4=2,V4="[object Boolean]",Y4="[object Date]",K4="[object Error]",X4="[object Map]",J4="[object Number]",Z4="[object RegExp]",Q4="[object Set]",ej="[object String]",tj="[object Symbol]",rj="[object ArrayBuffer]",nj="[object DataView]",tm=Qp?Qp.prototype:void 0,pd=tm?tm.valueOf:void 0;function aj(e,t,r,n,a,s,o){switch(r){case nj:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case rj:return!(e.byteLength!=t.byteLength||!s(new em(e),new em(t)));case V4:case Y4:case J4:return q4(+e,+t);case K4:return e.name==t.name&&e.message==t.message;case Z4:case ej:return e==t+"";case X4:var l=U4;case Q4:var c=n&H4;if(l||(l=W4),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;n|=G4,o.set(e,t);var p=z4(l(e),l(t),n,a,s,o);return o.delete(e),p;case tj:if(pd)return pd.call(e)==pd.call(t)}return!1}var sj=aj;function ij(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var Wh=ij,oj=Array.isArray,hn=oj,lj=Wh,cj=hn;function uj(e,t,r){var n=t(e);return cj(e)?n:lj(n,r(e))}var H0=uj;function dj(e,t){for(var r=-1,n=e==null?0:e.length,a=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}var hj=dj;function fj(){return[]}var G0=fj,pj=hj,mj=G0,gj=Object.prototype,vj=gj.propertyIsEnumerable,rm=Object.getOwnPropertySymbols,bj=rm?function(e){return e==null?[]:(e=Object(e),pj(rm(e),function(t){return vj.call(e,t)}))}:mj,Hh=bj;function yj(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var xj=yj,wj=Ai,Nj=za,jj="[object Arguments]";function Sj(e){return Nj(e)&&wj(e)==jj}var _j=Sj,nm=_j,Aj=za,V0=Object.prototype,Ej=V0.hasOwnProperty,Cj=V0.propertyIsEnumerable,Lj=nm(function(){return arguments}())?nm:function(e){return Aj(e)&&Ej.call(e,"callee")&&!Cj.call(e,"callee")},Gh=Lj,_c={exports:{}};function Dj(){return!1}var Pj=Dj;_c.exports;(function(e,t){var r=Zn,n=Pj,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d})(_c,_c.exports);var Wc=_c.exports,kj=Ai,Oj=Eh,Tj=za,Mj="[object Arguments]",Ij="[object Array]",Rj="[object Boolean]",Fj="[object Date]",$j="[object Error]",Bj="[object Function]",qj="[object Map]",zj="[object Number]",Uj="[object Object]",Wj="[object RegExp]",Hj="[object Set]",Gj="[object String]",Vj="[object WeakMap]",Yj="[object ArrayBuffer]",Kj="[object DataView]",Xj="[object Float32Array]",Jj="[object Float64Array]",Zj="[object Int8Array]",Qj="[object Int16Array]",eS="[object Int32Array]",tS="[object Uint8Array]",rS="[object Uint8ClampedArray]",nS="[object Uint16Array]",aS="[object Uint32Array]",Pt={};Pt[Xj]=Pt[Jj]=Pt[Zj]=Pt[Qj]=Pt[eS]=Pt[tS]=Pt[rS]=Pt[nS]=Pt[aS]=!0;Pt[Mj]=Pt[Ij]=Pt[Yj]=Pt[Rj]=Pt[Kj]=Pt[Fj]=Pt[$j]=Pt[Bj]=Pt[qj]=Pt[zj]=Pt[Uj]=Pt[Wj]=Pt[Hj]=Pt[Gj]=Pt[Vj]=!1;function sS(e){return Tj(e)&&Oj(e.length)&&!!Pt[kj(e)]}var iS=sS;function oS(e){return function(t){return e(t)}}var Hc=oS,Ac={exports:{}};Ac.exports;(function(e,t){var r=_0,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,o=s&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Ac,Ac.exports);var Vh=Ac.exports,lS=iS,cS=Hc,am=Vh,sm=am&&am.isTypedArray,uS=sm?cS(sm):lS,Yh=uS,dS=xj,hS=Gh,fS=hn,pS=Wc,mS=Ch,gS=Yh,vS=Object.prototype,bS=vS.hasOwnProperty;function yS(e,t){var r=fS(e),n=!r&&hS(e),a=!r&&!n&&pS(e),s=!r&&!n&&!a&&gS(e),o=r||n||a||s,l=o?dS(e.length,String):[],c=l.length;for(var d in e)(t||bS.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||mS(d,c)))&&l.push(d);return l}var Y0=yS,xS=Object.prototype;function wS(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||xS;return e===r}var Kh=wS;function NS(e,t){return function(r){return e(t(r))}}var K0=NS,jS=K0,SS=jS(Object.keys,Object),_S=SS,AS=Kh,ES=_S,CS=Object.prototype,LS=CS.hasOwnProperty;function DS(e){if(!AS(e))return ES(e);var t=[];for(var r in Object(e))LS.call(e,r)&&r!="constructor"&&t.push(r);return t}var PS=DS,kS=Y0,OS=PS,TS=Go;function MS(e){return TS(e)?kS(e):OS(e)}var Jo=MS,IS=H0,RS=Hh,FS=Jo;function $S(e){return IS(e,FS,RS)}var X0=$S,im=X0,BS=1,qS=Object.prototype,zS=qS.hasOwnProperty;function US(e,t,r,n,a,s){var o=r&BS,l=im(e),c=l.length,d=im(t),p=d.length;if(c!=p&&!o)return!1;for(var m=c;m--;){var g=l[m];if(!(o?g in t:zS.call(t,g)))return!1}var f=s.get(e),N=s.get(t);if(f&&N)return f==t&&N==e;var y=!0;s.set(e,t),s.set(t,e);for(var j=o;++m<c;){g=l[m];var x=e[g],w=t[g];if(n)var _=o?n(w,x,g,t,e,s):n(x,w,g,e,t,s);if(!(_===void 0?x===w||a(x,w,r,n,s):_)){y=!1;break}j||(j=g=="constructor")}if(y&&!j){var E=e.constructor,A=t.constructor;E!=A&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof A=="function"&&A instanceof A)&&(y=!1)}return s.delete(e),s.delete(t),y}var WS=US,HS=_s,GS=Zn,VS=HS(GS,"DataView"),YS=VS,KS=_s,XS=Zn,JS=KS(XS,"Promise"),ZS=JS,QS=_s,e6=Zn,t6=QS(e6,"Set"),r6=t6,n6=_s,a6=Zn,s6=n6(a6,"WeakMap"),i6=s6,Zd=YS,Qd=qh,eh=ZS,th=r6,rh=i6,J0=Ai,Pi=z0,om="[object Map]",o6="[object Object]",lm="[object Promise]",cm="[object Set]",um="[object WeakMap]",dm="[object DataView]",l6=Pi(Zd),c6=Pi(Qd),u6=Pi(eh),d6=Pi(th),h6=Pi(rh),os=J0;(Zd&&os(new Zd(new ArrayBuffer(1)))!=dm||Qd&&os(new Qd)!=om||eh&&os(eh.resolve())!=lm||th&&os(new th)!=cm||rh&&os(new rh)!=um)&&(os=function(e){var t=J0(e),r=t==o6?e.constructor:void 0,n=r?Pi(r):"";if(n)switch(n){case l6:return dm;case c6:return om;case u6:return lm;case d6:return cm;case h6:return um}return t});var Gc=os,md=Uh,f6=U0,p6=sj,m6=WS,hm=Gc,fm=hn,pm=Wc,g6=Yh,v6=1,mm="[object Arguments]",gm="[object Array]",ec="[object Object]",b6=Object.prototype,vm=b6.hasOwnProperty;function y6(e,t,r,n,a,s){var o=fm(e),l=fm(t),c=o?gm:hm(e),d=l?gm:hm(t);c=c==mm?ec:c,d=d==mm?ec:d;var p=c==ec,m=d==ec,g=c==d;if(g&&pm(e)){if(!pm(t))return!1;o=!0,p=!1}if(g&&!p)return s||(s=new md),o||g6(e)?f6(e,t,r,n,a,s):p6(e,t,c,r,n,a,s);if(!(r&v6)){var f=p&&vm.call(e,"__wrapped__"),N=m&&vm.call(t,"__wrapped__");if(f||N){var y=f?e.value():e,j=N?t.value():t;return s||(s=new md),a(y,j,r,n,s)}}return g?(s||(s=new md),m6(e,t,r,n,a,s)):!1}var x6=y6,w6=x6,bm=za;function Z0(e,t,r,n,a){return e===t?!0:e==null||t==null||!bm(e)&&!bm(t)?e!==e&&t!==t:w6(e,t,r,n,Z0,a)}var Xh=Z0,N6=Xh;function j6(e,t){return N6(e,t)}var S6=j6;const _6=qr(S6);function gd(e,t){var r=Lh(e);return r?r.innerHeight:fs(e).height}function Q0(e,t,r){e.closest&&!r&&e.closest(t);var n=e;do{if(N5(n,t))return n;n=n.parentElement}while(n&&n!==r&&n.nodeType===document.ELEMENT_NODE);return null}function A6(e,t,r,n){for(var a=e.length,s=r+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return-1}var E6=A6,C6=Uh,L6=Xh,D6=1,P6=2;function k6(e,t,r,n){var a=r.length,s=a,o=!n;if(e==null)return!s;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=r[a];var c=l[0],d=e[c],p=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var m=new C6;if(n)var g=n(d,p,c,e,t,m);if(!(g===void 0?L6(p,d,D6|P6,n,m):g))return!1}}return!0}var O6=k6,T6=va;function M6(e){return e===e&&!T6(e)}var ev=M6,I6=ev,R6=Jo;function F6(e){for(var t=R6(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,I6(a)]}return t}var $6=F6;function B6(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var tv=B6,q6=O6,z6=$6,U6=tv;function W6(e){var t=z6(e);return t.length==1&&t[0][2]?U6(t[0][0],t[0][1]):function(r){return r===e||q6(r,e,t)}}var H6=W6,G6=hn,V6=Vo,Y6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K6=/^\w*$/;function X6(e,t){if(G6(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||V6(e)?!0:K6.test(e)||!Y6.test(e)||t!=null&&e in Object(t)}var Jh=X6,rv=zh,J6="Expected a function";function Zh(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(J6);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,n);return r.cache=s.set(a,o)||s,o};return r.cache=new(Zh.Cache||rv),r}Zh.Cache=rv;var Z6=Zh,Q6=Z6,e_=500;function t_(e){var t=Q6(e,function(n){return r.size===e_&&r.clear(),n}),r=t.cache;return t}var r_=t_,n_=r_,a_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s_=/\\(\\)?/g,i_=n_(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(a_,function(r,n,a,s){t.push(a?s.replace(s_,"$1"):n||r)}),t}),o_=i_;function l_(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Qh=l_,ym=_i,c_=Qh,u_=hn,d_=Vo,xm=ym?ym.prototype:void 0,wm=xm?xm.toString:void 0;function nv(e){if(typeof e=="string")return e;if(u_(e))return c_(e,nv)+"";if(d_(e))return wm?wm.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var h_=nv,f_=h_;function p_(e){return e==null?"":f_(e)}var m_=p_,g_=hn,v_=Jh,b_=o_,y_=m_;function x_(e,t){return g_(e)?e:v_(e,t)?[e]:b_(y_(e))}var Vc=x_,w_=Vo;function N_(e){if(typeof e=="string"||w_(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Zo=N_,j_=Vc,S_=Zo;function __(e,t){t=j_(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[S_(t[r++])];return r&&r==n?e:void 0}var Yc=__,A_=Yc;function E_(e,t,r){var n=e==null?void 0:A_(e,t);return n===void 0?r:n}var C_=E_;function L_(e,t){return e!=null&&t in Object(e)}var D_=L_,P_=Vc,k_=Gh,O_=hn,T_=Ch,M_=Eh,I_=Zo;function R_(e,t,r){t=P_(t,e);for(var n=-1,a=t.length,s=!1;++n<a;){var o=I_(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=a?s:(a=e==null?0:e.length,!!a&&M_(a)&&T_(o,a)&&(O_(e)||k_(e)))}var F_=R_,$_=D_,B_=F_;function q_(e,t){return e!=null&&B_(e,t,$_)}var z_=q_,U_=Xh,W_=C_,H_=z_,G_=Jh,V_=ev,Y_=tv,K_=Zo,X_=1,J_=2;function Z_(e,t){return G_(e)&&V_(t)?Y_(K_(e),t):function(r){var n=W_(r,e);return n===void 0&&n===t?H_(r,e):U_(t,n,X_|J_)}}var Q_=Z_;function eA(e){return e}var Kc=eA;function tA(e){return function(t){return t==null?void 0:t[e]}}var rA=tA,nA=Yc;function aA(e){return function(t){return nA(t,e)}}var sA=aA,iA=rA,oA=sA,lA=Jh,cA=Zo;function uA(e){return lA(e)?iA(cA(e)):oA(e)}var dA=uA,hA=H6,fA=Q_,pA=Kc,mA=hn,gA=dA;function vA(e){return typeof e=="function"?e:e==null?pA:typeof e=="object"?mA(e)?fA(e[0],e[1]):hA(e):gA(e)}var Xc=vA,bA=E6,yA=Xc,xA=C0,wA=Math.max;function NA(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:xA(r);return a<0&&(a=wA(n+a,0)),bA(e,yA(t),a)}var jA=NA;const SA=qr(jA);var _A=Math.ceil,AA=Math.max;function EA(e,t,r,n){for(var a=-1,s=AA(_A((t-e)/(r||1)),0),o=Array(s);s--;)o[n?s:++a]=e,e+=r;return o}var CA=EA,LA=CA,DA=Fc,vd=E0;function PA(e){return function(t,r,n){return n&&typeof n!="number"&&DA(t,r,n)&&(r=n=void 0),t=vd(t),r===void 0?(r=t,t=0):r=vd(r),n=n===void 0?t<r?1:-1:vd(n),LA(t,r,n,e)}}var kA=PA,OA=kA,TA=OA(),MA=TA;const IA=qr(MA);var Nm=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function RA(e,t){return!!(e===t||Nm(e)&&Nm(t))}function FA(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!RA(e[r],t[r]))return!1;return!0}function av(e,t){t===void 0&&(t=FA);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}function nh(e,t){var r=Lh(e);return r?r.innerWidth:fs(e).width}var jm=_i,$A=Gh,BA=hn,Sm=jm?jm.isConcatSpreadable:void 0;function qA(e){return BA(e)||$A(e)||!!(Sm&&e&&e[Sm])}var zA=qA,UA=Wh,WA=zA;function sv(e,t,r,n,a){var s=-1,o=e.length;for(r||(r=WA),a||(a=[]);++s<o;){var l=e[s];t>0&&r(l)?t>1?sv(l,t-1,r,n,a):UA(a,l):n||(a[a.length]=l)}return a}var iv=sv;function HA(e){return function(t,r,n){for(var a=-1,s=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(s[c],c,s)===!1)break}return t}}var GA=HA,VA=GA,YA=VA(),KA=YA,XA=KA,JA=Jo;function ZA(e,t){return e&&XA(e,t,JA)}var ef=ZA,QA=Go;function eE(e,t){return function(r,n){if(r==null)return r;if(!QA(r))return e(r,n);for(var a=r.length,s=t?a:-1,o=Object(r);(t?s--:++s<a)&&n(o[s],s,o)!==!1;);return r}}var tE=eE,rE=ef,nE=tE,aE=nE(rE),sE=aE,iE=sE,oE=Go;function lE(e,t){var r=-1,n=oE(e)?Array(e.length):[];return iE(e,function(a,s,o){n[++r]=t(a,s,o)}),n}var cE=lE;function uE(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var dE=uE,_m=Vo;function hE(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,s=_m(e),o=t!==void 0,l=t===null,c=t===t,d=_m(t);if(!l&&!d&&!s&&e>t||s&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!a)return 1;if(!n&&!s&&!d&&e<t||d&&r&&a&&!n&&!s||l&&r&&a||!o&&a||!c)return-1}return 0}var fE=hE,pE=fE;function mE(e,t,r){for(var n=-1,a=e.criteria,s=t.criteria,o=a.length,l=r.length;++n<o;){var c=pE(a[n],s[n]);if(c){if(n>=l)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return e.index-t.index}var gE=mE,bd=Qh,vE=Yc,bE=Xc,yE=cE,xE=dE,wE=Hc,NE=gE,jE=Kc,SE=hn;function _E(e,t,r){t.length?t=bd(t,function(s){return SE(s)?function(o){return vE(o,s.length===1?s[0]:s)}:s}):t=[jE];var n=-1;t=bd(t,wE(bE));var a=yE(e,function(s,o,l){var c=bd(t,function(d){return d(s)});return{criteria:c,index:++n,value:s}});return xE(a,function(s,o){return NE(s,o,r)})}var AE=_E;function EE(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var CE=EE,LE=CE,Am=Math.max;function DE(e,t,r){return t=Am(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=Am(n.length-t,0),o=Array(s);++a<s;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),LE(e,this,l)}}var ov=DE;function PE(e){return function(){return e}}var kE=PE,OE=_s,TE=function(){try{var e=OE(Object,"defineProperty");return e({},"",{}),e}catch{}}(),lv=TE,ME=kE,Em=lv,IE=Kc,RE=Em?function(e,t){return Em(e,"toString",{configurable:!0,enumerable:!1,value:ME(t),writable:!0})}:IE,FE=RE,$E=800,BE=16,qE=Date.now;function zE(e){var t=0,r=0;return function(){var n=qE(),a=BE-(n-r);if(r=n,a>0){if(++t>=$E)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var UE=zE,WE=FE,HE=UE,GE=HE(WE),cv=GE,VE=Kc,YE=ov,KE=cv;function XE(e,t){return KE(YE(e,t,VE),e+"")}var uv=XE,JE=iv,ZE=AE,QE=uv,Cm=Fc,eC=QE(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Cm(e,t[0],t[1])?t=[]:r>2&&Cm(t[0],t[1],t[2])&&(t=[t[0]]),ZE(e,JE(t,1),[])}),tC=eC;const rC=qr(tC);function dv(e){return c0(e)||j0(e)||jh(e)||u0()}function nC(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var aC=nC,sC=va,iC=Kh,oC=aC,lC=Object.prototype,cC=lC.hasOwnProperty;function uC(e){if(!sC(e))return oC(e);var t=iC(e),r=[];for(var n in e)n=="constructor"&&(t||!cC.call(e,n))||r.push(n);return r}var dC=uC,hC=Y0,fC=dC,pC=Go;function mC(e){return pC(e)?hC(e,!0):fC(e)}var Jc=mC,gC=uv,vC=Ho,bC=Fc,yC=Jc,hv=Object.prototype,xC=hv.hasOwnProperty,wC=gC(function(e,t){e=Object(e);var r=-1,n=t.length,a=n>2?t[2]:void 0;for(a&&bC(t[0],t[1],a)&&(n=1);++r<n;)for(var s=t[r],o=yC(s),l=-1,c=o.length;++l<c;){var d=o[l],p=e[d];(p===void 0||vC(p,hv[d])&&!xC.call(e,d))&&(e[d]=s[d])}return e}),NC=wC;const jC=qr(NC);var Lm=lv;function SC(e,t,r){t=="__proto__"&&Lm?Lm(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var tf=SC,_C=tf,AC=ef,EC=Xc;function CC(e,t){var r={};return t=EC(t),AC(e,function(n,a,s){_C(r,a,t(n,a,s))}),r}var LC=CC;const DC=qr(LC);function PC(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var fv=PC,kC=tf,OC=Ho,TC=Object.prototype,MC=TC.hasOwnProperty;function IC(e,t,r){var n=e[t];(!(MC.call(e,t)&&OC(n,r))||r===void 0&&!(t in e))&&kC(e,t,r)}var pv=IC,RC=pv,FC=tf;function $C(e,t,r,n){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var l=t[s],c=n?n(r[l],e[l],l,r,e):void 0;c===void 0&&(c=e[l]),a?FC(r,l,c):RC(r,l,c)}return r}var Qo=$C,BC=Qo,qC=Jo;function zC(e,t){return e&&BC(t,qC(t),e)}var UC=zC,WC=Qo,HC=Jc;function GC(e,t){return e&&WC(t,HC(t),e)}var VC=GC,Ec={exports:{}};Ec.exports;(function(e,t){var r=Zn,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,o=s?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,p){if(p)return d.slice();var m=d.length,g=l?l(m):new d.constructor(m);return d.copy(g),g}e.exports=c})(Ec,Ec.exports);var YC=Ec.exports;function KC(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var XC=KC,JC=Qo,ZC=Hh;function QC(e,t){return JC(e,ZC(e),t)}var eL=QC,tL=K0,rL=tL(Object.getPrototypeOf,Object),Zc=rL,nL=Wh,aL=Zc,sL=Hh,iL=G0,oL=Object.getOwnPropertySymbols,lL=oL?function(e){for(var t=[];e;)nL(t,sL(e)),e=aL(e);return t}:iL,mv=lL,cL=Qo,uL=mv;function dL(e,t){return cL(e,uL(e),t)}var hL=dL,fL=H0,pL=mv,mL=Jc;function gL(e){return fL(e,mL,pL)}var gv=gL,vL=Object.prototype,bL=vL.hasOwnProperty;function yL(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&bL.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var xL=yL,Dm=W0;function wL(e){var t=new e.constructor(e.byteLength);return new Dm(t).set(new Dm(e)),t}var rf=wL,NL=rf;function jL(e,t){var r=t?NL(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var SL=jL,_L=/\w*$/;function AL(e){var t=new e.constructor(e.source,_L.exec(e));return t.lastIndex=e.lastIndex,t}var EL=AL,Pm=_i,km=Pm?Pm.prototype:void 0,Om=km?km.valueOf:void 0;function CL(e){return Om?Object(Om.call(e)):{}}var LL=CL,DL=rf;function PL(e,t){var r=t?DL(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var kL=PL,OL=rf,TL=SL,ML=EL,IL=LL,RL=kL,FL="[object Boolean]",$L="[object Date]",BL="[object Map]",qL="[object Number]",zL="[object RegExp]",UL="[object Set]",WL="[object String]",HL="[object Symbol]",GL="[object ArrayBuffer]",VL="[object DataView]",YL="[object Float32Array]",KL="[object Float64Array]",XL="[object Int8Array]",JL="[object Int16Array]",ZL="[object Int32Array]",QL="[object Uint8Array]",eD="[object Uint8ClampedArray]",tD="[object Uint16Array]",rD="[object Uint32Array]";function nD(e,t,r){var n=e.constructor;switch(t){case GL:return OL(e);case FL:case $L:return new n(+e);case VL:return TL(e,r);case YL:case KL:case XL:case JL:case ZL:case QL:case eD:case tD:case rD:return RL(e,r);case BL:return new n;case qL:case WL:return new n(e);case zL:return ML(e);case UL:return new n;case HL:return IL(e)}}var aD=nD,sD=va,Tm=Object.create,iD=function(){function e(){}return function(t){if(!sD(t))return{};if(Tm)return Tm(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),vv=iD,oD=vv,lD=Zc,cD=Kh;function uD(e){return typeof e.constructor=="function"&&!cD(e)?oD(lD(e)):{}}var dD=uD,hD=Gc,fD=za,pD="[object Map]";function mD(e){return fD(e)&&hD(e)==pD}var gD=mD,vD=gD,bD=Hc,Mm=Vh,Im=Mm&&Mm.isMap,yD=Im?bD(Im):vD,xD=yD,wD=Gc,ND=za,jD="[object Set]";function SD(e){return ND(e)&&wD(e)==jD}var _D=SD,AD=_D,ED=Hc,Rm=Vh,Fm=Rm&&Rm.isSet,CD=Fm?ED(Fm):AD,LD=CD,DD=Uh,PD=fv,kD=pv,OD=UC,TD=VC,MD=YC,ID=XC,RD=eL,FD=hL,$D=X0,BD=gv,qD=Gc,zD=xL,UD=aD,WD=dD,HD=hn,GD=Wc,VD=xD,YD=va,KD=LD,XD=Jo,JD=Jc,ZD=1,QD=2,e8=4,bv="[object Arguments]",t8="[object Array]",r8="[object Boolean]",n8="[object Date]",a8="[object Error]",yv="[object Function]",s8="[object GeneratorFunction]",i8="[object Map]",o8="[object Number]",xv="[object Object]",l8="[object RegExp]",c8="[object Set]",u8="[object String]",d8="[object Symbol]",h8="[object WeakMap]",f8="[object ArrayBuffer]",p8="[object DataView]",m8="[object Float32Array]",g8="[object Float64Array]",v8="[object Int8Array]",b8="[object Int16Array]",y8="[object Int32Array]",x8="[object Uint8Array]",w8="[object Uint8ClampedArray]",N8="[object Uint16Array]",j8="[object Uint32Array]",Lt={};Lt[bv]=Lt[t8]=Lt[f8]=Lt[p8]=Lt[r8]=Lt[n8]=Lt[m8]=Lt[g8]=Lt[v8]=Lt[b8]=Lt[y8]=Lt[i8]=Lt[o8]=Lt[xv]=Lt[l8]=Lt[c8]=Lt[u8]=Lt[d8]=Lt[x8]=Lt[w8]=Lt[N8]=Lt[j8]=!0;Lt[a8]=Lt[yv]=Lt[h8]=!1;function dc(e,t,r,n,a,s){var o,l=t&ZD,c=t&QD,d=t&e8;if(r&&(o=a?r(e,n,a,s):r(e)),o!==void 0)return o;if(!YD(e))return e;var p=HD(e);if(p){if(o=zD(e),!l)return ID(e,o)}else{var m=qD(e),g=m==yv||m==s8;if(GD(e))return MD(e,l);if(m==xv||m==bv||g&&!a){if(o=c||g?{}:WD(e),!l)return c?FD(e,TD(o,e)):RD(e,OD(o,e))}else{if(!Lt[m])return a?e:{};o=UD(e,m,l)}}s||(s=new DD);var f=s.get(e);if(f)return f;s.set(e,o),KD(e)?e.forEach(function(j){o.add(dc(j,t,r,j,e,s))}):VD(e)&&e.forEach(function(j,x){o.set(x,dc(j,t,r,x,e,s))});var N=d?c?BD:$D:c?JD:XD,y=p?void 0:N(e);return PD(y||e,function(j,x){y&&(x=j,j=e[x]),kD(o,x,dc(j,t,r,x,e,s))}),o}var S8=dc;function _8(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var A8=_8,E8=Yc,C8=S0;function L8(e,t){return t.length<2?e:E8(e,C8(t,0,-1))}var D8=L8,P8=Vc,k8=A8,O8=D8,T8=Zo;function M8(e,t){return t=P8(t,e),e=O8(e,t),e==null||delete e[T8(k8(t))]}var I8=M8,R8=Ai,F8=Zc,$8=za,B8="[object Object]",q8=Function.prototype,z8=Object.prototype,wv=q8.toString,U8=z8.hasOwnProperty,W8=wv.call(Object);function H8(e){if(!$8(e)||R8(e)!=B8)return!1;var t=F8(e);if(t===null)return!0;var r=U8.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&wv.call(r)==W8}var G8=H8,V8=G8;function Y8(e){return V8(e)?void 0:e}var K8=Y8,X8=iv;function J8(e){var t=e==null?0:e.length;return t?X8(e,1):[]}var Z8=J8,Q8=Z8,eP=ov,tP=cv;function rP(e){return tP(eP(e,void 0,Q8),e+"")}var nP=rP,aP=Qh,sP=S8,iP=I8,oP=Vc,lP=Qo,cP=K8,uP=nP,dP=gv,hP=1,fP=2,pP=4,mP=uP(function(e,t){var r={};if(e==null)return r;var n=!1;t=aP(t,function(s){return s=oP(s,e),n||(n=s.length>1),s}),lP(e,dP(e),r),n&&(r=sP(r,hP|fP|pP,cP));for(var a=t.length;a--;)iP(r,t[a]);return r}),gP=mP;const vP=qr(gP);var bP=fv,yP=vv,xP=ef,wP=Xc,NP=Zc,jP=hn,SP=Wc,_P=Ah,AP=va,EP=Yh;function CP(e,t,r){var n=jP(e),a=n||SP(e)||EP(e);if(t=wP(t),r==null){var s=e&&e.constructor;a?r=n?new s:[]:AP(e)?r=_P(s)?yP(NP(e)):{}:r={}}return(a?bP:xP)(e,function(o,l,c){return t(r,o,l,c)}),r}var LP=CP;const DP=qr(LP);var PP={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cn,function(){return function(r,n,a){n.prototype.isBetween=function(s,o,l,c){var d=a(s),p=a(o),m=(c=c||"()")[0]==="(",g=c[1]===")";return(m?this.isAfter(d,l):!this.isBefore(d,l))&&(g?this.isBefore(p,l):!this.isAfter(p,l))||(m?this.isBefore(d,l):!this.isAfter(d,l))&&(g?this.isAfter(p,l):!this.isBefore(p,l))}}})})(PP);var kP={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cn,function(){return function(r,n){n.prototype.isSameOrAfter=function(a,s){return this.isSame(a,s)||this.isAfter(a,s)}}})})(kP);var OP={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cn,function(){return function(r,n){n.prototype.isSameOrBefore=function(a,s){return this.isSame(a,s)||this.isBefore(a,s)}}})})(OP);var TP={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cn,function(){return function(r,n,a){var s=n.prototype,o=function(m){return m&&(m.indexOf?m:m.s)},l=function(m,g,f,N,y){var j=m.name?m:m.$locale(),x=o(j[g]),w=o(j[f]),_=x||w.map(function(A){return A.slice(0,N)});if(!y)return _;var E=j.weekStart;return _.map(function(A,B){return _[(B+(E||0))%7]})},c=function(){return a.Ls[a.locale()]},d=function(m,g){return m.formats[g]||function(f){return f.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(N,y,j){return y||j.slice(1)})}(m.formats[g.toUpperCase()])},p=function(){var m=this;return{months:function(g){return g?g.format("MMMM"):l(m,"months")},monthsShort:function(g){return g?g.format("MMM"):l(m,"monthsShort","months",3)},firstDayOfWeek:function(){return m.$locale().weekStart||0},weekdays:function(g){return g?g.format("dddd"):l(m,"weekdays")},weekdaysMin:function(g){return g?g.format("dd"):l(m,"weekdaysMin","weekdays",2)},weekdaysShort:function(g){return g?g.format("ddd"):l(m,"weekdaysShort","weekdays",3)},longDateFormat:function(g){return d(m.$locale(),g)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return p.bind(this)()},a.localeData=function(){var m=c();return{firstDayOfWeek:function(){return m.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(g){return d(m,g)},meridiem:m.meridiem,ordinal:m.ordinal}},a.months=function(){return l(c(),"months")},a.monthsShort=function(){return l(c(),"monthsShort","months",3)},a.weekdays=function(m){return l(c(),"weekdays",null,null,m)},a.weekdaysShort=function(m){return l(c(),"weekdaysShort","weekdays",3,m)},a.weekdaysMin=function(m){return l(c(),"weekdaysMin","weekdays",2,m)}}})})(TP);var MP={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cn,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,a,s){var o=a.prototype,l=o.format;s.en.formats=r,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,p=function(m,g){return m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(f,N,y){var j=y&&y.toUpperCase();return N||g[y]||r[y]||g[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(x,w,_){return w||_.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,p)}}})})(MP);var IP={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cn,function(){return function(r,n,a){var s=function(o,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(p){return p}))[0];for(var d=1;d<l.length;d+=1)l[d].isValid()&&!l[d][o](c)||(c=l[d]);return c};a.max=function(){var o=[].slice.call(arguments,0);return s("isAfter",o)},a.min=function(){var o=[].slice.call(arguments,0);return s("isBefore",o)}}})})(IP);var RP={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cn,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(s,o,l){var c=o.prototype;l.utc=function(y){var j={date:y,utc:!0,args:arguments};return new o(j)},c.utc=function(y){var j=l(this.toDate(),{locale:this.$L,utc:!0});return y?j.add(this.utcOffset(),r):j},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),d.call(this,y)};var p=c.init;c.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else p.call(this)};var m=c.utcOffset;c.utcOffset=function(y,j){var x=this.$utils().u;if(x(y))return this.$u?0:x(this.$offset)?m.call(this):this.$offset;if(typeof y=="string"&&(y=function(A){A===void 0&&(A="");var B=A.match(n);if(!B)return null;var T=(""+B[0]).match(a)||["-",0,0],C=T[0],$=60*+T[1]+ +T[2];return $===0?0:C==="+"?$:-$}(y),y===null))return this;var w=Math.abs(y)<=16?60*y:y,_=this;if(j)return _.$offset=w,_.$u=y===0,_;if(y!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(w+E,r)).$offset=w,_.$x.$localOffset=E}else _=this.utc();return _};var g=c.format;c.format=function(y){var j=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,j)},c.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var f=c.toDate;c.toDate=function(y){return y==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var N=c.diff;c.diff=function(y,j,x){if(y&&this.$u===y.$u)return N.call(this,y,j,x);var w=this.local(),_=l(y).local();return N.call(w,_,j,x)}}})})(RP);var FP={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cn,function(){return function(r,n){n.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(FP);function Un(e){return e.children}var Br={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Cr={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},$m=Object.keys(Cr).map(function(e){return Cr[e]});Le.oneOfType([Le.string,Le.func]);Le.any;Le.func;Le.oneOfType([Le.arrayOf(Le.oneOf($m)),Le.objectOf(function(e,t){var r=$m.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];return Le.elementType.apply(Le,[e,t].concat(a))})]);Le.oneOfType([Le.oneOf(["overlap","no-overlap"]),Le.func]);var Bm={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function Nv(e,t){var r=dr(e,"month");return dr(r,"week",t.startOfWeek())}function jv(e,t){var r=wc(e,"month");return wc(r,"week",t.startOfWeek())}function $P(e,t){for(var r=Nv(e,t),n=jv(e,t),a=[];ji(r,n,"day");)a.push(r),r=Cn(r,1,"day");return a}function BP(e,t){var r=dr(e,t);return Ni(r,e)?r:Cn(r,1,t)}function qP(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",n=e,a=[];ji(n,t,r);)a.push(n),n=Cn(n,1,r);return a}function zP(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=dr(e,"day"),e=Io(e,Io(t)),e=mi(e,mi(t)),e=Mo(e,Mo(t)),To(e,To(t)))}function qm(e){return Io(e)===0&&mi(e)===0&&Mo(e)===0&&To(e)===0}function UP(e,t,r,n){return r==="day"&&(r="date"),Math.abs(jp[r](e,void 0,n)-jp[r](t,void 0,n))}function nf(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+dr(e,r)/Bm[r]-+dr(t,r)/Bm[r]))}var WP=Le.oneOfType([Le.string,Le.func]);function HP(e,t,r,n,a){var s=typeof n=="function"?n(r,a,e):t.call(e,r,n,a);return Co(s==null||typeof s=="string","`localizer format(..)` must return a string, null, or undefined"),s}function GP(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function af(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function VP(e,t){return nf(e,t,"minutes")+af(e,t)}function YP(e){var t=dr(e,"day");return nf(t,e,"minutes")+af(t,e)}function KP(e,t){return _h(e,t,"day")}function XP(e,t,r){var n=Ni(e,t,"minutes");return n?Wo(t,r,"minutes"):Rc(t,r,"minutes")}function ah(e,t){return UP(e,t,"day")}function JP(e){var t=e.evtA,r=t.start,n=t.end,a=t.allDay,s=e.evtB,o=s.start,l=s.end,c=s.allDay,d=+dr(r,"day")-+dr(o,"day"),p=ah(r,n),m=ah(o,l);return d||m-p||!!c-!!a||+r-+o||+n-+l}function ZP(e){var t=e.event,r=t.start,n=t.end,a=e.range,s=a.start,o=a.end,l=dr(r,"day"),c=ji(l,o,"day"),d=Sh(l,n,"minutes"),p=d?Rc(n,s,"minutes"):Wo(n,s,"minutes");return c&&p}function QP(e,t){return Ni(e,t,"day")}function ek(e,t){return qm(e)&&qm(t)}var tk=nr(function e(t){var r=this;rr(this,e),Co(typeof t.format=="function","date localizer `format(..)` must be a function"),Co(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||WP,this.formats=t.formats,this.format=function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return HP.apply(void 0,[r,t.format].concat(a))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||zP,this.inRange=t.inRange||y0,this.lt=t.lt||_h,this.lte=t.lte||ji,this.gt=t.gt||Rc,this.gte=t.gte||Wo,this.eq=t.eq||Ni,this.neq=t.neq||Sh,this.startOf=t.startOf||dr,this.endOf=t.endOf||wc,this.add=t.add||Cn,this.range=t.range||qP,this.diff=t.diff||nf,this.ceil=t.ceil||BP,this.min=t.min||v0,this.max=t.max||b0,this.minutes=t.minutes||mi,this.daySpan=t.daySpan||ah,this.firstVisibleDay=t.firstVisibleDay||Nv,this.lastVisibleDay=t.lastVisibleDay||jv,this.visibleDays=t.visibleDays||$P,this.getSlotDate=t.getSlotDate||GP,this.getTimezoneOffset=t.getTimezoneOffset||function(n){return n.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||af,this.getTotalMin=t.getTotalMin||VP,this.getMinutesFromMidnight=t.getMinutesFromMidnight||YP,this.continuesPrior=t.continuesPrior||KP,this.continuesAfter=t.continuesAfter||XP,this.sortEvents=t.sortEvents||JP,this.inEventRange=t.inEventRange||ZP,this.isSameDate=t.isSameDate||QP,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||ek,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function rk(e,t,r,n){var a=At(At({},e.formats),r);return At(At({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(o,l){return e.format(o,a[l]||l,t)}})}var nk=function(e){function t(){var r;rr(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Nr(this,t,[].concat(a)),r.navigate=function(o){r.props.onNavigate(o)},r.view=function(o){r.props.onView(o)},r}return jr(t,e),nr(t,[{key:"render",value:function(){var n=this.props,a=n.localizer.messages,s=n.label;return ue.createElement("div",{className:"rbc-toolbar"},ue.createElement("span",{className:"rbc-btn-group"},ue.createElement("button",{type:"button",onClick:this.navigate.bind(null,Br.TODAY)},a.today),ue.createElement("button",{type:"button",onClick:this.navigate.bind(null,Br.PREVIOUS)},a.previous),ue.createElement("button",{type:"button",onClick:this.navigate.bind(null,Br.NEXT)},a.next)),ue.createElement("span",{className:"rbc-toolbar-label"},s),ue.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(a)))}},{key:"viewNamesGroup",value:function(n){var a=this,s=this.props.views,o=this.props.view;if(s.length>1)return s.map(function(l){return ue.createElement("button",{type:"button",key:l,className:Ut({"rbc-active":o===l}),onClick:a.view.bind(null,l)},n[l])})}}])}(ue.Component);function kt(e,t){e&&e.apply(null,[].concat(t))}var ak={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function sk(e){return At(At({},ak),e)}function ik(e){var t=e.ref,r=e.callback;W.useEffect(function(){var n=function(s){t.current&&!t.current.contains(s.target)&&r()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[t,r])}var ok=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Sv=function(e){function t(){return rr(this,t),Nr(this,t,arguments)}return jr(t,e),nr(t,[{key:"render",value:function(){var n=this.props,a=n.style,s=n.className,o=n.event,l=n.selected,c=n.isAllDay,d=n.onSelect,p=n.onDoubleClick,m=n.onKeyPress,g=n.localizer,f=n.continuesPrior,N=n.continuesAfter,y=n.accessors,j=n.getters,x=n.children,w=n.components,_=w.event,E=w.eventWrapper,A=n.slotStart,B=n.slotEnd,T=Xn(n,ok);delete T.resizable;var C=y.title(o),$=y.tooltip(o),H=y.end(o),L=y.start(o),D=y.allDay(o),F=c||D||g.diff(L,g.ceil(H,"day"),"day")>1,U=j.eventProp(o,L,H,l),ee=ue.createElement("div",{className:"rbc-event-content",title:$||void 0},_?ue.createElement(_,{event:o,continuesPrior:f,continuesAfter:N,title:C,isAllDay:D,localizer:g,slotStart:A,slotEnd:B}):C);return ue.createElement(E,Object.assign({},this.props,{type:"date"}),ue.createElement("div",Object.assign({},T,{style:At(At({},U.style),a),className:Ut("rbc-event",s,U.className,{"rbc-selected":l,"rbc-event-allday":F,"rbc-event-continues-prior":f,"rbc-event-continues-after":N}),onClick:function(re){return d&&d(o,re)},onDoubleClick:function(re){return p&&p(o,re)},onKeyDown:function(re){return m&&m(o,re)}}),typeof x=="function"?x(ee):ee))}}])}(ue.Component);function Qc(e,t){return!e||t==null?!1:_6(e,t)}function _v(e,t){var r=e.right-e.left,n=r/t;return n}function Av(e,t,r,n){var a=_v(e,n);return r?n-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function lk(e,t){var r=t.x,n=t.y;return n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right}function ck(e,t,r,n,a){var s=-1,o=-1,l=n-1,c=_v(t,n),d=Av(t,r.x,a,n),p=t.top<r.y&&t.bottom>r.y,m=t.top<e.y&&t.bottom>e.y,g=e.y>t.bottom,f=t.top>e.y,N=r.top<t.top&&r.bottom>t.bottom;return N&&(s=0,o=l),p&&(f?(s=0,o=d):g&&(s=d,o=l)),m&&(s=o=a?l-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),p?d<s?s=d:o=d:e.y<r.y?o=l:s=0),{startIdx:s,endIdx:o}}function uk(e){var t=e.target,r=e.offset,n=e.container,a=e.box,s=fs(t),o=s.top,l=s.left,c=s.width,d=s.height,p=fs(n),m=p.top,g=p.left,f=p.width,N=p.height,y=fs(a),j=y.width,x=y.height,w=m+N,_=g+f,E=o+x,A=l+j,B=r.x,T=r.y,C=E>w?o-x-T:o+T+d,$=A>_?l+B-j+c:l+B;return{topOffset:C,leftOffset:$}}function dk(e){var t=e.containerRef,r=e.accessors,n=e.getters,a=e.selected,s=e.components,o=e.localizer,l=e.position,c=e.show,d=e.events,p=e.slotStart,m=e.slotEnd,g=e.onSelect,f=e.onDoubleClick,N=e.onKeyPress,y=e.handleDragStart,j=e.popperRef,x=e.target,w=e.offset;ik({ref:j,callback:c}),W.useLayoutEffect(function(){var A=uk({target:x,offset:w,container:t.current,box:j.current}),B=A.topOffset,T=A.leftOffset;j.current.style.top="".concat(B,"px"),j.current.style.left="".concat(T,"px")},[w.x,w.y,x]);var _=l.width,E={minWidth:_+_/2};return ue.createElement("div",{style:E,className:"rbc-overlay",ref:j},ue.createElement("div",{className:"rbc-overlay-header"},o.format(p,"dayHeaderFormat")),d.map(function(A,B){return ue.createElement(Sv,{key:B,type:"popup",localizer:o,event:A,getters:n,onSelect:g,accessors:r,components:s,onDoubleClick:f,onKeyPress:N,continuesPrior:o.lt(r.end(A),p,"day"),continuesAfter:o.gte(r.start(A),m,"day"),slotStart:p,slotEnd:m,selected:Qc(A,a),draggable:!0,onDragStart:function(){return y(A)},onDragEnd:function(){return c()}})}))}var Ev=ue.forwardRef(function(e,t){return ue.createElement(dk,Object.assign({},e,{popperRef:t}))});Ev.propTypes={accessors:Le.object.isRequired,getters:Le.object.isRequired,selected:Le.object,components:Le.object.isRequired,localizer:Le.object.isRequired,position:Le.object.isRequired,show:Le.func.isRequired,events:Le.array.isRequired,slotStart:Le.instanceOf(Date).isRequired,slotEnd:Le.instanceOf(Date),onSelect:Le.func,onDoubleClick:Le.func,onKeyPress:Le.func,handleDragStart:Le.func,style:Le.object,offset:Le.shape({x:Le.number,y:Le.number})};function hk(e){var t=e.containerRef,r=e.popupOffset,n=r===void 0?5:r,a=e.overlay,s=e.accessors,o=e.localizer,l=e.components,c=e.getters,d=e.selected,p=e.handleSelectEvent,m=e.handleDoubleClickEvent,g=e.handleKeyPressEvent,f=e.handleDragStart,N=e.onHide,y=e.overlayDisplay,j=W.useRef(null);if(!a.position)return null;var x=n;isNaN(n)||(x={x:n,y:n});var w=a.position,_=a.events,E=a.date,A=a.end;return ue.createElement(Bh,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:N,target:a.target},function(B){var T=B.props;return ue.createElement(Ev,Object.assign({},T,{containerRef:t,ref:j,target:a.target,offset:x,accessors:s,getters:c,selected:d,components:l,localizer:o,position:w,show:y,events:_,slotStart:E,slotEnd:A,onSelect:p,onDoubleClick:m,onKeyPress:g,handleDragStart:f}))})}var sf=ue.forwardRef(function(e,t){return ue.createElement(hk,Object.assign({},e,{containerRef:t}))});sf.propTypes={popupOffset:Le.oneOfType([Le.number,Le.shape({x:Le.number,y:Le.number})]),overlay:Le.shape({position:Le.object,events:Le.array,date:Le.instanceOf(Date),end:Le.instanceOf(Date)}),accessors:Le.object.isRequired,localizer:Le.object.isRequired,components:Le.object.isRequired,getters:Le.object.isRequired,selected:Le.object,handleSelectEvent:Le.func,handleDoubleClickEvent:Le.func,handleKeyPressEvent:Le.func,handleDragStart:Le.func,onHide:Le.func,overlayDisplay:Le.func};function yr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return xo(r,e,t,{passive:!1})}function fk(e,t,r){return!e||Ro(e,document.elementFromPoint(t,r))}function pk(e,t){var r=t.clientX,n=t.clientY,a=document.elementFromPoint(r,n);return Q0(a,".rbc-event",e)}function mk(e,t){var r=t.clientX,n=t.clientY,a=document.elementFromPoint(r,n);return Q0(a,".rbc-show-more",e)}function Cc(e,t){return!!pk(e,t)}function gk(e,t){return!!mk(e,t)}function go(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var zm=5,vk=250,Cv=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.global,a=n===void 0?!1:n,s=r.longPressThreshold,o=s===void 0?250:s,l=r.validContainers,c=l===void 0?[]:l;rr(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=yr("touchmove",function(){},window),this._removeKeyDownListener=yr("keydown",this._keyListener),this._removeKeyUpListener=yr("keyup",this._keyListener),this._removeDropFromOutsideListener=yr("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=yr("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return nr(e,[{key:"on",value:function(r,n){var a=this._listeners[r]||(this._listeners[r]=[]);return a.push(n),{remove:function(){var o=a.indexOf(n);o!==-1&&a.splice(o,1)}}}},{key:"emit",value:function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];var o,l=this._listeners[r]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,a))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var n=this._selectRect;return!n||!this.selecting?!1:Um(n,Ns(r))}},{key:"filter",value:function(r){var n=this._selectRect;return!n||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,n){var a=this,s=null,o=null,l=null,c=function(g){s=setTimeout(function(){p(),r(g)},a.longPressThreshold),o=yr("touchmove",function(){return p()}),l=yr("touchend",function(){return p()})},d=yr("touchstart",c),p=function(){s&&clearTimeout(s),o&&o(),l&&l(),s=null,o=null,l=null};return n&&c(n),function(){p(),d()}}},{key:"_addInitialEventListener",value:function(){var r=this,n=yr("mousedown",function(s){r._removeInitialEventListener(),r._handleInitialEvent(s),r._removeInitialEventListener=yr("mousedown",r._handleInitialEvent)}),a=yr("touchstart",function(s){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,s)});this._removeInitialEventListener=function(){n(),a()}}},{key:"_dropFromOutsideListener",value:function(r){var n=go(r),a=n.pageX,s=n.pageY,o=n.clientX,l=n.clientY;this.emit("dropFromOutside",{x:a,y:s,clientX:o,clientY:l}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var n=go(r),a=n.pageX,s=n.pageY,o=n.clientX,l=n.clientY;this.emit("dragOverFromOutside",{x:a,y:s,clientX:o,clientY:l}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var n=go(r),a=n.clientX,s=n.clientY,o=n.pageX,l=n.pageY,c=this.container(),d,p;if(!(r.which===3||r.button===2||!fk(c,a,s))){if(!this.globalMouse&&c&&!Ro(c,r.target)){var m=bk(0),g=m.top,f=m.left,N=m.bottom,y=m.right;if(p=Ns(c),d=Um({top:p.top-g,left:p.left-f,bottom:p.bottom+N,right:p.right+y},{top:l,left:o}),!d)return}var j=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:o,y:l,clientX:a,clientY:s});if(j!==!1)switch(r.type){case"mousedown":this._removeEndListener=yr("mouseup",this._handleTerminatingEvent),this._onEscListener=yr("keydown",this._handleTerminatingEvent),this._removeMoveListener=yr("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=yr("touchend",this._handleTerminatingEvent),this._removeMoveListener=yr("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var n=r.target,a=this.validContainers;return!a||!a.length||!n?!0:a.some(function(s){return!!n.closest(s)})}},{key:"_handleTerminatingEvent",value:function(r){var n=this.selecting,a=this._selectRect;if(!n&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var s=!this.container||Ro(this.container(),r.target),o=this._isWithinValidContainer(r);return r.key==="Escape"||!o?this.emit("reset"):!n&&s?this._handleClickEvent(r):n?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var n=go(r),a=n.pageX,s=n.pageY,o=n.clientX,l=n.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<vk?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:s,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:a,y:s,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var n=this._initialEventData,a=n.x,s=n.y,o=go(r),l=o.pageX,c=o.pageY,d=Math.abs(a-l),p=Math.abs(s-c),m=Math.min(l,a),g=Math.min(c,s),f=this.selecting,N=this.isClick(l,c);N&&!f&&!(d||p)||(!f&&!N&&this.emit("selectStart",this._initialEventData),N||(this.selecting=!0,this._selectRect={top:g,left:m,x:l,y:c,right:m+d,bottom:g+p},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,n){var a=this._initialEventData,s=a.x,o=a.y,l=a.isTouch;return!l&&Math.abs(r-s)<=zm&&Math.abs(n-o)<=zm}}])}();function bk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return dt(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function Um(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Ns(e),a=n.top,s=n.left,o=n.right,l=o===void 0?s:o,c=n.bottom,d=c===void 0?a:c,p=Ns(t),m=p.top,g=p.left,f=p.right,N=f===void 0?g:f,y=p.bottom,j=y===void 0?m:y;return!(d-r<m||a+r>j||l-r<g||s+r>N)}function Ns(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+Wm("left"),n=t.top+Wm("top");return{top:n,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+n}}function Wm(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var yk=function(e){function t(r,n){var a;return rr(this,t),a=Nr(this,t,[r,n]),a.state={selecting:!1},a.containerRef=W.createRef(),a}return jr(t,e),nr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(n){!n.selectable&&this.props.selectable&&this._selectable(),n.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var n=this.props,a=n.range,s=n.getNow,o=n.getters,l=n.date,c=n.components.dateCellWrapper,d=n.localizer,p=this.state,m=p.selecting,g=p.startIdx,f=p.endIdx,N=s();return ue.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},a.map(function(y,j){var x=m&&j>=g&&j<=f,w=o.dayProp(y),_=w.className,E=w.style;return ue.createElement(c,{key:j,value:y,range:a},ue.createElement("div",{style:E,className:Ut("rbc-day-bg",_,x&&"rbc-selected-cell",d.isSameDate(y,N)&&"rbc-today",l&&d.neq(l,y,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var n=this,a=this.containerRef.current,s=this._selector=new Cv(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(c,d){if(!Cc(a,c)&&!gk(a,c)){var p=Ns(a),m=n.props,g=m.range,f=m.rtl;if(lk(p,c)){var N=Av(p,c.x,f,g.length);n._selectSlot({startIdx:N,endIdx:N,action:d,box:c})}}n._initial={},n.setState({selecting:!1})};s.on("selecting",function(l){var c=n.props,d=c.range,p=c.rtl,m=-1,g=-1;if(n.state.selecting||(kt(n.props.onSelectStart,[l]),n._initial={x:l.x,y:l.y}),s.isSelected(a)){var f=Ns(a),N=ck(n._initial,f,l,d.length,p);m=N.startIdx,g=N.endIdx}n.setState({selecting:!0,startIdx:m,endIdx:g})}),s.on("beforeSelect",function(l){if(n.props.selectable==="ignoreEvents")return!Cc(n.containerRef.current,l)}),s.on("click",function(l){return o(l,"click")}),s.on("doubleClick",function(l){return o(l,"doubleClick")}),s.on("select",function(l){n._selectSlot(At(At({},n.state),{},{action:"select",bounds:l})),n._initial={},n.setState({selecting:!1}),kt(n.props.onSelectEnd,[n.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(n){var a=n.endIdx,s=n.startIdx,o=n.action,l=n.bounds,c=n.box;a!==-1&&s!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:s,end:a,action:o,bounds:l,box:c,resourceId:this.props.resourceId})}}])}(ue.Component),on={propTypes:{slotMetrics:Le.object.isRequired,selected:Le.object,isAllDay:Le.bool,accessors:Le.object.isRequired,localizer:Le.object.isRequired,components:Le.object.isRequired,getters:Le.object.isRequired,onSelect:Le.func,onDoubleClick:Le.func,onKeyPress:Le.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var n=t.selected;t.isAllDay;var a=t.accessors,s=t.getters,o=t.onSelect,l=t.onDoubleClick,c=t.onKeyPress,d=t.localizer,p=t.slotMetrics,m=t.components,g=t.resizable,f=p.continuesPrior(r),N=p.continuesAfter(r);return ue.createElement(Sv,{event:r,getters:s,localizer:d,accessors:a,components:m,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:f,continuesAfter:N,slotStart:p.first,slotEnd:p.last,selected:Qc(r,n),resizable:g})},renderSpan:function(t,r,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",s=Math.abs(r)/t*100+"%";return ue.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:s,flexBasis:s,maxWidth:s}},a)}},Lv=function(e){function t(){return rr(this,t),Nr(this,t,arguments)}return jr(t,e),nr(t,[{key:"render",value:function(){var n=this,a=this.props,s=a.segments,o=a.slotMetrics.slots,l=a.className,c=1;return ue.createElement("div",{className:Ut(l,"rbc-row")},s.reduce(function(d,p,m){var g=p.event,f=p.left,N=p.right,y=p.span,j="_lvl_"+m,x=f-c,w=on.renderEvent(n.props,g);return x&&d.push(on.renderSpan(o,x,"".concat(j,"_gap"))),d.push(on.renderSpan(o,y,j,w)),c=N+1,d},[]))}}])}(ue.Component);Lv.defaultProps=At({},on.defaultProps);function Dv(e){var t=e.dateRange,r=e.unit,n=r===void 0?"day":r,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,n)}}function xk(e,t,r,n){var a=Dv({dateRange:t,localizer:n}),s=a.first,o=a.last,l=n.diff(s,o,"day"),c=n.max(n.startOf(r.start(e),"day"),s),d=n.min(n.ceil(r.end(e),"day"),o),p=SA(t,function(g){return n.isSameDate(g,c)}),m=n.diff(c,d,"day");return m=Math.min(m,l),m=Math.max(m-n.segmentOffset,1),{event:e,span:m,left:p+1,right:Math.max(p+m,1)}}function sh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,n,a,s=[],o=[];for(r=0;r<e.length;r++){for(a=e[r],n=0;n<s.length&&wk(a,s[n]);n++);n>=t?o.push(a):(s[n]||(s[n]=[])).push(a)}for(r=0;r<s.length;r++)s[r].sort(function(l,c){return l.left-c.left});return{levels:s,extra:o}}function Bo(e,t,r,n,a){var s={start:n.start(e),end:n.end(e)},o={start:t,end:r};return a.inEventRange({event:s,range:o})}function wk(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function Nk(e,t,r){var n=cc(e),a=[],s=[];n.forEach(function(c){var d=t.start(c),p=t.end(c);r.daySpan(d,p)>1?a.push(c):s.push(c)});var o=a.sort(function(c,d){return ih(c,d,t,r)}),l=s.sort(function(c,d){return ih(c,d,t,r)});return[].concat(cc(o),cc(l))}function ih(e,t,r,n){var a={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},s={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return n.sortEvents({evtA:a,evtB:s})}var oh=function(t,r){return t.left<=r&&t.right>=r},yd=function(t,r){return t.filter(function(n){return oh(n,r)}).map(function(n){return n.event})},Pv=function(e){function t(){return rr(this,t),Nr(this,t,arguments)}return jr(t,e),nr(t,[{key:"render",value:function(){for(var n=this.props,a=n.segments,s=n.slotMetrics.slots,o=sh(a).levels[0],l=1,c=1,d=[];l<=s;){var p="_lvl_"+l,m=o.filter(function(E){return oh(E,l)})[0]||{},g=m.event,f=m.left,N=m.right,y=m.span;if(!g){var j=this.getHiddenEventsForSlot(a,l);if(j.length>0){var x=l-c;x&&d.push(on.renderSpan(s,x,p+"_gap")),d.push(on.renderSpan(s,1,p,this.renderShowMore(a,l))),c=l=l+1;continue}l++;continue}var w=Math.max(0,f-c);if(this.canRenderSlotEvent(f,y)){var _=on.renderEvent(this.props,g);w&&d.push(on.renderSpan(s,w,p+"_gap")),d.push(on.renderSpan(s,y,p,_)),c=l=N+1}else w&&d.push(on.renderSpan(s,w,p+"_gap")),d.push(on.renderSpan(s,1,p,this.renderShowMore(a,l))),c=l=l+1}return ue.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(n,a){var s=yd(n,a),o=sh(n).levels[0],l=o.filter(function(c){return oh(c,a)}).map(function(c){return c.event});return s.filter(function(c){return!l.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(n,a){var s=this.props.segments;return IA(n,n+a).every(function(o){var l=yd(s,o).length;return l===1})}},{key:"renderShowMore",value:function(n,a){var s=this,o=this.props,l=o.localizer,c=o.slotMetrics,d=o.components,p=c.getEventsForSlot(a),m=yd(n,a),g=m.length;if(d!=null&&d.showMore){var f=d.showMore,N=c.getDateForSlot(a-1);return g?ue.createElement(f,{localizer:l,slotDate:N,slot:a,count:g,events:p,remainingEvents:m}):!1}return g?ue.createElement("button",{type:"button",key:"sm_"+a,className:Ut("rbc-button-link","rbc-show-more"),onClick:function(j){return s.showMore(a,j)}},l.messages.showMore(g,m,p)):!1}},{key:"showMore",value:function(n,a){a.preventDefault(),a.stopPropagation(),this.props.onShowMore(n,a.target)}}])}(ue.Component);Pv.defaultProps=At({},on.defaultProps);var jk=function(t){var r=t.children;return ue.createElement("div",{className:"rbc-row-content-scroll-container"},r)},Sk=function(t,r){return t.left<=r&&t.right>=r},_k=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function kv(){return av(function(e){for(var t=e.range,r=e.events,n=e.maxRows,a=e.minRows,s=e.accessors,o=e.localizer,l=Dv({dateRange:t,localizer:o}),c=l.first,d=l.last,p=r.map(function(y){return xk(y,t,s,o)}),m=sh(p,Math.max(n-1,1)),g=m.levels,f=m.extra,N=f.length>0?a-1:a;g.length<N;)g.push([]);return{first:c,last:d,levels:g,extra:f,range:t,slots:t.length,clone:function(j){var x=kv();return x(At(At({},e),j))},getDateForSlot:function(j){return t[j]},getSlotForDate:function(j){return t.find(function(x){return o.isSameDate(x,j)})},getEventsForSlot:function(j){return p.filter(function(x){return Sk(x,j)}).map(function(x){return x.event})},continuesPrior:function(j){return o.continuesPrior(s.start(j),c)},continuesAfter:function(j){var x=s.start(j),w=s.end(j);return o.continuesAfter(x,w,d)}}},_k)}var qo=function(e){function t(){var r;rr(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Nr(this,t,[].concat(a)),r.handleSelectSlot=function(o){var l=r.props,c=l.range,d=l.onSelectSlot;d(c.slice(o.start,o.end+1),o)},r.handleShowMore=function(o,l){var c=r.props,d=c.range,p=c.onShowMore,m=r.slotMetrics(r.props),g=S5(r.containerRef.current,".rbc-row-bg")[0],f;g&&(f=g.children[o-1]);var N=m.getEventsForSlot(o);p(N,d[o-1],f,o,l)},r.getContainer=function(){var o=r.props.container;return o?o():r.containerRef.current},r.renderHeadingCell=function(o,l){var c=r.props,d=c.renderHeader,p=c.getNow,m=c.localizer;return d({date:o,key:"header_".concat(l),className:Ut("rbc-date-cell",m.isSameDate(o,p())&&"rbc-now")})},r.renderDummy=function(){var o=r.props,l=o.className,c=o.range,d=o.renderHeader,p=o.showAllEvents;return ue.createElement("div",{className:l,ref:r.containerRef},ue.createElement("div",{className:Ut("rbc-row-content",p&&"rbc-row-content-scrollable")},d&&ue.createElement("div",{className:"rbc-row",ref:r.headingRowRef},c.map(r.renderHeadingCell)),ue.createElement("div",{className:"rbc-row",ref:r.eventRowRef},ue.createElement("div",{className:"rbc-row-segment"},ue.createElement("div",{className:"rbc-event"},ue.createElement("div",{className:"rbc-event-content"}," "))))))},r.containerRef=W.createRef(),r.headingRowRef=W.createRef(),r.eventRowRef=W.createRef(),r.slotMetrics=kv(),r}return jr(t,e),nr(t,[{key:"getRowLimit",value:function(){var n,a=gd(this.eventRowRef.current),s=(n=this.headingRowRef)!==null&&n!==void 0&&n.current?gd(this.headingRowRef.current):0,o=gd(this.containerRef.current)-s;return Math.max(Math.floor(o/a),1)}},{key:"render",value:function(){var n=this.props,a=n.date,s=n.rtl,o=n.range,l=n.className,c=n.selected,d=n.selectable,p=n.renderForMeasure,m=n.accessors,g=n.getters,f=n.components,N=n.getNow,y=n.renderHeader,j=n.onSelect,x=n.localizer,w=n.onSelectStart,_=n.onSelectEnd,E=n.onDoubleClick,A=n.onKeyPress,B=n.resourceId,T=n.longPressThreshold,C=n.isAllDay,$=n.resizable,H=n.showAllEvents;if(p)return this.renderDummy();var L=this.slotMetrics(this.props),D=L.levels,F=L.extra,U=H?jk:Un,ee=f.weekWrapper,te={selected:c,accessors:m,getters:g,localizer:x,components:f,onSelect:j,onDoubleClick:E,onKeyPress:A,resourceId:B,slotMetrics:L,resizable:$};return ue.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},ue.createElement(yk,{localizer:x,date:a,getNow:N,rtl:s,range:o,selectable:d,container:this.getContainer,getters:g,onSelectStart:w,onSelectEnd:_,onSelectSlot:this.handleSelectSlot,components:f,longPressThreshold:T,resourceId:B}),ue.createElement("div",{className:Ut("rbc-row-content",H&&"rbc-row-content-scrollable"),role:"row"},y&&ue.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),ue.createElement(U,null,ue.createElement(ee,Object.assign({isAllDay:C},te,{rtl:this.props.rtl}),D.map(function(re,Q){return ue.createElement(Lv,Object.assign({key:Q,segments:re},te))}),!!F.length&&ue.createElement(Pv,Object.assign({segments:F,onShowMore:this.handleShowMore},te))))))}}])}(ue.Component);qo.defaultProps={minRows:0,maxRows:1/0};var of=function(t){var r=t.label;return ue.createElement("span",{role:"columnheader","aria-sort":"none"},r)},Ak=function(t){var r=t.label,n=t.drilldownView,a=t.onDrillDown;return n?ue.createElement("button",{type:"button",className:"rbc-button-link",onClick:a},r):ue.createElement("span",null,r)},Ek=["date","className"],Ck=function(t,r,n,a,s){return t.filter(function(o){return Bo(o,r,n,a,s)})},eu=function(e){function t(){var r;rr(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Nr(this,t,[].concat(a)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(o,l){var c=r.props,d=c.events,p=c.components,m=c.selectable,g=c.getNow,f=c.selected,N=c.date,y=c.localizer,j=c.longPressThreshold,x=c.accessors,w=c.getters,_=c.showAllEvents,E=r.state,A=E.needLimitMeasure,B=E.rowLimit,T=Ck(cc(d),o[0],o[o.length-1],x,y),C=Nk(T,x,y);return ue.createElement(qo,{key:l,ref:l===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:g,date:N,range:o,events:C,maxRows:_?1/0:B,selected:f,selectable:m,components:p,accessors:x,getters:w,localizer:y,renderHeader:r.readerDateHeading,renderForMeasure:A,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:j,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:_})},r.readerDateHeading=function(o){var l=o.date,c=o.className,d=Xn(o,Ek),p=r.props,m=p.date,g=p.getDrilldownView,f=p.localizer,N=f.neq(m,l,"month"),y=f.isSameDate(l,m),j=g(l),x=f.format(l,"dateFormat"),w=r.props.components.dateHeader||Ak;return ue.createElement("div",Object.assign({},d,{className:Ut(c,N&&"rbc-off-range",y&&"rbc-current"),role:"cell"}),ue.createElement(w,{label:x,date:l,drilldownView:j,isOffRange:N,onDrillDown:function(E){return r.handleHeadingClick(l,j,E)}}))},r.handleSelectSlot=function(o,l){r._pendingSelection=r._pendingSelection.concat(o),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(l)})},r.handleHeadingClick=function(o,l,c){c.preventDefault(),r.clearSelection(),kt(r.props.onDrillDown,[o,l])},r.handleSelectEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];kt(r.props.onSelectEvent,l)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];kt(r.props.onDoubleClickEvent,l)},r.handleKeyPressEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];kt(r.props.onKeyPressEvent,l)},r.handleShowMore=function(o,l,c,d,p){var m=r.props,g=m.popup,f=m.onDrillDown,N=m.onShowMore,y=m.getDrilldownView,j=m.doShowMoreDrillDown;if(r.clearSelection(),g){var x=k0(c,r.containerRef.current);r.setState({overlay:{date:l,events:o,position:x,target:p}})}else j&&kt(f,[l,y(l)||Cr.DAY]);kt(N,[o,l,d])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=W.createRef(),r.slotRowRef=W.createRef(),r._bgRows=[],r._pendingSelection=[],r}return jr(t,e),nr(t,[{key:"componentDidMount",value:function(){var n=this,a;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){a||O0(function(){a=!1,n.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var n=this.props,a=n.date,s=n.localizer,o=n.className,l=s.visibleDays(a,s),c=l5(l,7);return this._weekCount=c.length,ue.createElement("div",{className:Ut("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},ue.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(n){var a=this.props,s=a.localizer,o=a.components,l=n[0],c=n[n.length-1],d=o.header||of;return s.range(l,c,"day").map(function(p,m){return ue.createElement("div",{key:"header_"+m,className:"rbc-header"},ue.createElement(d,{date:p,localizer:s,label:s.format(p,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var n,a,s=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,p=l.components,m=l.getters,g=l.selected,f=l.popupOffset,N=l.handleDragStart,y=function(){return s.setState({overlay:null})};return ue.createElement(sf,{overlay:o,accessors:c,localizer:d,components:p,getters:m,selected:g,popupOffset:f,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:N,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(n){var a=this._pendingSelection.slice();this._pendingSelection=[],a.sort(function(l,c){return+l-+c});var s=new Date(a[0]),o=new Date(a[a.length-1]);o.setDate(a[a.length-1].getDate()+1),kt(this.props.onSelectSlot,{slots:a,start:s,end:o,action:n.action,bounds:n.bounds,box:n.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(n,a){var s=n.date,o=n.localizer;return{date:s,needLimitMeasure:o.neq(s,a.date,"month")}}}])}(ue.Component);eu.range=function(e,t){var r=t.localizer,n=r.firstVisibleDay(e,r),a=r.lastVisibleDay(e,r);return{start:n,end:a}};eu.navigate=function(e,t,r){var n=r.localizer;switch(t){case Br.PREVIOUS:return n.add(e,-1,"month");case Br.NEXT:return n.add(e,1,"month");default:return e}};eu.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var Hm=function(t){var r=t.min,n=t.max,a=t.step,s=t.slots,o=t.localizer;return"".concat(+o.startOf(r,"minutes"))+"".concat(+o.startOf(n,"minutes"))+"".concat(a,"-").concat(s)};function lf(e){for(var t=e.min,r=e.max,n=e.step,a=e.timeslots,s=e.localizer,o=Hm({step:n,localizer:s}),l=1+s.getTotalMin(t,r),c=s.getMinutesFromMidnight(t),d=Math.ceil((l-1)/(n*a)),p=d*a,m=new Array(d),g=new Array(p),f=0;f<d;f++){m[f]=new Array(a);for(var N=0;N<a;N++){var y=f*a+N,j=y*n;g[y]=m[f][N]=s.getSlotDate(t,c,j)}}var x=g.length*n;g.push(s.getSlotDate(t,c,x));function w(_){var E=s.diff(t,_,"minutes")+s.getDstOffset(t,_);return Math.min(E,l)}return{groups:m,update:function(E){return Hm(E)!==o?lf(E):this},dateIsInGroup:function(E,A){var B=m[A+1];return s.inRange(E,m[A][0],B?B[0]:r,"minutes")},nextSlot:function(E){var A=g[Math.min(g.findIndex(function(B){return B===E||s.eq(B,E)})+1,g.length-1)];return s.eq(A,E)&&(A=s.add(E,n,"minutes")),A},closestSlotToPosition:function(E){var A=Math.min(g.length-1,Math.max(0,Math.floor(E*p)));return g[A]},closestSlotFromPoint:function(E,A){var B=Math.abs(A.top-A.bottom);return this.closestSlotToPosition((E.y-A.top)/B)},closestSlotFromDate:function(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(s.lt(E,t,"minutes"))return g[0];if(s.gt(E,r,"minutes"))return g[g.length-1];var B=s.diff(t,E,"minutes");return g[(B-B%n)/n+A]},startsBeforeDay:function(E){return s.lt(E,t,"day")},startsAfterDay:function(E){return s.gt(E,r,"day")},startsBefore:function(E){return s.lt(s.merge(t,E),t,"minutes")},startsAfter:function(E){return s.gt(s.merge(r,E),r,"minutes")},getRange:function(E,A,B,T){B||(E=s.min(r,s.max(t,E))),T||(A=s.min(r,s.max(t,A)));var C=w(E),$=w(A),H=$>n*p&&!s.eq(r,A)?(C-n)/(n*p)*100:C/(n*p)*100;return{top:H,height:$/(n*p)*100-H,start:w(E),startDate:E,end:w(A),endDate:A}},getCurrentTimePosition:function(E){var A=w(E),B=A/(n*p)*100;return B}}}var Lk=function(){function e(t,r){var n=r.accessors,a=r.slotMetrics;rr(this,e);var s=a.getRange(n.start(t),n.end(t)),o=s.start,l=s.startDate,c=s.end,d=s.endDate,p=s.top,m=s.height;this.start=o,this.end=c,this.startMs=+l,this.endMs=+d,this.top=p,this.height=m,this.data=t}return nr(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(a,s){return Math.max(a,s.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var n=100-this.container._width;return n/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,n=Math.min(100,this._width*1.7);if(this.rows)return n;if(this.leaves)return this.leaves.length>0?n:r;var a=this.row.leaves,s=a.indexOf(this);return s===a.length-1?r:n}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,n=r.leaves,a=r.xOffset,s=r._width,o=n.indexOf(this)+1;return a+o*s}}])}();function Dk(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function Pk(e){for(var t=rC(e,["startMs",function(l){return-l.endMs}]),r=[];t.length>0;){var n=t.shift();r.push(n);for(var a=0;a<t.length;a++){var s=t[a];if(!(n.endMs>s.startMs)){if(a>0){var o=t.splice(a,1)[0];r.push(o)}break}}}return r}function Ov(e){for(var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,s=t.map(function(p){return new Lk(p,{slotMetrics:n,accessors:a})}),o=Pk(s),l=[],c=function(){var m=o[d],g=l.find(function(y){return y.end>m.start||Math.abs(m.start-y.start)<r});if(!g)return m.rows=[],l.push(m),1;m.container=g;for(var f=null,N=g.rows.length-1;!f&&N>=0;N--)Dk(g.rows[N],m,r)&&(f=g.rows[N]);f?(f.leaves.push(m),m.row=f):(m.leaves=[],g.rows.push(m))},d=0;d<o.length;d++)c();return o.map(function(p){return{event:p.data,style:{top:p.top,height:p.height,width:p.width,xOffset:Math.max(0,p.xOffset)}}})}function Tv(e,t,r){for(var n=0;n<e.friends.length;++n)if(!(r.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,r.push(e.friends[n]);var a=Tv(e.friends[n],t,r);t=t>a?t:a}return t}function kk(e){var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,s=Ov({events:t,minimumStartDifference:r,slotMetrics:n,accessors:a});s.sort(function(ee,te){return ee=ee.style,te=te.style,ee.top!==te.top?ee.top>te.top?1:-1:ee.height!==te.height?ee.top+ee.height<te.top+te.height?1:-1:0});for(var o=0;o<s.length;++o)s[o].friends=[],delete s[o].style.left,delete s[o].style.left,delete s[o].idx,delete s[o].size;for(var l=0;l<s.length-1;++l)for(var c=s[l],d=c.style.top,p=c.style.top+c.style.height,m=l+1;m<s.length;++m){var g=s[m],f=g.style.top,N=g.style.top+g.style.height;(f>=d&&N<=p||N>d&&N<=p||f>=d&&f<p)&&(c.friends.push(g),g.friends.push(c))}for(var y=0;y<s.length;++y){for(var j=s[y],x=[],w=0;w<100;++w)x.push(1);for(var _=0;_<j.friends.length;++_)j.friends[_].idx!==void 0&&(x[j.friends[_].idx]=0);j.idx=x.indexOf(1)}for(var E=0;E<s.length;++E){var A=0;if(!s[E].size){var B=[],T=Tv(s[E],0,B);A=100/(T+1),s[E].size=A;for(var C=0;C<B.length;++C)B[C].size=A}}for(var $=0;$<s.length;++$){var H=s[$];H.style.left=H.idx*H.size;for(var L=0,D=0;D<H.friends.length;++D){var F=H.friends[D].idx;L=L>F?L:F}L<=H.idx&&(H.size=100-H.idx*H.size);var U=H.idx===0?0:3;H.style.width="calc(".concat(H.size,"% - ").concat(U,"px)"),H.style.height="calc(".concat(H.style.height,"% - 2px)"),H.style.xOffset="calc(".concat(H.style.left,"% + ").concat(U,"px)")}return s}var Gm={overlap:Ov,"no-overlap":kk};function Ok(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Tk(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in Gm&&(r=Gm[t]),Ok(r)?r.apply(this,arguments):[]}var Mv=function(e){function t(){return rr(this,t),Nr(this,t,arguments)}return jr(t,e),nr(t,[{key:"render",value:function(){var n=this.props,a=n.renderSlot,s=n.resource,o=n.group,l=n.getters,c=n.components,d=c===void 0?{}:c,p=d.timeSlotWrapper,m=p===void 0?Un:p,g=l?l.slotGroupProp(o):{};return ue.createElement("div",Object.assign({className:"rbc-timeslot-group"},g),o.map(function(f,N){var y=l?l.slotProp(f,s):{};return ue.createElement(m,{key:N,value:f,resource:s},ue.createElement("div",Object.assign({},y,{className:Ut("rbc-time-slot",y.className)}),a&&a(f,N)))}))}}])}(W.Component);function tc(e){return typeof e=="string"?e:e+"%"}function Mk(e){var t=e.style,r=e.className,n=e.event,a=e.accessors,s=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,p=e.getters,m=e.onClick,g=e.onDoubleClick,f=e.isBackgroundEvent,N=e.onKeyPress,y=e.components,j=y.event,x=y.eventWrapper,w=a.title(n),_=a.tooltip(n),E=a.end(n),A=a.start(n),B=p.eventProp(n,A,E,o),T=[ue.createElement("div",{key:"1",className:"rbc-event-label"},l),ue.createElement("div",{key:"2",className:"rbc-event-content"},j?ue.createElement(j,{event:n,title:w}):w)],C=t.height,$=t.top,H=t.width,L=t.xOffset,D=At(At({},B.style),{},us({top:tc($),height:tc(C),width:tc(H)},s?"right":"left",tc(L)));return ue.createElement(x,Object.assign({type:"time"},e),ue.createElement("div",{role:"button",tabIndex:0,onClick:m,onDoubleClick:g,style:D,onKeyDown:N,title:_?(typeof l=="string"?l+": ":"")+_:void 0,className:Ut(f?"rbc-background-event":"rbc-event",r,B.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},T))}var Ik=function(t){var r=t.children,n=t.className,a=t.style,s=t.innerRef;return ue.createElement("div",{className:n,style:a,ref:s},r)},Rk=ue.forwardRef(function(e,t){return ue.createElement(Ik,Object.assign({},e,{innerRef:t}))}),Fk=["dayProp"],$k=["eventContainerWrapper","timeIndicatorWrapper"],Iv=function(e){function t(){var r;rr(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Nr(this,t,[].concat(a)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(o){var l=o.events,c=o.isBackgroundEvent,d=r.props,p=d.rtl,m=d.selected,g=d.accessors,f=d.localizer,N=d.getters,y=d.components,j=d.step,x=d.timeslots,w=d.dayLayoutAlgorithm,_=d.resizable,E=r,A=E.slotMetrics,B=f.messages,T=Tk({events:l,accessors:g,slotMetrics:A,minimumStartDifference:Math.ceil(j*x/2),dayLayoutAlgorithm:w});return T.map(function(C,$){var H,L=C.event,D=C.style,F=g.end(L),U=g.start(L),ee=(H=g.eventId(L))!==null&&H!==void 0?H:"evt_"+$,te="eventTimeRangeFormat",re,Q=A.startsBeforeDay(U),Y=A.startsAfterDay(F);Q?te="eventTimeRangeEndFormat":Y&&(te="eventTimeRangeStartFormat"),Q&&Y?re=B.allDay:re=f.format({start:U,end:F},te);var X=Q||A.startsBefore(U),ce=Y||A.startsAfter(F);return ue.createElement(Mk,{style:D,event:L,label:re,key:ee,getters:N,rtl:p,components:y,continuesPrior:X,continuesAfter:ce,accessors:g,resource:r.props.resource,selected:Qc(L,m),onClick:function(q){return r._select(At(At(At({},L),r.props.resource&&{sourceResource:r.props.resource}),c&&{isBackgroundEvent:!0}),q)},onDoubleClick:function(q){return r._doubleClick(L,q)},isBackgroundEvent:c,onKeyPress:function(q){return r._keyPress(L,q)},resizable:_})})},r._selectable=function(){var o=r.containerRef.current,l=r.props,c=l.longPressThreshold,d=l.localizer,p=r._selector=new Cv(function(){return o},{longPressThreshold:c}),m=function(y){var j=r.props.onSelecting,x=r.state||{},w=g(y),_=w.startDate,E=w.endDate;j&&(d.eq(x.startDate,_,"minutes")&&d.eq(x.endDate,E,"minutes")||j({start:_,end:E,resourceId:r.props.resource})===!1)||(r.state.start!==w.start||r.state.end!==w.end||r.state.selecting!==w.selecting)&&r.setState(w)},g=function(y){var j=r.slotMetrics.closestSlotFromPoint(y,Ns(o));r.state.selecting||(r._initialSlot=j);var x=r._initialSlot;d.lte(x,j)?j=r.slotMetrics.nextSlot(j):d.gt(x,j)&&(x=r.slotMetrics.nextSlot(x));var w=r.slotMetrics.getRange(d.min(x,j),d.max(x,j));return At(At({},w),{},{selecting:!0,top:"".concat(w.top,"%"),height:"".concat(w.height,"%")})},f=function(y,j){if(!Cc(r.containerRef.current,y)){var x=g(y),w=x.startDate,_=x.endDate;r._selectSlot({startDate:w,endDate:_,action:j,box:y})}r.setState({selecting:!1})};p.on("selecting",m),p.on("selectStart",m),p.on("beforeSelect",function(N){if(r.props.selectable==="ignoreEvents")return!Cc(r.containerRef.current,N)}),p.on("click",function(N){return f(N,"click")}),p.on("doubleClick",function(N){return f(N,"doubleClick")}),p.on("select",function(N){r.state.selecting&&(r._selectSlot(At(At({},r.state),{},{action:"select",bounds:N})),r.setState({selecting:!1}))}),p.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(o){for(var l=o.startDate,c=o.endDate,d=o.action,p=o.bounds,m=o.box,g=l,f=[];r.props.localizer.lte(g,c);)f.push(g),g=new Date(+g+r.props.step*60*1e3);kt(r.props.onSelectSlot,{slots:f,start:l,end:c,resourceId:r.props.resource,action:d,bounds:p,box:m})},r._select=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];kt(r.props.onSelectEvent,l)},r._doubleClick=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];kt(r.props.onDoubleClickEvent,l)},r._keyPress=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];kt(r.props.onKeyPressEvent,l)},r.slotMetrics=lf(r.props),r.containerRef=W.createRef(),r}return jr(t,e),nr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(n,a){this.props.selectable&&!n.selectable&&this._selectable(),!this.props.selectable&&n.selectable&&this._teardownSelectable();var s=this.props,o=s.getNow,l=s.isNow,c=s.localizer,d=s.date,p=s.min,m=s.max,g=c.neq(n.getNow(),o(),"minutes");if(n.isNow!==l||g){if(this.clearTimeIndicatorInterval(),l){var f=!g&&c.eq(n.date,d,"minutes")&&a.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(f)}}else l&&(c.neq(n.min,p,"minutes")||c.neq(n.max,m,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var n=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!a&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){n.intervalTriggered=!0,n.positionTimeIndicator(),n.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var n=this.props,a=n.min,s=n.max,o=n.getNow,l=o();if(l>=a&&l<=s){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var n=this.props,a=n.date,s=n.max,o=n.rtl,l=n.isNow,c=n.resource,d=n.accessors,p=n.localizer,m=n.getters,g=m.dayProp,f=Xn(m,Fk),N=n.components,y=N.eventContainerWrapper,j=N.timeIndicatorWrapper,x=Xn(N,$k);this.slotMetrics=this.slotMetrics.update(this.props);var w=this.slotMetrics,_=this.state,E=_.selecting,A=_.top,B=_.height,T=_.startDate,C=_.endDate,$={start:T,end:C},H=g(s,c),L=H.className,D=H.style,F={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},U=x.dayColumnWrapper||Rk;return ue.createElement(U,{ref:this.containerRef,date:a,style:D,className:Ut(L,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",E&&"rbc-slot-selecting"),slotMetrics:w,resource:c},w.groups.map(function(ee,te){return ue.createElement(Mv,{key:te,group:ee,resource:c,getters:f,components:x})}),ue.createElement(y,{localizer:p,resource:c,accessors:d,getters:f,components:x,slotMetrics:w},ue.createElement("div",{className:Ut("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),E&&ue.createElement("div",{className:"rbc-slot-selection",style:{top:A,height:B}},ue.createElement("span",null,p.format($,"selectRangeFormat"))),l&&this.intervalTriggered&&ue.createElement(j,F,ue.createElement("div",F)))}}])}(ue.Component);Iv.defaultProps={dragThroughEvents:!0,timeslots:2};var Rv=function(t){var r=t.label;return ue.createElement(ue.Fragment,null,r)},Bk=function(e){function t(){var r;rr(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Nr(this,t,[].concat(a)),r.handleHeaderClick=function(o,l,c){c.preventDefault(),kt(r.props.onDrillDown,[o,l])},r.renderRow=function(o){var l=r.props,c=l.events,d=l.rtl,p=l.selectable,m=l.getNow,g=l.range,f=l.getters,N=l.localizer,y=l.accessors,j=l.components,x=l.resizable,w=y.resourceId(o),_=o?c.filter(function(E){return y.resource(E)===w}):c;return ue.createElement(qo,{isAllDay:!0,rtl:d,getNow:m,minRows:2,maxRows:r.props.allDayMaxRows+1,range:g,events:_,resourceId:w,className:"rbc-allday-cell",selectable:p,selected:r.props.selected,components:j,accessors:y,getters:f,localizer:N,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:x})},r}return jr(t,e),nr(t,[{key:"renderHeaderCells",value:function(n){var a=this,s=this.props,o=s.localizer,l=s.getDrilldownView,c=s.getNow,d=s.getters.dayProp,p=s.components.header,m=p===void 0?of:p,g=c();return n.map(function(f,N){var y=l(f),j=o.format(f,"dayFormat"),x=d(f),w=x.className,_=x.style,E=ue.createElement(m,{date:f,label:j,localizer:o});return ue.createElement("div",{key:N,style:_,className:Ut("rbc-header",w,o.isSameDate(f,g)&&"rbc-today")},y?ue.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(B){return a.handleHeaderClick(f,y,B)}},E):ue.createElement("span",null,E))})}},{key:"render",value:function(){var n=this,a=this.props,s=a.width,o=a.rtl,l=a.resources,c=a.range,d=a.events,p=a.getNow,m=a.accessors,g=a.selectable,f=a.components,N=a.getters,y=a.scrollRef,j=a.localizer,x=a.isOverflowing,w=a.components,_=w.timeGutterHeader,E=w.resourceHeader,A=E===void 0?Rv:E,B=a.resizable,T={};x&&(T[o?"marginLeft":"marginRight"]="".concat($h()-1,"px"));var C=l.groupEvents(d);return ue.createElement("div",{style:T,ref:y,className:Ut("rbc-time-header",x&&"rbc-overflowing")},ue.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},_&&ue.createElement(_,null)),l.map(function($,H){var L=ms($,2),D=L[0],F=L[1];return ue.createElement("div",{className:"rbc-time-header-content",key:D||H},F&&ue.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(H)},ue.createElement("div",{className:"rbc-header"},ue.createElement(A,{index:H,label:m.resourceTitle(F),resource:F}))),ue.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},n.renderHeaderCells(c)),ue.createElement(qo,{isAllDay:!0,rtl:o,getNow:p,minRows:2,maxRows:n.props.allDayMaxRows+1,range:c,events:C.get(D)||[],resourceId:F&&D,className:"rbc-allday-cell",selectable:g,selected:n.props.selected,components:f,accessors:m,getters:N,localizer:j,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:B}))}))}}])}(ue.Component),qk=function(e){function t(){var r;rr(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Nr(this,t,[].concat(a)),r.handleHeaderClick=function(o,l,c){c.preventDefault(),kt(r.props.onDrillDown,[o,l])},r}return jr(t,e),nr(t,[{key:"renderHeaderCells",value:function(n){var a=this,s=this.props,o=s.localizer,l=s.getDrilldownView,c=s.getNow,d=s.getters.dayProp,p=s.components,m=p.header,g=m===void 0?of:m,f=p.resourceHeader,N=f===void 0?Rv:f,y=s.resources,j=s.accessors,x=s.events,w=s.rtl,_=s.selectable,E=s.components,A=s.getters,B=s.resizable,T=c(),C=y.groupEvents(x);return n.map(function($,H){var L=l($),D=o.format($,"dayFormat"),F=d($),U=F.className,ee=F.style,te=ue.createElement(g,{date:$,label:D,localizer:o});return ue.createElement("div",{key:H,className:"rbc-time-header-content rbc-resource-grouping"},ue.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(n.length<=1?" rbc-time-header-cell-single-day":"")},ue.createElement("div",{style:ee,className:Ut("rbc-header",U,o.isSameDate($,T)&&"rbc-today")},L?ue.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(Q){return a.handleHeaderClick($,L,Q)}},te):ue.createElement("span",null,te))),ue.createElement("div",{className:"rbc-row"},y.map(function(re,Q){var Y=ms(re,2),X=Y[0],ce=Y[1];return ue.createElement("div",{key:"resource_".concat(X,"_").concat(Q),className:Ut("rbc-header",U,o.isSameDate($,T)&&"rbc-today")},ue.createElement(N,{index:Q,label:j.resourceTitle(ce),resource:ce}))})),ue.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},y.map(function(re,Q){var Y=ms(re,2),X=Y[0],ce=Y[1],P=(C.get(X)||[]).filter(function(q){return o.isSameDate(q.start,$)||o.isSameDate(q.end,$)});return ue.createElement(qo,{key:"resource_".concat(X,"_").concat(Q),isAllDay:!0,rtl:w,getNow:c,minRows:2,maxRows:a.props.allDayMaxRows+1,range:[$],events:P,resourceId:ce&&X,className:"rbc-allday-cell",selectable:_,selected:a.props.selected,components:E,accessors:j,getters:A,localizer:o,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:B})})))})}},{key:"render",value:function(){var n=this.props,a=n.width,s=n.rtl,o=n.range,l=n.scrollRef,c=n.isOverflowing,d=n.components.timeGutterHeader,p={};return c&&(p[s?"marginLeft":"marginRight"]="".concat($h()-1,"px")),ue.createElement("div",{style:p,ref:l,className:Ut("rbc-time-header",c&&"rbc-overflowing")},ue.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},d&&ue.createElement(d,null)),this.renderHeaderCells(o))}}])}(ue.Component);function zk(e){var t=e.min,r=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(r)?{start:n.add(t,-1,"day"),end:n.add(r,-1,"day")}:{start:t,end:r}}var Uk=function(t){var r=t.min,n=t.max,a=t.timeslots,s=t.step,o=t.localizer,l=t.getNow,c=t.resource,d=t.components,p=t.getters,m=t.gutterRef,g=d.timeGutterWrapper,f=W.useMemo(function(){return zk({min:r,max:n,localizer:o})},[r==null?void 0:r.toISOString(),n==null?void 0:n.toISOString(),o]),N=f.start,y=f.end,j=W.useState(lf({min:N,max:y,timeslots:a,step:s,localizer:o})),x=ms(j,2),w=x[0],_=x[1];W.useEffect(function(){w&&_(w.update({min:N,max:y,timeslots:a,step:s,localizer:o}))},[N==null?void 0:N.toISOString(),y==null?void 0:y.toISOString(),a,s]);var E=W.useCallback(function(A,B){if(B)return null;var T=w.dateIsInGroup(l(),B);return ue.createElement("span",{className:Ut("rbc-label",T&&"rbc-now")},o.format(A,"timeGutterFormat"))},[w,o,l]);return ue.createElement(g,{slotMetrics:w},ue.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:m},w.groups.map(function(A,B){return ue.createElement(Mv,{key:B,group:A,resource:c,components:d,renderSlot:E,getters:p})})))},Wk=ue.forwardRef(function(e,t){return ue.createElement(Uk,Object.assign({gutterRef:t},e))}),xd={};function Hk(e,t){return{map:function(n){return e?e.map(function(a,s){return n([t.resourceId(a),a],s)}):[n([xd,null],0)]},groupEvents:function(n){var a=new Map;return e?(n.forEach(function(s){var o=t.resource(s)||xd;if(Array.isArray(o))o.forEach(function(c){var d=a.get(c)||[];d.push(s),a.set(c,d)});else{var l=a.get(o)||[];l.push(s),a.set(o,l)}}),a):(a.set(xd,n),a)}}}var ki=function(e){function t(r){var n;return rr(this,t),n=Nr(this,t,[r]),n.handleScroll=function(a){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=a.target.scrollLeft)},n.handleResize=function(){kp(n.rafHandle),n.rafHandle=O0(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];kt(n.props.onKeyPressEvent,s)},n.handleSelectEvent=function(){n.clearSelection();for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];kt(n.props.onSelectEvent,s)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];kt(n.props.onDoubleClickEvent,s)},n.handleShowMore=function(a,s,o,l,c){var d=n.props,p=d.popup,m=d.onDrillDown,g=d.onShowMore,f=d.getDrilldownView,N=d.doShowMoreDrillDown;if(n.clearSelection(),p){var y=k0(o,n.containerRef.current);n.setState({overlay:{date:s,events:a,position:At(At({},y),{},{width:"200px"}),target:c}})}else N&&kt(m,[s,f(s)||Cr.DAY]);kt(g,[a,s,l])},n.handleSelectAllDaySlot=function(a,s){var o=n.props.onSelectSlot,l=new Date(a[0]),c=new Date(a[a.length-1]);c.setDate(a[a.length-1].getDate()+1),kt(o,{slots:a,start:l,end:c,action:s.action,resourceId:s.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var a=n.contentRef.current;if(a!=null&&a.scrollHeight){var s=a.scrollHeight>a.clientHeight;n.state.isOverflowing!==s&&(n._updatingOverflow=!0,n.setState({isOverflowing:s},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=av(function(a,s){return Hk(a,s)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=ue.createRef(),n.contentRef=ue.createRef(),n.containerRef=ue.createRef(),n._scrollRatio=null,n.gutterRef=W.createRef(),n}return jr(t,e),nr(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),kp(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(n,a,s,o,l,c,d,p,m,g){var f=this.props,N=f.min,y=f.max,j=(o.get(a)||[]).filter(function(w){return c.inRange(n,d.start(w),d.end(w),"day")}),x=(l.get(a)||[]).filter(function(w){return c.inRange(n,d.start(w),d.end(w),"day")});return ue.createElement(Iv,Object.assign({},this.props,{localizer:c,min:c.merge(n,N),max:c.merge(n,y),resource:s&&a,components:p,isNow:c.isSameDate(n,g),key:"".concat(a,"-").concat(n),date:n,events:j,backgroundEvents:x,dayLayoutAlgorithm:m}))}},{key:"renderResourcesFirst",value:function(n,a,s,o,l,c,d,p,m){var g=this;return a.map(function(f){var N=ms(f,2),y=N[0],j=N[1];return n.map(function(x){return g.renderDayColumn(x,y,j,s,o,l,c,p,m,d)})})}},{key:"renderRangeFirst",value:function(n,a,s,o,l,c,d,p,m){var g=this;return n.map(function(f){return ue.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:f},a.map(function(N){var y=ms(N,2),j=y[0],x=y[1];return ue.createElement("div",{style:{flex:1},key:c.resourceId(x)},g.renderDayColumn(f,j,x,s,o,l,c,p,m,d))}))})}},{key:"renderEvents",value:function(n,a,s,o){var l=this.props,c=l.accessors,d=l.localizer,p=l.resourceGroupingLayout,m=l.components,g=l.dayLayoutAlgorithm,f=this.memoizedResources(this.props.resources,c),N=f.groupEvents(a),y=f.groupEvents(s);return p?this.renderRangeFirst(n,f,N,y,d,c,o,m,g):this.renderResourcesFirst(n,f,N,y,d,c,o,m,g)}},{key:"render",value:function(){var n,a=this.props,s=a.events,o=a.backgroundEvents,l=a.range,c=a.width,d=a.rtl,p=a.selected,m=a.getNow,g=a.resources,f=a.components,N=a.accessors,y=a.getters,j=a.localizer,x=a.min,w=a.max,_=a.showMultiDayTimes,E=a.longPressThreshold,A=a.resizable,B=a.resourceGroupingLayout;c=c||this.state.gutterWidth;var T=l[0],C=l[l.length-1];this.slots=l.length;var $=[],H=[],L=[];s.forEach(function(F){if(Bo(F,T,C,N,j)){var U=N.start(F),ee=N.end(F);N.allDay(F)||j.startAndEndAreDateOnly(U,ee)||!_&&!j.isSameDate(U,ee)?$.push(F):H.push(F)}}),o.forEach(function(F){Bo(F,T,C,N,j)&&L.push(F)}),$.sort(function(F,U){return ih(F,U,N,j)});var D={range:l,events:$,width:c,rtl:d,getNow:m,localizer:j,selected:p,allDayMaxRows:this.props.showAllEvents?1/0:(n=this.props.allDayMaxRows)!==null&&n!==void 0?n:1/0,resources:this.memoizedResources(g,N),selectable:this.props.selectable,accessors:N,getters:y,components:f,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:E,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:A};return ue.createElement("div",{className:Ut("rbc-time-view",g&&"rbc-time-view-resources"),ref:this.containerRef},g&&g.length>1&&B?ue.createElement(qk,D):ue.createElement(Bk,D),this.props.popup&&this.renderOverlay(),ue.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},ue.createElement(Wk,{date:T,ref:this.gutterRef,localizer:j,min:j.merge(T,x),max:j.merge(T,w),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:f,className:"rbc-time-gutter",getters:y}),this.renderEvents(l,H,L,m())))}},{key:"renderOverlay",value:function(){var n,a,s=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,p=l.components,m=l.getters,g=l.selected,f=l.popupOffset,N=l.handleDragStart,y=function(){return s.setState({overlay:null})};return ue.createElement(sf,{overlay:o,accessors:c,localizer:d,components:p,getters:m,selected:g,popupOffset:f,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:N,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var n=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var a,s=(a=n.gutterRef)!==null&&a!==void 0&&a.current?nh(n.gutterRef.current):void 0;s&&n.state.gutterWidth!==s&&n.setState({gutterWidth:s})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var n=this.contentRef.current;n.scrollTop=n.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,a=n.min,s=n.max,o=n.scrollToTime,l=n.localizer,c=l.diff(l.merge(o,a),o,"milliseconds"),d=l.diff(a,s,"milliseconds");this._scrollRatio=c/d}}])}(W.Component);ki.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var Gk=["date","localizer","min","max","scrollToTime","enableAutoScroll"],tu=function(e){function t(){return rr(this,t),Nr(this,t,arguments)}return jr(t,e),nr(t,[{key:"render",value:function(){var n=this.props,a=n.date,s=n.localizer,o=n.min,l=o===void 0?s.startOf(new Date,"day"):o,c=n.max,d=c===void 0?s.endOf(new Date,"day"):c,p=n.scrollToTime,m=p===void 0?s.startOf(new Date,"day"):p,g=n.enableAutoScroll,f=g===void 0?!0:g,N=Xn(n,Gk),y=t.range(a,{localizer:s});return ue.createElement(ki,Object.assign({},N,{range:y,eventOffset:10,localizer:s,min:l,max:d,scrollToTime:m,enableAutoScroll:f}))}}])}(ue.Component);tu.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};tu.navigate=function(e,t,r){var n=r.localizer;switch(t){case Br.PREVIOUS:return n.add(e,-1,"day");case Br.NEXT:return n.add(e,1,"day");default:return e}};tu.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var Vk=["date","localizer","min","max","scrollToTime","enableAutoScroll"],$a=function(e){function t(){return rr(this,t),Nr(this,t,arguments)}return jr(t,e),nr(t,[{key:"render",value:function(){var n=this.props,a=n.date,s=n.localizer,o=n.min,l=o===void 0?s.startOf(new Date,"day"):o,c=n.max,d=c===void 0?s.endOf(new Date,"day"):c,p=n.scrollToTime,m=p===void 0?s.startOf(new Date,"day"):p,g=n.enableAutoScroll,f=g===void 0?!0:g,N=Xn(n,Vk),y=t.range(a,this.props);return ue.createElement(ki,Object.assign({},N,{range:y,eventOffset:15,localizer:s,min:l,max:d,scrollToTime:m,enableAutoScroll:f}))}}])}(ue.Component);$a.defaultProps=ki.defaultProps;$a.navigate=function(e,t,r){var n=r.localizer;switch(t){case Br.PREVIOUS:return n.add(e,-1,"week");case Br.NEXT:return n.add(e,1,"week");default:return e}};$a.range=function(e,t){var r=t.localizer,n=r.startOfWeek(),a=r.startOf(e,"week",n),s=r.endOf(e,"week",n);return r.range(a,s)};$a.title=function(e,t){var r=t.localizer,n=$a.range(e,{localizer:r}),a=dv(n),s=a[0],o=a.slice(1);return r.format({start:s,end:o.pop()},"dayRangeHeaderFormat")};var Yk=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function cf(e,t){return $a.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var el=function(e){function t(){return rr(this,t),Nr(this,t,arguments)}return jr(t,e),nr(t,[{key:"render",value:function(){var n=this.props,a=n.date,s=n.localizer,o=n.min,l=o===void 0?s.startOf(new Date,"day"):o,c=n.max,d=c===void 0?s.endOf(new Date,"day"):c,p=n.scrollToTime,m=p===void 0?s.startOf(new Date,"day"):p,g=n.enableAutoScroll,f=g===void 0?!0:g,N=Xn(n,Yk),y=cf(a,this.props);return ue.createElement(ki,Object.assign({},N,{range:y,eventOffset:15,localizer:s,min:l,max:d,scrollToTime:m,enableAutoScroll:f}))}}])}(ue.Component);el.defaultProps=ki.defaultProps;el.range=cf;el.navigate=$a.navigate;el.title=function(e,t){var r=t.localizer,n=cf(e,{localizer:r}),a=dv(n),s=a[0],o=a.slice(1);return r.format({start:s,end:o.pop()},"dayRangeHeaderFormat")};var ru=30;function nu(e){var t=e.accessors,r=e.components,n=e.date,a=e.events,s=e.getters,o=e.length,l=o===void 0?ru:o,c=e.localizer,d=e.onDoubleClickEvent,p=e.onSelectEvent,m=e.selected,g=W.useRef(null),f=W.useRef(null),N=W.useRef(null),y=W.useRef(null),j=W.useRef(null);W.useEffect(function(){_()});var x=function(C,$,H){var L=r.event,D=r.date;return $=$.filter(function(F){return Bo(F,c.startOf(C,"day"),c.endOf(C,"day"),t,c)}),$.map(function(F,U){var ee=t.title(F),te=t.end(F),re=t.start(F),Q=s.eventProp(F,re,te,Qc(F,m)),Y=U===0&&c.format(C,"agendaDateFormat"),X=U===0?ue.createElement("td",{rowSpan:$.length,className:"rbc-agenda-date-cell"},D?ue.createElement(D,{day:C,label:Y}):Y):!1;return ue.createElement("tr",{key:H+"_"+U,className:Q.className,style:Q.style},X,ue.createElement("td",{className:"rbc-agenda-time-cell"},w(C,F)),ue.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(P){return p&&p(F,P)},onDoubleClick:function(P){return d&&d(F,P)}},L?ue.createElement(L,{event:F,title:ee}):ee))},[])},w=function(C,$){var H="",L=r.time,D=c.messages.allDay,F=t.end($),U=t.start($);return t.allDay($)||(c.eq(U,F)?D=c.format(U,"agendaTimeFormat"):c.isSameDate(U,F)?D=c.format({start:U,end:F},"agendaTimeRangeFormat"):c.isSameDate(C,U)?D=c.format(U,"agendaTimeFormat"):c.isSameDate(C,F)&&(D=c.format(F,"agendaTimeFormat"))),c.gt(C,U,"day")&&(H="rbc-continues-prior"),c.lt(C,F,"day")&&(H+=" rbc-continues-after"),ue.createElement("span",{className:H.trim()},L?ue.createElement(L,{event:$,day:C,label:D}):D)},_=function(){if(j.current){var C=g.current,$=j.current.firstChild;if($){var H=y.current.scrollHeight>y.current.clientHeight,L=[],D=L;L=[nh($.children[0]),nh($.children[1])],(D[0]!==L[0]||D[1]!==L[1])&&(f.current.style.width=L[0]+"px",N.current.style.width=L[1]+"px"),H?(Kw(C,"rbc-header-overflowing"),C.style.marginRight=$h()+"px"):Xw(C,"rbc-header-overflowing")}}},E=c.messages,A=c.add(n,l,"day"),B=c.range(n,A,"day");return a=a.filter(function(T){return Bo(T,c.startOf(n,"day"),c.endOf(A,"day"),t,c)}),a.sort(function(T,C){return+t.start(T)-+t.start(C)}),ue.createElement("div",{className:"rbc-agenda-view"},a.length!==0?ue.createElement(ue.Fragment,null,ue.createElement("table",{ref:g,className:"rbc-agenda-table"},ue.createElement("thead",null,ue.createElement("tr",null,ue.createElement("th",{className:"rbc-header",ref:f},E.date),ue.createElement("th",{className:"rbc-header",ref:N},E.time),ue.createElement("th",{className:"rbc-header"},E.event)))),ue.createElement("div",{className:"rbc-agenda-content",ref:y},ue.createElement("table",{className:"rbc-agenda-table"},ue.createElement("tbody",{ref:j},B.map(function(T,C){return x(T,a,C)}))))):ue.createElement("span",{className:"rbc-agenda-empty"},E.noEventsInRange))}nu.range=function(e,t){var r=t.length,n=r===void 0?ru:r,a=t.localizer,s=a.add(e,n,"day");return{start:e,end:s}};nu.navigate=function(e,t,r){var n=r.length,a=n===void 0?ru:n,s=r.localizer;switch(t){case Br.PREVIOUS:return s.add(e,-a,"day");case Br.NEXT:return s.add(e,a,"day");default:return e}};nu.title=function(e,t){var r=t.length,n=r===void 0?ru:r,a=t.localizer,s=a.add(e,n,"day");return a.format({start:e,end:s},"agendaHeaderFormat")};var hc=us(us(us(us(us({},Cr.MONTH,eu),Cr.WEEK,$a),Cr.WORK_WEEK,el),Cr.DAY,tu),Cr.AGENDA,nu),Kk=["action","date","today"];function Xk(e,t){var r=t.action,n=t.date,a=t.today,s=Xn(t,Kk);switch(e=typeof e=="string"?hc[e]:e,r){case Br.TODAY:n=a||new Date;break;case Br.DATE:break;default:Co(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,r,s)}return n}function Jk(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&dt(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var ha=function(t){return function(r){return Jk(r,t)}},Zk=["view","date","getNow","onNavigate"],Qk=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function Fv(e){if(Array.isArray(e))return e;for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var a=ms(n[r],2),s=a[0],o=a[1];o&&t.push(s)}return t}function eO(e,t){var r=t.views,n=Fv(r);return n.indexOf(e)!==-1}var $v=function(e){function t(){var r;rr(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Nr(this,t,[].concat(a)),r.getViews=function(){var o=r.props.views;return Array.isArray(o)?DP(o,function(l,c){return l[c]=hc[c]},{}):dt(o)==="object"?DC(o,function(l,c){return l===!0?hc[c]:l}):hc},r.getView=function(){var o=r.getViews();return o[r.props.view]},r.getDrilldownView=function(o){var l=r.props,c=l.view,d=l.drilldownView,p=l.getDrilldownView;return p?p(o,c,Object.keys(r.getViews())):d},r.handleRangeChange=function(o,l,c){var d=r.props,p=d.onRangeChange,m=d.localizer;p&&l.range&&p(l.range(o,{localizer:m}),c)},r.handleNavigate=function(o,l){var c=r.props,d=c.view,p=c.date,m=c.getNow,g=c.onNavigate,f=Xn(c,Zk),N=r.getView(),y=m();p=Xk(N,At(At({},f),{},{action:o,date:l||p||y,today:y})),g(p,d,o),r.handleRangeChange(p,N)},r.handleViewChange=function(o){o!==r.props.view&&eO(o,r.props)&&r.props.onView(o);var l=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),l[o],o)},r.handleSelectEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];kt(r.props.onSelectEvent,l)},r.handleDoubleClickEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];kt(r.props.onDoubleClickEvent,l)},r.handleKeyPressEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];kt(r.props.onKeyPressEvent,l)},r.handleSelectSlot=function(o){kt(r.props.onSelectSlot,o)},r.handleDrillDown=function(o,l){var c=r.props.onDrillDown;if(c){c(o,l,r.drilldownView);return}l&&r.handleViewChange(l),r.handleNavigate(Br.DATE,o)},r.state={context:t.getContext(r.props)},r}return jr(t,e),nr(t,[{key:"render",value:function(){var n=this.props,a=n.view,s=n.toolbar,o=n.events,l=n.backgroundEvents,c=n.resourceGroupingLayout,d=n.style,p=n.className,m=n.elementProps,g=n.date,f=n.getNow,N=n.length,y=n.showMultiDayTimes,j=n.onShowMore,x=n.doShowMoreDrillDown;n.components,n.formats,n.messages,n.culture;var w=Xn(n,Qk);g=g||f();var _=this.getView(),E=this.state.context,A=E.accessors,B=E.components,T=E.getters,C=E.localizer,$=E.viewNames,H=B.toolbar||nk,L=_.title(g,{localizer:C,length:N});return ue.createElement("div",Object.assign({},m,{className:Ut(p,"rbc-calendar",w.rtl&&"rbc-rtl"),style:d}),s&&ue.createElement(H,{date:g,view:a,views:$,label:L,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:C}),ue.createElement(_,Object.assign({},w,{events:o,backgroundEvents:l,date:g,getNow:f,length:N,localizer:C,getters:T,components:B,accessors:A,showMultiDayTimes:y,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:j,doShowMoreDrillDown:x,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(n){return{context:t.getContext(n)}}},{key:"getContext",value:function(n){var a=n.startAccessor,s=n.endAccessor,o=n.allDayAccessor,l=n.tooltipAccessor,c=n.titleAccessor,d=n.resourceAccessor,p=n.resourceIdAccessor,m=n.resourceTitleAccessor,g=n.eventIdAccessor,f=n.eventPropGetter,N=n.backgroundEventPropGetter,y=n.slotPropGetter,j=n.slotGroupPropGetter,x=n.dayPropGetter,w=n.view,_=n.views,E=n.localizer,A=n.culture,B=n.messages,T=B===void 0?{}:B,C=n.components,$=C===void 0?{}:C,H=n.formats,L=H===void 0?{}:H,D=Fv(_),F=sk(T);return{viewNames:D,localizer:rk(E,A,L,F),getters:{eventProp:function(){return f&&f.apply(void 0,arguments)||{}},backgroundEventProp:function(){return N&&N.apply(void 0,arguments)||{}},slotProp:function(){return y&&y.apply(void 0,arguments)||{}},slotGroupProp:function(){return j&&j.apply(void 0,arguments)||{}},dayProp:function(){return x&&x.apply(void 0,arguments)||{}}},components:jC($[w]||{},vP($,D),{eventWrapper:Un,backgroundEventWrapper:Un,eventContainerWrapper:Un,dateCellWrapper:Un,weekWrapper:Un,timeSlotWrapper:Un,timeGutterWrapper:Un,timeIndicatorWrapper:Un}),accessors:{start:ha(a),end:ha(s),allDay:ha(o),tooltip:ha(l),title:ha(c),resource:ha(d),resourceId:ha(p),resourceTitle:ha(m),eventId:ha(g)}}}}])}(ue.Component);$v.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Cr.MONTH,views:[Cr.MONTH,Cr.WEEK,Cr.DAY,Cr.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Cr.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var tO=m0($v,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),rO=function(t,r,n){var a=t.start,s=t.end;return"".concat(n.format(a,"P",r)," – ").concat(n.format(s,"P",r))},wd=function(t,r,n){var a=t.start,s=t.end;return"".concat(n.format(a,"p",r)," – ").concat(n.format(s,"p",r))},nO=function(t,r,n){var a=t.start;return"".concat(n.format(a,"h:mma",r)," – ")},aO=function(t,r,n){var a=t.end;return" – ".concat(n.format(a,"h:mma",r))},sO=function(t,r,n){var a=t.start,s=t.end;return"".concat(n.format(a,"MMMM dd",r)," – ").concat(n.format(s,Ni(a,s,"month")?"dd":"MMMM dd",r))},iO={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:wd,eventTimeRangeFormat:wd,eventTimeRangeStartFormat:nO,eventTimeRangeEndFormat:aO,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:sO,agendaHeaderFormat:rO,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:wd},oO=function(t){var r=t.startOfWeek,n=t.getDay,a=t.format,s=t.locales;return new tk({formats:iO,firstOfWeek:function(l){return n(r(new Date,{locale:s[l]}))},format:function(l,c,d){return a(new Date(l),c,{locale:s[d]})}})};const lO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cO=(e,t,r)=>{let n;const a=lO[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Nd(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const uO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},dO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fO={date:Nd({formats:uO,defaultWidth:"full"}),time:Nd({formats:dO,defaultWidth:"full"}),dateTime:Nd({formats:hO,defaultWidth:"full"})},pO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mO=(e,t,r,n)=>pO[e];function vo(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const gO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NO=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},jO={ordinalNumber:NO,era:vo({values:gO,defaultWidth:"wide"}),quarter:vo({values:vO,defaultWidth:"wide",argumentCallback:e=>e-1}),month:vo({values:bO,defaultWidth:"wide"}),day:vo({values:yO,defaultWidth:"wide"}),dayPeriod:vo({values:xO,defaultWidth:"wide",formattingValues:wO,defaultFormattingWidth:"wide"})};function bo(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?_O(l,m=>m.test(o)):SO(l,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const p=t.slice(o.length);return{value:d,rest:p}}}function SO(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function _O(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function AO(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const EO=/^(\d+)(th|st|nd|rd)?/i,CO=/\d+/i,LO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},DO={any:[/^b/i,/^(a|c)/i]},PO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kO={any:[/1/i,/2/i,/3/i,/4/i]},OO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},TO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},MO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},IO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},RO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},FO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$O={ordinalNumber:AO({matchPattern:EO,parsePattern:CO,valueCallback:e=>parseInt(e,10)}),era:bo({matchPatterns:LO,defaultMatchWidth:"wide",parsePatterns:DO,defaultParseWidth:"any"}),quarter:bo({matchPatterns:PO,defaultMatchWidth:"wide",parsePatterns:kO,defaultParseWidth:"any",valueCallback:e=>e+1}),month:bo({matchPatterns:OO,defaultMatchWidth:"wide",parsePatterns:TO,defaultParseWidth:"any"}),day:bo({matchPatterns:MO,defaultMatchWidth:"wide",parsePatterns:IO,defaultParseWidth:"any"}),dayPeriod:bo({matchPatterns:RO,defaultMatchWidth:"any",parsePatterns:FO,defaultParseWidth:"any"})},Bv={code:"en-US",formatDistance:cO,formatLong:fO,formatRelative:mO,localize:jO,match:$O,options:{weekStartsOn:0,firstWeekContainsDate:1}};let BO={};function au(){return BO}const qv=6048e5,qO=864e5,Vm=Symbol.for("constructDateFrom");function Ba(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Vm in e?e[Vm](t):e instanceof Date?new e.constructor(t):new Date(t)}function fn(e,t){return Ba(t||e,e)}function Ym(e){const t=fn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function zO(e,...t){const r=Ba.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function Km(e,t){const r=fn(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function UO(e,t,r){const[n,a]=zO(r==null?void 0:r.in,e,t),s=Km(n),o=Km(a),l=+s-Ym(s),c=+o-Ym(o);return Math.round((l-c)/qO)}function WO(e,t){const r=fn(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function HO(e,t){const r=fn(e,t==null?void 0:t.in);return UO(r,WO(r))+1}function xi(e,t){var l,c,d,p;const r=au(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((p=(d=r.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??0,a=fn(e,t==null?void 0:t.in),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Lc(e,t){return xi(e,{...t,weekStartsOn:1})}function zv(e,t){const r=fn(e,t==null?void 0:t.in),n=r.getFullYear(),a=Ba(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=Lc(a),o=Ba(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=Lc(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function GO(e,t){const r=zv(e,t),n=Ba(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Lc(n)}function VO(e,t){const r=fn(e,t==null?void 0:t.in),n=+Lc(r)-+GO(r);return Math.round(n/qv)+1}function Uv(e,t){var p,m,g,f;const r=fn(e,t==null?void 0:t.in),n=r.getFullYear(),a=au(),s=(t==null?void 0:t.firstWeekContainsDate)??((m=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(g=a.locale)==null?void 0:g.options)==null?void 0:f.firstWeekContainsDate)??1,o=Ba((t==null?void 0:t.in)||e,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=xi(o,t),c=Ba((t==null?void 0:t.in)||e,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const d=xi(c,t);return+r>=+l?n+1:+r>=+d?n:n-1}function YO(e,t){var l,c,d,p;const r=au(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(d=r.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??1,a=Uv(e,t),s=Ba((t==null?void 0:t.in)||e,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),xi(s,t)}function KO(e,t){const r=fn(e,t==null?void 0:t.in),n=+xi(r,t)-+YO(r,t);return Math.round(n/qv)+1}function wt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Ta={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return wt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):wt(r+1,2)},d(e,t){return wt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return wt(e.getHours()%12||12,t.length)},H(e,t){return wt(e.getHours(),t.length)},m(e,t){return wt(e.getMinutes(),t.length)},s(e,t){return wt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return wt(a,t.length)}},ni={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Xm={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Ta.y(e,t)},Y:function(e,t,r,n){const a=Uv(e,n),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return wt(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):wt(s,t.length)},R:function(e,t){const r=zv(e);return wt(r,t.length)},u:function(e,t){const r=e.getFullYear();return wt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return wt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return wt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Ta.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return wt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=KO(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):wt(a,t.length)},I:function(e,t,r){const n=VO(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):wt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Ta.d(e,t)},D:function(e,t,r){const n=HO(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):wt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return wt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return wt(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return wt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=ni.noon:n===0?a=ni.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=ni.evening:n>=12?a=ni.afternoon:n>=4?a=ni.morning:a=ni.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ta.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ta.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):wt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):wt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ta.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ta.s(e,t)},S:function(e,t){return Ta.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Zm(n);case"XXXX":case"XX":return ls(n);case"XXXXX":case"XXX":default:return ls(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Zm(n);case"xxxx":case"xx":return ls(n);case"xxxxx":case"xxx":default:return ls(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Jm(n,":");case"OOOO":default:return"GMT"+ls(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Jm(n,":");case"zzzz":default:return"GMT"+ls(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return wt(n,t.length)},T:function(e,t,r){return wt(+e,t.length)}};function Jm(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+t+wt(s,2)}function Zm(e,t){return e%60===0?(e>0?"-":"+")+wt(Math.abs(e)/60,2):ls(e,t)}function ls(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=wt(Math.trunc(n/60),2),s=wt(n%60,2);return r+a+t+s}const Qm=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Wv=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},XO=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return Qm(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Qm(n,t)).replace("{{time}}",Wv(a,t))},JO={p:Wv,P:XO},ZO=/^D+$/,QO=/^Y+$/,e7=["D","DD","YY","YYYY"];function t7(e){return ZO.test(e)}function r7(e){return QO.test(e)}function n7(e,t,r){const n=a7(e,t,r);if(console.warn(n),e7.includes(e))throw new RangeError(n)}function a7(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function s7(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function i7(e){return!(!s7(e)&&typeof e!="number"||isNaN(+fn(e)))}const o7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,l7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,c7=/^'([^]*?)'?$/,u7=/''/g,d7=/[a-zA-Z]/;function h7(e,t,r){var p,m,g,f,N,y,j,x;const n=au(),a=(r==null?void 0:r.locale)??n.locale??Bv,s=(r==null?void 0:r.firstWeekContainsDate)??((m=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(g=n.locale)==null?void 0:g.options)==null?void 0:f.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((y=(N=r==null?void 0:r.locale)==null?void 0:N.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((x=(j=n.locale)==null?void 0:j.options)==null?void 0:x.weekStartsOn)??0,l=fn(e,r==null?void 0:r.in);if(!i7(l))throw new RangeError("Invalid time value");let c=t.match(l7).map(w=>{const _=w[0];if(_==="p"||_==="P"){const E=JO[_];return E(w,a.formatLong)}return w}).join("").match(o7).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const _=w[0];if(_==="'")return{isToken:!1,value:f7(w)};if(Xm[_])return{isToken:!0,value:w};if(_.match(d7))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(w=>{if(!w.isToken)return w.value;const _=w.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&r7(_)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&t7(_))&&n7(_,t,String(e));const E=Xm[_[0]];return E(l,_,a.localize,d)}).join("")}function f7(e){const t=e.match(c7);return t?t[1].replace(u7,"'"):e}function p7(e,t){return fn(e,t==null?void 0:t.in).getDay()}const m7={"en-US":Bv},g7=oO({format:h7,startOfWeek:xi,getDay:p7,locales:m7});function v7(){const[e,t]=W.useState([]);return W.useEffect(()=>{async function r(){var c,d;const{data:{user:n},error:a}=await Ue.auth.getUser();if(a||!n){console.error("User error:",a);return}const s=((c=n==null?void 0:n.user_metadata)==null?void 0:c.org_id)||((d=n==null?void 0:n.app_metadata)==null?void 0:d.org_id);if(!s){console.error("Missing org_id in user metadata.");return}const{data:o,error:l}=await Ue.from("events").select("*").eq("org_id",s);if(l)console.error("Error loading events:",l);else{const p=o.map(m=>({id:m.id,title:m.title,start:new Date(m.event_date),end:new Date(m.event_date)}));t(p)}}r()},[]),i.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Event Calendar"}),i.jsx(tO,{localizer:g7,events:e,startAccessor:"start",endAccessor:"end",style:{height:600}})]})}function tl({title:e,loading:t=!1,error:r=null,children:n,className:a=""}){return t?i.jsx(bh,{size:"lg"}):r?i.jsx("div",{className:"p-4 text-center text-red-600",children:r}):i.jsxs("div",{className:`p-6 ${a}`,children:[e&&i.jsx("div",{className:"mb-6",children:i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e})}),n||i.jsx(vh,{})]})}const b7={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",info:"bg-sky-600 text-white hover:bg-sky-700 focus:ring-sky-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500"},y7={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};function Rr({children:e,variant:t="primary",size:r="md",isLoading:n=!1,disabled:a=!1,className:s="",...o}){return i.jsxs("button",{disabled:a||n,className:`
        inline-flex items-center justify-center
        rounded-lg font-medium
        focus:outline-none focus:ring-2 focus:ring-offset-2
        transition-colors duration-200
        disabled:opacity-50 disabled:cursor-not-allowed
        ${b7[t]}
        ${y7[r]}
        ${s}
      `,...o,children:[n&&i.jsx(jg,{className:"animate-spin -ml-1 mr-2 h-5 w-5"}),e]})}function pa({title:e,description:t,children:r,className:n="",...a}){return i.jsxs("div",{className:`
        bg-white rounded-lg shadow-md overflow-hidden
        ${n}
      `,...a,children:[(e||t)&&i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e&&i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),t&&i.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t})]}),i.jsx("div",{className:"p-6",children:r})]})}function Ir({label:e,error:t,className:r="",...n}){return i.jsxs("div",{className:"space-y-1",children:[e&&i.jsx("label",{htmlFor:n.id,className:"block text-sm font-medium text-gray-700",children:e}),i.jsx("input",{className:`
          block w-full rounded-lg
          border-gray-300 shadow-sm
          focus:border-blue-500 focus:ring-blue-500
          disabled:bg-gray-100 disabled:cursor-not-allowed
          ${t?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
          ${r}
        `,...n}),t&&i.jsx("p",{className:"text-sm text-red-600",children:t})]})}function x7(){const{id:e}=zo(),[t,r]=W.useState(!0),[n,a]=W.useState(null),[s,o]=W.useState([]),[l,c]=W.useState(null),[d,p]=W.useState({name:"",amount:"",description:"",benefits:""});W.useEffect(()=>{m()},[e]);const m=async()=>{try{r(!0);const{data:j}=await Dt.get(`/fundraisers/${e}/tiers`);o(j),a(null)}catch(j){const x="Failed to fetch donation tiers";a(x),Lr(j,x)}finally{r(!1)}},g=async j=>{j.preventDefault();try{r(!0);const{data:x}=await Dt.post(`/fundraisers/${e}/tiers`,d);o([...s,x]),p({name:"",amount:"",description:"",benefits:""}),Gn("Donation tier created successfully")}catch(x){Lr(x,"Failed to create donation tier")}finally{r(!1)}},f=async(j,x)=>{try{r(!0);const{data:w}=await Dt.put(`/fundraisers/${e}/tiers/${j}`,x);o(s.map(_=>_.id===j?w:_)),c(null),Gn("Donation tier updated successfully")}catch(w){Lr(w,"Failed to update donation tier")}finally{r(!1)}},N=async j=>{if(window.confirm("Are you sure you want to delete this donation tier?"))try{r(!0),await Dt.delete(`/fundraisers/${e}/tiers/${j}`),o(s.filter(x=>x.id!==j)),Gn("Donation tier deleted successfully")}catch(x){Lr(x,"Failed to delete donation tier")}finally{r(!1)}},y=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(j);return i.jsx(tl,{title:"Donation Tiers",loading:t,error:n,children:i.jsxs("div",{className:"space-y-6",children:[i.jsx(pa,{title:"Create New Tier",children:i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Ir,{label:"Tier Name",value:d.name,onChange:j=>p({...d,name:j.target.value}),required:!0}),i.jsx(Ir,{label:"Amount",type:"number",value:d.amount,onChange:j=>p({...d,amount:j.target.value}),required:!0,min:"0",step:"0.01"})]}),i.jsx(Ir,{label:"Description",value:d.description,onChange:j=>p({...d,description:j.target.value}),required:!0,as:"textarea",rows:2}),i.jsx(Ir,{label:"Benefits",value:d.benefits,onChange:j=>p({...d,benefits:j.target.value}),required:!0,as:"textarea",rows:2}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(Rr,{type:"submit",className:"flex items-center space-x-2",children:[i.jsx(a2,{className:"h-5 w-5"}),i.jsx("span",{children:"Add Tier"})]})})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(j=>i.jsx(pa,{title:l===j.id?"Edit Tier":j.name,children:l===j.id?i.jsxs("form",{onSubmit:x=>{x.preventDefault(),f(j.id,{name:x.target.name.value,amount:x.target.amount.value,description:x.target.description.value,benefits:x.target.benefits.value})},className:"space-y-4",children:[i.jsx(Ir,{label:"Tier Name",name:"name",defaultValue:j.name,required:!0}),i.jsx(Ir,{label:"Amount",name:"amount",type:"number",defaultValue:j.amount,required:!0,min:"0",step:"0.01"}),i.jsx(Ir,{label:"Description",name:"description",defaultValue:j.description,required:!0,as:"textarea",rows:2}),i.jsx(Ir,{label:"Benefits",name:"benefits",defaultValue:j.benefits,required:!0,as:"textarea",rows:2}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsxs(Rr,{type:"button",variant:"outline",onClick:()=>c(null),className:"flex items-center space-x-2",children:[i.jsx(s2,{className:"h-5 w-5"}),i.jsx("span",{children:"Cancel"})]}),i.jsxs(Rr,{type:"submit",className:"flex items-center space-x-2",children:[i.jsx(Cg,{className:"h-5 w-5"}),i.jsx("span",{children:"Save"})]})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y(j.amount)}),i.jsx("p",{className:"text-gray-600",children:j.description}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Benefits"}),i.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:j.benefits})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsxs(Rr,{variant:"outline",onClick:()=>c(j.id),className:"flex items-center space-x-2",children:[i.jsx(i2,{className:"h-5 w-5"}),i.jsx("span",{children:"Edit"})]}),i.jsxs(Rr,{variant:"danger",onClick:()=>N(j.id),className:"flex items-center space-x-2",children:[i.jsx(Eg,{className:"h-5 w-5"}),i.jsx("span",{children:"Delete"})]})]})]})},j.id))})]})})}function w7(){const{id:e}=zo(),[t,r]=W.useState(!0),[n,a]=W.useState(null),[s,o]=W.useState({total_donations:0,total_donors:0,average_donation:0,progress:0,top_donor:null});W.useEffect(()=>{l()},[e]);const l=async()=>{try{r(!0);const{data:d}=await Dt.get(`/fundraisers/${e}/analytics`);let p=null;if(d.top_donor)p=d.top_donor;else{const{data:m}=await Dt.get(`/fundraisers/${e}/top-donor`);p=m}o({...d,top_donor:p}),a(null)}catch(d){const p="Failed to fetch fundraiser analytics";a(p),Lr(d,p)}finally{r(!1)}},c=d=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d);return i.jsx(tl,{title:"Fundraiser Analytics",loading:t,error:n,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(pa,{children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:i.jsx(Lg,{className:"h-6 w-6 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Donations"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c(s.total_donations)})]})]})}),i.jsx(pa,{children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:i.jsx(fi,{className:"h-6 w-6 text-green-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Donors"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.total_donors})]})]})}),i.jsx(pa,{children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:i.jsx(Dg,{className:"h-6 w-6 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Average Donation"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c(s.average_donation)})]})]})}),i.jsx(pa,{children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:i.jsx(fi,{className:"h-6 w-6 text-yellow-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Top Donor"}),s.top_donor?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.top_donor.name}),i.jsx("p",{className:"text-sm text-green-600",children:c(s.top_donor.amount)})]}):i.jsx("p",{className:"text-gray-400",children:"No donations yet"})]})]})}),i.jsx(pa,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Progress"}),i.jsxs("span",{className:"font-medium text-gray-900",children:[s.progress,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.progress}%`}})})]})})]})})}function N7(){const{id:e}=zo(),[t,r]=W.useState(!0),[n,a]=W.useState(null),[s,o]=W.useState(null),[l,c]=W.useState(!1);W.useEffect(()=>{d()},[e]);const d=async()=>{try{r(!0);const{data:g}=await Dt.get(`/fundraisers/${e}`);o(g),a(null)}catch(g){const f="Failed to fetch fundraiser details";a(f),Lr(g,f)}finally{r(!1)}},p=async g=>{const f=`${window.location.origin}/fundraisers/${e}`,N=`Support ${s.title} - ${s.description}`;try{switch(g){case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(f)}`,"_blank");break;case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(N)}&url=${encodeURIComponent(f)}`,"_blank");break;case"linkedin":window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(f)}`,"_blank");break;default:break}Gn("Shared successfully")}catch(y){Lr(y,"Failed to share")}},m=async()=>{const g=`${window.location.origin}/fundraisers/${e}`;try{await navigator.clipboard.writeText(g),c(!0),Gn("Link copied to clipboard"),setTimeout(()=>c(!1),2e3)}catch(f){Lr(f,"Failed to copy link")}};return s?i.jsx(tl,{title:"Share Fundraiser",loading:t,error:n,children:i.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:i.jsx(pa,{title:s.title,description:s.description,children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[i.jsxs(Rr,{onClick:()=>p("facebook"),className:"flex items-center space-x-2",children:[i.jsx(o2,{className:"h-5 w-5"}),i.jsx("span",{children:"Share on Facebook"})]}),i.jsxs(Rr,{onClick:()=>p("twitter"),className:"flex items-center space-x-2",children:[i.jsx(l2,{className:"h-5 w-5"}),i.jsx("span",{children:"Share on Twitter"})]}),i.jsxs(Rr,{onClick:()=>p("linkedin"),className:"flex items-center space-x-2",children:[i.jsx(c2,{className:"h-5 w-5"}),i.jsx("span",{children:"Share on LinkedIn"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded-lg border border-gray-200 text-sm text-gray-600 truncate",children:`${window.location.origin}/fundraisers/${e}`}),i.jsx(Rr,{onClick:m,variant:"outline",className:"flex items-center space-x-2",children:l?i.jsxs(i.Fragment,{children:[i.jsx(Cg,{className:"h-5 w-5 text-green-500"}),i.jsx("span",{children:"Copied!"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Pg,{className:"h-5 w-5"}),i.jsx("span",{children:"Copy"})]})})]})]})})})}):null}function j7(){const e=Xr(),[t,r]=W.useState(!0),[n,a]=W.useState(null),[s,o]=W.useState([]),[l,c]=W.useState(""),[d,p]=W.useState("all"),[m,g]=W.useState(null);W.useEffect(()=>{f()},[]);const f=async()=>{try{r(!0);const{data:_}=await Dt.get("/fundraisers");o(_),a(null)}catch(_){const E="Failed to fetch fundraisers";a(E),Lr(_,E)}finally{r(!1)}},N=async _=>{if(window.confirm("Are you sure you want to delete this fundraiser?"))try{r(!0),await Dt.delete(`/fundraisers/${_}`),Gn("Fundraiser deleted successfully"),f()}catch(E){Lr(E,"Failed to delete fundraiser")}finally{r(!1)}},y=_=>new Date(_).toLocaleDateString(),j=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(_),x=_=>{e(`/fundraisers/${_}/edit`)},w=s.filter(_=>{const E=_.title.toLowerCase().includes(l.toLowerCase())||_.description.toLowerCase().includes(l.toLowerCase()),A=d==="all"||_.status===d;return E&&A});return i.jsx(tl,{title:"Fundraiser Manager",loading:t,error:n,children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Active Fundraisers"}),i.jsx(Rr,{onClick:()=>e("/fundraisers/create"),children:"Create New Fundraiser"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(_=>i.jsx(pa,{title:_.title,description:_.description,children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Goal:"}),i.jsx("span",{className:"font-medium",children:j(_.goal_amount)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Status:"}),i.jsx("span",{className:`font-medium ${_.status==="active"?"text-green-600":_.status==="completed"?"text-blue-600":"text-gray-600"}`,children:_.status.charAt(0).toUpperCase()+_.status.slice(1)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Dates:"}),i.jsxs("span",{className:"font-medium",children:[y(_.start_date)," - ",y(_.end_date)]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(Rr,{variant:"outline",onClick:()=>x(_.id),children:"Edit"}),i.jsx(Rr,{variant:"danger",onClick:()=>N(_.id),children:"Delete"})]})]})},_.id))}),w.length===0&&!t&&i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-500",children:"No fundraisers found"})}),m&&i.jsxs("div",{className:"mt-8",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Fundraiser Details"}),i.jsx(x7,{fundraiserId:m.id}),i.jsx(w7,{fundraiserId:m.id}),i.jsx(N7,{fundraiserId:m.id})]})]})})}function eg({label:e,error:t,options:r=[],className:n="",...a}){return i.jsxs("div",{className:"space-y-1",children:[e&&i.jsx("label",{htmlFor:a.id,className:"block text-sm font-medium text-gray-700",children:e}),i.jsx("select",{className:`
          block w-full rounded-lg
          border-gray-300 shadow-sm
          focus:border-blue-500 focus:ring-blue-500
          disabled:bg-gray-100 disabled:cursor-not-allowed
          ${t?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
          ${n}
        `,...a,children:r.map(s=>i.jsx("option",{value:s.value,children:s.label},s.value))}),t&&i.jsx("p",{className:"text-sm text-red-600",children:t})]})}function S7(){const e=Xr(),{id:t}=zo(),[r,n]=W.useState(!0),[a,s]=W.useState(null),[o,l]=W.useState({title:"",description:"",goal_amount:"",category_id:"",start_date:"",end_date:"",status:"draft",visibility:"public"}),c=[{value:"draft",label:"Draft"},{value:"active",label:"Active"},{value:"paused",label:"Paused"},{value:"completed",label:"Completed"}],d=[{value:"public",label:"Public"},{value:"private",label:"Private"}];W.useEffect(()=>{t?p():n(!1)},[t]);const p=async()=>{try{n(!0);const{data:f}=await Dt.get(`/fundraisers/${t}`);l(f),s(null)}catch(f){const N="Failed to fetch fundraiser details";s(N),Lr(f,N)}finally{n(!1)}},m=async f=>{f.preventDefault();try{n(!0),t?(await Dt.put(`/fundraisers/${t}`,o),Gn("Fundraiser updated successfully")):(await Dt.post("/fundraisers",o),Gn("Fundraiser created successfully")),e("/fundraisers")}catch(N){Lr(N,t?"Failed to update fundraiser":"Failed to create fundraiser")}finally{n(!1)}},g=f=>{const{name:N,value:y}=f.target;l(j=>({...j,[N]:y}))};return i.jsx(tl,{title:t?"Edit Fundraiser":"Create Fundraiser",loading:r,error:a,children:i.jsxs("form",{onSubmit:m,className:"max-w-2xl mx-auto space-y-6",children:[i.jsx(Ir,{label:"Title",id:"title",name:"title",value:o.title,onChange:g,required:!0}),i.jsx(Ir,{label:"Description",id:"description",name:"description",value:o.description,onChange:g,required:!0,as:"textarea",rows:4}),i.jsx(Ir,{label:"Goal Amount",id:"goal_amount",name:"goal_amount",type:"number",value:o.goal_amount,onChange:g,required:!0,min:"0",step:"0.01"}),i.jsx(Ir,{label:"Category",id:"category_id",name:"category_id",value:o.category_id,onChange:g}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(Ir,{label:"Start Date",id:"start_date",name:"start_date",type:"date",value:o.start_date,onChange:g,required:!0}),i.jsx(Ir,{label:"End Date",id:"end_date",name:"end_date",type:"date",value:o.end_date,onChange:g,required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(eg,{label:"Status",id:"status",name:"status",value:o.status,onChange:g,required:!0,options:c}),i.jsx(eg,{label:"Visibility",id:"visibility",name:"visibility",value:o.visibility,onChange:g,required:!0,options:d})]}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx(Rr,{type:"button",variant:"outline",onClick:()=>e("/fundraisers"),children:"Cancel"}),i.jsxs(Rr,{type:"submit",isLoading:r,children:[t?"Update":"Create"," Fundraiser"]})]})]})})}function _7(){const[e,t]=W.useState([]),[r,n]=W.useState("");W.useEffect(()=>{async function l(){const{data:{session:c}}=await Ue.auth.getSession();if(!(c!=null&&c.access_token)){n("Authentication required.");return}try{const d=await fetch("/api/budgets",{headers:{Authorization:`Bearer ${c.access_token}`}}),p=await d.json();d.ok?t(p):n(p.error||"Failed to load transactions.")}catch(d){console.error("Budget fetch error:",d),n("Error connecting to the server.")}}l()},[]);const a=e.filter(l=>l.type==="income").reduce((l,c)=>l+parseFloat(c.amount||0),0),s=e.filter(l=>l.type==="expense").reduce((l,c)=>l+parseFloat(c.amount||0),0),o=a-s;return i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"PTO Budget Overview"}),i.jsx(ma,{to:"/budget/create",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ Add Entry"})]}),i.jsxs("div",{className:"mb-6 p-4 border rounded bg-gray-100",children:[i.jsxs("p",{className:"text-lg font-semibold",children:["Current Balance: $",o.toFixed(2)]}),i.jsxs("p",{className:"text-sm text-green-700",children:["Total Income: $",a.toFixed(2)]}),i.jsxs("p",{className:"text-sm text-red-700",children:["Total Expenses: $",s.toFixed(2)]})]}),r&&i.jsx("p",{className:"text-red-600",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No budget entries found."}),i.jsx("ul",{className:"space-y-4",children:e.map(l=>i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold",children:l.label}),i.jsxs("span",{className:l.type==="income"?"text-green-600":"text-red-600",children:[l.type==="income"?"+":"-","$",parseFloat(l.amount).toFixed(2)]})]}),i.jsx("p",{className:"text-sm text-gray-500",children:l.category||"Uncategorized"}),l.related_event_id&&i.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Event ID: ",l.related_event_id]})]},l.id))})]})}const A7=()=>{const e=Xr(),[t,r]=W.useState("overview"),[n,a]=W.useState("manual"),[s,o]=W.useState("current"),l={totalBudget:45e3,totalSpent:28500,totalRemaining:16500,projectedIncome:52e3,categories:[{id:1,name:"Events & Programs",budgeted:15e3,spent:8500,remaining:6500,percentage:57,trend:"up",createdBy:"stella",subcategories:[{name:"Fall Festival",budgeted:5e3,spent:3200},{name:"Science Night",budgeted:3e3,spent:1800},{name:"Book Fair",budgeted:4e3,spent:2500},{name:"Art Show",budgeted:3e3,spent:1e3}]},{id:2,name:"Educational Support",budgeted:12e3,spent:7200,remaining:4800,percentage:60,trend:"stable",createdBy:"manual",subcategories:[{name:"Classroom Supplies",budgeted:6e3,spent:4200},{name:"Technology",budgeted:4e3,spent:2e3},{name:"Library Books",budgeted:2e3,spent:1e3}]},{id:3,name:"Communications",budgeted:3e3,spent:1800,remaining:1200,percentage:60,trend:"down",createdBy:"stella",subcategories:[{name:"Website & Digital",budgeted:1500,spent:800},{name:"Print Materials",budgeted:1e3,spent:700},{name:"Social Media",budgeted:500,spent:300}]},{id:4,name:"Administrative",budgeted:5e3,spent:3200,remaining:1800,percentage:64,trend:"up",createdBy:"manual",subcategories:[{name:"Insurance",budgeted:2e3,spent:2e3},{name:"Banking & Fees",budgeted:1e3,spent:600},{name:"Office Supplies",budgeted:2e3,spent:600}]}],recentTransactions:[{id:1,date:"2024-10-15",description:"Fall Festival Decorations",category:"Events & Programs",amount:-450,type:"expense",createdBy:"stella"},{id:2,date:"2024-10-14",description:"Book Fair Revenue",category:"Events & Programs",amount:2800,type:"income",createdBy:"manual"},{id:3,date:"2024-10-12",description:"Classroom Technology",category:"Educational Support",amount:-1200,type:"expense",createdBy:"manual"}]},c=()=>{e("/budget/create")},d=()=>{e("/communications/ai?context=budget&mode=assisted")},p=()=>{e("/ai-workflow-orchestrator?context=budget&mode=automated")},m=A=>{e(`/budget/create?category=${A}&mode=view`)},g=A=>{e(`/budget/create?category=${A}&mode=edit`)},f=A=>{e(`/budget/create?category=${A}&mode=optimize`)},N=()=>{e("/budget/create?mode=reallocation")},y=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Lg,{className:"w-6 h-6 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-gray-900",children:"Total Budget"})]})}),i.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:["$",l.totalBudget.toLocaleString()]}),i.jsx("div",{className:"text-sm text-gray-600",children:"For current fiscal year"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(u2,{className:"w-6 h-6 text-red-600"}),i.jsx("h3",{className:"font-semibold text-gray-900",children:"Total Spent"})]})}),i.jsxs("div",{className:"text-3xl font-bold text-red-600 mb-2",children:["$",l.totalSpent.toLocaleString()]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[Math.round(l.totalSpent/l.totalBudget*100),"% of budget used"]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Dg,{className:"w-6 h-6 text-green-600"}),i.jsx("h3",{className:"font-semibold text-gray-900",children:"Remaining"})]})}),i.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:["$",l.totalRemaining.toLocaleString()]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Available for spending"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(d2,{className:"w-6 h-6 text-purple-600"}),i.jsx("h3",{className:"font-semibold text-gray-900",children:"Projected Income"})]})}),i.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:["$",l.projectedIncome.toLocaleString()]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Expected total revenue"})]})]}),j=()=>i.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(xr,{className:"w-6 h-6 text-purple-600"}),i.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Stella's Budget Insights"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Budget Health"}),i.jsx("div",{className:"text-lg font-semibold text-green-700",children:"Excellent"}),i.jsx("div",{className:"text-xs text-purple-700",children:"On track for surplus"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Biggest Opportunity"}),i.jsx("div",{className:"text-lg font-semibold text-purple-900",children:"Fall Festival"}),i.jsx("div",{className:"text-xs text-purple-700",children:"Could generate $2K more"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Cost Savings"}),i.jsx("div",{className:"text-lg font-semibold text-purple-900",children:"$1,200 Found"}),i.jsx("div",{className:"text-xs text-purple-700",children:"In administrative costs"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-900 font-medium mb-2",children:"💡 Stella's Recommendation"}),i.jsx("div",{className:"text-sm text-purple-800",children:'"Your Events & Programs category is performing well! Consider reallocating $1,000 from Administrative to Educational Support to maximize impact on students. I can create a reallocation plan for you."'}),i.jsx("button",{onClick:N,className:"mt-3 px-4 py-2 bg-purple-600 text-white rounded-lg text-sm hover:bg-purple-700 transition-colors",children:"Let Stella Create Reallocation Plan"})]})]}),x=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Budget Categories"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Manual Entry"}),i.jsx("button",{className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Ask Stella"})]})]}),i.jsx("div",{className:"space-y-6",children:l.categories.map(A=>{const B=A.spent/A.budgeted*100,T=B>100;return i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:A.name}),A.createdBy==="stella"&&i.jsx(xr,{className:"w-4 h-4 text-purple-500",title:"Optimized by Stella"}),i.jsxs("div",{className:`flex items-center space-x-1 text-sm ${A.trend==="up"?"text-green-600":A.trend==="down"?"text-red-600":"text-gray-600"}`,children:[A.trend==="up"&&i.jsx(Hf,{className:"w-4 h-4"}),A.trend==="down"&&i.jsx(Gf,{className:"w-4 h-4"}),i.jsx("span",{className:"capitalize",children:A.trend})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",A.spent.toLocaleString()," / $",A.budgeted.toLocaleString()]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["$",A.remaining.toLocaleString()," remaining"]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600",children:"Progress"}),i.jsxs("span",{className:`font-medium ${T?"text-red-600":"text-gray-900"}`,children:[Math.round(B),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:i.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${T?"bg-red-500":"bg-blue-600"}`,style:{width:`${Math.min(B,100)}%`}})})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:A.subcategories.map((C,$)=>i.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.name}),i.jsxs("div",{className:"text-xs text-gray-600",children:["$",C.spent.toLocaleString()," / $",C.budgeted.toLocaleString()]})]},$))}),i.jsxs("div",{className:"flex space-x-2 mt-4",children:[i.jsxs("button",{onClick:()=>m(A.id),className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[i.jsx(_o,{className:"w-4 h-4 mr-2"}),"View Details"]}),i.jsxs("button",{onClick:()=>g(A.id),className:"flex items-center px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:[i.jsx(mc,{className:"w-4 h-4 mr-2"}),"Edit"]}),A.createdBy==="manual"&&i.jsxs("button",{onClick:()=>f(A.id),className:"flex items-center px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[i.jsx(xr,{className:"w-4 h-4 mr-2"}),"Ask Stella to Optimize"]})]})]},A.id)})})]}),w=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(h2,{className:"w-6 h-6 text-indigo-600"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Monthly Reconciliation"})]}),i.jsxs("button",{onClick:()=>e("/budget/reconciliation"),className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx(f2,{className:"w-4 h-4 mr-2"}),"View All Reconciliations"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"border-2 border-indigo-200 rounded-lg p-6 hover:border-indigo-400 transition-colors bg-indigo-50",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(p2,{className:"w-8 h-8 text-indigo-600"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-indigo-900",children:"Start New Reconciliation"}),i.jsx("p",{className:"text-sm text-indigo-700",children:"Upload bank statement and reconcile transactions"})]})]}),i.jsxs("ul",{className:"text-sm text-indigo-700 space-y-2 mb-4",children:[i.jsx("li",{children:"• OCR bank statement processing"}),i.jsx("li",{children:"• Smart transaction matching"}),i.jsx("li",{children:"• Automated discrepancy detection"}),i.jsx("li",{children:"• Generate reconciliation reports"})]}),i.jsx("button",{onClick:()=>e("/budget/reconciliation/new"),className:"w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Start Reconciliation"})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Recent Reconciliations"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-green-900",children:"October 2024"}),i.jsx("div",{className:"text-sm text-green-700",children:"Completed • 98% match rate"})]}),i.jsx(kg,{className:"w-5 h-5 text-green-600"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-yellow-900",children:"November 2024"}),i.jsx("div",{className:"text-sm text-yellow-700",children:"In Progress • 3 discrepancies"})]}),i.jsx(m2,{className:"w-5 h-5 text-yellow-600"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"December 2024"}),i.jsx("div",{className:"text-sm text-gray-700",children:"Pending • Not started"})]}),i.jsx(ds,{className:"w-5 h-5 text-gray-600"})]})]}),i.jsx("button",{onClick:()=>e("/budget/reconciliation"),className:"w-full mt-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:"View Reconciliation History"})]})]}),i.jsxs("div",{className:"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx(xr,{className:"w-5 h-5 text-indigo-600"}),i.jsx("span",{className:"font-medium text-indigo-900",children:"Reconciliation Insights"})]}),i.jsx("div",{className:"text-sm text-indigo-800",children:"Your reconciliation accuracy has improved by 15% this quarter. Consider setting up automated monthly reconciliations to maintain financial accuracy and save time."})]})]}),_=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create New Budget Item"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(g2,{className:"w-8 h-8 text-gray-600"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:"Manual Entry"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Full control over details"})]})]}),i.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 mb-4",children:[i.jsx("li",{children:"• Custom categories"}),i.jsx("li",{children:"• Detailed line items"}),i.jsx("li",{children:"• Manual calculations"})]}),i.jsx("button",{onClick:c,className:"w-full py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Create Manually"})]}),i.jsxs("div",{className:"border-2 border-blue-200 rounded-lg p-6 hover:border-blue-400 transition-colors bg-blue-50",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(xr,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-blue-900",children:"Stella Assisted"}),i.jsx("p",{className:"text-sm text-blue-700",children:"Smart suggestions & validation"})]})]}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-2 mb-4",children:[i.jsx("li",{children:"• Budget recommendations"}),i.jsx("li",{children:"• Historical comparisons"}),i.jsx("li",{children:"• Optimization suggestions"})]}),i.jsx("button",{onClick:d,className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Get Stella's Help"})]}),i.jsxs("div",{className:"border-2 border-purple-200 rounded-lg p-6 hover:border-purple-400 transition-colors bg-purple-50",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(xr,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-purple-900",children:"Stella Auto-Generate"}),i.jsx("p",{className:"text-sm text-purple-700",children:"Complete budget creation"})]})]}),i.jsxs("ul",{className:"text-sm text-purple-700 space-y-2 mb-4",children:[i.jsx("li",{children:"• AI-powered allocations"}),i.jsx("li",{children:"• Predictive modeling"}),i.jsx("li",{children:"• Optimization algorithms"})]}),i.jsx("button",{onClick:p,className:"w-full py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Let Stella Generate"})]})]})]}),E=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Recent Transactions"}),i.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(Og,{className:"w-4 h-4 mr-2"}),"Export"]})]}),i.jsx("div",{className:"space-y-4",children:l.recentTransactions.map(A=>i.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${A.type==="income"?"bg-green-100":"bg-red-100"}`,children:A.type==="income"?i.jsx(Hf,{className:"w-5 h-5 text-green-600"}):i.jsx(Gf,{className:"w-5 h-5 text-red-600"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:A.description}),A.createdBy==="stella"&&i.jsx(xr,{className:"w-4 h-4 text-purple-500",title:"Processed by Stella"})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[A.category," • ",new Date(A.date).toLocaleDateString()]})]})]}),i.jsxs("div",{className:`text-lg font-semibold ${A.type==="income"?"text-green-600":"text-red-600"}`,children:[A.type==="income"?"+":"","$",Math.abs(A.amount).toLocaleString()]})]},A.id))})]});return i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Budget Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"Manage your PTO finances with Stella's intelligent insights"})]}),i.jsx("div",{className:"flex items-center space-x-3",children:i.jsxs("select",{value:s,onChange:A=>o(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"current",children:"Current Year"}),i.jsx("option",{value:"previous",children:"Previous Year"}),i.jsx("option",{value:"quarter",children:"This Quarter"})]})})]}),i.jsx(y,{}),i.jsx(j,{}),i.jsx(w,{}),i.jsx(_,{}),i.jsx(x,{}),i.jsx(E,{})]})})};function E7(){const[e,t]=W.useState({label:"",amount:"",category:"",type:"expense",related_event_id:""}),[r,n]=W.useState(""),[a,s]=W.useState(""),o=c=>{const{name:d,value:p}=c.target;t(m=>({...m,[d]:p}))},l=async c=>{c.preventDefault(),s(""),n("");const{data:{session:d}}=await Ue.auth.getSession();if(!(d!=null&&d.access_token)){s("Authentication required.");return}try{const p=await fetch("/api/budgets",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.access_token}`},body:JSON.stringify(e)}),m=await p.json();p.ok?(n("Budget entry added successfully!"),t({label:"",amount:"",category:"",type:"expense",related_event_id:""})):s(m.error||"Submission failed.")}catch(p){console.error("Budget entry error:",p),s("Server error. Please try again.")}};return i.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add Budget Entry"}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsx("input",{name:"label",value:e.label,onChange:o,placeholder:"Label",className:"w-full border p-2",required:!0}),i.jsx("input",{type:"number",name:"amount",value:e.amount,onChange:o,placeholder:"Amount",className:"w-full border p-2",required:!0}),i.jsx("input",{name:"category",value:e.category,onChange:o,placeholder:"Category (e.g., supplies, venue)",className:"w-full border p-2"}),i.jsxs("select",{name:"type",value:e.type,onChange:o,className:"w-full border p-2",children:[i.jsx("option",{value:"expense",children:"Expense"}),i.jsx("option",{value:"income",children:"Income"})]}),i.jsx("input",{name:"related_event_id",value:e.related_event_id,onChange:o,placeholder:"Related Event ID (optional)",className:"w-full border p-2"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:"Save Entry"}),r&&i.jsx("p",{className:"text-green-600",children:r}),a&&i.jsx("p",{className:"text-red-600",children:a})]})]})}const C7=()=>i.jsxs("div",{children:[i.jsx("h1",{children:"Reconciliation Dashboard"}),i.jsx("p",{children:"This is a placeholder for the Reconciliation Dashboard."})]});function L7({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const D7=W.forwardRef(L7);function P7({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"}))}const tg=W.forwardRef(P7);function k7({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const lh=W.forwardRef(k7);function O7({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const T7=W.forwardRef(O7);function M7({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const I7=W.forwardRef(M7);function R7({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const F7=W.forwardRef(R7);function $7({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const B7=W.forwardRef($7);function q7({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const z7=W.forwardRef(q7);function U7({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const W7=W.forwardRef(U7);function H7({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Hv=W.forwardRef(H7),fc={startReconciliation:async e=>{var t,r,n,a,s,o,l,c,d,p;console.log("🔍 [FRONTEND DEBUG] startReconciliation called with data:",e);try{console.log("🔍 [FRONTEND DEBUG] Making API call to /budget/reconciliation/start");const m=await Dt.post("/budget/reconciliation/start",e);console.log("🔍 [FRONTEND DEBUG] API response received:",{status:m.status,statusText:m.statusText,data:m.data});const g={success:m.data.success,data:m.data.data,error:((r=(t=m.data.errors)==null?void 0:t[0])==null?void 0:r.message)||null};return console.log("🔍 [FRONTEND DEBUG] Processed result:",g),g}catch(m){console.error("❌ [FRONTEND DEBUG] Error starting reconciliation:",m),console.error("❌ [FRONTEND DEBUG] Error response:",m.response),console.error("❌ [FRONTEND DEBUG] Error response data:",(n=m.response)==null?void 0:n.data),console.error("❌ [FRONTEND DEBUG] Error response status:",(a=m.response)==null?void 0:a.status);const g=((c=(l=(o=(s=m.response)==null?void 0:s.data)==null?void 0:o.errors)==null?void 0:l[0])==null?void 0:c.message)||((p=(d=m.response)==null?void 0:d.data)==null?void 0:p.error)||m.message;return console.error("❌ [FRONTEND DEBUG] Final error message:",g),{success:!1,error:g}}},getReconciliations:async()=>{var e,t,r,n,a,s;try{const o=await Dt.get("/budget/reconciliation");return{success:o.data.success,data:o.data.data,error:((t=(e=o.data.errors)==null?void 0:e[0])==null?void 0:t.message)||null}}catch(o){return console.error("Error fetching reconciliations:",o),{success:!1,error:((s=(a=(n=(r=o.response)==null?void 0:r.data)==null?void 0:n.errors)==null?void 0:a[0])==null?void 0:s.message)||o.message}}},uploadStatement:async(e,t)=>{var r,n,a,s,o,l;try{const c=await Dt.post(`/budget/reconciliation/${e}/upload`,t);return{success:c.data.success,data:c.data.data,error:((n=(r=c.data.errors)==null?void 0:r[0])==null?void 0:n.message)||null}}catch(c){return console.error("Error uploading statement:",c),{success:!1,error:((l=(o=(s=(a=c.response)==null?void 0:a.data)==null?void 0:s.errors)==null?void 0:o[0])==null?void 0:l.message)||c.message}}},getTransactions:async e=>{var t,r,n,a,s,o;try{const l=await Dt.get(`/budget/reconciliation/${e}/transactions`);return{success:l.data.success,data:l.data.data,error:((r=(t=l.data.errors)==null?void 0:t[0])==null?void 0:r.message)||null}}catch(l){return console.error("Error fetching transactions:",l),{success:!1,error:((o=(s=(a=(n=l.response)==null?void 0:n.data)==null?void 0:a.errors)==null?void 0:s[0])==null?void 0:o.message)||l.message}}},matchTransaction:async(e,t)=>{var r,n,a,s,o,l;try{const c=await Dt.post(`/budget/reconciliation/${e}/match`,{bank_transaction_id:t.bankTransactionId,expense_id:t.expenseId});return{success:c.data.success,data:c.data.data,error:((n=(r=c.data.errors)==null?void 0:r[0])==null?void 0:n.message)||null}}catch(c){return console.error("Error matching transaction:",c),{success:!1,error:((l=(o=(s=(a=c.response)==null?void 0:a.data)==null?void 0:s.errors)==null?void 0:o[0])==null?void 0:l.message)||c.message}}},completeReconciliation:async e=>{var t,r,n,a,s,o;try{const l=await Dt.post(`/budget/reconciliation/${e}/complete`);return{success:l.data.success,data:l.data.data,error:((r=(t=l.data.errors)==null?void 0:t[0])==null?void 0:r.message)||null}}catch(l){return console.error("Error completing reconciliation:",l),{success:!1,error:((o=(s=(a=(n=l.response)==null?void 0:n.data)==null?void 0:a.errors)==null?void 0:s[0])==null?void 0:o.message)||l.message}}},generateReport:async e=>{var t,r,n,a,s,o;try{const l=await Dt.get(`/budget/reconciliation/${e}/report`);return{success:l.data.success,data:l.data.data,error:((r=(t=l.data.errors)==null?void 0:t[0])==null?void 0:r.message)||null}}catch(l){return console.error("Error generating report:",l),{success:!1,error:((o=(s=(a=(n=l.response)==null?void 0:n.data)==null?void 0:a.errors)==null?void 0:s[0])==null?void 0:o.message)||l.message}}}};var G7={exports:{}};(function(e){var t=function(r){var n=Object.prototype,a=n.hasOwnProperty,s=Object.defineProperty||function(Y,X,ce){Y[X]=ce.value},o,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",d=l.asyncIterator||"@@asyncIterator",p=l.toStringTag||"@@toStringTag";function m(Y,X,ce){return Object.defineProperty(Y,X,{value:ce,enumerable:!0,configurable:!0,writable:!0}),Y[X]}try{m({},"")}catch{m=function(X,ce,P){return X[ce]=P}}function g(Y,X,ce,P){var q=X&&X.prototype instanceof _?X:_,V=Object.create(q.prototype),Z=new te(P||[]);return s(V,"_invoke",{value:D(Y,ce,Z)}),V}r.wrap=g;function f(Y,X,ce){try{return{type:"normal",arg:Y.call(X,ce)}}catch(P){return{type:"throw",arg:P}}}var N="suspendedStart",y="suspendedYield",j="executing",x="completed",w={};function _(){}function E(){}function A(){}var B={};m(B,c,function(){return this});var T=Object.getPrototypeOf,C=T&&T(T(re([])));C&&C!==n&&a.call(C,c)&&(B=C);var $=A.prototype=_.prototype=Object.create(B);E.prototype=A,s($,"constructor",{value:A,configurable:!0}),s(A,"constructor",{value:E,configurable:!0}),E.displayName=m(A,p,"GeneratorFunction");function H(Y){["next","throw","return"].forEach(function(X){m(Y,X,function(ce){return this._invoke(X,ce)})})}r.isGeneratorFunction=function(Y){var X=typeof Y=="function"&&Y.constructor;return X?X===E||(X.displayName||X.name)==="GeneratorFunction":!1},r.mark=function(Y){return Object.setPrototypeOf?Object.setPrototypeOf(Y,A):(Y.__proto__=A,m(Y,p,"GeneratorFunction")),Y.prototype=Object.create($),Y},r.awrap=function(Y){return{__await:Y}};function L(Y,X){function ce(V,Z,se,de){var fe=f(Y[V],Y,Z);if(fe.type==="throw")de(fe.arg);else{var ge=fe.arg,Ae=ge.value;return Ae&&typeof Ae=="object"&&a.call(Ae,"__await")?X.resolve(Ae.__await).then(function(Se){ce("next",Se,se,de)},function(Se){ce("throw",Se,se,de)}):X.resolve(Ae).then(function(Se){ge.value=Se,se(ge)},function(Se){return ce("throw",Se,se,de)})}}var P;function q(V,Z){function se(){return new X(function(de,fe){ce(V,Z,de,fe)})}return P=P?P.then(se,se):se()}s(this,"_invoke",{value:q})}H(L.prototype),m(L.prototype,d,function(){return this}),r.AsyncIterator=L,r.async=function(Y,X,ce,P,q){q===void 0&&(q=Promise);var V=new L(g(Y,X,ce,P),q);return r.isGeneratorFunction(X)?V:V.next().then(function(Z){return Z.done?Z.value:V.next()})};function D(Y,X,ce){var P=N;return function(V,Z){if(P===j)throw new Error("Generator is already running");if(P===x){if(V==="throw")throw Z;return Q()}for(ce.method=V,ce.arg=Z;;){var se=ce.delegate;if(se){var de=F(se,ce);if(de){if(de===w)continue;return de}}if(ce.method==="next")ce.sent=ce._sent=ce.arg;else if(ce.method==="throw"){if(P===N)throw P=x,ce.arg;ce.dispatchException(ce.arg)}else ce.method==="return"&&ce.abrupt("return",ce.arg);P=j;var fe=f(Y,X,ce);if(fe.type==="normal"){if(P=ce.done?x:y,fe.arg===w)continue;return{value:fe.arg,done:ce.done}}else fe.type==="throw"&&(P=x,ce.method="throw",ce.arg=fe.arg)}}}function F(Y,X){var ce=X.method,P=Y.iterator[ce];if(P===o)return X.delegate=null,ce==="throw"&&Y.iterator.return&&(X.method="return",X.arg=o,F(Y,X),X.method==="throw")||ce!=="return"&&(X.method="throw",X.arg=new TypeError("The iterator does not provide a '"+ce+"' method")),w;var q=f(P,Y.iterator,X.arg);if(q.type==="throw")return X.method="throw",X.arg=q.arg,X.delegate=null,w;var V=q.arg;if(!V)return X.method="throw",X.arg=new TypeError("iterator result is not an object"),X.delegate=null,w;if(V.done)X[Y.resultName]=V.value,X.next=Y.nextLoc,X.method!=="return"&&(X.method="next",X.arg=o);else return V;return X.delegate=null,w}H($),m($,p,"Generator"),m($,c,function(){return this}),m($,"toString",function(){return"[object Generator]"});function U(Y){var X={tryLoc:Y[0]};1 in Y&&(X.catchLoc=Y[1]),2 in Y&&(X.finallyLoc=Y[2],X.afterLoc=Y[3]),this.tryEntries.push(X)}function ee(Y){var X=Y.completion||{};X.type="normal",delete X.arg,Y.completion=X}function te(Y){this.tryEntries=[{tryLoc:"root"}],Y.forEach(U,this),this.reset(!0)}r.keys=function(Y){var X=Object(Y),ce=[];for(var P in X)ce.push(P);return ce.reverse(),function q(){for(;ce.length;){var V=ce.pop();if(V in X)return q.value=V,q.done=!1,q}return q.done=!0,q}};function re(Y){if(Y){var X=Y[c];if(X)return X.call(Y);if(typeof Y.next=="function")return Y;if(!isNaN(Y.length)){var ce=-1,P=function q(){for(;++ce<Y.length;)if(a.call(Y,ce))return q.value=Y[ce],q.done=!1,q;return q.value=o,q.done=!0,q};return P.next=P}}return{next:Q}}r.values=re;function Q(){return{value:o,done:!0}}return te.prototype={constructor:te,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(ee),!Y)for(var X in this)X.charAt(0)==="t"&&a.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=o)},stop:function(){this.done=!0;var Y=this.tryEntries[0],X=Y.completion;if(X.type==="throw")throw X.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var X=this;function ce(de,fe){return V.type="throw",V.arg=Y,X.next=de,fe&&(X.method="next",X.arg=o),!!fe}for(var P=this.tryEntries.length-1;P>=0;--P){var q=this.tryEntries[P],V=q.completion;if(q.tryLoc==="root")return ce("end");if(q.tryLoc<=this.prev){var Z=a.call(q,"catchLoc"),se=a.call(q,"finallyLoc");if(Z&&se){if(this.prev<q.catchLoc)return ce(q.catchLoc,!0);if(this.prev<q.finallyLoc)return ce(q.finallyLoc)}else if(Z){if(this.prev<q.catchLoc)return ce(q.catchLoc,!0)}else if(se){if(this.prev<q.finallyLoc)return ce(q.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Y,X){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var P=this.tryEntries[ce];if(P.tryLoc<=this.prev&&a.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var q=P;break}}q&&(Y==="break"||Y==="continue")&&q.tryLoc<=X&&X<=q.finallyLoc&&(q=null);var V=q?q.completion:{};return V.type=Y,V.arg=X,q?(this.method="next",this.next=q.finallyLoc,w):this.complete(V)},complete:function(Y,X){if(Y.type==="throw")throw Y.arg;return Y.type==="break"||Y.type==="continue"?this.next=Y.arg:Y.type==="return"?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):Y.type==="normal"&&X&&(this.next=X),w},finish:function(Y){for(var X=this.tryEntries.length-1;X>=0;--X){var ce=this.tryEntries[X];if(ce.finallyLoc===Y)return this.complete(ce.completion,ce.afterLoc),ee(ce),w}},catch:function(Y){for(var X=this.tryEntries.length-1;X>=0;--X){var ce=this.tryEntries[X];if(ce.tryLoc===Y){var P=ce.completion;if(P.type==="throw"){var q=P.arg;ee(ce)}return q}}throw new Error("illegal catch attempt")},delegateYield:function(Y,X,ce){return this.delegate={iterator:re(Y),resultName:X,nextLoc:ce},this.method==="next"&&(this.arg=o),w}},r}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(G7);var uf=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`;const V7=uf;let rg=0;var Gv=({id:e,action:t,payload:r={}})=>{let n=e;return typeof n>"u"&&(n=V7("Job",rg),rg+=1),{id:n,action:t,payload:r}},Oi={};let df=!1;Oi.logging=df;Oi.setLogging=e=>{df=e};Oi.log=(...e)=>df?console.log.apply(void 0,e):null;const Y7=Gv,{log:rc}=Oi,K7=uf;let ng=0;var X7=()=>{const e=K7("Scheduler",ng),t={},r={};let n=[];ng+=1;const a=()=>n.length,s=()=>Object.keys(t).length,o=()=>{if(n.length!==0){const m=Object.keys(t);for(let g=0;g<m.length;g+=1)if(typeof r[m[g]]>"u"){n[0](t[m[g]]);break}}},l=(m,g)=>new Promise((f,N)=>{const y=Y7({action:m,payload:g});n.push(async j=>{n.shift(),r[j.id]=y;try{f(await j[m].apply(void 0,[...g,y.id]))}catch(x){N(x)}finally{delete r[j.id],o()}}),rc(`[${e}]: Add ${y.id} to JobQueue`),rc(`[${e}]: JobQueue length=${n.length}`),o()});return{addWorker:m=>(t[m.id]=m,rc(`[${e}]: Add ${m.id}`),rc(`[${e}]: Number of workers=${s()}`),o(),m.id),addJob:async(m,...g)=>{if(s()===0)throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return l(m,g)},terminate:async()=>{Object.keys(t).forEach(async m=>{await t[m].terminate()}),n=[]},getQueueLen:a,getNumWorkers:s}};function J7(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Z7=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof J7=="function"&&(t.type="node"),typeof e>"u"?t:t[e]};const Q7=Z7("type")==="browser",eT=Q7?e=>new URL(e,window.location.href).href:e=>e;var tT=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach(r=>{e[r]&&(t[r]=eT(t[r]))}),t},Vv={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const rT="6.0.1",nT={version:rT};var aT={workerBlobURL:!0,logger:()=>{}};const sT=nT.version,iT=aT;var oT={...iT,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${sT}/dist/worker.min.js`},lT=({workerPath:e,workerBlobURL:t})=>{let r;if(Blob&&URL&&t){const n=new Blob([`importScripts("${e}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(n))}else r=new Worker(e);return r},cT=e=>{e.terminate()},uT=(e,t)=>{e.onmessage=({data:r})=>{t(r)}},dT=async(e,t)=>{e.postMessage(t)};const jd=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=({target:{error:{code:a}}})=>{r(Error(`File could not be read! Code=${a}`))},n.readAsArrayBuffer(e)}),ch=async e=>{let t=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(t=await ch(e.src)),e.tagName==="VIDEO"&&(t=await ch(e.poster)),e.tagName==="CANVAS"&&await new Promise(r=>{e.toBlob(async n=>{t=await jd(n),r()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const r=await e.convertToBlob();t=await jd(r)}else(e instanceof File||e instanceof Blob)&&(t=await jd(e));return new Uint8Array(t)};var hT=ch;const fT=oT,pT=lT,mT=cT,gT=uT,vT=dT,bT=hT;var yT={defaultOptions:fT,spawnWorker:pT,terminateWorker:mT,onMessage:gT,send:vT,loadImage:bT};const xT=tT,qn=Gv,{log:ag}=Oi,wT=uf,ss=Vv,{defaultOptions:NT,spawnWorker:jT,terminateWorker:ST,onMessage:_T,loadImage:sg,send:AT}=yT;let ig=0;var Yv=async(e="eng",t=ss.LSTM_ONLY,r={},n={})=>{const a=wT("Worker",ig),{logger:s,errorHandler:o,...l}=xT({...NT,...r}),c={},d=typeof e=="string"?e.split("+"):e;let p=t,m=n;const g=[ss.DEFAULT,ss.LSTM_ONLY].includes(t)&&!l.legacyCore;let f,N;const y=new Promise((re,Q)=>{N=re,f=Q}),j=re=>{f(re.message)};let x=jT(l);x.onerror=j,ig+=1;const w=({id:re,action:Q,payload:Y})=>new Promise((X,ce)=>{ag(`[${a}]: Start ${re}, action=${Q}`);const P=`${Q}-${re}`;c[P]={resolve:X,reject:ce},AT(x,{workerId:a,jobId:re,action:Q,payload:Y})}),_=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),E=re=>w(qn({id:re,action:"load",payload:{options:{lstmOnly:g,corePath:l.corePath,logging:l.logging}}})),A=(re,Q,Y)=>w(qn({id:Y,action:"FS",payload:{method:"writeFile",args:[re,Q]}})),B=(re,Q)=>w(qn({id:Q,action:"FS",payload:{method:"readFile",args:[re,{encoding:"utf8"}]}})),T=(re,Q)=>w(qn({id:Q,action:"FS",payload:{method:"unlink",args:[re]}})),C=(re,Q,Y)=>w(qn({id:Y,action:"FS",payload:{method:re,args:Q}})),$=(re,Q)=>w(qn({id:Q,action:"loadLanguage",payload:{langs:re,options:{langPath:l.langPath,dataPath:l.dataPath,cachePath:l.cachePath,cacheMethod:l.cacheMethod,gzip:l.gzip,lstmOnly:[ss.DEFAULT,ss.LSTM_ONLY].includes(p)&&!l.legacyLang}}})),H=(re,Q,Y,X)=>w(qn({id:X,action:"initialize",payload:{langs:re,oem:Q,config:Y}})),L=(re="eng",Q,Y,X)=>{if(g&&[ss.TESSERACT_ONLY,ss.TESSERACT_LSTM_COMBINED].includes(Q))throw Error("Legacy model requested but code missing.");const ce=Q||p;p=ce;const P=Y||m;m=P;const V=(typeof re=="string"?re.split("+"):re).filter(Z=>!d.includes(Z));return d.push(...V),V.length>0?$(V,X).then(()=>H(re,ce,P,X)):H(re,ce,P,X)},D=(re={},Q)=>w(qn({id:Q,action:"setParameters",payload:{params:re}})),F=async(re,Q={},Y={text:!0},X)=>w(qn({id:X,action:"recognize",payload:{image:await sg(re),options:Q,output:Y}})),U=async(re,Q)=>{if(g)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return w(qn({id:Q,action:"detect",payload:{image:await sg(re)}}))},ee=async()=>(x!==null&&(ST(x),x=null),Promise.resolve());_T(x,({workerId:re,jobId:Q,status:Y,action:X,data:ce})=>{const P=`${X}-${Q}`;if(Y==="resolve")ag(`[${re}]: Complete ${Q}`),c[P].resolve({jobId:Q,data:ce}),delete c[P];else if(Y==="reject")if(c[P].reject(ce),delete c[P],X==="load"&&f(ce),o)o(ce);else throw Error(ce);else Y==="progress"&&s({...ce,userJobId:Q})});const te={id:a,worker:x,load:_,writeText:A,readText:B,removeFile:T,FS:C,reinitialize:L,setParameters:D,recognize:F,detect:U,terminate:ee};return E().then(()=>$(e)).then(()=>H(e,t,n)).then(()=>N(te)).catch(()=>{}),y};const Kv=Yv,ET=async(e,t,r)=>{const n=await Kv(t,1,r);return n.recognize(e).finally(async()=>{await n.terminate()})},CT=async(e,t)=>{const r=await Kv("osd",0,t);return r.detect(e).finally(async()=>{await r.terminate()})};var LT={recognize:ET,detect:CT},DT={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},PT={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const kT=X7,OT=Yv,TT=LT,MT=DT,IT=Vv,RT=PT,{setLogging:FT}=Oi;var $T={languages:MT,OEM:IT,PSM:RT,createScheduler:kT,createWorker:OT,setLogging:FT,...TT};const BT=qr($T);class qT{constructor(){this.worker=null,this.isInitialized=!1}async initialize(){if(!this.isInitialized)try{this.worker=await BT.createWorker("eng"),this.isInitialized=!0,console.log("OCR Worker initialized successfully")}catch(t){throw console.error("Failed to initialize OCR worker:",t),new Error("OCR initialization failed")}}async processImage(t,r=null){this.isInitialized||await this.initialize();try{const n=await this.worker.recognize(t,{logger:r?a=>{a.status==="recognizing text"&&r(Math.round(a.progress*100))}:void 0});return{success:!0,text:n.data.text,confidence:n.data.confidence,words:n.data.words,lines:n.data.lines}}catch(n){return console.error("OCR processing failed:",n),{success:!1,error:n.message}}}async processBankStatement(t,r=null){const n=await this.processImage(t,r);if(!n.success)return n;const a=this.parseTransactions(n.text);return{success:!0,rawText:n.text,confidence:n.confidence,transactions:a,metadata:{totalTransactions:a.length,processingDate:new Date().toISOString()}}}parseTransactions(t){const r=[],n=t.split(`
`).filter(s=>s.trim().length>0),a={date:/(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/,amount:/[\$\-]?(\d{1,3}(?:,\d{3})*\.?\d{0,2})/,debitCredit:/(DEBIT|CREDIT|DR|CR|WITHDRAWAL|DEPOSIT)/i};for(let s=0;s<n.length;s++){const o=n[s].trim();if(this.isHeaderLine(o)||o.length<10)continue;const l=o.match(a.date),c=o.match(new RegExp(a.amount.source,"g"));if(l&&c){const d=c.map(p=>{const m=p.replace(/[\$,]/g,"");return parseFloat(m)}).filter(p=>!isNaN(p)&&p>0);if(d.length>0){const p=Math.max(...d);let m=o.replace(a.date,"").replace(new RegExp(a.amount.source,"g"),"").replace(a.debitCredit,"").trim().replace(/\s+/g," ");m=this.cleanDescription(m),m.length>3&&r.push({id:`ocr_${Date.now()}_${s}`,date:this.parseDate(l[1]),description:m,amount:p,type:this.determineTransactionType(o),rawLine:o,confidence:this.calculateLineConfidence(o)})}}}return r.sort((s,o)=>new Date(o.date)-new Date(s.date))}isHeaderLine(t){const r=["STATEMENT","ACCOUNT","BALANCE","DATE","DESCRIPTION","AMOUNT","TRANSACTION","BEGINNING","ENDING","TOTAL","PAGE","BANK","CREDIT UNION"],n=t.toUpperCase();return r.some(a=>n.includes(a))&&!t.match(/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/)}cleanDescription(t){return t.replace(/\b(POS|ATM|ACH|CHK|DEP|WD|TFR|FEE)\b/gi,"").replace(/\b\d{4,}\b/g,"").replace(/[#*]+/g,"").replace(/\s+/g," ").trim()}parseDate(t){const r=[/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/,/(\d{1,2})-(\d{1,2})-(\d{2,4})/];for(const n of r){const a=t.match(n);if(a){let[,s,o,l]=a;return l.length===2&&(l=parseInt(l)>50?`19${l}`:`20${l}`),`${l}-${s.padStart(2,"0")}-${o.padStart(2,"0")}`}}return t}determineTransactionType(t){const r=t.toUpperCase();return r.includes("DEBIT")||r.includes("WITHDRAWAL")||r.includes("DR")||r.includes("WD")?"debit":r.includes("CREDIT")||r.includes("DEPOSIT")||r.includes("CR")||r.includes("DEP")?"credit":"debit"}calculateLineConfidence(t){let r=.5;return t.match(/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/)&&(r+=.2),t.match(/\$?\d+\.\d{2}/)&&(r+=.2),t.length>20&&t.length<100&&(r+=.1),Math.min(r,1)}async terminate(){this.worker&&(await this.worker.terminate(),this.worker=null,this.isInitialized=!1)}validateTransactions(t){return t.filter(r=>r.date&&r.description&&r.description.length>2&&r.amount&&r.amount>0&&!isNaN(r.amount))}suggestCorrections(t){return t.map(r=>{const n=[];return r.description.includes("0")&&r.description.includes("O")&&n.push("Check if O should be 0 or vice versa"),r.description.includes("1")&&r.description.includes("l")&&n.push("Check if l should be 1 or vice versa"),r.amount>1e4&&n.push("Verify large amount - possible OCR error"),{...r,suggestions:n}})}}const Sd=new qT,zT=({onUpload:e})=>{const[t,r]=W.useState(null),[n,a]=W.useState(!1),[s,o]=W.useState(0),[l,c]=W.useState(null),[d,p]=W.useState(!1),[m,g]=W.useState(!1),f=A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?g(!0):A.type==="dragleave"&&g(!1)},N=A=>{A.preventDefault(),A.stopPropagation(),g(!1),A.dataTransfer.files&&A.dataTransfer.files[0]&&j(A.dataTransfer.files[0])},y=A=>{A.target.files&&A.target.files[0]&&j(A.target.files[0])},j=A=>{if(!["image/jpeg","image/png","image/jpg","application/pdf"].includes(A.type)){alert("Please upload a valid image (JPG, PNG) or PDF file.");return}if(A.size>10*1024*1024){alert("File size must be less than 10MB.");return}r(A),c(null),o(0)},x=async()=>{if(t){a(!0),o(0);try{if(t.type==="application/pdf"){alert("PDF processing will be implemented in the next update. Please use an image file for now."),a(!1);return}const A=await Sd.processBankStatement(t,B=>{o(B)});if(A.success){const B=Sd.validateTransactions(A.transactions),T=Sd.suggestCorrections(B);c({...A,transactions:T})}else alert(`OCR processing failed: ${A.error}`)}catch(A){console.error("OCR processing error:",A),alert("Failed to process the bank statement. Please try again.")}finally{a(!1),o(0)}}},w=()=>{l&&l.transactions.length>0&&e({file:t,ocrResult:l,transactions:l.transactions})},_=(A,B,T)=>{const C=[...l.transactions];C[A]={...C[A],[B]:B==="amount"?parseFloat(T)||0:T},c({...l,transactions:C})},E=A=>{const B=l.transactions.filter((T,C)=>C!==A);c({...l,transactions:B})};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Bank Statement"}),i.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${m?"border-blue-400 bg-blue-50":"border-gray-300"} ${n?"opacity-50 pointer-events-none":""}`,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:N,children:[i.jsx(D7,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h4",{className:"mt-2 text-sm font-medium text-gray-900",children:n?"Processing...":"Upload your bank statement"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Drag and drop or click to select. Supports JPG, PNG, and PDF files up to 10MB."}),i.jsxs("div",{className:"mt-6",children:[i.jsx("input",{type:"file",id:"file-upload",className:"sr-only",onChange:y,accept:".pdf,.png,.jpg,.jpeg",disabled:n}),i.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Select a file"})]}),t&&i.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:"Selected:"})," ",t.name," (",(t.size/1024/1024).toFixed(2)," MB)"]})}),n&&i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),i.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Processing: ",s,"%"]})]})]}),t&&!l&&!n&&i.jsx("div",{className:"text-center",children:i.jsxs("button",{onClick:x,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:[i.jsx(z7,{className:"h-5 w-5 mr-2"}),"Extract Transactions with OCR"]})}),l&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(lh,{className:"h-5 w-5 text-green-400 mr-2"}),i.jsx("h4",{className:"text-sm font-medium text-green-800",children:"OCR Processing Complete"})]}),i.jsxs("p",{className:"mt-1 text-sm text-green-700",children:["Extracted ",l.transactions.length," transactions with ",Math.round(l.confidence),"% confidence."]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Review Extracted Transactions"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Please review and edit the transactions below before proceeding."})]}),i.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:l.transactions.map((A,B)=>i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),i.jsx("input",{type:"date",value:A.date,onChange:T=>_(B,"date",T.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("input",{type:"text",value:A.description,onChange:T=>_(B,"description",T.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),i.jsxs("div",{className:"flex items-end space-x-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount"}),i.jsx("input",{type:"number",step:"0.01",value:A.amount,onChange:T=>_(B,"amount",T.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),i.jsx("button",{onClick:()=>E(B),className:"px-2 py-1 text-red-600 hover:text-red-800 text-sm",title:"Remove transaction",children:"✕"})]})]}),A.suggestions&&A.suggestions.length>0&&i.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(B7,{className:"h-4 w-4 text-yellow-400 mr-1 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-medium text-yellow-800",children:"Suggestions:"}),i.jsx("ul",{className:"text-xs text-yellow-700 list-disc list-inside",children:A.suggestions.map((T,C)=>i.jsx("li",{children:T},C))})]})]})}),i.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500",children:[i.jsxs("span",{children:["Confidence: ",Math.round(A.confidence*100),"%"]}),i.jsx("div",{className:"ml-2 flex-1 bg-gray-200 rounded-full h-1",children:i.jsx("div",{className:"bg-blue-600 h-1 rounded-full",style:{width:`${A.confidence*100}%`}})})]})]},A.id))}),i.jsx("div",{className:"px-4 py-3 border-t border-gray-200 text-center",children:i.jsxs("button",{onClick:w,disabled:l.transactions.length===0,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 disabled:opacity-50",children:[i.jsx(lh,{className:"h-5 w-5 mr-2"}),"Confirm ",l.transactions.length," Transactions"]})})]})]})]})};class UT{constructor(){this.config={autoMatchThreshold:.85,suggestMatchThreshold:.6,weights:{amount:.4,description:.3,date:.2,vendor:.1},amountTolerance:.01,dateWindow:7,fuzzyThreshold:.6}}findMatches(t,r){const n=[];for(const a of t){const s=this.findSuggestionsForTransaction(a,r);n.push({bankTransaction:a,suggestions:s,bestMatch:s.length>0?s[0]:null,autoMatch:s.length>0&&s[0].confidence>=this.config.autoMatchThreshold,isMatched:!1})}return n}findSuggestionsForTransaction(t,r){const n=[];for(const a of r){const s=this.calculateMatchScore(t,a);s.totalScore>=this.config.suggestMatchThreshold&&n.push({expense:a,confidence:s.totalScore,matchReasons:s.reasons,scoreBreakdown:s.breakdown})}return n.sort((a,s)=>s.confidence-a.confidence)}calculateMatchScore(t,r){const n={amount:this.calculateAmountScore(t.amount,r.amount),description:this.calculateDescriptionScore(t.description,r.description||r.vendor),date:this.calculateDateScore(t.date,r.expense_date||r.date),vendor:this.calculateVendorScore(t.description,r.vendor)},a=Object.keys(n).reduce((o,l)=>o+n[l]*this.config.weights[l],0),s=this.generateMatchReasons(n,t,r);return{totalScore:Math.min(a,1),breakdown:n,reasons:s}}calculateAmountScore(t,r){const n=Math.abs(t-r);if(n<=this.config.amountTolerance)return 1;const a=n/Math.max(t,r);return a<=.01?.95:a<=.05?.85:a<=.1?.7:a<=.2?.5:0}calculateDescriptionScore(t,r){if(!t||!r)return 0;const n=this.normalizeDescription(t),a=this.normalizeDescription(r),s=this.calculateStringSimilarity(n,a),o=this.calculateWordMatchBoost(n,a);return Math.min(s+o,1)}calculateDateScore(t,r){if(!t||!r)return 0;const n=new Date(t),a=new Date(r),s=Math.abs((n-a)/(1e3*60*60*24));return s===0?1:s<=1?.9:s<=3?.8:s<=7?.6:s<=14?.4:s<=30?.2:0}calculateVendorScore(t,r){if(!r)return 0;const n=this.normalizeDescription(t),a=this.normalizeDescription(r);if(n.includes(a))return 1;const s=a.split(" ").filter(l=>l.length>2);return s.filter(l=>n.includes(l)).length/s.length}normalizeDescription(t){return t.toLowerCase().replace(/[^\w\s]/g," ").replace(/\b(pos|atm|ach|chk|dep|wd|tfr|fee)\b/g,"").replace(/\b\d+\b/g,"").replace(/\s+/g," ").trim()}calculateStringSimilarity(t,r){const n=[],a=t.length,s=r.length;for(let c=0;c<=a;c++)n[c]=[c];for(let c=0;c<=s;c++)n[0][c]=c;for(let c=1;c<=a;c++)for(let d=1;d<=s;d++){const p=t[c-1]===r[d-1]?0:1;n[c][d]=Math.min(n[c-1][d]+1,n[c][d-1]+1,n[c-1][d-1]+p)}const o=n[a][s],l=Math.max(a,s);return l===0?1:1-o/l}calculateWordMatchBoost(t,r){const n=t.split(" ").filter(l=>l.length>2),a=r.split(" ").filter(l=>l.length>2);return n.length===0||a.length===0?0:n.filter(l=>a.includes(l)).length/Math.max(n.length,a.length)*.2}generateMatchReasons(t,r,n){const a=[];return t.amount>=.95?a.push("Exact amount match"):t.amount>=.8?a.push("Very close amount"):t.amount>=.6&&a.push("Similar amount"),t.description>=.8?a.push("Strong description match"):t.description>=.6&&a.push("Similar description"),t.date>=.9?a.push("Same/next day"):t.date>=.6&&a.push("Within a week"),t.vendor>=.8&&a.push("Vendor name match"),a.length===0&&a.push("Potential match"),a}performAutoMatching(t){const r=[];for(const n of t)n.autoMatch&&n.bestMatch&&(n.isMatched=!0,n.matchedExpense=n.bestMatch.expense,r.push(n));return r}updateConfig(t){this.config={...this.config,...t}}getMatchingStats(t){return{total:t.length,withSuggestions:t.filter(r=>r.suggestions.length>0).length,autoMatched:t.filter(r=>r.autoMatch).length,highConfidence:t.filter(r=>r.bestMatch&&r.bestMatch.confidence>=.8).length,mediumConfidence:t.filter(r=>r.bestMatch&&r.bestMatch.confidence>=.6&&r.bestMatch.confidence<.8).length,lowConfidence:t.filter(r=>r.bestMatch&&r.bestMatch.confidence<.6).length,noMatches:t.filter(r=>r.suggestions.length===0).length}}}const og=new UT,WT=({reconciliationId:e,bankTransactions:t=[],systemExpenses:r=[]})=>{const[n,a]=W.useState([]),[s,o]=W.useState(null),[l,c]=W.useState(null),[d,p]=W.useState(!1),[m,g]=W.useState(!0),[f,N]=W.useState({total:0,matched:0,autoMatched:0,unmatched:0});W.useEffect(()=>{t.length>0&&r.length>0&&y()},[t,r]);const y=()=>{p(!0);try{const E=og.findMatches(t,r);a(E);const A={total:t.length,matched:E.filter(B=>B.bestMatch).length,autoMatched:E.filter(B=>B.autoMatch).length,unmatched:E.filter(B=>!B.bestMatch).length};if(N(A),m){const B=og.performAutoMatching(E);console.log(`Auto-matched ${B.length} transactions`)}}catch(E){console.error("Matching failed:",E)}finally{p(!1)}},j=async(E,A)=>{try{if((await fc.matchTransaction(e,{bankTransactionId:E.id,expenseId:A.id})).success){const T=n.map(C=>C.bankTransaction.id===E.id?{...C,isMatched:!0,matchedExpense:A}:C);a(T),o(null),c(null)}}catch(B){console.error("Failed to match transaction:",B),alert("Failed to match transaction. Please try again.")}},x=async E=>{E.bestMatch&&await j(E.bankTransaction,E.bestMatch.expense)},w=E=>E>=.8?"text-green-600 bg-green-100":E>=.6?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",_=E=>E>=.8?"High":E>=.6?"Medium":"Low";return d?i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("span",{className:"ml-2",children:"Analyzing transactions..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Smart Transaction Matching"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:m,onChange:E=>g(E.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Auto-match high confidence"})]}),i.jsx("button",{onClick:y,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Re-analyze"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.total}),i.jsx("div",{className:"text-sm text-blue-800",children:"Total Transactions"})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.matched}),i.jsx("div",{className:"text-sm text-green-800",children:"Potential Matches"})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f.autoMatched}),i.jsx("div",{className:"text-sm text-purple-800",children:"Auto-Matched"})]}),i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:f.unmatched}),i.jsx("div",{className:"text-sm text-red-800",children:"Unmatched"})]})]}),i.jsx("div",{className:"space-y-4",children:n.map((E,A)=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"font-medium text-gray-900",children:E.bankTransaction.description}),i.jsxs("div",{className:"font-bold text-lg",children:["$",E.bankTransaction.amount.toFixed(2)]}),i.jsx("div",{className:"text-sm text-gray-500",children:E.bankTransaction.date})]})}),E.isMatched&&i.jsxs("div",{className:"flex items-center text-green-600",children:[i.jsx(lh,{className:"h-5 w-5 mr-1"}),i.jsx("span",{className:"text-sm font-medium",children:"Matched"})]})]}),E.suggestions.length>0&&!E.isMatched&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[i.jsx(W7,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:"Suggested matches:"})]}),E.suggestions.slice(0,3).map((B,T)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border hover:bg-gray-100 cursor-pointer",onClick:()=>x({...E,bestMatch:B}),children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"font-medium",children:B.expense.vendor||B.expense.description}),i.jsxs("div",{className:"font-bold",children:["$",B.expense.amount.toFixed(2)]}),i.jsx("div",{className:"text-sm text-gray-500",children:B.expense.date})]}),i.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:B.matchReasons.map((C,$)=>i.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:C},$))})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded ${w(B.confidence)}`,children:[_(B.confidence)," (",Math.round(B.confidence*100),"%)"]}),i.jsx("button",{className:"p-1 text-green-600 hover:text-green-800",children:i.jsx(tg,{className:"h-4 w-4"})})]})]},B.expense.id)),E.suggestions.length>3&&i.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["+",E.suggestions.length-3," more potential matches"]})]}),E.suggestions.length===0&&!E.isMatched&&i.jsxs("div",{className:"flex items-center justify-center p-4 bg-red-50 rounded border border-red-200",children:[i.jsx(Hv,{className:"h-5 w-5 text-red-500 mr-2"}),i.jsx("span",{className:"text-red-700",children:"No potential matches found"}),i.jsx("button",{className:"ml-4 px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Create New Expense"})]})]},E.bankTransaction.id))}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Manual Matching"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Unmatched Bank Transactions"}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.filter(E=>!E.isMatched).map(E=>i.jsxs("div",{onClick:()=>o(E.bankTransaction),className:`p-3 rounded border cursor-pointer ${(s==null?void 0:s.id)===E.bankTransaction.id?"bg-blue-100 border-blue-400":"bg-white hover:bg-gray-50"}`,children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:E.bankTransaction.description}),i.jsxs("span",{className:"font-bold",children:["$",E.bankTransaction.amount.toFixed(2)]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:E.bankTransaction.date})]},E.bankTransaction.id))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Unmatched System Expenses"}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.filter(E=>!E.is_matched).map(E=>i.jsxs("div",{onClick:()=>c(E),className:`p-3 rounded border cursor-pointer ${(l==null?void 0:l.id)===E.id?"bg-green-100 border-green-400":"bg-white hover:bg-gray-50"}`,children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:E.vendor||E.description}),i.jsxs("span",{className:"font-bold",children:["$",E.amount.toFixed(2)]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:E.date})]},E.id))})]})]}),s&&l&&i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("button",{onClick:()=>j(s,l),className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700",children:[i.jsx(tg,{className:"h-5 w-5 mr-2"}),"Match Selected Transactions"]})})]})]})},Xv=()=>i.jsxs("div",{children:[i.jsx("h1",{children:"Reconciliation Report"}),i.jsx("p",{children:"This is a placeholder for the Reconciliation Report."})]}),HT=({onComplete:e,onCancel:t})=>{const[r,n]=W.useState(1),[a,s]=W.useState({id:null,month:new Date().getMonth()+1,year:new Date().getFullYear(),bankStatement:null,bankTransactions:[],systemExpenses:[]}),[o,l]=W.useState(!1),c=[{id:1,name:"Period Selection",description:"Select reconciliation period"},{id:2,name:"Upload Statement",description:"Upload bank statement"},{id:3,name:"Match Transactions",description:"Review and match transactions"},{id:4,name:"Finalize Report",description:"Complete reconciliation"}],d=(N,y)=>{s(j=>({...j,[N]:y}))},p=async N=>{l(!0);try{const y=await fc.uploadStatement(a.id,{transactions:N.transactions});if(y.success){const j=await fc.getTransactions(a.id);j.success&&(s(x=>({...x,bankStatement:N.file,bankTransactions:j.data.bankTransactions,systemExpenses:j.data.systemExpenses})),n(r+1))}else alert("Failed to upload transactions: "+y.error)}catch(y){console.error("Failed to upload statement:",y),alert("Failed to upload statement. Please try again.")}finally{l(!1)}},m=async()=>{if(console.log("🔍 [FRONTEND DEBUG] nextStep called, currentStep:",r),r===1){console.log("🔍 [FRONTEND DEBUG] Starting reconciliation process"),console.log("🔍 [FRONTEND DEBUG] Reconciliation data:",{month:a.month,year:a.year}),l(!0);try{console.log("🔍 [FRONTEND DEBUG] Calling reconciliationAPI.startReconciliation");const N=await fc.startReconciliation({month:a.month,year:a.year});console.log("🔍 [FRONTEND DEBUG] startReconciliation response:",N),N.success?(console.log("✅ [FRONTEND DEBUG] Reconciliation started successfully, ID:",N.data.id),s(y=>({...y,id:N.data.id})),n(r+1)):(console.error("❌ [FRONTEND DEBUG] Failed to start reconciliation:",N.error),alert("Failed to start reconciliation: "+N.error))}catch(N){console.error("❌ [FRONTEND DEBUG] Exception in nextStep:",N),alert("Failed to start reconciliation. Please try again.")}finally{console.log("🔍 [FRONTEND DEBUG] Setting loading to false"),l(!1)}}else r<c.length&&(console.log("🔍 [FRONTEND DEBUG] Moving to next step:",r+1),n(r+1))},g=()=>{r>1&&n(r-1)},f=()=>{switch(r){case 1:return i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Select Reconciliation Period"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),i.jsx("select",{value:a.month,onChange:N=>d("month",parseInt(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Array.from({length:12},(N,y)=>i.jsx("option",{value:y+1,children:new Date(0,y).toLocaleString("default",{month:"long"})},y+1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),i.jsx("input",{type:"number",value:a.year,onChange:N=>d("year",parseInt(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]});case 2:return i.jsx(zT,{onUpload:p});case 3:return i.jsx(WT,{reconciliationId:a.id,bankTransactions:a.bankTransactions,systemExpenses:a.systemExpenses});case 4:return i.jsx(Xv,{reconciliation:a});default:return i.jsxs("div",{children:["Step ",r]})}};return i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Monthly Reconciliation"}),i.jsx("button",{onClick:t,className:"inline-flex items-center p-2 border border-gray-300 rounded-md text-gray-400 hover:text-gray-500 hover:border-gray-400",children:i.jsx(Hv,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"mb-8",children:i.jsx("div",{className:"flex items-center justify-between",children:c.map((N,y)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 ${r>=N.id?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-500"}`,children:r>N.id?i.jsx(T7,{className:"h-5 w-5"}):i.jsx("span",{className:"text-sm font-medium",children:N.id})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("div",{className:`text-sm font-medium ${r>=N.id?"text-blue-600":"text-gray-500"}`,children:N.name}),i.jsx("div",{className:"text-xs text-gray-500",children:N.description})]}),y<c.length-1&&i.jsx("div",{className:`flex-1 h-0.5 mx-4 ${r>N.id?"bg-blue-600":"bg-gray-300"}`})]},N.id))})}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:f()}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("button",{onClick:g,disabled:r===1,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(I7,{className:"h-4 w-4 mr-2"}),"Previous"]}),r<c.length?i.jsxs("button",{onClick:m,disabled:o||r===2&&!a.bankStatement,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[o?"Starting...":"Next",i.jsx(F7,{className:"h-4 w-4 ml-2"})]}):i.jsx("button",{onClick:()=>e(a),className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:"Complete Reconciliation"})]})]})},GT=[{id:1,subject:"Back-to-School Picnic",type:"event",status:"draft",updated_at:"2025-06-01"},{id:2,subject:"Fundraiser Reminder",type:"fundraiser",status:"draft",updated_at:"2025-06-02"}],VT={draft:"bg-gray-200 text-gray-800",scheduled:"bg-yellow-100 text-yellow-800",sent:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"};function YT(){const[e,t]=W.useState("drafts"),r=n=>n.length===0?i.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"No communications found."}):i.jsx("ul",{className:"space-y-3 mt-4",children:n.map(a=>i.jsxs("li",{className:"p-4 bg-white border rounded shadow flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:a.subject}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Type: ",a.type," • Last updated: ",a.updated_at]})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded ${VT[a.status]}`,children:a.status})]},a.id))});return i.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Communications"}),i.jsx(ma,{to:"/communications/create",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"+ New"})]}),i.jsxs(ua.Tabs,{value:e,onChange:n=>t(n),children:[i.jsxs(ua.TabsHeader,{children:[i.jsx(ua.Tab,{value:"drafts",children:"Drafts"}),i.jsx(ua.Tab,{value:"scheduled",children:"Scheduled"}),i.jsx(ua.Tab,{value:"sent",children:"Sent"})]}),i.jsxs(ua.TabsBody,{children:[i.jsx(ua.TabPanel,{value:"drafts",children:r(GT)}),i.jsx(ua.TabPanel,{value:"scheduled",children:r([])}),i.jsx(ua.TabPanel,{value:"sent",children:r([])})]})]})]})}const KT=()=>{const e=Xr(),[t,r]=W.useState("grid"),[n,a]=W.useState("manual"),[s,o]=W.useState(""),[l,c]=W.useState("all"),d=[{id:1,title:"Fall Festival Announcement",type:"email",status:"sent",audience:"All Families",sentDate:"2024-10-01",openRate:78,clickRate:12,createdBy:"stella",description:"Exciting announcement about our upcoming Fall Festival"},{id:2,title:"Volunteer Recruitment Drive",type:"social",status:"scheduled",audience:"Facebook & Instagram",scheduledDate:"2024-10-05",engagement:0,createdBy:"manual",description:"Call for volunteers for upcoming events"},{id:3,title:"Book Fair Reminder",type:"sms",status:"draft",audience:"Parent Contacts",deliveryRate:0,createdBy:"stella",description:"Reminder about the upcoming book fair"},{id:4,title:"Monthly Newsletter",type:"newsletter",status:"in_progress",audience:"All Subscribers",progress:65,createdBy:"manual",description:"October newsletter with updates and events"}],p=D=>{e(`/communications/email?mode=${D}`)},m=D=>{e(`/communications/social?mode=${D}`)},g=D=>{e(`/communications/sms?mode=${D}`)},f=D=>{e(`/communications/create?type=newsletter&mode=${D}`)},N=D=>{e(`/communications/create?view=${D}`)},y=D=>{e(`/communications/create?edit=${D}`)},j=D=>{console.log("Sending communication:",D)},x=()=>{e("/communications/ai")},w=()=>{e("/communications/create?tab=analytics")},_=()=>{e("/communications/create?tab=schedule")},E=()=>{e("/communications/create?tab=audiences")},A=()=>{e("/communications/create")},B=D=>{const F={draft:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",scheduled:"bg-yellow-100 text-yellow-800",sent:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"};return F[D]||F.draft},T=D=>({email:Gl,sms:Yf,social:Vf,newsletter:ds})[D]||Gl,C=({communication:D})=>{const F=T(D.type);return i.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx(F,{className:"w-5 h-5 text-blue-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.title}),D.createdBy==="stella"&&i.jsx(xr,{className:"w-4 h-4 text-purple-500",title:"Created by Stella"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:D.description}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(fi,{className:"w-4 h-4"}),i.jsx("span",{children:D.audience})]}),D.sentDate&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ds,{className:"w-4 h-4"}),i.jsx("span",{children:new Date(D.sentDate).toLocaleDateString()})]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B(D.status)}`,children:D.status.replace("_"," ").charAt(0).toUpperCase()+D.status.replace("_"," ").slice(1)})]}),D.status==="sent"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[i.jsx("div",{className:"text-sm text-green-600",children:"Open Rate"}),i.jsxs("div",{className:"text-lg font-semibold text-green-700",children:[D.openRate,"%"]})]}),i.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[i.jsx("div",{className:"text-sm text-blue-600",children:"Click Rate"}),i.jsxs("div",{className:"text-lg font-semibold text-blue-700",children:[D.clickRate,"%"]})]})]}),D.status==="in_progress"&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600",children:"Progress"}),i.jsxs("span",{className:"font-medium text-gray-900",children:[D.progress,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${D.progress}%`}})})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:()=>N(D.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(_o,{className:"w-4 h-4 mr-2"}),"View"]}),i.jsxs("button",{onClick:()=>y(D.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(mc,{className:"w-4 h-4 mr-2"}),"Edit"]}),D.status==="draft"&&i.jsxs("button",{onClick:()=>j(D.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[i.jsx(y2,{className:"w-4 h-4 mr-2"}),"Send"]})]})]})})},$=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create New Communication"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Gl,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Email Campaign"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Reach all families"})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsx("button",{onClick:()=>p("manual"),className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Manual Creation"}),i.jsx("button",{onClick:()=>p("assisted"),className:"w-full py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Let Stella Help"}),i.jsx("button",{onClick:()=>p("automated"),className:"w-full py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Stella Auto-Generate"})]})]}),i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-green-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Vf,{className:"w-8 h-8 text-green-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Social Media"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Facebook & Instagram"})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsx("button",{onClick:()=>m("manual"),className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Manual Creation"}),i.jsx("button",{onClick:()=>m("assisted"),className:"w-full py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Let Stella Help"}),i.jsx("button",{onClick:()=>m("automated"),className:"w-full py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Stella Auto-Generate"})]})]}),i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-yellow-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Yf,{className:"w-8 h-8 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"SMS Campaign"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Direct text messages"})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsx("button",{onClick:()=>g("manual"),className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Manual Creation"}),i.jsx("button",{onClick:()=>g("assisted"),className:"w-full py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Let Stella Help"}),i.jsx("button",{onClick:()=>g("automated"),className:"w-full py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Stella Auto-Generate"})]})]}),i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-purple-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(ds,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Newsletter"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Monthly updates"})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsx("button",{onClick:()=>f("manual"),className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Manual Creation"}),i.jsx("button",{onClick:()=>f("assisted"),className:"w-full py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Let Stella Help"}),i.jsx("button",{onClick:()=>f("automated"),className:"w-full py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Stella Auto-Generate"})]})]})]})]}),H=()=>i.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(xr,{className:"w-6 h-6 text-purple-600"}),i.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Stella's Communication Insights"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Best Send Time"}),i.jsx("div",{className:"text-lg font-semibold text-purple-900",children:"Tuesday 10 AM"}),i.jsx("div",{className:"text-xs text-purple-700",children:"Based on your audience engagement"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Top Performing Subject"}),i.jsx("div",{className:"text-lg font-semibold text-purple-900",children:"Event Announcements"}),i.jsx("div",{className:"text-xs text-purple-700",children:"85% average open rate"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Stella's Suggestion"}),i.jsx("div",{className:"text-lg font-semibold text-purple-900",children:"Add Volunteer Call"}),i.jsx("div",{className:"text-xs text-purple-700",children:"Include in next newsletter"})]})]}),i.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg",children:[i.jsx("div",{className:"text-sm text-purple-900 font-medium mb-2",children:"💡 Stella's Tip of the Day"}),i.jsx("div",{className:"text-sm text-purple-800",children:'"Your Fall Festival emails get 23% higher engagement when sent on weekday mornings. Want me to schedule your next announcement for optimal timing?"'})]})]}),L=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("button",{onClick:x,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[i.jsx(xr,{className:"w-6 h-6 text-purple-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium",children:"Ask Stella"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Get content ideas"})]}),i.jsxs("button",{onClick:w,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition-colors",children:[i.jsx(v2,{className:"w-6 h-6 text-green-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium",children:"Analytics"}),i.jsx("span",{className:"text-xs text-gray-500",children:"View performance"})]}),i.jsxs("button",{onClick:_,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:border-yellow-300 hover:bg-yellow-50 transition-colors",children:[i.jsx(b2,{className:"w-6 h-6 text-yellow-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium",children:"Schedule"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Plan campaigns"})]}),i.jsxs("button",{onClick:E,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[i.jsx(fi,{className:"w-6 h-6 text-blue-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium",children:"Audiences"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Manage lists"})]})]})]});return i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Communications Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"Manage all your PTO communications with Stella's help or manual control"})]}),i.jsx("div",{className:"flex items-center space-x-3",children:i.jsx("button",{onClick:()=>r(t==="grid"?"list":"grid"),className:"p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:t==="grid"?i.jsx(Sg,{className:"w-5 h-5"}):i.jsx(_g,{className:"w-5 h-5"})})})]}),i.jsx(H,{}),i.jsx(L,{}),i.jsx($,{}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Ag,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search communications...",value:s,onChange:D=>o(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("select",{value:l,onChange:D=>c(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Types"}),i.jsx("option",{value:"email",children:"Email"}),i.jsx("option",{value:"sms",children:"SMS"}),i.jsx("option",{value:"social",children:"Social Media"}),i.jsx("option",{value:"newsletter",children:"Newsletter"})]})]})}),i.jsx("div",{className:t==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:d.map(D=>i.jsx(C,{communication:D},D.id))}),d.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Gl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No communications found"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first communication"}),i.jsx("button",{onClick:A,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Communication"})]})]})})};function XT(){const[e,t]=W.useState({subject:"",body:"",send_as:"email"}),[r,n]=W.useState(""),[a,s]=W.useState(""),o=c=>{const{name:d,value:p}=c.target;t(m=>({...m,[d]:p}))},l=async c=>{c.preventDefault(),s(""),n("");const{data:{session:d}}=await Ue.auth.getSession();if(!(d!=null&&d.access_token)){s("Authentication required.");return}try{const p=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.access_token}`},body:JSON.stringify(e)}),m=await p.json();p.ok?(n("Message created successfully!"),t({subject:"",body:"",send_as:"email"})):s(m.error||"Failed to send message.")}catch(p){console.error("Submit error:",p),s("Server error. Please try again.")}};return i.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Create Message"}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsx("input",{name:"subject",value:e.subject,onChange:o,placeholder:"Subject",className:"w-full border p-2",required:!0}),i.jsx("textarea",{name:"body",value:e.body,onChange:o,placeholder:"Message Body",className:"w-full border p-2",required:!0}),i.jsxs("select",{name:"send_as",value:e.send_as,onChange:o,className:"w-full border p-2",children:[i.jsx("option",{value:"email",children:"Email"}),i.jsx("option",{value:"sms",children:"SMS"}),i.jsx("option",{value:"in_app",children:"In-App"})]}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:"Send Message"}),r&&i.jsx("p",{className:"text-green-600",children:r}),a&&i.jsx("p",{className:"text-red-600",children:a})]})]})}var Jv={exports:{}},Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});var yo,fa=W,_d=(yo=fa)&&typeof yo=="object"&&"default"in yo?yo.default:yo;function uh(){return(uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Zv=[],Qv=!1,lg=function(){if(Qv)for(var e;e=Zv.shift();)e()},dh=typeof window>"u"?{__unlayer_lastEditorId:0}:window;dh.__unlayer_lastEditorId=dh.__unlayer_lastEditorId||0;var cg=_d.forwardRef(function(e,t){var r,n,a,s,o,l,c,d,p,m=e.onLoad,g=e.onReady,f=e.scriptUrl,N=e.minHeight,y=N===void 0?500:N,j=e.style,x=j===void 0?{}:j,w=fa.useState(null),_=w[0],E=w[1],A=fa.useState(!1),B=A[0],T=A[1],C=fa.useMemo(function(){return e.editorId||"editor-"+ ++dh.__unlayer_lastEditorId},[e.editorId]),$=uh({},e.options||{},{appearance:(r=e.appearance)!=null?r:(n=e.options)==null?void 0:n.appearance,displayMode:(e==null?void 0:e.displayMode)||((a=e.options)==null?void 0:a.displayMode)||"email",locale:(s=e.locale)!=null?s:(o=e.options)==null?void 0:o.locale,projectId:(l=e.projectId)!=null?l:(c=e.options)==null?void 0:c.projectId,tools:(d=e.tools)!=null?d:(p=e.options)==null?void 0:p.tools,id:C,source:{name:"react-email-editor",version:"1.7.11"}});fa.useImperativeHandle(t,function(){return{editor:_}},[_]),fa.useEffect(function(){return function(){_==null||_.destroy()}},[]),fa.useEffect(function(){T(!1),function(L,D){if(D===void 0&&(D="https://editor.unlayer.com/embed.js?2"),Zv.push(function(){return T(!0)}),function(U){var ee=document.querySelectorAll("script"),te=!1;return ee.forEach(function(re){re.src.includes(U)&&(te=!0)}),te}(D))lg();else{var F=document.createElement("script");F.setAttribute("src",D),F.onload=function(){Qv=!0,lg()},document.head.appendChild(F)}}(0,f)},[f]),fa.useEffect(function(){B&&(_==null||_.destroy(),E(unlayer.createEditor($)))},[JSON.stringify($),B]);var H=Object.keys(e).filter(function(L){return/^on/.test(L)});return fa.useEffect(function(){_&&(m==null||m(_),H.forEach(function(L){/^on/.test(L)&&L!=="onLoad"&&L!=="onReady"&&typeof e[L]=="function"&&_.addEventListener(L,e[L])}),g&&_.addEventListener("editor:ready",function(){g(_)}))},[_,Object.keys(H).join(",")]),_d.createElement("div",{style:{flex:1,display:"flex",minHeight:y}},_d.createElement("div",{id:C,style:uh({},x,{flex:1})}))});Dc.EmailEditor=cg,Dc.default=cg;Jv.exports=Dc;var JT=Jv.exports;const ZT=qr(JT);function QT(){const e=W.useRef(null),[t,r]=W.useState("Loading..."),[n,a]=W.useState(null),[s,o]=W.useState(null),[l,c]=W.useState(null);W.useEffect(()=>{async function m(){var y,j,x;const{data:{session:g},error:f}=await Ue.auth.getSession();if(!(g!=null&&g.access_token)){r("Error: Not authenticated.");return}const N=((y=g.user.user_metadata)==null?void 0:y.org_id)||((j=g.user.app_metadata)==null?void 0:j.org_id);o(N),c(g.access_token);try{const _=(await Er.get("/api/communications/email-drafts",{headers:{Authorization:`Bearer ${g.access_token}`}})).data.find(E=>E.org_id===N);_?(a(_.id),r("Loaded existing draft"),(x=e.current)==null||x.editor.loadDesign(JSON.parse(_.design_json))):r("No draft found")}catch(w){console.error(w),r("Error loading draft")}}m()},[]);const d=()=>{var m;!l||!s||(m=e.current)==null||m.editor.saveDesign(async g=>{const f={org_id:s,design_json:JSON.stringify(g),last_saved_at:new Date().toISOString()};try{if(n)await Er.put(`/api/communications/email-drafts/${n}`,f,{headers:{Authorization:`Bearer ${l}`}}),r("Draft updated");else{const N=await Er.post("/api/communications/email-drafts",f,{headers:{Authorization:`Bearer ${l}`}});a(N.data.id),r("Draft saved")}}catch(N){console.error(N),r("Save failed")}})},p=()=>{var m;(m=e.current)==null||m.editor.exportHtml(g=>{console.log("Exported HTML:",g.html),r("Exported to console")})};return i.jsxs("div",{className:"px-6 py-8 max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Email Designer"}),i.jsx("p",{className:"text-sm text-gray-500",children:t})]}),i.jsxs("div",{className:"space-x-2",children:[i.jsx("button",{onClick:d,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 text-sm",children:"Save Draft"}),i.jsx("button",{onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm",children:"Export HTML"})]})]}),i.jsx("div",{className:"border rounded shadow overflow-hidden h-[700px]",children:i.jsx(ZT,{ref:e})})]})}function eM(){return i.jsx("div",{className:"p-4",children:i.jsx("h1",{className:"text-xl font-bold",children:"SMS Composer (Coming Soon)"})})}function tM(){return i.jsx("div",{className:"p-4",children:i.jsx("h1",{className:"text-xl font-bold",children:"Social Post Composer (Coming Soon)"})})}const e1=W.createContext({dragDropManager:void 0});function sn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ug=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),dg=function(){return Math.random().toString(36).substring(7).split("").join(".")},hg={INIT:"@@redux/INIT"+dg(),REPLACE:"@@redux/REPLACE"+dg()};function rM(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function t1(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(sn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(sn(1));return r(t1)(e,t)}if(typeof e!="function")throw new Error(sn(2));var a=e,s=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function p(){if(c)throw new Error(sn(3));return s}function m(y){if(typeof y!="function")throw new Error(sn(4));if(c)throw new Error(sn(5));var j=!0;return d(),l.push(y),function(){if(j){if(c)throw new Error(sn(6));j=!1,d();var w=l.indexOf(y);l.splice(w,1),o=null}}}function g(y){if(!rM(y))throw new Error(sn(7));if(typeof y.type>"u")throw new Error(sn(8));if(c)throw new Error(sn(9));try{c=!0,s=a(s,y)}finally{c=!1}for(var j=o=l,x=0;x<j.length;x++){var w=j[x];w()}return y}function f(y){if(typeof y!="function")throw new Error(sn(10));a=y,g({type:hg.REPLACE})}function N(){var y,j=m;return y={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(sn(11));function _(){w.next&&w.next(p())}_();var E=j(_);return{unsubscribe:E}}},y[ug]=function(){return this},y}return g({type:hg.INIT}),n={dispatch:g,subscribe:m,getState:p,replaceReducer:f},n[ug]=N,n}function it(e,t,...r){if(nM()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(t.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function nM(){return typeof process<"u"&&!0}function aM(e,t,r){return t.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,e)}function sM(e,t){return e.filter(r=>r!==t)}function r1(e){return typeof e=="object"}function iM(e,t){const r=new Map,n=s=>{r.set(s,r.has(s)?r.get(s)+1:1)};e.forEach(n),t.forEach(n);const a=[];return r.forEach((s,o)=>{s===1&&a.push(o)}),a}function oM(e,t){return e.filter(r=>t.indexOf(r)>-1)}const hf="dnd-core/INIT_COORDS",su="dnd-core/BEGIN_DRAG",ff="dnd-core/PUBLISH_DRAG_SOURCE",iu="dnd-core/HOVER",ou="dnd-core/DROP",lu="dnd-core/END_DRAG";function fg(e,t){return{type:hf,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const lM={type:hf,payload:{clientOffset:null,sourceClientOffset:null}};function cM(e){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:s,getSourceClientOffset:o}=n,l=e.getMonitor(),c=e.getRegistry();e.dispatch(fg(s)),uM(r,l,c);const d=fM(r,l);if(d==null){e.dispatch(lM);return}let p=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");dM(o),p=o(d)}e.dispatch(fg(s,p));const g=c.getSource(d).beginDrag(l,d);if(g==null)return;hM(g),c.pinSource(d);const f=c.getSourceType(d);return{type:su,payload:{itemType:f,item:g,sourceId:d,clientOffset:s||null,sourceClientOffset:p||null,isSourcePublic:!!a}}}}function uM(e,t,r){it(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){it(r.getSource(n),"Expected sourceIds to be registered.")})}function dM(e){it(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function hM(e){it(r1(e),"Item must be an object.")}function fM(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function pM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){pM(e,a,r[a])})}return e}function gM(e){return function(r={}){const n=e.getMonitor(),a=e.getRegistry();vM(n),xM(n).forEach((o,l)=>{const c=bM(o,l,a,n),d={type:ou,payload:{dropResult:mM({},r,c)}};e.dispatch(d)})}}function vM(e){it(e.isDragging(),"Cannot call drop while not dragging."),it(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function bM(e,t,r,n){const a=r.getTarget(e);let s=a?a.drop(n,e):void 0;return yM(s),typeof s>"u"&&(s=t===0?{}:n.getDropResult()),s}function yM(e){it(typeof e>"u"||r1(e),"Drop result must either be an object or undefined.")}function xM(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function wM(e){return function(){const r=e.getMonitor(),n=e.getRegistry();NM(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:lu}}}function NM(e){it(e.isDragging(),"Cannot call endDrag while not dragging.")}function hh(e,t){return t===null?e===null:Array.isArray(e)?e.some(r=>r===t):e===t}function jM(e){return function(r,{clientOffset:n}={}){SM(r);const a=r.slice(0),s=e.getMonitor(),o=e.getRegistry(),l=s.getItemType();return AM(a,o,l),_M(a,s,o),EM(a,s,o),{type:iu,payload:{targetIds:a,clientOffset:n||null}}}}function SM(e){it(Array.isArray(e),"Expected targetIds to be an array.")}function _M(e,t,r){it(t.isDragging(),"Cannot call hover while not dragging."),it(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){const a=e[n];it(e.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const s=r.getTarget(a);it(s,"Expected targetIds to be registered.")}}function AM(e,t,r){for(let n=e.length-1;n>=0;n--){const a=e[n],s=t.getTargetType(a);hh(s,r)||e.splice(n,1)}}function EM(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function CM(e){return function(){if(e.getMonitor().isDragging())return{type:ff}}}function LM(e){return{beginDrag:cM(e),publishDragSource:CM(e),hover:jM(e),drop:gM(e),endDrag:wM(e)}}class DM{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:r}=this.store;function n(s){return(...o)=>{const l=s.apply(t,o);typeof l<"u"&&r(l)}}const a=LM(this);return Object.keys(a).reduce((s,o)=>{const l=a[o];return s[o]=n(l),s},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}}function PM(e,t){return{x:e.x+t.x,y:e.y+t.y}}function n1(e,t){return{x:e.x-t.x,y:e.y-t.y}}function kM(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return!t||!r||!n?null:n1(PM(t,n),r)}function OM(e){const{clientOffset:t,initialClientOffset:r}=e;return!t||!r?null:n1(t,r)}const So=[],pf=[];So.__IS_NONE__=!0;pf.__IS_ALL__=!0;function TM(e,t){return e===So?!1:e===pf||typeof t>"u"?!0:oM(t,e).length>0}class MM{subscribeToStateChange(t,r={}){const{handlerIds:n}=r;it(typeof t=="function","listener must be a function."),it(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),l=o.stateId;try{l===a||l===a+1&&!TM(o.dirtyHandlerIds,n)||t()}finally{a=l}};return this.store.subscribe(s)}subscribeToOffsetChange(t){it(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const r=this.registry.getSource(t);return it(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const r=this.registry.getTarget(t);if(it(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),a=this.getItemType();return hh(n,a)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const r=this.registry.getSource(t,!0);if(it(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),a=this.getItemType();return n!==a?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(t),s=this.getItemType();if(s&&!hh(a,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const l=o.indexOf(t);return n?l===o.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return kM(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return OM(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}}const pg=typeof global<"u"?global:self,a1=pg.MutationObserver||pg.WebKitMutationObserver;function s1(e){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),e()}}}function IM(e){let t=1;const r=new a1(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const RM=typeof a1=="function"?IM:s1;class FM{enqueueTask(t){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,a=t.length-this.index;n<a;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=RM(this.flush),this.requestErrorThrow=s1(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class $M{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}}class BM{create(t){const r=this.freeTasks,n=r.length?r.pop():new $M(this.onError,a=>r[r.length]=a);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const i1=new FM,qM=new BM(i1.registerPendingError);function zM(e){i1.enqueueTask(qM.create(e))}const mf="dnd-core/ADD_SOURCE",gf="dnd-core/ADD_TARGET",vf="dnd-core/REMOVE_SOURCE",cu="dnd-core/REMOVE_TARGET";function UM(e){return{type:mf,payload:{sourceId:e}}}function WM(e){return{type:gf,payload:{targetId:e}}}function HM(e){return{type:vf,payload:{sourceId:e}}}function GM(e){return{type:cu,payload:{targetId:e}}}function VM(e){it(typeof e.canDrag=="function","Expected canDrag to be a function."),it(typeof e.beginDrag=="function","Expected beginDrag to be a function."),it(typeof e.endDrag=="function","Expected endDrag to be a function.")}function YM(e){it(typeof e.canDrop=="function","Expected canDrop to be a function."),it(typeof e.hover=="function","Expected hover to be a function."),it(typeof e.drop=="function","Expected beginDrag to be a function.")}function fh(e,t){if(t&&Array.isArray(e)){e.forEach(r=>fh(r,!1));return}it(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var ln;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(ln||(ln={}));let KM=0;function XM(){return KM++}function JM(e){const t=XM().toString();switch(e){case ln.SOURCE:return`S${t}`;case ln.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function mg(e){switch(e[0]){case"S":return ln.SOURCE;case"T":return ln.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function gg(e,t){const r=e.entries();let n=!1;do{const{done:a,value:[,s]}=r.next();if(s===t)return!0;n=!!a}while(!n);return!1}class ZM{addSource(t,r){fh(t),VM(r);const n=this.addHandler(ln.SOURCE,t,r);return this.store.dispatch(UM(n)),n}addTarget(t,r){fh(t,!0),YM(r);const n=this.addHandler(ln.TARGET,t,r);return this.store.dispatch(WM(n)),n}containsHandler(t){return gg(this.dragSources,t)||gg(this.dropTargets,t)}getSource(t,r=!1){return it(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return it(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return it(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return it(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return mg(t)===ln.SOURCE}isTargetId(t){return mg(t)===ln.TARGET}removeSource(t){it(this.getSource(t),"Expected an existing source."),this.store.dispatch(HM(t)),zM(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){it(this.getTarget(t),"Expected an existing target."),this.store.dispatch(GM(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const r=this.getSource(t);it(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){it(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){const a=JM(t);return this.types.set(a,r),t===ln.SOURCE?this.dragSources.set(a,n):t===ln.TARGET&&this.dropTargets.set(a,n),a}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const QM=(e,t)=>e===t;function eI(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function tI(e,t,r=QM){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function rI(e=So,t){switch(t.type){case iu:break;case mf:case gf:case cu:case vf:return So;case su:case ff:case lu:case ou:default:return pf}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,a=iM(r,n);if(!(a.length>0||!tI(r,n)))return So;const o=n[n.length-1],l=r[r.length-1];return o!==l&&(o&&a.push(o),l&&a.push(l)),a}function nI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){nI(e,a,r[a])})}return e}const vg={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function sI(e=vg,t){const{payload:r}=t;switch(t.type){case hf:case su:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case iu:return eI(e.clientOffset,r.clientOffset)?e:aI({},e,{clientOffset:r.clientOffset});case lu:case ou:return vg;default:return e}}function iI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){iI(e,a,r[a])})}return e}const oI={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function lI(e=oI,t){const{payload:r}=t;switch(t.type){case su:return ai({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case ff:return ai({},e,{isSourcePublic:!0});case iu:return ai({},e,{targetIds:r.targetIds});case cu:return e.targetIds.indexOf(r.targetId)===-1?e:ai({},e,{targetIds:sM(e.targetIds,r.targetId)});case ou:return ai({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case lu:return ai({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function cI(e=0,t){switch(t.type){case mf:case gf:return e+1;case vf:case cu:return e-1;default:return e}}function uI(e=0){return e+1}function dI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){dI(e,a,r[a])})}return e}function fI(e={},t){return{dirtyHandlerIds:rI(e.dirtyHandlerIds,{type:t.type,payload:hI({},t.payload,{prevTargetIds:aM(e,"dragOperation.targetIds",[])})}),dragOffset:sI(e.dragOffset,t),refCount:cI(e.refCount,t),dragOperation:lI(e.dragOperation,t),stateId:uI(e.stateId)}}function pI(e,t=void 0,r={},n=!1){const a=mI(n),s=new MM(a,new ZM(a)),o=new DM(a,s),l=e(o,t,r);return o.receiveBackend(l),o}function mI(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return t1(fI,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function gI(e,t){if(e==null)return{};var r=vI(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vI(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}let bg=0;const pc=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var bI=W.memo(function(t){var{children:r}=t,n=gI(t,["children"]);const[a,s]=yI(n);return W.useEffect(()=>{if(s){const o=o1();return++bg,()=>{--bg===0&&(o[pc]=null)}}},[]),i.jsx(e1.Provider,{value:a,children:r})});function yI(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=xI(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}function xI(e,t=o1(),r,n){const a=t;return a[pc]||(a[pc]={dragDropManager:pI(e,t,r,n)}),a[pc]}function o1(){return typeof global<"u"?global:window}var wI=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!==0;){var o=s[a];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r};const NI=qr(wI),js=typeof window<"u"?W.useLayoutEffect:W.useEffect;function jI(e,t,r){const[n,a]=W.useState(()=>t(e)),s=W.useCallback(()=>{const o=t(e);NI(n,o)||(a(o),r&&r())},[n,e,r]);return js(s),[n,s]}function SI(e,t,r){const[n,a]=jI(e,t,r);return js(function(){const o=e.getHandlerId();if(o!=null)return e.subscribeToStateChange(a,{handlerIds:[o]})},[e,a]),n}function l1(e,t,r){return SI(t,e||(()=>({})),()=>r.reconnect())}function c1(e,t){const r=[];return typeof e!="function"&&r.push(e),W.useMemo(()=>typeof e=="function"?e():e,r)}function _I(e){return W.useMemo(()=>e.hooks.dragSource(),[e])}function AI(e){return W.useMemo(()=>e.hooks.dragPreview(),[e])}let Ad=!1,Ed=!1;class EI{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){it(!Ad,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ad=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Ad=!1}}isDragging(){if(!this.sourceId)return!1;it(!Ed,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ed=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Ed=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let Cd=!1;class CI{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;it(!Cd,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Cd=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Cd=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function LI(e,t,r){const n=r.getRegistry(),a=n.addTarget(e,t);return[a,()=>n.removeTarget(a)]}function DI(e,t,r){const n=r.getRegistry(),a=n.addSource(e,t);return[a,()=>n.removeSource(a)]}function ph(e,t,r,n){let a;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;const l=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<s.length;c++){const d=s[c];if(!l(d))return!1;const p=e[d],m=t[d];if(a=void 0,a===!1||a===void 0&&p!==m)return!1}return!0}function mh(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function PI(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function kI(e){return(t=null,r=null)=>{if(!W.isValidElement(t)){const s=t;return e(s,r),s}const n=t;return PI(n),OI(n,r?s=>e(s,r):e)}}function u1(e){const t={};return Object.keys(e).forEach(r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const a=kI(n);t[r]=()=>a}}),t}function yg(e,t){typeof e=="function"?e(t):e.current=t}function OI(e,t){const r=e.ref;return it(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?W.cloneElement(e,{ref:n=>{yg(r,n),yg(t,n)}}):W.cloneElement(e,{ref:t})}class TI{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){const r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ph(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ph(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=u1({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,mh(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,mh(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class MI{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ph(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=u1({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,mh(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function Ti(){const{dragDropManager:e}=W.useContext(e1);return it(e!=null,"Expected drag drop context"),e}function II(e,t){const r=Ti(),n=W.useMemo(()=>new TI(r.getBackend()),[r]);return js(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),js(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function RI(){const e=Ti();return W.useMemo(()=>new EI(e),[e])}class FI{beginDrag(){const t=this.spec,r=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){const t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){const n=this.spec,a=this.monitor,{isDragging:s}=n;return s?s(a):r===t.getSourceId()}endDrag(){const t=this.spec,r=this.monitor,n=this.connector,{end:a}=t;a&&a(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}}function $I(e,t,r){const n=W.useMemo(()=>new FI(e,t,r),[t,r]);return W.useEffect(()=>{n.spec=e},[e]),n}function BI(e){return W.useMemo(()=>{const t=e.type;return it(t!=null,"spec.type must be defined"),t},[e])}function qI(e,t,r){const n=Ti(),a=$I(e,t,r),s=BI(e);js(function(){if(s!=null){const[l,c]=DI(s,a,n);return t.receiveHandlerId(l),r.receiveHandlerId(l),c}},[n,t,r,a,s])}function zI(e,t){const r=c1(e);it(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=RI(),a=II(r.options,r.previewOptions);return qI(r,n,a),[l1(r.collect,n,a),_I(a),AI(a)]}function UI(e){return W.useMemo(()=>e.hooks.dropTarget(),[e])}function WI(e){const t=Ti(),r=W.useMemo(()=>new MI(t.getBackend()),[t]);return js(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}function HI(){const e=Ti();return W.useMemo(()=>new CI(e),[e])}function GI(e){const{accept:t}=e;return W.useMemo(()=>(it(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class VI{canDrop(){const t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){const t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){const t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}}function YI(e,t){const r=W.useMemo(()=>new VI(e,t),[t]);return W.useEffect(()=>{r.spec=e},[e]),r}function KI(e,t,r){const n=Ti(),a=YI(e,t),s=GI(e);js(function(){const[l,c]=LI(s,a,n);return t.receiveHandlerId(l),r.receiveHandlerId(l),c},[n,t,a,r,s.map(o=>o.toString()).join("|")])}function XI(e,t){const r=c1(e),n=HI(),a=WI(r.options);return KI(r,n,a),[l1(r.collect,n,a),UI(a)]}function d1(e){let t=null;return()=>(t==null&&(t=e()),t)}function JI(e,t){return e.filter(r=>r!==t)}function ZI(e,t){const r=new Set,n=s=>r.add(s);e.forEach(n),t.forEach(n);const a=[];return r.forEach(s=>a.push(s)),a}class QI{enter(t){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(t));return this.entered=ZI(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){const r=this.entered.length;return this.entered=JI(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class eR{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const h1="__NATIVE_FILE__",f1="__NATIVE_URL__",p1="__NATIVE_TEXT__",m1="__NATIVE_HTML__",xg=Object.freeze(Object.defineProperty({__proto__:null,FILE:h1,HTML:m1,TEXT:p1,URL:f1},Symbol.toStringTag,{value:"Module"}));function Ld(e,t,r){const n=t.reduce((a,s)=>a||e.getData(s),"");return n??r}const gh={[h1]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[m1]:{exposeProperties:{html:(e,t)=>Ld(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[f1]:{exposeProperties:{urls:(e,t)=>Ld(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[p1]:{exposeProperties:{text:(e,t)=>Ld(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function tR(e,t){const r=gh[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new eR(r);return n.loadDataTransfer(t),n}function Dd(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(gh).filter(r=>{const n=gh[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>t.indexOf(a)>-1):!1})[0]||null}const rR=d1(()=>/firefox/i.test(navigator.userAgent)),g1=d1(()=>!!window.safari);class wg{interpolate(t){const{xs:r,ys:n,c1s:a,c2s:s,c3s:o}=this;let l=r.length-1;if(t===r[l])return n[l];let c=0,d=o.length-1,p;for(;c<=d;){p=Math.floor(.5*(c+d));const f=r[p];if(f<t)c=p+1;else if(f>t)d=p-1;else return n[p]}l=Math.max(0,d);const m=t-r[l],g=m*m;return n[l]+a[l]*m+s[l]*g+o[l]*m*g}constructor(t,r){const{length:n}=t,a=[];for(let f=0;f<n;f++)a.push(f);a.sort((f,N)=>t[f]<t[N]?-1:1);const s=[],o=[];let l,c;for(let f=0;f<n-1;f++)l=t[f+1]-t[f],c=r[f+1]-r[f],s.push(l),o.push(c/l);const d=[o[0]];for(let f=0;f<s.length-1;f++){const N=o[f],y=o[f+1];if(N*y<=0)d.push(0);else{l=s[f];const j=s[f+1],x=l+j;d.push(3*x/((x+j)/N+(x+l)/y))}}d.push(o[o.length-1]);const p=[],m=[];let g;for(let f=0;f<d.length-1;f++){g=o[f];const N=d[f],y=1/s[f],j=N+d[f+1]-g-g;p.push((g-N-j)*y),m.push(j*y*y)}this.xs=t,this.ys=r,this.c1s=d,this.c2s=p,this.c3s=m}}const nR=1;function v1(e){const t=e.nodeType===nR?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function nc(e){return{x:e.clientX,y:e.clientY}}function aR(e){var t;return e.nodeName==="IMG"&&(rR()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function sR(e,t,r,n){let a=e?t.width:r,s=e?t.height:n;return g1()&&e&&(s/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:s}}function iR(e,t,r,n,a){const s=aR(t),l=v1(s?e:t),c={x:r.x-l.x,y:r.y-l.y},{offsetWidth:d,offsetHeight:p}=e,{anchorX:m,anchorY:g}=n,{dragPreviewWidth:f,dragPreviewHeight:N}=sR(s,t,d,p),y=()=>{let B=new wg([0,.5,1],[c.y,c.y/p*N,c.y+N-p]).interpolate(g);return g1()&&s&&(B+=(window.devicePixelRatio-1)*N),B},j=()=>new wg([0,.5,1],[c.x,c.x/d*f,c.x+f-d]).interpolate(m),{offsetX:x,offsetY:w}=a,_=x===0||x,E=w===0||w;return{x:_?x:j(),y:E?w:y()}}class oR{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}}function lR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ng(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){lR(e,a,r[a])})}return e}class cR{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);const a=o=>this.handleDragStart(o,t),s=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",s),r.setAttribute("draggable","false")}}connectDropTarget(t,r){const n=o=>this.handleDragEnter(o,t),a=o=>this.handleDragOver(o,t),s=o=>this.handleDrop(o,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",s),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",s)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return Ng({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return Ng({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(xg).some(r=>xg[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=tR(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const s=this.sourceNodes.get(a);return s&&v1(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=nc(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:l}=a,c=Dd(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const p=this.monitor.getSourceId(),m=this.sourceNodes.get(p),g=this.sourcePreviewNodes.get(p)||m;if(g){const{anchorX:f,anchorY:N,offsetX:y,offsetY:j}=this.getCurrentSourcePreviewNodeOptions(),_=iR(m,g,o,{anchorX:f,anchorY:N},{offsetX:y,offsetY:j});l.setDragImage(g,_.x,_.y)}}try{l==null||l.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(l&&!l.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:l}=a,c=Dd(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,s.length>0&&this.actions.hover(s,{clientOffset:nc(a)}),s.some(l=>this.monitor.canDropOnTarget(l))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=nc(a),this.scheduleHover(s),(s||[]).some(l=>this.monitor.canDropOnTarget(l))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;a.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}else Dd(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:nc(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const s=a.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(a.preventDefault(),s.dragDrop()))},this.options=new oR(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new QI(this.isNodeInDocument)}}const uR=function(t,r,n){return new cR(t,r,n)},b1=()=>{const[e,t]=W.useState([]),[r,n]=W.useState(null),[a,s]=W.useState(100),[o,l]=W.useState("templates"),[c,d]=W.useState(!1),p=W.useRef(null),m=[{id:1,name:"Fall Festival Announcement",category:"Events",thumbnail:"/templates/fall-festival.jpg",elements:[{type:"header",content:"Fall Festival 2024",style:{fontSize:"32px",color:"#d97706",fontWeight:"bold"}},{type:"image",src:"/images/fall-leaves.jpg",style:{width:"100%",height:"200px"}},{type:"text",content:"Join us for a day of fun, food, and community!",style:{fontSize:"18px",color:"#374151"}}]},{id:2,name:"Fundraiser Progress",category:"Fundraising",thumbnail:"/templates/fundraiser.jpg",elements:[{type:"header",content:"Fundraiser Update",style:{fontSize:"28px",color:"#059669",fontWeight:"bold"}},{type:"progress-bar",value:75,goal:5e3,style:{backgroundColor:"#d1fae5"}},{type:"text",content:"We're 75% to our goal! Thank you for your support.",style:{fontSize:"16px"}}]},{id:3,name:"Volunteer Call",category:"Volunteers",thumbnail:"/templates/volunteer.jpg",elements:[{type:"header",content:"Volunteers Needed!",style:{fontSize:"30px",color:"#dc2626",fontWeight:"bold"}},{type:"button",content:"Sign Up Now",style:{backgroundColor:"#dc2626",color:"white",padding:"12px 24px"}},{type:"text",content:"Help make our events successful by volunteering your time.",style:{fontSize:"16px"}}]}],g=[{type:"text",icon:Kf,label:"Text",defaultContent:"Add your text here"},{type:"header",icon:Kf,label:"Header",defaultContent:"Header Text"},{type:"image",icon:Zu,label:"Image",defaultSrc:"/placeholder-image.jpg"},{type:"button",icon:Xf,label:"Button",defaultContent:"Click Here"},{type:"divider",icon:x2,label:"Divider"},{type:"shape",icon:w2,label:"Shape"},{type:"link",icon:N2,label:"Link",defaultContent:"Link Text"}],f={colors:["#1f2937","#374151","#6b7280","#d97706","#059669","#dc2626","#7c3aed"],fonts:["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins"]},N=({element:_})=>{const[{isDragging:E},A]=zI(()=>({type:"design-element",item:{type:_.type,element:_},collect:T=>({isDragging:T.isDragging()})})),B=_.icon;return i.jsx("div",{ref:A,className:`p-3 border border-gray-200 rounded-lg cursor-move hover:bg-gray-50 transition-colors ${E?"opacity-50":""}`,children:i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[i.jsx(B,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"text-sm text-gray-700",children:_.label})]})})},y=()=>{const[{isOver:_},E]=XI(()=>({accept:"design-element",drop:(A,B)=>{const T=B.getClientOffset(),C=p.current.getBoundingClientRect(),$={id:Date.now(),type:A.type,x:T.x-C.left,y:T.y-C.top,content:A.element.defaultContent||"",src:A.element.defaultSrc||"",style:{fontSize:"16px",color:"#374151",backgroundColor:"transparent",padding:"8px",borderRadius:"4px"}};t(H=>[...H,$])},collect:A=>({isOver:A.isOver()})}));return i.jsxs("div",{ref:A=>{E(A),p.current=A},className:`relative bg-white border-2 border-dashed border-gray-300 rounded-lg min-h-[600px] ${_?"border-blue-500 bg-blue-50":""}`,style:{transform:`scale(${a/100})`,transformOrigin:"top left"},children:[e.map(A=>i.jsx(j,{element:A,isSelected:(r==null?void 0:r.id)===A.id,onSelect:()=>n(A),onUpdate:B=>{t(T=>T.map(C=>C.id===A.id?B:C)),n(B)}},A.id)),e.length===0&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Zu,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"text-lg",children:"Drag elements here to start designing"}),i.jsx("p",{className:"text-sm",children:"Choose from templates or build from scratch"})]})})]})},j=({element:_,isSelected:E,onSelect:A,onUpdate:B})=>{const[T,C]=W.useState(!1),$=()=>{(_.type==="text"||_.type==="header"||_.type==="button")&&C(!0)},H=D=>{B({..._,content:D}),C(!1)},L=()=>{switch(_.type){case"text":return T?i.jsx("input",{type:"text",value:_.content,onChange:D=>H(D.target.value),onBlur:()=>C(!1),onKeyPress:D=>D.key==="Enter"&&C(!1),className:"w-full bg-transparent border-none outline-none",autoFocus:!0}):i.jsx("p",{style:_.style,children:_.content});case"header":return T?i.jsx("input",{type:"text",value:_.content,onChange:D=>H(D.target.value),onBlur:()=>C(!1),onKeyPress:D=>D.key==="Enter"&&C(!1),className:"w-full bg-transparent border-none outline-none text-2xl font-bold",autoFocus:!0}):i.jsx("h2",{style:{..._.style,fontSize:"24px",fontWeight:"bold"},children:_.content});case"image":return i.jsx("img",{src:_.src,alt:"Design element",style:_.style,className:"max-w-full h-auto"});case"button":return i.jsx("button",{style:{..._.style,backgroundColor:_.style.backgroundColor||"#3b82f6",color:_.style.color||"white",padding:"12px 24px",borderRadius:"6px",border:"none",cursor:"pointer"},children:T?i.jsx("input",{type:"text",value:_.content,onChange:D=>H(D.target.value),onBlur:()=>C(!1),className:"bg-transparent border-none outline-none text-white",autoFocus:!0}):_.content});case"divider":return i.jsx("hr",{style:{..._.style,border:"none",height:"2px",backgroundColor:_.style.backgroundColor||"#e5e7eb",margin:"16px 0"}});default:return i.jsx("div",{children:"Unknown element"})}};return i.jsxs("div",{className:`absolute cursor-pointer ${E?"ring-2 ring-blue-500":""}`,style:{left:_.x,top:_.y,minWidth:"100px",minHeight:"30px"},onClick:A,onDoubleClick:$,children:[L(),E&&i.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-move"})]})},x=()=>{const[_,E]=W.useState(""),[A,B]=W.useState(!1),T=async C=>{B(!0),setTimeout(()=>{const $={"email-subject":"Join Us for an Amazing Fall Festival!","email-body":`Dear PTO Community,

We're excited to invite you to our annual Fall Festival! Join us for a day filled with fun activities, delicious food, and community spirit.

Date: Saturday, October 15th
Time: 10 AM - 4 PM
Location: School Playground

We hope to see you there!`,"social-post":`🍂 Fall Festival Alert! 🍂

Join us for food, fun, and community spirit! October 15th, 10 AM - 4 PM at the school playground. Bring the whole family! #PTOFallFestival #CommunityFun`,"flyer-text":`FALL FESTIVAL 2024

Food • Games • Fun
October 15th | 10 AM - 4 PM
School Playground

Bring the whole family!`},H={id:Date.now(),type:"text",x:50,y:50,content:$[C]||"Generated content",style:{fontSize:"16px",color:"#374151",backgroundColor:"transparent",padding:"8px"}};t(L=>[...L,H]),B(!1)},2e3)};return i.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[i.jsx(xr,{className:"w-5 h-5 text-purple-600"}),i.jsx("h3",{className:"font-semibold text-purple-900",children:"Stella's Content Assistant"})]}),i.jsx("div",{className:"text-xs text-purple-700 mb-3",children:"Hi! I'm Stella. I can help create content for your designs, or you can create everything manually. Your choice!"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>T("email-subject"),disabled:A,className:"w-full p-2 text-left bg-white rounded border hover:bg-gray-50 disabled:opacity-50",children:"Let Stella Write Email Subject"}),i.jsx("button",{onClick:()=>T("email-body"),disabled:A,className:"w-full p-2 text-left bg-white rounded border hover:bg-gray-50 disabled:opacity-50",children:"Let Stella Write Email Content"}),i.jsx("button",{onClick:()=>T("social-post"),disabled:A,className:"w-full p-2 text-left bg-white rounded border hover:bg-gray-50 disabled:opacity-50",children:"Let Stella Create Social Post"}),i.jsx("button",{onClick:()=>T("flyer-text"),disabled:A,className:"w-full p-2 text-left bg-white rounded border hover:bg-gray-50 disabled:opacity-50",children:"Let Stella Write Flyer Content"})]}),A&&i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("div",{className:"inline-flex items-center space-x-2 text-purple-600",children:[i.jsx(xr,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Stella is writing content..."})]})})]})},w=()=>{if(!r)return i.jsxs("div",{className:"p-4 text-center text-gray-500",children:[i.jsx(Xf,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"Select an element to edit properties"})]});const _=E=>{const A={...r,style:{...r.style,...E}};t(B=>B.map(T=>T.id===r.id?A:T)),n(A)};return i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Element Properties"}),(r.type==="text"||r.type==="header"||r.type==="button")&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Font Size"}),i.jsx("input",{type:"range",min:"12",max:"48",value:parseInt(r.style.fontSize)||16,onChange:E=>_({fontSize:`${E.target.value}px`}),className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Text Color"}),i.jsx("input",{type:"color",value:r.style.color||"#374151",onChange:E=>_({color:E.target.value}),className:"w-full h-10 rounded border"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>_({fontWeight:r.style.fontWeight==="bold"?"normal":"bold"}),className:`p-2 rounded border ${r.style.fontWeight==="bold"?"bg-blue-100 border-blue-300":"bg-white border-gray-300"}`,children:i.jsx(C2,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>_({fontStyle:r.style.fontStyle==="italic"?"normal":"italic"}),className:`p-2 rounded border ${r.style.fontStyle==="italic"?"bg-blue-100 border-blue-300":"bg-white border-gray-300"}`,children:i.jsx(L2,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Background Color"}),i.jsx("input",{type:"color",value:r.style.backgroundColor||"#ffffff",onChange:E=>_({backgroundColor:E.target.value}),className:"w-full h-10 rounded border"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Padding"}),i.jsx("input",{type:"range",min:"0",max:"32",value:parseInt(r.style.padding)||8,onChange:E=>_({padding:`${E.target.value}px`}),className:"w-full"})]})]})};return i.jsx(bI,{backend:uR,children:i.jsxs("div",{className:"h-screen bg-gray-100 flex",children:[i.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[i.jsxs("div",{className:"flex border-b border-gray-200",children:[i.jsx("button",{onClick:()=>l("templates"),className:`flex-1 py-3 px-4 text-sm font-medium ${o==="templates"?"bg-blue-50 text-blue-700 border-b-2 border-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Templates"}),i.jsx("button",{onClick:()=>l("elements"),className:`flex-1 py-3 px-4 text-sm font-medium ${o==="elements"?"bg-blue-50 text-blue-700 border-b-2 border-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Elements"}),i.jsx("button",{onClick:()=>l("brand"),className:`flex-1 py-3 px-4 text-sm font-medium ${o==="brand"?"bg-blue-50 text-blue-700 border-b-2 border-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Brand"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[o==="templates"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Email Templates"}),i.jsx("div",{className:"grid grid-cols-1 gap-3",children:m.map(_=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 cursor-pointer hover:border-blue-300 hover:bg-blue-50 transition-colors",onClick:()=>t(_.elements.map((E,A)=>({...E,id:Date.now()+A,x:50,y:50+A*100}))),children:[i.jsx("div",{className:"aspect-video bg-gray-100 rounded mb-2 flex items-center justify-center",children:i.jsx(Zu,{className:"w-8 h-8 text-gray-400"})}),i.jsx("h4",{className:"font-medium text-sm",children:_.name}),i.jsx("p",{className:"text-xs text-gray-500",children:_.category})]},_.id))})]}),o==="elements"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Design Elements"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(_=>i.jsx(N,{element:_},_.type))})]}),o==="brand"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Brand Assets"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm mb-2",children:"Colors"}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:f.colors.map(_=>i.jsx("div",{className:"w-8 h-8 rounded cursor-pointer border border-gray-200",style:{backgroundColor:_},onClick:()=>r&&updateElementStyle({color:_})},_))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm mb-2",children:"Fonts"}),i.jsx("div",{className:"space-y-1",children:f.fonts.map(_=>i.jsx("button",{className:"w-full text-left p-2 text-sm hover:bg-gray-50 rounded",style:{fontFamily:_},onClick:()=>r&&updateElementStyle({fontFamily:_}),children:_},_))})]})]})]}),i.jsx("div",{className:"border-t border-gray-200 p-4",children:i.jsx(x,{})})]}),i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Design Studio"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-2 hover:bg-gray-100 rounded",children:i.jsx(j2,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 hover:bg-gray-100 rounded",children:i.jsx(S2,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>s(Math.max(50,a-25)),className:"p-2 hover:bg-gray-100 rounded",children:i.jsx(_2,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm font-medium",children:[a,"%"]}),i.jsx("button",{onClick:()=>s(Math.min(200,a+25)),className:"p-2 hover:bg-gray-100 rounded",children:i.jsx(A2,{className:"w-4 h-4"})})]}),i.jsxs("button",{className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:[i.jsx(E2,{className:"w-4 h-4 mr-2"}),"Save"]}),i.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[i.jsx(_o,{className:"w-4 h-4 mr-2"}),"Preview"]}),i.jsxs("button",{className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[i.jsx(Og,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),i.jsx("div",{className:"flex-1 p-6 overflow-auto",children:i.jsx(y,{})})]}),i.jsxs("div",{className:"w-80 bg-white border-l border-gray-200",children:[i.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:i.jsx("h2",{className:"font-semibold text-gray-900",children:"Properties"})}),i.jsx(w,{})]})]})})},dR=()=>i.jsx(b1,{});function hR(){const[e,t]=W.useState([]),[r,n]=W.useState("");W.useEffect(()=>{async function s(){const{data:{session:o}}=await Ue.auth.getSession(),l=o==null?void 0:o.access_token;if(!l)return n("Not authenticated.");try{const c=await Er.get("/api/documents",{headers:{Authorization:`Bearer ${l}`}});t(c.data)}catch(c){n("Failed to load documents."),console.error(c)}}s()},[]);const a=s=>{const{data:o}=Ue.storage.from("documents").getPublicUrl(s);return o==null?void 0:o.publicUrl};return i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"PTO Documents"}),i.jsx(ma,{to:"/documents/upload",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ Upload Document"})]}),r&&i.jsx("p",{className:"text-red-600",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No documents found."}),i.jsx("ul",{className:"space-y-4",children:e.map(s=>i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsx("h2",{className:"text-lg font-semibold",children:s.title}),i.jsx("a",{href:a(s.file_path),target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 underline text-sm",children:"View / Download"})]},s.id))})]})}function fR(){const[e,t]=W.useState(""),[r,n]=W.useState(null),[a,s]=W.useState(""),[o,l]=W.useState(""),c=async d=>{if(d.preventDefault(),!r||!e)return l("Title and file are required.");const{data:{session:p}}=await Ue.auth.getSession(),m=p==null?void 0:p.access_token;if(!m)return l("User not authenticated.");const g=new FormData;g.append("title",e),g.append("file",r);try{await Er.post("/api/documents",g,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"multipart/form-data"}}),s("Document uploaded successfully."),t(""),n(null)}catch(f){l("Upload failed. Check console."),console.error(f)}};return i.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Upload Document"}),i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsx("input",{type:"text",placeholder:"Document Title",value:e,onChange:d=>t(d.target.value),className:"w-full border p-2",required:!0}),i.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg",onChange:d=>n(d.target.files[0]),className:"w-full border p-2",required:!0}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Upload"}),a&&i.jsx("p",{className:"text-green-600",children:a}),o&&i.jsx("p",{className:"text-red-600",children:o})]})]})}function pR(){const[e,t]=W.useState([]),[r,n]=W.useState("");return W.useEffect(()=>{async function a(){const{data:{session:s}}=await Ue.auth.getSession(),o=s==null?void 0:s.access_token;if(!o){n("Not authenticated.");return}try{const l=await Er.get("/api/shared-library",{headers:{Authorization:`Bearer ${o}`}});t(l.data)}catch(l){console.error(l),n("Failed to load shared library items.")}}a()},[]),i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Shared PTO Library"}),r&&i.jsx("p",{className:"text-red-600",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No shared events or fundraisers yet."}),i.jsx("ul",{className:"space-y-4",children:e.map(a=>{var s;return i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsx("h2",{className:"text-xl font-semibold",children:a.title}),i.jsx("p",{className:"text-sm text-gray-500",children:a.description}),i.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Type: ",((s=a.type)==null?void 0:s.toUpperCase())||"N/A"," • Shared by another PTO"]})]},a.id)})})]})}function mR(){const[e,t]=W.useState({type:"",season:"",audience:"",theme:"",goal:""}),[r,n]=W.useState([]),[a,s]=W.useState(!1),[o,l]=W.useState(null),c=p=>{const{name:m,value:g}=p.target;t(f=>({...f,[m]:g}))},d=async()=>{s(!0),l(null),n([]);const{data:{session:p},error:m}=await Ue.auth.getSession();if(m||!(p!=null&&p.access_token)){l("Authentication required."),s(!1);return}try{const f=await(await fetch("/api/ai/generate-event",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify(e)})).json();if(f.result){const N=f.result.split(/\n?\d+\.\s/).filter(Boolean).map(y=>y.trim().replace(/^\*\*/,"").replace(/\*\*$/,""));n(N)}else l("No ideas returned.")}catch(g){console.error(g),l("Error contacting the backend")}finally{s(!1)}};return i.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"AI Event Idea Generator"}),i.jsxs("div",{className:"grid gap-4 mb-4",children:[i.jsx("input",{name:"type",value:e.type,onChange:c,placeholder:"Event Type (e.g. Family Night)",className:"w-full border p-2 rounded"}),i.jsx("input",{name:"season",value:e.season,onChange:c,placeholder:"Season or Month (e.g. Spring, October)",className:"w-full border p-2 rounded"}),i.jsx("input",{name:"audience",value:e.audience,onChange:c,placeholder:"Audience (e.g. students, families)",className:"w-full border p-2 rounded"}),i.jsx("input",{name:"theme",value:e.theme,onChange:c,placeholder:"Theme (e.g. carnival, STEM)",className:"w-full border p-2 rounded"}),i.jsx("input",{name:"goal",value:e.goal,onChange:c,placeholder:"Goal (e.g. raise funds, build community)",className:"w-full border p-2 rounded"})]}),i.jsx("button",{onClick:d,disabled:a,className:"bg-blue-600 text-white px-4 py-2 rounded",children:a?"Generating...":"Generate Ideas"}),o&&i.jsx("p",{className:"text-red-500 mt-4",children:o}),r.length>0&&i.jsx("ul",{className:"mt-6 space-y-2",children:r.map((p,m)=>i.jsx("li",{className:"border p-3 rounded bg-gray-50",children:p},m))})]})}const gR=()=>i.jsxs("div",{children:[i.jsx("h1",{children:"Event Workflow Orchestrator"}),i.jsx("p",{children:"This is a placeholder for the Event Workflow Orchestrator component."})]}),vR=()=>i.jsx(gR,{}),bR=()=>i.jsx(b1,{});function yR(){const[e,t]=W.useState([]),[r,n]=W.useState("");return W.useEffect(()=>{async function a(){const{data:{session:s}}=await Ue.auth.getSession();if(!(s!=null&&s.access_token)){n("Authentication required.");return}try{const o=await fetch("/api/teacher-requests",{headers:{Authorization:`Bearer ${s.access_token}`}}),l=await o.json();o.ok?t(l):n(l.error||"Failed to load teacher requests.")}catch(o){console.error("Fetch error:",o),n("Error connecting to server.")}}a()},[]),i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Teacher Requests"}),i.jsx(ma,{to:"/teacher-requests/create",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ New Request"})]}),r&&i.jsx("p",{className:"text-red-600",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No teacher requests found."}),i.jsx("ul",{className:"space-y-4",children:e.map(a=>i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsx("h2",{className:"text-xl font-semibold",children:a.title}),i.jsxs("p",{className:"text-sm text-gray-500",children:["By ",a.teacher_name," (",a.grade_or_subject,")"]}),i.jsx("p",{className:"mt-2",children:a.description}),a.amount_requested&&i.jsxs("p",{className:"mt-2 text-blue-800 font-semibold",children:["Requested: $",parseFloat(a.amount_requested).toFixed(2)]})]},a.id))})]})}function xR(){const[e,t]=W.useState({title:"",description:"",amount_requested:"",teacher_name:"",grade_or_subject:""}),[r,n]=W.useState(""),[a,s]=W.useState(""),o=c=>{const{name:d,value:p}=c.target;t(m=>({...m,[d]:p}))},l=async c=>{c.preventDefault();const{data:{session:d}}=await Ue.auth.getSession();if(!(d!=null&&d.access_token)){s("You must be logged in to submit a request.");return}try{const p=await fetch("/api/teacher-requests",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.access_token}`},body:JSON.stringify(e)}),m=await p.json();p.ok?(n("Request submitted successfully!"),s(""),t({})):(s(m.error||"Failed to submit request"),n(""))}catch(p){console.error("Submit error:",p),s("Network error or server unavailable")}};return i.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Submit Teacher Request"}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsx("input",{name:"title",value:e.title||"",onChange:o,placeholder:"Title",className:"w-full border p-2",required:!0}),i.jsx("textarea",{name:"description",value:e.description||"",onChange:o,placeholder:"Description",className:"w-full border p-2"}),i.jsx("input",{type:"number",name:"amount_requested",value:e.amount_requested||"",onChange:o,placeholder:"Amount Requested",className:"w-full border p-2"}),i.jsx("input",{name:"teacher_name",value:e.teacher_name||"",onChange:o,placeholder:"Teacher Name",className:"w-full border p-2"}),i.jsx("input",{name:"grade_or_subject",value:e.grade_or_subject||"",onChange:o,placeholder:"Grade or Subject",className:"w-full border p-2"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:"Submit"}),r&&i.jsx("p",{className:"text-green-600",children:r}),a&&i.jsx("p",{className:"text-red-600",children:a})]})]})}function wR(){const[e,t]=W.useState(!1),[r,n]=W.useState(""),[a,s]=W.useState("monthly"),o=async()=>{var l;t(!0),n("");try{const d=(l=(await Ue.auth.getSession()).data.session)==null?void 0:l.access_token;if(!d){n("User session not found."),t(!1);return}const p=await fetch("https://api.ptoconnect.com/api/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({plan:a})});if(!p.ok){const g=await p.text();throw console.error("Stripe error response:",g),new Error("Stripe request failed.")}const m=await p.json();m!=null&&m.url?window.location.href=m.url:n("Checkout session failed to start.")}catch(c){console.error("Checkout error:",c),n("An error occurred during checkout.")}finally{t(!1)}};return i.jsxs("div",{className:"max-w-xl mx-auto p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Start Your PTO Connect Subscription"}),i.jsx("p",{className:"mb-4",children:"Subscribe now to unlock all features for your PTO group."}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block font-medium mb-1",children:"Choose a plan:"}),i.jsxs("select",{className:"border p-2 rounded w-full",value:a,onChange:l=>s(l.target.value),children:[i.jsx("option",{value:"monthly",children:"Monthly - $29/month"}),i.jsx("option",{value:"annual",children:"Annual - $299/year"})]})]}),i.jsx("button",{onClick:o,disabled:e,className:"bg-blue-600 text-white px-4 py-2 rounded",children:e?"Redirecting…":"Subscribe Now"}),r&&i.jsx("p",{className:"text-red-600 mt-4",children:r})]})}function NR(){return i.jsxs("div",{className:"max-w-xl mx-auto p-6 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-green-600 mb-4",children:"Subscription Successful!"}),i.jsx("p",{className:"text-gray-700",children:"Thank you for subscribing to PTO Connect. Your account is now active."})]})}function jR(){return i.jsxs("div",{className:"max-w-xl mx-auto p-6 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Checkout Canceled"}),i.jsx("p",{className:"text-gray-700",children:"You canceled the checkout process. No charges were made."})]})}function SR(){const[e,t]=W.useState(""),[r,n]=W.useState(""),[a,s]=W.useState(""),[o,l]=W.useState(""),c=Xr(),d=()=>{if(l(""),!e||!r){l("PTO Name and School Name are required.");return}const p={ptoName:e,schoolName:r,districtName:a};sessionStorage.setItem("pendingPto",JSON.stringify(p)),c("/onboarding/pricing")};return i.jsxs("div",{className:"max-w-xl mx-auto p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Create Your PTO"}),i.jsx("p",{className:"text-gray-700 mb-6",children:"Let's start by getting your organization set up. Enter your PTO's info below."}),i.jsx("input",{className:"border p-2 w-full mb-4",type:"text",placeholder:"PTO Name",value:e,onChange:p=>t(p.target.value)}),i.jsx("input",{className:"border p-2 w-full mb-4",type:"text",placeholder:"School Name",value:r,onChange:p=>n(p.target.value)}),i.jsx("input",{className:"border p-2 w-full mb-4",type:"text",placeholder:"District Name (optional)",value:a,onChange:p=>s(p.target.value)}),i.jsx("button",{onClick:d,className:"bg-blue-600 text-white px-4 py-2 rounded w-full",children:"Continue to Plan Selection"}),o&&i.jsx("p",{className:"text-red-600 mt-4",children:o})]})}function _R(){const[e,t]=W.useState(null),[r,n]=W.useState([]),[a,s]=W.useState("");Xr(),W.useEffect(()=>{const l=sessionStorage.getItem("pendingPto");l?t(JSON.parse(l)):s("Missing PTO info. Please start again."),fetch("/api/stripe/get-prices").then(c=>c.json()).then(n).catch(()=>s("Could not load pricing. Please try again."))},[]);const o=async(l,c)=>{try{const p=await(await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:l,ptoMetadata:e,plan:c==="annual_plan"?"annual":"monthly"})})).json();p.url?window.location.href=p.url:s("Unable to start checkout session.")}catch{s("Stripe checkout error.")}};return i.jsxs("div",{className:"max-w-xl mx-auto p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Choose Your Plan"}),a&&i.jsx("p",{className:"text-red-600 mb-4",children:a}),i.jsx("div",{className:"space-y-4",children:r.map(l=>i.jsxs("button",{onClick:()=>o(l.id,l.lookup_key),className:"w-full py-3 rounded bg-blue-600 text-white hover:bg-blue-700",children:[l.nickname||l.lookup_key," – $",l.amount,"/",l.interval]},l.id))})]})}function AR(){const[e]=k2(),t=Xr(),[r,n]=W.useState({adminName:"",adminEmail:"",adminPassword:"",confirmPassword:""}),[a,s]=W.useState(null),[o,l]=W.useState(!1),[c,d]=W.useState("");W.useEffect(()=>{const g=e.get("session_id"),f=sessionStorage.getItem("pendingPto");if(!f){d("Missing PTO information. Please start the signup process again.");return}s(JSON.parse(f)),g&&sessionStorage.setItem("stripeSessionId",g)},[e]);const p=g=>{n({...r,[g.target.name]:g.target.value})},m=async g=>{if(g.preventDefault(),d(""),l(!0),!r.adminName||!r.adminEmail||!r.adminPassword){d("All fields are required."),l(!1);return}if(r.adminPassword!==r.confirmPassword){d("Passwords do not match."),l(!1);return}if(r.adminPassword.length<6){d("Password must be at least 6 characters."),l(!1);return}try{const f=sessionStorage.getItem("stripeSessionId"),N=await Dt.post("/signup/complete",{ptoName:a.ptoName,schoolName:a.schoolName,adminName:r.adminName,adminEmail:r.adminEmail,adminPassword:r.adminPassword,stripeSessionId:f});N.success?(sessionStorage.removeItem("pendingPto"),sessionStorage.removeItem("stripeSessionId"),t("/onboarding/next-steps",{state:{organization:N.organization}})):d(N.error||"Failed to create account.")}catch(f){console.error("Signup error:",f),d("Failed to create account. Please try again.")}finally{l(!1)}};return a?i.jsxs("div",{className:"max-w-md mx-auto p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Complete Your Setup"}),i.jsxs("p",{className:"text-gray-600",children:["Creating ",i.jsx("strong",{children:a.ptoName})," at ",a.schoolName]})]}),i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Full Name"}),i.jsx("input",{type:"text",name:"adminName",value:r.adminName,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your full name",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),i.jsx("input",{type:"email",name:"adminEmail",value:r.adminEmail,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),i.jsx("input",{type:"password",name:"adminPassword",value:r.adminPassword,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Create a password",minLength:"6",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),i.jsx("input",{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm your password",minLength:"6",required:!0})]}),c&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:c}),i.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Creating Account...":"Complete Setup"})]}),i.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:i.jsx("p",{children:"By creating an account, you agree to our Terms of Service and Privacy Policy."})})]}):i.jsxs("div",{className:"max-w-md mx-auto p-6 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-600",children:"Setup Error"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Missing PTO information. Please start the signup process again."}),i.jsx("button",{onClick:()=>t("/onboarding/create-pto"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Start Over"})]})}function ER(){const e=Xr(),[t,r]=W.useState({ptoName:"",schoolName:"",adminName:"",adminEmail:"",adminPassword:"",confirmPassword:""}),[n,a]=W.useState(!1),[s,o]=W.useState(""),[l,c]=W.useState(null),d=m=>{r({...t,[m.target.name]:m.target.value})},p=async m=>{var g;if(m.preventDefault(),o(""),a(!0),!t.ptoName||!t.schoolName||!t.adminName||!t.adminEmail||!t.adminPassword){o("All fields are required."),a(!1);return}if(t.adminPassword!==t.confirmPassword){o("Passwords do not match."),a(!1);return}if(t.adminPassword.length<6){o("Password must be at least 6 characters."),a(!1);return}try{const f=await Dt.post("/signup/complete",{ptoName:t.ptoName,schoolName:t.schoolName,adminName:t.adminName,adminEmail:t.adminEmail,adminPassword:t.adminPassword});f.data&&f.data.success?(c(f.data.organization),o("")):o(((g=f.data)==null?void 0:g.error)||"Failed to create account.")}catch(f){console.error("Signup error:",f),o("Failed to create account. Please try again.")}finally{a(!1)}};return l?i.jsxs("div",{className:"max-w-md mx-auto p-6 text-center",children:[i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-green-800 mb-4",children:"Success! 🎉"}),i.jsxs("p",{className:"text-green-700 mb-4",children:["Your organization ",i.jsx("strong",{children:l.name})," has been created successfully!"]}),i.jsxs("div",{className:"bg-white border border-green-300 rounded p-4 mb-4",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your signup code:"}),i.jsx("p",{className:"text-lg font-mono font-bold text-green-800",children:l.signup_code})]}),i.jsx("p",{className:"text-sm text-green-600",children:"Share this code with other members to join your organization."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>e("/login"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Go to Login"}),i.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300",children:"Create Another Organization"})]})]}):i.jsxs("div",{className:"max-w-md mx-auto p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Create Your PTO Organization"}),i.jsx("p",{className:"text-gray-600",children:"Set up your PTO and create your admin account"})]}),i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PTO Name"}),i.jsx("input",{type:"text",name:"ptoName",value:t.ptoName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Lincoln Elementary PTO",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"School Name"}),i.jsx("input",{type:"text",name:"schoolName",value:t.schoolName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Lincoln Elementary School",required:!0})]}),i.jsx("hr",{className:"my-4"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Full Name"}),i.jsx("input",{type:"text",name:"adminName",value:t.adminName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your full name",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),i.jsx("input",{type:"email",name:"adminEmail",value:t.adminEmail,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),i.jsx("input",{type:"password",name:"adminPassword",value:t.adminPassword,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Create a password",minLength:"6",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),i.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm your password",minLength:"6",required:!0})]}),s&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:s}),i.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Creating Organization...":"Create Organization"})]}),i.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:[i.jsx("p",{children:"This will create a trial organization (14 days)"}),i.jsxs("p",{className:"mt-2",children:["Already have an account? ",i.jsx("a",{href:"/login",className:"text-blue-600 hover:underline",children:"Login here"})]})]})]})}function CR(){var o;const e=Tg(),t=Xr(),[r,n]=W.useState(!1),a=(o=e.state)==null?void 0:o.organization,s=()=>{a!=null&&a.signup_code&&(navigator.clipboard.writeText(a.signup_code),n(!0),setTimeout(()=>n(!1),2e3))};return a?i.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx(kg,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome to PTO Connect!"}),i.jsxs("p",{className:"text-lg text-gray-600",children:["Your organization ",i.jsx("strong",{children:a.name})," has been successfully created."]})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-4",children:"Your Organization Details"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-blue-800",children:"Organization Name:"}),i.jsx("span",{className:"ml-2 text-blue-700",children:a.name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-blue-800",children:"Organization ID:"}),i.jsx("span",{className:"ml-2 text-blue-700 font-mono text-sm",children:a.slug})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"font-medium text-blue-800",children:"Signup Code:"}),i.jsx("span",{className:"ml-2 text-blue-700 font-mono text-lg font-bold",children:a.signup_code}),i.jsx("button",{onClick:s,className:"ml-2 p-1 text-blue-600 hover:text-blue-800",title:"Copy signup code",children:i.jsx(Pg,{className:"w-4 h-4"})}),r&&i.jsx("span",{className:"ml-2 text-green-600 text-sm",children:"Copied!"})]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Next Steps to Get Started"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[i.jsx(fi,{className:"w-6 h-6 text-blue-600 mt-1"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Invite Your Team"}),i.jsxs("p",{className:"text-gray-600 text-sm",children:["Share your signup code ",i.jsx("strong",{children:a.signup_code})," with other PTO members, teachers, and parents so they can join your organization."]})]})]}),i.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[i.jsx(D2,{className:"w-6 h-6 text-blue-600 mt-1"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Configure Your Settings"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Set up your organization preferences, communication settings, and user roles."})]})]}),i.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[i.jsx(ds,{className:"w-6 h-6 text-blue-600 mt-1"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Create Your First Event"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Start engaging your community by creating your first PTO event or meeting."})]})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx("button",{onClick:()=>t("/login"),className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Go to Dashboard"}),i.jsx("button",{onClick:()=>t("/onboarding/create-pto"),className:"flex-1 bg-gray-200 text-gray-800 py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Create Another PTO"})]}),i.jsxs("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-yellow-700 text-sm",children:"Check out our getting started guide or contact support if you need assistance setting up your PTO organization."})]})]}):i.jsxs("div",{className:"max-w-md mx-auto p-6 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-600",children:"Setup Error"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Missing organization information. Please complete the signup process."}),i.jsx("button",{onClick:()=>t("/onboarding/create-pto"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Start Setup"})]})}function LR(){return i.jsxs(O2,{children:[i.jsx($e,{path:"/",element:i.jsx(Qf,{})}),i.jsx($e,{path:"/login",element:i.jsx(Qf,{})}),i.jsx($e,{path:"/signup",element:i.jsx(sb,{})}),i.jsx($e,{path:"/unauthorized",element:i.jsx(ib,{})}),i.jsx($e,{path:"/onboarding/create-pto",element:i.jsx(SR,{})}),i.jsx($e,{path:"/onboarding/pricing",element:i.jsx(_R,{})}),i.jsx($e,{path:"/onboarding/complete-signup",element:i.jsx(AR,{})}),i.jsx($e,{path:"/onboarding/simple-signup",element:i.jsx(ER,{})}),i.jsx($e,{path:"/onboarding/next-steps",element:i.jsx(CR,{})}),i.jsx($e,{path:"/billing/success",element:i.jsx(NR,{})}),i.jsx($e,{path:"/billing/cancel",element:i.jsx(jR,{})}),i.jsx($e,{element:i.jsx(ns,{allowedRoles:["admin","board_member","committee_lead","volunteer","parent_member","teacher"]}),children:i.jsx($e,{element:i.jsx(as,{}),children:i.jsx($e,{path:"/dashboard",element:i.jsx(cb,{})})})}),i.jsx($e,{element:i.jsx(ns,{allowedRoles:["admin"]}),children:i.jsxs($e,{element:i.jsx(as,{}),children:[i.jsx($e,{path:"/dashboard/admin",element:i.jsx(ed,{})}),i.jsx($e,{path:"/admin/permissions",element:i.jsx(hb,{})}),i.jsx($e,{path:"/admin/users",element:i.jsx(ed,{})}),i.jsx($e,{path:"/admin/settings",element:i.jsx(ed,{})}),i.jsx($e,{path:"/billing",element:i.jsx(wR,{})}),i.jsx($e,{path:"/events",element:i.jsx(yb,{})}),i.jsx($e,{path:"/events/legacy",element:i.jsx(bb,{})}),i.jsx($e,{path:"/events/create",element:i.jsx(vy,{})}),i.jsx($e,{path:"/events/edit/:id",element:i.jsx(by,{})}),i.jsx($e,{path:"/events/calendar",element:i.jsx(v7,{})}),i.jsx($e,{path:"/fundraisers",element:i.jsx(j7,{})}),i.jsx($e,{path:"/fundraisers/create",element:i.jsx(S7,{})}),i.jsx($e,{path:"/budget",element:i.jsx(A7,{})}),i.jsx($e,{path:"/budget/legacy",element:i.jsx(_7,{})}),i.jsx($e,{path:"/budget/create",element:i.jsx(E7,{})}),i.jsx($e,{path:"/budget/reconciliation",element:i.jsx(C7,{})}),i.jsx($e,{path:"/budget/reconciliation/new",element:i.jsx(HT,{})}),i.jsx($e,{path:"/budget/reconciliation/:id",element:i.jsx(Xv,{})}),i.jsx($e,{path:"/communications",element:i.jsx(KT,{})}),i.jsx($e,{path:"/communications/legacy",element:i.jsx(YT,{})}),i.jsx($e,{path:"/communications/create",element:i.jsx(XT,{})}),i.jsx($e,{path:"/communications/email",element:i.jsx(QT,{})}),i.jsx($e,{path:"/communications/sms",element:i.jsx(eM,{})}),i.jsx($e,{path:"/communications/social",element:i.jsx(tM,{})}),i.jsx($e,{path:"/communications/ai",element:i.jsx(dR,{})}),i.jsx($e,{path:"/communications/design-studio",element:i.jsx(bR,{})}),i.jsx($e,{path:"/documents",element:i.jsx(hR,{})}),i.jsx($e,{path:"/documents/upload",element:i.jsx(fR,{})}),i.jsx($e,{path:"/shared-library",element:i.jsx(pR,{})}),i.jsx($e,{path:"/ai-event-ideas",element:i.jsx(mR,{})}),i.jsx($e,{path:"/ai-workflow-orchestrator",element:i.jsx(vR,{})})]})}),i.jsx($e,{element:i.jsx(ns,{allowedRoles:["teacher"]}),children:i.jsxs($e,{element:i.jsx(as,{}),children:[i.jsx($e,{path:"/dashboard/teacher",element:i.jsx(vb,{})}),i.jsx($e,{path:"/teacher-requests",element:i.jsx(yR,{})}),i.jsx($e,{path:"/teacher-requests/create",element:i.jsx(xR,{})})]})}),i.jsx($e,{element:i.jsx(ns,{allowedRoles:["board_member"]}),children:i.jsx($e,{element:i.jsx(as,{}),children:i.jsx($e,{path:"/dashboard/board",element:i.jsx(fb,{})})})}),i.jsx($e,{element:i.jsx(ns,{allowedRoles:["committee_lead"]}),children:i.jsx($e,{element:i.jsx(as,{}),children:i.jsx($e,{path:"/dashboard/committee",element:i.jsx(pb,{})})})}),i.jsx($e,{element:i.jsx(ns,{allowedRoles:["volunteer"]}),children:i.jsx($e,{element:i.jsx(as,{}),children:i.jsx($e,{path:"/dashboard/volunteer",element:i.jsx(mb,{})})})}),i.jsx($e,{element:i.jsx(ns,{allowedRoles:["parent_member"]}),children:i.jsx($e,{element:i.jsx(as,{}),children:i.jsx($e,{path:"/dashboard/parent",element:i.jsx(gb,{})})})})]})}kd.createRoot(document.getElementById("root")).render(i.jsx(ue.StrictMode,{children:i.jsx(T2,{children:i.jsx(LR,{})})}));export{us as _};
//# sourceMappingURL=index-3m1pqkfQ.js.map
