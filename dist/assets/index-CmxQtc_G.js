const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CUk3EGg0.js","assets/react-vendor-Cx5d5nzo.js","assets/ui-vendor-CBmItocf.js","assets/supabase-BqcIUn8s.js","assets/data-vendor-CsgsME1N.js"])))=>i.map(i=>d[i]);
import{j as i,B as M1,L as og,G as lg,S as cg,C as ss,U as I1,a as cr,b as is,E as bo,c as ac,T as R1,P as Le,D as bd,d as F1,e as $1,f as ug,g as B1,A as Pf,h as Df,i as dg,r as sa,M as Ml,k as q1,l as hg,m as kf,n as Of,o as z1,Z as U1,p as Tf,q as W1,s as H1,t as fg,u as pg,I as $u,v as Mf,w as If,x as G1,y as V1,z as Y1,F as K1,R as X1,H as J1,J as Z1,K as Q1,N as e2,O as t2,Q as r2}from"./ui-vendor-CBmItocf.js";import{b as n2,r as W,N as Bu,O as mg,u as Hn,d as gg,L as Cr,e as a2,g as Rr,f as ue,c as nn,h as vg,i as s2,j as i2,k as $e,B as o2}from"./react-vendor-Cx5d5nzo.js";import{c as l2,_ as xd}from"./supabase-BqcIUn8s.js";import{a as xr}from"./data-vendor-CsgsME1N.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var yd={},Rf=n2;yd.createRoot=Rf.createRoot,yd.hydrateRoot=Rf.hydrateRoot;const c2=void 0,u2=void 0,ze=l2(c2,u2);function Ta(){const[e,t]=W.useState(null),[r,n]=W.useState(null),[a,s]=W.useState(!0),[o,l]=W.useState(null);return W.useEffect(()=>{const g=async()=>{try{s(!0),l(null);const{data:{user:N},error:x}=await ze.auth.getUser();if(x)throw x;if(!N){t(null),n(null),s(!1);return}const{data:S,error:y}=await ze.from("profiles").select(`
            *,
            organizations (
              id,
              name
            )
          `).eq("id",N.id).single();if(y)throw y;t(S),n(S==null?void 0:S.organizations)}catch(N){console.error("Error fetching user profile:",N),l(N.message)}finally{s(!1)}};g();const{data:{subscription:f}}=ze.auth.onAuthStateChange((N,x)=>{N==="SIGNED_OUT"?(t(null),n(null)):N==="SIGNED_IN"&&x&&g()});return()=>f.unsubscribe()},[]),{profile:e,organization:r,loading:a,error:o,updateProfile:async g=>{try{const{data:f,error:N}=await ze.from("profiles").update(g).eq("id",e.id).select().single();if(N)throw N;return t(x=>({...x,...f})),{data:f,error:null}}catch(f){return console.error("Error updating profile:",f),{data:null,error:f.message}}},hasRole:g=>(e==null?void 0:e.role)===g,hasAnyRole:g=>g.includes(e==null?void 0:e.role),isSubscriptionActive:()=>!0,isAuthenticated:!!e}}function Ja({allowedRoles:e}){const{profile:t,loading:r,isAuthenticated:n,isSubscriptionActive:a}=Ta();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):n?e&&!e.includes(t==null?void 0:t.role)?i.jsx(Bu,{to:"/unauthorized",replace:!0}):!a()&&window.location.pathname!=="/billing"?i.jsx(Bu,{to:"/billing",replace:!0}):i.jsx(mg,{}):i.jsx(Bu,{to:"/login",replace:!0})}function d2(){const[e,t]=W.useState([]),[r,n]=W.useState(!1),a=W.useRef(),s=Hn();W.useEffect(()=>(o(),document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)),[]);const o=async()=>{const g=await(await fetch("/api/notifications",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).json();t(g)},l=m=>{a.current&&!a.current.contains(m.target)&&n(!1)},c=async m=>{await fetch(`/api/notifications/${m.id}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),s(m.module_link||"/"),n(!1)},d=async()=>{await fetch("/api/notifications/clear",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),t([])},p=e.length;return i.jsxs("div",{className:"relative",ref:a,children:[i.jsxs("button",{onClick:()=>n(m=>!m),className:"relative p-2 hover:bg-gray-100 rounded-full",children:[i.jsx(M1,{className:"w-6 h-6 text-gray-700"}),p>0&&i.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 bg-red-600 rounded-full animate-pulse"})]}),r&&i.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white shadow-lg rounded-lg overflow-hidden z-50",children:[i.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b",children:[i.jsx("h3",{className:"font-semibold text-sm",children:"Notifications"}),i.jsx("button",{onClick:d,className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto",children:e.length===0?i.jsx("p",{className:"text-sm text-gray-500 p-4",children:"No new notifications"}):e.map(m=>i.jsxs("button",{onClick:()=>c(m),className:"w-full text-left px-4 py-3 hover:bg-gray-100 border-b",children:[i.jsx("p",{className:"font-medium text-sm",children:m.title}),m.message&&i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:m.message}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(m.created_at).toLocaleString()})]},m.id))})]})]})}function h2(){const e=Hn(),t=async()=>{await ze.auth.signOut(),localStorage.removeItem("access_token"),e("/login")};return i.jsx("button",{onClick:t,className:"text-sm bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",children:"Logout"})}const f2=[{to:"/dashboard/admin",label:"Dashboard",roles:["admin"]},{to:"/events",label:"Events",roles:["admin","teacher","parent_member"]},{to:"/fundraisers",label:"Fundraisers",roles:["admin","treasurer"]},{to:"/budget",label:"Budget",roles:["admin","treasurer"]},{to:"/communications",label:"Communications",roles:["admin","committee_lead","teacher"]},{to:"/teacher-requests",label:"Teacher Requests",roles:["admin","teacher"]},{to:"/billing",label:"Billing",roles:["admin"]}];function p2({role:e}){const t=gg(),r=f2.filter(n=>n.roles.includes(e));return i.jsx("aside",{className:"w-64 bg-white border-r shadow-sm hidden md:block",children:i.jsx("nav",{className:"px-4 py-6 space-y-2",children:r.map(n=>i.jsx(Cr,{to:n.to,className:`block px-3 py-2 rounded text-sm font-medium ${t.pathname===n.to?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:n.label},n.to))})})}function m2(){return i.jsxs("footer",{className:"text-xs text-gray-500 text-center py-4 border-t bg-white",children:["PTO Connect © ",new Date().getFullYear()," — Need help? Visit our support page."]})}function Za(){const[e,t]=W.useState(null),[r,n]=W.useState(null);return W.useEffect(()=>{async function a(){const{data:{user:s}}=await ze.auth.getUser();t(s);const{data:o}=await ze.from("profiles").select("role").eq("id",s.id).single();n(o==null?void 0:o.role)}a()},[]),!e||!r?null:i.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[i.jsxs("header",{className:"bg-white shadow-sm px-6 py-4 flex justify-between items-center w-full",children:[i.jsx("span",{className:"text-xl font-bold text-blue-700",children:"PTO Connect"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(d2,{}),i.jsx(h2,{})]})]}),i.jsxs("div",{className:"flex flex-1",children:[i.jsx(p2,{role:r}),i.jsx("main",{className:"flex-1 p-6",children:i.jsx(mg,{})})]}),i.jsx(m2,{})]})}const g2={admin:"/dashboard/admin",board_member:"/dashboard/board",committee_lead:"/dashboard/committee",volunteer:"/dashboard/volunteer",parent_member:"/dashboard/parent",teacher:"/dashboard/teacher"};function v2(e){return g2[e]||"/unauthorized"}function Ff(){const[e,t]=W.useState(""),[r,n]=W.useState(""),[a,s]=W.useState(""),[o,l]=W.useState(!1),c=Hn(),d=async p=>{var S;if(p&&p.preventDefault(),l(!0),s(""),!e||!r){s("Email and password are required."),l(!1);return}const{data:m,error:g}=await ze.auth.signInWithPassword({email:e,password:r});if(g||!(m!=null&&m.user)){console.error("Login error:",g),s((g==null?void 0:g.message)||"Login failed."),l(!1);return}const f=m.user,N=(S=f==null?void 0:f.user_metadata)==null?void 0:S.role;if(!N){s("Your account does not have a role assigned."),l(!1);return}const x=v2(N);c(x),l(!1)};return i.jsxs("div",{className:"p-6 max-w-md mx-auto",children:[i.jsx("h1",{className:"text-xl font-bold mb-4",children:"Log In"}),i.jsxs("form",{onSubmit:d,className:"space-y-4",children:[i.jsx("input",{className:"border p-2 w-full rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",type:"email",value:e,onChange:p=>t(p.target.value),placeholder:"Email",required:!0,disabled:o,autoComplete:"email"}),i.jsx("input",{className:"border p-2 w-full rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",type:"password",value:r,onChange:p=>n(p.target.value),placeholder:"Password",required:!0,disabled:o,autoComplete:"current-password"}),i.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white px-4 py-2 rounded w-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Logging in...":"Log In"}),a&&i.jsx("p",{className:"text-red-500 mt-2",children:a})]})]})}const b2=["admin","treasurer","board_member"];function x2(){const[e,t]=W.useState(""),[r,n]=W.useState(""),[a,s]=W.useState(""),[o,l]=W.useState("parent_member"),[c,d]=W.useState(""),[p,m]=W.useState(""),g=async()=>{if(d(""),m(""),!e||!r||!a||!o){d("All fields are required.");return}const{data:f,error:N}=await ze.from("ptos").select("id").ilike("code",a).single();if(N||!(f!=null&&f.id)){console.error("PTO code lookup failed:",N),d("Invalid PTO code. Please check with your organization.");return}const x=f.id,{data:S,error:y}=await ze.auth.signUp({email:e,password:r,options:{data:{org_id:x,role:o}}});if(y||!(S!=null&&S.user)){console.error("Signup error:",y),d((y==null?void 0:y.message)||"Signup failed.");return}const w=S.user,_=!b2.includes(o),{data:E}=await ze.from("profiles").select("id").eq("id",w.id).maybeSingle();if(E){console.warn("Profile already exists, skipping insert."),m("Signup successful! You can now log in.");return}const{error:L}=await ze.from("profiles").insert([{id:w.id,email:e,org_id:x,role:o,approved:_}]);L?(console.error("Profile insert error:",L),d("Signup successful, but failed to save profile.")):(m(_?"Signup successful! You can now log in.":"Signup submitted. An admin must approve your role before you can access the system."),t(""),n(""),s(""),l("parent_member"))};return i.jsxs("div",{className:"p-6 max-w-md mx-auto",children:[i.jsx("h1",{className:"text-xl font-bold mb-4",children:"Sign Up"}),i.jsx("input",{className:"border p-2 w-full mb-2",type:"email",value:e,onChange:f=>t(f.target.value),placeholder:"Email",required:!0}),i.jsx("input",{className:"border p-2 w-full mb-2",type:"password",value:r,onChange:f=>n(f.target.value),placeholder:"Password",required:!0}),i.jsx("input",{className:"border p-2 w-full mb-2",type:"text",value:a,onChange:f=>s(f.target.value),placeholder:"PTO Code (e.g. abc123xy)",required:!0}),i.jsxs("select",{className:"border p-2 w-full mb-4",value:o,onChange:f=>l(f.target.value),required:!0,children:[i.jsx("option",{value:"parent_member",children:"Parent Member"}),i.jsx("option",{value:"teacher",children:"Teacher"}),i.jsx("option",{value:"volunteer",children:"Volunteer"}),i.jsx("option",{value:"committee_lead",children:"Committee Lead"}),i.jsx("option",{value:"board_member",children:"Board Member"}),i.jsx("option",{value:"treasurer",children:"Treasurer"}),i.jsx("option",{value:"admin",children:"Admin"})]}),i.jsx("button",{onClick:g,className:"bg-green-600 text-white px-4 py-2 rounded w-full",children:"Sign Up"}),c&&i.jsx("p",{className:"text-red-500 mt-2",children:c}),p&&i.jsx("p",{className:"text-green-600 mt-2",children:p})]})}function y2(){return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-6",children:i.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 max-w-md text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),i.jsx("p",{className:"text-gray-700 mb-6",children:"You don’t have permission to view this page."}),i.jsx(Cr,{to:"/",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Return to Home"})]})})}const w2=()=>{var _,E,L,B;const{userProfile:e}=Ta(),[t,r]=W.useState("membership"),[n,a]=W.useState("6months"),[s,o]=W.useState({membership:[],events:[],financial:[],engagement:[]}),[l,c]=W.useState(!0);W.useEffect(()=>{e!=null&&e.org_id&&d()},[e,n]);const d=async()=>{try{c(!0);const T=new Date,C=new Date;switch(n){case"3months":C.setMonth(T.getMonth()-3);break;case"6months":C.setMonth(T.getMonth()-6);break;case"1year":C.setFullYear(T.getFullYear()-1);break;default:C.setMonth(T.getMonth()-6)}const[$,H,A,O]=await Promise.all([p(C,T),m(C,T),g(C,T),f(C,T)]);o({membership:$,events:H,financial:A,engagement:O})}catch(T){console.error("Error fetching chart data:",T)}finally{c(!1)}},p=async(T,C)=>{const $=[],H=new Date(T);for(;H<=C;){const A=new Date(H.getFullYear(),H.getMonth(),1),O=new Date(H.getFullYear(),H.getMonth()+1,0),{count:F}=await ze.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id).lte("created_at",O.toISOString());$.push({month:A.toLocaleDateString("en-US",{month:"short"}),value:F||0,date:A}),H.setMonth(H.getMonth()+1)}return $},m=async(T,C)=>{const{data:$}=await ze.from("events").select("event_date, title, status").eq("org_id",e.org_id).gte("event_date",T.toISOString()).lte("event_date",C.toISOString()).order("event_date"),H={};return $==null||$.forEach(A=>{const O=new Date(A.event_date).toLocaleDateString("en-US",{month:"short"});H[O]||(H[O]={total:0,completed:0}),H[O].total++,A.status==="completed"&&H[O].completed++}),Object.entries(H).map(([A,O])=>({month:A,total:O.total,completed:O.completed,success_rate:O.total>0?Math.round(O.completed/O.total*100):0}))},g=async(T,C)=>{const{data:$}=await ze.from("budget_entries").select("amount, type, category, created_at").eq("org_id",e.org_id).gte("created_at",T.toISOString()).lte("created_at",C.toISOString()),H={};return $==null||$.forEach(A=>{H[A.category]||(H[A.category]={income:0,expenses:0}),A.type==="income"?H[A.category].income+=A.amount:H[A.category].expenses+=A.amount}),Object.entries(H).map(([A,O])=>({category:A,income:O.income,expenses:O.expenses,net:O.income-O.expenses}))},f=async(T,C)=>{const $=[],H=new Date(T);for(;H<=C;){const A=H.toLocaleDateString("en-US",{month:"short"}),O=65,F=Math.random()*20-10,U=Math.max(0,Math.min(100,O+F));$.push({month:A,engagement:Math.round(U),email_opens:Math.round(U*.8),event_attendance:Math.round(U*.6),volunteer_participation:Math.round(U*.4)}),H.setMonth(H.getMonth()+1)}return $},N=(T,C,$="#3B82F6")=>{if(!T||T.length===0)return null;const H=Math.max(...T.map(U=>U[C]||0)),A=Math.min(...T.map(U=>U[C]||0)),O=H-A||1,F=T.map((U,te)=>{const re=te/(T.length-1)*100,Z=100-((U[C]||0)-A)/O*80-10;return`${re},${Z}`}).join(" ");return i.jsxs("div",{className:"relative h-64 bg-gray-50 rounded-lg p-4",children:[i.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[i.jsx("polyline",{fill:"none",stroke:$,strokeWidth:"0.5",points:F}),T.map((U,te)=>{const re=te/(T.length-1)*100,Z=100-((U[C]||0)-A)/O*80-10;return i.jsx("circle",{cx:re,cy:Z,r:"1",fill:$},te)})]}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between text-xs text-gray-500 px-4",children:T.map((U,te)=>i.jsx("span",{children:U.month},te))}),i.jsxs("div",{className:"absolute left-0 top-0 bottom-0 flex flex-col justify-between text-xs text-gray-500 py-4",children:[i.jsx("span",{children:H}),i.jsx("span",{children:Math.round((H+A)/2)}),i.jsx("span",{children:A})]})]})},x=(T,C,$="#10B981")=>{if(!T||T.length===0)return null;const H=Math.max(...T.map(A=>A[C]||0));return i.jsx("div",{className:"relative h-64 bg-gray-50 rounded-lg p-4",children:i.jsx("div",{className:"flex items-end justify-between h-full space-x-2",children:T.map((A,O)=>{const F=H>0?(A[C]||0)/H*100:0;return i.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[i.jsx("div",{className:"w-full rounded-t",style:{height:`${F}%`,backgroundColor:$,minHeight:F>0?"4px":"0"}}),i.jsx("span",{className:"text-xs text-gray-500 mt-2",children:A.month})]},O)})})})},S=T=>{if(!T||T.length===0)return null;const C=T.reduce((A,O)=>A+Math.abs(O.net||0),0);let $=0;const H=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6"];return i.jsxs("div",{className:"relative h-64 flex items-center justify-center",children:[i.jsxs("svg",{className:"w-48 h-48",viewBox:"0 0 100 100",children:[T.map((A,O)=>{const U=(C>0?Math.abs(A.net||0)/C:0)*360,te=$,re=$+U,Z=50+35*Math.cos(te*Math.PI/180),Q=50+35*Math.sin(te*Math.PI/180),Y=50+35*Math.cos(re*Math.PI/180),X=50+35*Math.sin(re*Math.PI/180),ce=U>180?1:0,P=["M 50 50",`L ${Z} ${Q}`,`A 35 35 0 ${ce} 1 ${Y} ${X}`,"Z"].join(" ");return $+=U,i.jsx("path",{d:P,fill:H[O%H.length],opacity:.8},O)}),i.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"white"})]}),i.jsx("div",{className:"absolute right-0 top-0 space-y-2",children:T.map((A,O)=>i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:H[O%H.length]}}),i.jsx("span",{className:"text-gray-700",children:A.category})]},O))})]})},y=()=>{const T=s[t],C="data:text/csv;charset=utf-8,"+Object.keys(T[0]||{}).join(",")+`
`+T.map(A=>Object.values(A).join(",")).join(`
`),$=encodeURI(C),H=document.createElement("a");H.setAttribute("href",$),H.setAttribute("download",`${t}_analytics.csv`),document.body.appendChild(H),H.click(),document.body.removeChild(H)},w={membership:{title:"Membership Growth",description:"Track member acquisition and retention over time",dataKey:"value",color:"#3B82F6"},events:{title:"Event Performance",description:"Monitor event frequency and success rates",dataKey:"total",color:"#10B981"},financial:{title:"Financial Distribution",description:"Analyze income and expenses by category",dataKey:"net",color:"#F59E0B"},engagement:{title:"Member Engagement",description:"Measure community participation and activity",dataKey:"engagement",color:"#8B5CF6"}};return l?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),i.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Analytics Dashboard"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("select",{value:n,onChange:T=>a(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"3months",children:"Last 3 Months"}),i.jsx("option",{value:"6months",children:"Last 6 Months"}),i.jsx("option",{value:"1year",children:"Last Year"})]}),i.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors",children:"Export CSV"})]})]}),i.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:Object.entries(w).map(([T,C])=>i.jsx("button",{onClick:()=>r(T),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${t===T?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:C.title},T))})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:w[t].title}),i.jsx("p",{className:"text-sm text-gray-600",children:w[t].description})]}),i.jsxs("div",{className:"mb-6",children:[t==="membership"&&N(s.membership,w.membership.dataKey,w.membership.color),t==="events"&&x(s.events,w.events.dataKey,w.events.color),t==="financial"&&S(s.financial),t==="engagement"&&N(s.engagement,w.engagement.dataKey,w.engagement.color)]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[t==="membership"&&s.membership.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:((_=s.membership[s.membership.length-1])==null?void 0:_.value)||0}),i.jsx("p",{className:"text-sm text-gray-600",children:"Current Members"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",s.membership.length>1?(((E=s.membership[s.membership.length-1])==null?void 0:E.value)||0)-(((L=s.membership[0])==null?void 0:L.value)||0):0]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Growth"})]})]}),t==="events"&&s.events.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.events.reduce((T,C)=>T+C.total,0)}),i.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[s.events.length>0?Math.round(s.events.reduce((T,C)=>T+C.success_rate,0)/s.events.length):0,"%"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Avg Success Rate"})]})]}),t==="financial"&&s.financial.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",s.financial.reduce((T,C)=>T+C.income,0).toLocaleString()]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Total Income"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",s.financial.reduce((T,C)=>T+C.expenses,0).toLocaleString()]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"})]})]}),t==="engagement"&&s.engagement.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[((B=s.engagement[s.engagement.length-1])==null?void 0:B.engagement)||0,"%"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Current Engagement"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[s.engagement.length>0?Math.round(s.engagement.reduce((T,C)=>T+C.email_opens,0)/s.engagement.length):0,"%"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Avg Email Opens"})]})]})]})]})]})},N2=()=>{const{userProfile:e}=Ta(),[t,r]=W.useState([]),[n,a]=W.useState("all"),[s,o]=W.useState(!0);W.useEffect(()=>{e!=null&&e.org_id&&l()},[e]);const l=async()=>{try{o(!0);const w=[],_=await c();w.push(..._);const E=await d();w.push(...E);const L=await p();w.push(...L);const B=await m();w.push(...B),w.sort((T,C)=>{const $={high:3,medium:2,low:1};return $[T.priority]!==$[C.priority]?$[C.priority]-$[T.priority]:new Date(C.timestamp)-new Date(T.timestamp)}),r(w)}catch(w){console.error("Error generating smart notifications:",w)}finally{o(!1)}},c=async()=>{const w=[];try{const{data:_}=await ze.from("budget_entries").select("amount, category, type").eq("org_id",e.org_id);if(_&&_.length>0){const E=_.filter(C=>C.type==="income").reduce((C,$)=>C+$.amount,0),L=_.filter(C=>C.type==="expense").reduce((C,$)=>C+$.amount,0),B=E>0?L/E*100:0;B>80?w.push({id:"budget-alert-1",type:"budget",priority:"high",title:"Budget Alert: Events Category",message:`Events budget is ${Math.round(B)}% spent with 3 months remaining. Consider reviewing upcoming event costs.`,timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Review Budget",action:"review_budget"},{label:"View Details",action:"view_details"}]}):B>60&&w.push({id:"budget-alert-2",type:"budget",priority:"medium",title:"Budget Tracking",message:`Budget is ${Math.round(B)}% utilized. On track for current period.`,timestamp:new Date().toISOString(),actionable:!1,actions:[]});const T=_.reduce((C,$)=>(C[$.category]||(C[$.category]={income:0,expenses:0}),$.type==="income"?C[$.category].income+=$.amount:C[$.category].expenses+=$.amount,C),{});Object.entries(T).forEach(([C,$])=>{const H=$.income>0?$.expenses/$.income*100:0;H>90&&w.push({id:`budget-category-${C}`,type:"budget",priority:"high",title:`${C} Budget Alert`,message:`${C} category is ${Math.round(H)}% spent. Immediate attention required.`,timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Review Category",action:"review_category"},{label:"Adjust Budget",action:"adjust_budget"}]})})}}catch(_){console.error("Error generating budget alerts:",_)}return w},d=async()=>{const w=[];try{const _=new Date;_.setDate(_.getDate()-30);const{count:E}=await ze.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id).gte("created_at",_.toISOString()),{count:L}=await ze.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id),B=L>0?E/L*100:0;B<5?w.push({id:"membership-growth-1",type:"membership",priority:"medium",title:"Membership Growth Trending Down",message:"New member registrations have decreased by 15% this month. Consider launching a recruitment campaign.",timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Start Campaign",action:"start_campaign"},{label:"View Analytics",action:"view_analytics"}]}):B>15&&w.push({id:"membership-growth-2",type:"membership",priority:"low",title:"Excellent Membership Growth",message:`Outstanding! New member registrations increased by ${Math.round(B)}% this month.`,timestamp:new Date().toISOString(),actionable:!1,actions:[]});const{count:T}=await ze.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id).gte("last_sign_in_at",_.toISOString()),C=L>0?T/L*100:0;C<40&&w.push({id:"engagement-alert-1",type:"engagement",priority:"medium",title:"Low Member Engagement",message:`Only ${Math.round(C)}% of members were active this month. Consider increasing communication frequency.`,timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Send Newsletter",action:"send_newsletter"},{label:"Plan Event",action:"plan_event"}]})}catch(_){console.error("Error generating membership insights:",_)}return w},p=async()=>{const w=[];try{const _=new Date;_.setDate(_.getDate()+7);const{data:E}=await ze.from("events").select("id, title, event_date, volunteer_slots_needed, volunteer_slots_filled").eq("org_id",e.org_id).gte("event_date",new Date().toISOString()).lte("event_date",_.toISOString());E==null||E.forEach(T=>{const C=Math.ceil((new Date(T.event_date)-new Date)/864e5),$=(T.volunteer_slots_needed||0)-(T.volunteer_slots_filled||0);C<=3&&$>0?w.push({id:`event-volunteer-${T.id}`,type:"events",priority:"high",title:`Volunteer Shortage: ${T.title}`,message:`${T.title} in ${C} days needs ${$} more volunteers.`,timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Send Reminder",action:"send_reminder"},{label:"View Event",action:"view_event"}]}):C<=7&&w.push({id:`event-reminder-${T.id}`,type:"events",priority:"low",title:`Upcoming Event: ${T.title}`,message:`${T.title} is coming up in ${C} days. All preparations on track.`,timestamp:new Date().toISOString(),actionable:!1,actions:[]})});const{data:L}=await ze.from("events").select("id, title, event_date, updated_at").eq("org_id",e.org_id).gte("event_date",new Date().toISOString()),B=new Date;B.setDate(B.getDate()-14),L==null||L.forEach(T=>{new Date(T.updated_at)<B&&w.push({id:`event-stale-${T.id}`,type:"events",priority:"medium",title:`Event Needs Attention: ${T.title}`,message:`${T.title} hasn't been updated in 2 weeks. Consider reviewing event details.`,timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Update Event",action:"update_event"},{label:"View Details",action:"view_details"}]})})}catch(_){console.error("Error generating event alerts:",_)}return w},m=async()=>{const w=[];w.push({id:"goal-achievement-1",type:"goals",priority:"low",title:"Goal Achievement: Volunteer Hours",message:"Congratulations! Volunteer hours goal exceeded by 104% this quarter.",timestamp:new Date().toISOString(),actionable:!1,actions:[]});const _=new Date().getMonth();return _>=8&&_<=10&&w.push({id:"seasonal-insight-1",type:"seasonal",priority:"medium",title:"Fall Fundraising Opportunity",message:"Fall is peak fundraising season. Consider launching a major campaign now.",timestamp:new Date().toISOString(),actionable:!0,actions:[{label:"Create Campaign",action:"create_campaign"},{label:"View Templates",action:"view_templates"}]}),w.push({id:"communication-insight-1",type:"communication",priority:"low",title:"Communication Performance",message:"Email open rates increased by 8% this month. Great job on engaging content!",timestamp:new Date().toISOString(),actionable:!1,actions:[]}),w},g=(w,_)=>{switch(console.log(`Executing action: ${w} for notification: ${_}`),w){case"review_budget":break;case"start_campaign":break;case"send_reminder":break;case"view_analytics":break;default:console.log("Action not implemented:",w)}},f=w=>{r(_=>_.filter(E=>E.id!==w))},N=t.filter(w=>n==="all"?!0:n==="actionable"?w.actionable:w.type===n),x=w=>{switch(w){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-blue-200 bg-blue-50";default:return"border-gray-200 bg-gray-50"}},S=w=>{switch(w){case"high":return i.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"medium":return i.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"low":return i.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}},y=w=>{switch(w){case"budget":return i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})});case"membership":return i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})});case"events":return i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})});case"engagement":return i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})});default:return i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4 19h5v-5H4v5zM13 13h5V8h-5v5zM4 8h5V3H4v5z"})})}};return s?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"h-16 bg-gray-200 rounded"}),i.jsx("div",{className:"h-16 bg-gray-200 rounded"}),i.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})]})}):i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:i.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4 19h5v-5H4v5zM13 13h5V8h-5v5zM4 8h5V3H4v5z"})})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Smart Notifications"}),i.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered insights and alerts"})]})]}),i.jsx("button",{className:"text-blue-600 text-sm font-medium hover:text-blue-700",children:"View All"})]}),i.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[{key:"all",label:"All"},{key:"actionable",label:"Actionable"},{key:"budget",label:"Budget"},{key:"events",label:"Events"},{key:"membership",label:"Members"}].map(({key:w,label:_})=>i.jsx("button",{onClick:()=>a(w),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${n===w?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:_},w))})]}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:N.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("p",{className:"text-gray-500",children:"No notifications to display"})]}):N.map(w=>i.jsx("div",{className:`border rounded-lg p-4 ${x(w.priority)}`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[S(w.priority),i.jsx("div",{className:"text-gray-500",children:y(w.type)})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:w.title}),i.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w.priority==="high"?"bg-red-100 text-red-800":w.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:[w.priority," priority"]})]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.message}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(w.timestamp).toLocaleString()}),w.actions.length>0&&i.jsx("div",{className:"flex items-center space-x-2 mt-3",children:w.actions.map((_,E)=>i.jsx("button",{onClick:()=>g(_.action,w.id),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:_.label},E))})]})]}),i.jsx("button",{onClick:()=>f(w.id),className:"text-gray-400 hover:text-gray-600 ml-2",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},w.id))})})]})},j2=()=>{const{userProfile:e,loading:t}=Ta(),[r,n]=W.useState({metrics:{totalMembers:0,activeEvents:0,budgetUsed:0,engagementRate:0},recentActivity:[],upcomingEvents:[],pendingTasks:[],financialSummary:{totalBudget:0,spent:0,remaining:0,categories:[]}}),[a,s]=W.useState(!0);W.useEffect(()=>{e!=null&&e.org_id&&o()},[e]);const o=async()=>{try{s(!0);const y=[l(),c(),d(),p()],[w,_,E,L]=await Promise.all(y),[B,T,C]=await Promise.all([m(),g(),f()]);n({metrics:{totalMembers:w,activeEvents:_,budgetUsed:E.percentUsed,engagementRate:L},recentActivity:B,upcomingEvents:T,pendingTasks:C,financialSummary:E})}catch(y){console.error("Error fetching dashboard data:",y)}finally{s(!1)}},l=async()=>{const{count:y}=await ze.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id);return y||0},c=async()=>{const{count:y}=await ze.from("events").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id).gte("event_date",new Date().toISOString());return y||0},d=async()=>{const{data:y}=await ze.from("budget_entries").select("amount, category, type").eq("org_id",e.org_id);if(!y)return{percentUsed:0,totalBudget:0,spent:0,remaining:0,categories:[]};const w=y.filter(L=>L.type==="income").reduce((L,B)=>L+B.amount,0),_=y.filter(L=>L.type==="expense").reduce((L,B)=>L+B.amount,0),E=y.reduce((L,B)=>(L[B.category]||(L[B.category]={income:0,expenses:0}),B.type==="income"?L[B.category].income+=B.amount:L[B.category].expenses+=B.amount,L),{});return{totalBudget:w,spent:_,remaining:w-_,percentUsed:w>0?Math.round(_/w*100):0,categories:Object.entries(E).map(([L,B])=>({name:L,...B,net:B.income-B.expenses}))}},p=async()=>{const y=new Date;y.setDate(y.getDate()-30);const{count:w}=await ze.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id).gte("last_sign_in_at",y.toISOString()),{count:_}=await ze.from("users").select("*",{count:"exact",head:!0}).eq("org_id",e.org_id);return _>0?Math.round(w/_*100):0},m=async()=>{const{data:y}=await ze.from("events").select("title, created_at, created_by").eq("org_id",e.org_id).order("created_at",{ascending:!1}).limit(5),{data:w}=await ze.from("users").select("first_name, last_name, created_at").eq("org_id",e.org_id).order("created_at",{ascending:!1}).limit(3),_=[];return y&&y.forEach(E=>{_.push({type:"event_created",title:`New event: ${E.title}`,timestamp:E.created_at,user:"System"})}),w&&w.forEach(E=>{_.push({type:"user_joined",title:`${E.first_name} ${E.last_name} joined`,timestamp:E.created_at,user:`${E.first_name} ${E.last_name}`})}),_.sort((E,L)=>new Date(L.timestamp)-new Date(E.timestamp)).slice(0,8)},g=async()=>{const{data:y}=await ze.from("events").select("id, title, event_date, location, status").eq("org_id",e.org_id).gte("event_date",new Date().toISOString()).order("event_date",{ascending:!0}).limit(5);return y||[]},f=async()=>{const y=[];return(e.role==="admin"||e.role==="board_member")&&y.push({id:1,title:"Review budget proposal",priority:"high",dueDate:"2025-06-10"},{id:2,title:"Approve volunteer applications",priority:"medium",dueDate:"2025-06-12"},{id:3,title:"Update event calendar",priority:"low",dueDate:"2025-06-15"}),y},N=y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(y),x=y=>new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),S=y=>{const w=new Date,_=new Date(y),E=Math.floor((w-_)/(1e3*60*60));if(E<1)return"Just now";if(E<24)return`${E}h ago`;const L=Math.floor(E/24);return L<7?`${L}d ago`:x(y)};return t||a?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",e==null?void 0:e.first_name,"!"]}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Here's what's happening with your PTO today"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.metrics.totalMembers})]}),i.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})]}),i.jsx("div",{className:"mt-4",children:i.jsx("span",{className:"text-sm text-green-600",children:"+12% from last month"})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Events"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.metrics.activeEvents})]}),i.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),i.jsx("div",{className:"mt-4",children:i.jsx("span",{className:"text-sm text-blue-600",children:"3 this month"})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Budget Used"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[r.metrics.budgetUsed,"%"]})]}),i.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]}),i.jsx("div",{className:"mt-4",children:i.jsxs("span",{className:"text-sm text-gray-600",children:[N(r.financialSummary.remaining)," remaining"]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Engagement Rate"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[r.metrics.engagementRate,"%"]})]}),i.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),i.jsx("div",{className:"mt-4",children:i.jsx("span",{className:"text-sm text-green-600",children:"+5% from last month"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Activity"})}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:r.recentActivity.map((y,w)=>i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${y.type==="event_created"?"bg-blue-500":"bg-green-500"}`})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.title}),i.jsx("p",{className:"text-sm text-gray-500",children:S(y.timestamp)})]})]},w))})})]}),i.jsx(w2,{})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx(N2,{}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upcoming Events"})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[r.upcomingEvents.map(y=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:y.title}),i.jsx("p",{className:"text-sm text-gray-600",children:x(y.event_date)}),y.location&&i.jsx("p",{className:"text-sm text-gray-500",children:y.location})]}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y.status==="confirmed"?"bg-green-100 text-green-800":y.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:y.status})]},y.id)),r.upcomingEvents.length===0&&i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming events"})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quick Actions"})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("button",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[i.jsx("svg",{className:"w-6 h-6 text-blue-600 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("span",{className:"text-sm font-medium text-blue-900",children:"New Event"})]}),i.jsxs("button",{className:"flex flex-col items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[i.jsx("svg",{className:"w-6 h-6 text-green-600 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),i.jsx("span",{className:"text-sm font-medium text-green-900",children:"Send Message"})]}),i.jsxs("button",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:[i.jsx("svg",{className:"w-6 h-6 text-purple-600 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),i.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Add Member"})]}),i.jsxs("button",{className:"flex flex-col items-center p-4 bg-yellow-50 rounded-lg hover:bg-yellow-100 transition-colors",children:[i.jsx("svg",{className:"w-6 h-6 text-yellow-600 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),i.jsx("span",{className:"text-sm font-medium text-yellow-900",children:"New Report"})]})]})})]}),r.pendingTasks.length>0&&i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Pending Tasks"})}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-3",children:r.pendingTasks.map(y=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:y.title}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",x(y.dueDate)]})]}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y.priority==="high"?"bg-red-100 text-red-800":y.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:y.priority})]},y.id))})})]})]})]})]})})};function bg(){const{profile:e,organization:t,loading:r}=Ta(),n={admin:5,board_member:4,committee_lead:3,volunteer:2,parent_member:1,teacher:1},a=L=>e!=null&&e.role?n[e.role]>=n[L]:!1,s=L=>e!=null&&e.role?L.includes(e.role):!1,o=L=>(e==null?void 0:e.role)===L,l=()=>a("admin"),c=()=>a("committee_lead"),d=()=>a("committee_lead"),p=()=>a("committee_lead");return{hasRole:a,hasAnyRole:s,hasExactRole:o,canAccessAdminFeatures:l,canManageEvents:c,canManageBudget:d,canManageCommunications:p,canManageUsers:()=>a("admin"),canViewReports:()=>a("board_member"),canCreateEvents:()=>a("volunteer"),canVolunteer:()=>a("parent_member"),isInOrganization:()=>!!(e!=null&&e.org_id)&&!!t,getOrganizationId:()=>e==null?void 0:e.org_id,getOrganizationName:()=>t==null?void 0:t.name,getRoleDisplayName:(L=e==null?void 0:e.role)=>({admin:"Administrator",board_member:"Board Member",committee_lead:"Committee Lead",volunteer:"Volunteer",parent_member:"Parent Member",teacher:"Teacher"})[L]||"Unknown Role",getRoleColor:(L=e==null?void 0:e.role)=>({admin:"bg-red-100 text-red-800",board_member:"bg-purple-100 text-purple-800",committee_lead:"bg-blue-100 text-blue-800",volunteer:"bg-green-100 text-green-800",parent_member:"bg-yellow-100 text-yellow-800",teacher:"bg-indigo-100 text-indigo-800"})[L]||"bg-gray-100 text-gray-800",canAccessRoute:L=>({"/dashboard/admin":l(),"/dashboard/board":a("board_member"),"/dashboard/committee":a("committee_lead"),"/dashboard/volunteer":a("volunteer"),"/dashboard/parent":a("parent_member"),"/dashboard/teacher":o("teacher"),"/events":c(),"/budget":d(),"/communications":p(),"/billing":l(),"/shared-library":a("volunteer"),"/teacher-requests":o("teacher")})[L]??!1,currentRole:e==null?void 0:e.role,currentUserId:e==null?void 0:e.id,loading:r}}function xg(){const{profile:e,loading:t}=Ta(),[r,n]=W.useState({}),[a,s]=W.useState(!0),[o,l]=W.useState(null),c=W.useCallback(async()=>{if(!(!(e!=null&&e.user_id)||t))try{s(!0),l(null);const{data:{session:Z}}=await ze.auth.getSession();if(!(Z!=null&&Z.access_token))throw new Error("No authentication token available");const Y=(await xr.get("/api/admin/organization-permissions/templates",{headers:{Authorization:`Bearer ${Z.access_token}`}})).data.templates||[],X={};for(const ce of Y)try{const{data:P,error:q}=await ze.rpc("user_has_org_permission",{user_id_param:e.user_id,permission_key_param:ce.permission_key});q?(console.warn(`Error checking permission ${ce.permission_key}:`,q.message),X[ce.permission_key]=!1):X[ce.permission_key]=P}catch(P){console.warn(`Failed to check permission ${ce.permission_key}:`,P.message),X[ce.permission_key]=!1}n(X)}catch(Z){console.error("Error fetching user permissions:",Z.message),l(Z.message),n({})}finally{s(!1)}},[e==null?void 0:e.user_id,t]);W.useEffect(()=>{c()},[c]);const d=W.useCallback(Z=>a||!Z?!1:r[Z]||!1,[r,a]),p=W.useCallback(Z=>!Array.isArray(Z)||a?!1:Z.some(Q=>d(Q)),[d,a]),m=W.useCallback(Z=>!Array.isArray(Z)||a?!1:Z.every(Q=>d(Q)),[d,a]),g=W.useCallback(()=>{const Z={};return Object.keys(r).forEach(Q=>{const Y=Q.split("_");if(Y.length>=3){const X=Y.slice(2).join("_");Z[X]||(Z[X]={}),Z[X][Q]=r[Q]}}),Z},[r]),f=W.useCallback(Z=>{const Q=g()[Z]||{};return Object.values(Q).some(Y=>Y)},[g]),N=W.useCallback(()=>{c()},[c]),x=d("can_view_messages"),S=d("can_create_messages"),y=d("can_send_emails"),w=d("can_view_budget"),_=d("can_create_budget_items"),E=d("can_approve_expenses"),L=d("can_view_events"),B=d("can_create_events"),T=d("can_manage_volunteers"),C=d("can_view_fundraisers"),$=d("can_create_fundraisers"),H=d("can_view_documents"),A=d("can_upload_documents"),O=d("can_view_requests"),F=d("can_create_requests"),U=d("can_view_users"),te=d("can_edit_user_roles"),re=d("can_invite_users");return{permissions:r,hasPermission:d,hasAnyPermission:p,hasAllPermissions:m,getPermissionsByModule:g,canAccessModule:f,canViewMessages:x,canCreateMessages:S,canSendEmails:y,canViewBudget:w,canCreateBudgetItems:_,canApproveExpenses:E,canViewEvents:L,canCreateEvents:B,canManageVolunteers:T,canViewFundraisers:C,canCreateFundraisers:$,canViewDocuments:H,canUploadDocuments:A,canViewRequests:O,canCreateRequests:F,canViewUsers:U,canEditUserRoles:te,canInviteUsers:re,loading:a,error:o,refreshPermissions:N,userId:e==null?void 0:e.user_id,orgId:e==null?void 0:e.org_id,userRole:e==null?void 0:e.role}}function Il({permission:e,permissions:t,fallback:r=null,children:n,requireAll:a=!1,showLoading:s=!1,loadingComponent:o=null}){const{hasPermission:l,hasAnyPermission:c,hasAllPermissions:d,loading:p}=xg();if(p&&s)return o||i.jsx("div",{className:"animate-pulse bg-gray-200 rounded h-4 w-24"});if(p)return null;let m=!1;return e?m=l(e):t&&Array.isArray(t)?a?m=d(t):m=c(t):m=!1,m?n:r}function qu(){const{canAccessAdminFeatures:e,getRoleDisplayName:t,getRoleColor:r}=bg();xg();const[n,a]=W.useState([]),[s,o]=W.useState(""),[l,c]=W.useState(!0),[d,p]=W.useState({totalUsers:0,adminUsers:0,boardMembers:0,committeeLeads:0,volunteers:0});return W.useEffect(()=>{async function m(){try{const{data:{session:g}}=await ze.auth.getSession(),f=g==null?void 0:g.access_token;if(!f){o("Not authenticated.");return}const N=await xr.get("/api/admin-users",{headers:{Authorization:`Bearer ${f}`}});if(!Array.isArray(N.data))throw new Error("Invalid API response format (expected array)");a(N.data);const x=N.data.reduce((S,y)=>{switch(S.totalUsers++,y.role){case"admin":S.adminUsers++;break;case"board_member":S.boardMembers++;break;case"committee_lead":S.committeeLeads++;break;case"volunteer":S.volunteers++;break}return S},{totalUsers:0,adminUsers:0,boardMembers:0,committeeLeads:0,volunteers:0});p(x)}catch(g){console.error("Error fetching admin data:",g),o("Failed to load admin dashboard data.")}finally{c(!1)}}e?m():c(!1)},[e]),e?l?i.jsx("div",{className:"max-w-6xl mx-auto p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(m=>i.jsx("div",{className:"h-24 bg-gray-200 rounded"},m))}),i.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):i.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"Manage your organization's users, permissions, and settings."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.totalUsers})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:i.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Administrators"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.adminUsers})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:i.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Board Members"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.boardMembers})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Volunteers"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.volunteers+d.committeeLeads})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),i.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Permission Management"})]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Customize which roles can perform specific actions in your organization."}),i.jsxs(Cr,{to:"/admin/permissions",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:["Manage Permissions",i.jsx("svg",{className:"ml-2 w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),i.jsx(Il,{permission:"can_view_users",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:"User Management"})]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"View and manage user roles, permissions, and organization membership."}),i.jsxs(Cr,{to:"/admin/users",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:["Manage Users",i.jsx("svg",{className:"ml-2 w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:i.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),i.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Organization Settings"})]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Configure organization details, branding, and system preferences."}),i.jsxs(Cr,{to:"/admin/settings",className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:["Organization Settings",i.jsx("svg",{className:"ml-2 w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})]}),i.jsx(Il,{permission:"can_view_users",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Organization Members"}),i.jsx(Cr,{to:"/admin/users",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All Users →"})]})}),s&&i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsx("p",{className:"text-red-600",children:s})})}),!s&&n.length===0&&i.jsx("div",{className:"p-6 text-center text-gray-500",children:"No users found for this organization."}),!s&&n.length>0&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx(Il,{permission:"can_edit_user_roles",children:i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.slice(0,10).map(m=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.full_name||"No name provided"}),i.jsx("div",{className:"text-sm text-gray-500",children:m.email})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r(m.role)}`,children:t(m.role)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})}),i.jsx(Il,{permission:"can_edit_user_roles",children:i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.jsx(Cr,{to:`/admin/users/${m.id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:"Edit"})})})]},m.id))})]})})]})})]}):i.jsx("div",{className:"max-w-4xl mx-auto p-6",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Access Denied"}),i.jsx("p",{className:"text-red-600",children:"You don't have permission to access the admin dashboard."})]})})}function S2(){const{profile:e,loading:t}=Ta(),[r,n]=W.useState([]),[a,s]=W.useState([]),[o,l]=W.useState(!0),[c,d]=W.useState(null),[p,m]=W.useState(!1),g=(e==null?void 0:e.role)==="admin",f=W.useCallback(async()=>{if(!(e!=null&&e.user_id)||t||!g){l(!1);return}try{l(!0),d(null);const{data:{session:T}}=await ze.auth.getSession();if(!(T!=null&&T.access_token))throw new Error("No authentication token available");const[C,$]=await Promise.all([xr.get("/api/admin/organization-permissions/templates",{headers:{Authorization:`Bearer ${T.access_token}`}}),xr.get("/api/admin/organization-permissions",{headers:{Authorization:`Bearer ${T.access_token}`}})]);n(C.data.templates||[]),s($.data.permissions||[])}catch(T){console.error("Error fetching permission data:",T.message),d(T.message)}finally{l(!1)}},[e==null?void 0:e.user_id,t,g]);W.useEffect(()=>{f()},[f]);const N=W.useCallback(async(T,C)=>{var $,H;if(!g)throw new Error("Only administrators can modify permissions");try{m(!0),d(null);const{data:{session:A}}=await ze.auth.getSession();if(!(A!=null&&A.access_token))throw new Error("No authentication token available");const O=await xr.put(`/api/admin/organization-permissions/${T}`,C,{headers:{Authorization:`Bearer ${A.access_token}`}});return await f(),O.data}catch(A){throw console.error(`Error updating permission ${T}:`,A.message),d(((H=($=A.response)==null?void 0:$.data)==null?void 0:H.error)||A.message),A}finally{m(!1)}},[g,f]),x=W.useCallback(async T=>{var C,$;if(!g)throw new Error("Only administrators can modify permissions");try{m(!0),d(null);const{data:{session:H}}=await ze.auth.getSession();if(!(H!=null&&H.access_token))throw new Error("No authentication token available");const A=await xr.post("/api/admin/organization-permissions/bulk-update",{permissions:T},{headers:{Authorization:`Bearer ${H.access_token}`}});return await f(),A.data}catch(H){throw console.error("Error bulk updating permissions:",H.message),d((($=(C=H.response)==null?void 0:C.data)==null?void 0:$.error)||H.message),H}finally{m(!1)}},[g,f]),S=W.useCallback(async T=>{var C,$;if(!g)throw new Error("Only administrators can modify permissions");try{m(!0),d(null);const{data:{session:H}}=await ze.auth.getSession();if(!(H!=null&&H.access_token))throw new Error("No authentication token available");const A=await xr.delete(`/api/admin/organization-permissions/${T}`,{headers:{Authorization:`Bearer ${H.access_token}`}});return await f(),A.data}catch(H){throw console.error(`Error resetting permission ${T}:`,H.message),d((($=(C=H.response)==null?void 0:C.data)==null?void 0:$.error)||H.message),H}finally{m(!1)}},[g,f]),y=W.useCallback(async T=>{if(!g)throw new Error("Only administrators can view user permissions");try{const{data:{session:C}}=await ze.auth.getSession();if(!(C!=null&&C.access_token))throw new Error("No authentication token available");return(await xr.get(`/api/admin/organization-permissions/user/${T}`,{headers:{Authorization:`Bearer ${C.access_token}`}})).data}catch(C){throw console.error(`Error fetching permissions for user ${T}:`,C.message),C}},[g]),w=W.useCallback(()=>{const T={};return a.forEach(C=>{const $=C.module_name;T[$]||(T[$]=[]),T[$].push(C)}),T},[a]),_=W.useCallback(T=>r.find(C=>C.permission_key===T)||null,[r]),E=W.useCallback(T=>{const C=a.find($=>$.permission_key===T);return!!(C!=null&&C.has_custom_setting)},[a]),L=W.useCallback(T=>{const C=a.find(H=>H.permission_key===T),$=_(T);return $?{permission_key:T,module_name:$.module_name,permission_name:$.permission_name,permission_description:$.permission_description,current_min_role:(C==null?void 0:C.current_min_role)||$.default_min_role,specific_users:(C==null?void 0:C.specific_users)||[],is_enabled:(C==null?void 0:C.is_enabled)!==void 0?C.is_enabled:!0,is_customized:!!(C!=null&&C.has_custom_setting),default_min_role:$.default_min_role}:null},[a,_]),B=W.useCallback(()=>{f()},[f]);return{templates:r,orgPermissions:a,loading:o,error:c,saving:p,isAdmin:g,updatePermission:N,bulkUpdatePermissions:x,resetPermission:S,getUserPermissions:y,refreshPermissions:B,getPermissionsByModule:w,getPermissionTemplate:_,isPermissionCustomized:E,getEffectivePermission:L,userId:e==null?void 0:e.user_id,orgId:e==null?void 0:e.org_id,userRole:e==null?void 0:e.role}}function _2(){const{canAccessAdminFeatures:e}=bg(),{templates:t,loading:r,error:n,saving:a,isAdmin:s,updatePermission:o,bulkUpdatePermissions:l,resetPermission:c,getEffectivePermission:d,isPermissionCustomized:p,refreshPermissions:m}=S2(),[g,f]=W.useState("all"),[N,x]=W.useState({}),[S,y]=W.useState(!1),[w,_]=W.useState(!1),E=[{value:"volunteer",label:"Volunteer",color:"bg-green-100 text-green-800"},{value:"committee_lead",label:"Committee Lead",color:"bg-blue-100 text-blue-800"},{value:"board_member",label:"Board Member",color:"bg-purple-100 text-purple-800"},{value:"admin",label:"Administrator",color:"bg-red-100 text-red-800"}],L=[...new Set(t.map(F=>F.module_name))].sort(),T=(g==="all"?t:t.filter(F=>F.module_name===g)).reduce((F,U)=>{const te=U.module_name;return F[te]||(F[te]=[]),F[te].push(U),F},{}),C=(F,U,te)=>{x(re=>({...re,[F]:{...re[F],[U]:te}}))},$=async F=>{const U=N[F];if(U)try{const te=d(F),re={min_role_required:U.min_role_required||te.current_min_role,specific_users:U.specific_users||te.specific_users,is_enabled:U.is_enabled!==void 0?U.is_enabled:te.is_enabled};await o(F,re),x(Z=>{const Q={...Z};return delete Q[F],Q}),alert(`Permission "${F}" updated successfully!`)}catch(te){alert(`Failed to update permission: ${te.message}`)}},H=async()=>{if(Object.keys(N).length!==0)try{const F=Object.entries(N).map(([U,te])=>{const re=d(U);return{permission_key:U,min_role_required:te.min_role_required||re.current_min_role,specific_users:te.specific_users||re.specific_users,is_enabled:te.is_enabled!==void 0?te.is_enabled:re.is_enabled}});await l(F),x({}),alert(`Successfully updated ${F.length} permissions!`)}catch(F){alert(`Failed to save changes: ${F.message}`)}},A=async F=>{if(confirm(`Reset "${F}" to default settings?`))try{await c(F),x(U=>{const te={...U};return delete te[F],te}),alert(`Permission "${F}" reset to default!`)}catch(U){alert(`Failed to reset permission: ${U.message}`)}},O=F=>{const U=d(F),te=N[F];return te?{...U,current_min_role:te.min_role_required||U.current_min_role,specific_users:te.specific_users||U.specific_users,is_enabled:te.is_enabled!==void 0?te.is_enabled:U.is_enabled}:U};return!e||!s?i.jsx("div",{className:"max-w-4xl mx-auto p-6",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Access Denied"}),i.jsx("p",{className:"text-red-600",children:"Only administrators can access permission management."})]})}):r?i.jsx("div",{className:"max-w-6xl mx-auto p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),i.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>i.jsx("div",{className:"h-20 bg-gray-200 rounded"},F))})]})}):n?i.jsx("div",{className:"max-w-4xl mx-auto p-6",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Permissions"}),i.jsx("p",{className:"text-red-600 mb-4",children:n}),i.jsx("button",{onClick:m,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Retry"})]})}):i.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Permission Management"}),i.jsx("p",{className:"text-gray-600",children:"Customize which roles can perform specific actions in your organization."})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Module:"}),i.jsxs("select",{value:g,onChange:F=>f(F.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[i.jsx("option",{value:"all",children:"All Modules"}),L.map(F=>i.jsx("option",{value:F,children:F.charAt(0).toUpperCase()+F.slice(1).replace("_"," ")},F))]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>_(!w),className:`px-4 py-2 rounded-md text-sm font-medium ${w?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:w?"Exit Bulk Mode":"Bulk Edit"}),Object.keys(N).length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>y(!S),className:"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-md text-sm font-medium hover:bg-yellow-200",children:["Preview Changes (",Object.keys(N).length,")"]}),i.jsx("button",{onClick:H,disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700 disabled:opacity-50",children:a?"Saving...":"Save All Changes"})]})]})]})}),S&&Object.keys(N).length>0&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Pending Changes"}),i.jsx("div",{className:"space-y-2",children:Object.entries(N).map(([F,U])=>i.jsxs("div",{className:"text-sm text-yellow-700",children:[i.jsxs("span",{className:"font-medium",children:[F,":"]}),U.min_role_required&&i.jsxs("span",{className:"ml-2",children:["Role → ",U.min_role_required]}),U.is_enabled!==void 0&&i.jsxs("span",{className:"ml-2",children:["Enabled → ",U.is_enabled?"Yes":"No"]})]},F))})]}),i.jsx("div",{className:"space-y-8",children:Object.entries(T).map(([F,U])=>i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-900 capitalize",children:[F.replace("_"," ")," Module"]}),i.jsxs("span",{className:"text-sm text-gray-500",children:[U.length," permissions"]})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permission"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Minimum Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(te=>{const re=O(te.permission_key),Z=N[te.permission_key],Q=p(te.permission_key);return i.jsxs("tr",{className:Z?"bg-yellow-50":"",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[re.permission_name,Q&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Custom"}),Z&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"Modified"})]}),i.jsx("div",{className:"text-sm text-gray-500",children:re.permission_description})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("select",{value:re.current_min_role,onChange:Y=>C(te.permission_key,"min_role_required",Y.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:E.map(Y=>i.jsx("option",{value:Y.value,children:Y.label},Y.value))})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:re.is_enabled,onChange:Y=>C(te.permission_key,"is_enabled",Y.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"ml-2 text-sm text-gray-700",children:re.is_enabled?"Enabled":"Disabled"})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[Z&&i.jsx("button",{onClick:()=>$(te.permission_key),disabled:a,className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Save"}),Q&&i.jsx("button",{onClick:()=>A(te.permission_key),disabled:a,className:"text-gray-600 hover:text-gray-800 text-sm font-medium",children:"Reset"})]})})]},te.permission_key)})})]})})]},F))}),i.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Permission Management Guide"}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Minimum Role:"})," The lowest role level that can perform this action"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Custom:"})," Permission has been modified from the default setting"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Modified:"})," Permission has unsaved changes"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Reset:"})," Restore permission to its default setting"]}),i.jsx("li",{children:"• Changes take effect immediately for all users in your organization"})]})]})]})}function A2(){return i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Welcome to the Board Dashboard"}),i.jsx("p",{className:"mt-4 text-gray-700",children:"This is a placeholder for the Board dashboard."})]})}function C2(){return i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Welcome to the Committee Dashboard"}),i.jsx("p",{className:"mt-4 text-gray-700",children:"This is a placeholder for the Committee dashboard."})]})}function E2(){return i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Welcome to the Volunteer Dashboard"}),i.jsx("p",{className:"mt-4 text-gray-700",children:"This is a placeholder for the Volunteer dashboard."})]})}function L2(){return i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Welcome to the Parent Dashboard"}),i.jsx("p",{className:"mt-4 text-gray-700",children:"This is a placeholder for the Parent dashboard."})]})}function P2(){return i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Welcome to the Teacher Dashboard"}),i.jsx("p",{className:"mt-4 text-gray-700",children:"This is a placeholder for the Teacher dashboard."})]})}function D2(){const[e,t]=W.useState([]),[r,n]=W.useState("");W.useEffect(()=>{async function s(){const{data:{session:o},error:l}=await ze.auth.getSession();if(l||!(o!=null&&o.access_token)){n("Authentication error. Please log in again.");return}try{const c=await fetch("/api/events",{headers:{Authorization:`Bearer ${o.access_token}`}}),d=await c.json();c.ok?t(d):n(d.error||"Failed to load events")}catch(c){console.error("Fetch error:",c),n("Failed to connect to server.")}}s()},[]);const a=async s=>{if(!window.confirm("Are you sure you want to delete this event?"))return;const{data:{session:l}}=await ze.auth.getSession();if(!(l!=null&&l.access_token)){alert("You must be logged in to delete events.");return}const c=await fetch(`/api/events/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${l.access_token}`}});c.ok?t(d=>d.filter(p=>p.id!==s)):(alert("Failed to delete event."),console.error("Delete error:",await c.text()))};return i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-4",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"PTO-Wide Events"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Cr,{to:"/events/calendar",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300",children:"📅 View Calendar"}),i.jsx(Cr,{to:"/events/create",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"+ Create Event"})]})]}),r&&i.jsx("p",{className:"text-red-600 mb-4",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No events created yet."}),i.jsx("ul",{className:"space-y-4",children:e.map(s=>i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("h2",{className:"text-xl font-semibold",children:s.title}),i.jsxs("div",{className:"flex gap-2 text-sm",children:[i.jsx(Cr,{to:`/events/edit/${s.id}`,className:"text-blue-600 hover:underline",children:"✏️ Edit"}),i.jsx("button",{onClick:()=>a(s.id),className:"text-red-600 hover:underline",children:"🗑️ Delete"})]})]}),i.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(s.event_date).toLocaleDateString()," • ",s.school_level," • ",s.category]}),i.jsx("p",{className:"mt-2",children:s.description}),s.share_public&&i.jsx("span",{className:"text-xs inline-block mt-2 px-2 py-1 bg-green-100 text-green-800 rounded",children:"Shared to Library"})]},s.id))})]})}const k2=()=>{const[e,t]=W.useState("grid"),[r,n]=W.useState("manual"),[a,s]=W.useState(""),[o,l]=W.useState("all"),c=[{id:1,name:"Fall Festival 2024",date:"2024-10-15",status:"planning",attendees:300,budget:3e3,profit:1800,progress:65,type:"ai-generated",description:"Community celebration with games, food, and family fun"},{id:2,name:"Book Fair",date:"2024-11-20",status:"active",attendees:150,budget:1500,profit:800,progress:85,type:"manual",description:"Annual book fair to promote reading"},{id:3,name:"Science Night",date:"2024-12-05",status:"draft",attendees:200,budget:2e3,profit:1200,progress:25,type:"manual",description:"Interactive science demonstrations and experiments"}],d=f=>{const N={draft:"bg-gray-100 text-gray-800",planning:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",completed:"bg-purple-100 text-purple-800",cancelled:"bg-red-100 text-red-800"};return N[f]||N.draft},p=({event:f})=>i.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.name}),f.type==="ai-generated"&&i.jsx(cr,{className:"w-4 h-4 text-purple-500",title:"AI Generated"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:f.description}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ss,{className:"w-4 h-4"}),i.jsx("span",{children:new Date(f.date).toLocaleDateString()})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(is,{className:"w-4 h-4"}),i.jsxs("span",{children:[f.attendees," expected"]})]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d(f.status)}`,children:f.status.charAt(0).toUpperCase()+f.status.slice(1)})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600",children:"Progress"}),i.jsxs("span",{className:"font-medium text-gray-900",children:[f.progress,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${f.progress}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[i.jsx("div",{className:"text-sm text-gray-600",children:"Budget"}),i.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",f.budget]})]}),i.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[i.jsx("div",{className:"text-sm text-green-600",children:"Projected Profit"}),i.jsxs("div",{className:"text-lg font-semibold text-green-700",children:["$",f.profit]})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(bo,{className:"w-4 h-4 mr-2"}),"View"]}),i.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ac,{className:"w-4 h-4 mr-2"}),"Edit"]})]})]})}),m=({event:f})=>i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"font-medium text-gray-900",children:f.name}),f.type==="ai-generated"&&i.jsx(cr,{className:"w-4 h-4 text-purple-500"}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d(f.status)}`,children:f.status})]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f.description})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Date"}),i.jsx("div",{className:"font-medium",children:new Date(f.date).toLocaleDateString()})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Attendees"}),i.jsx("div",{className:"font-medium",children:f.attendees})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Budget"}),i.jsxs("div",{className:"font-medium",children:["$",f.budget]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Progress"}),i.jsxs("div",{className:"font-medium",children:[f.progress,"%"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded",children:i.jsx(bo,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-50 rounded",children:i.jsx(ac,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded",children:i.jsx(R1,{className:"w-4 h-4"})})]})]})}),g=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create New Event"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(I1,{className:"w-8 h-8 text-gray-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Manual Creation"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Full control over every detail"})]})]}),i.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 mb-4",children:[i.jsx("li",{children:"• Step-by-step event setup"}),i.jsx("li",{children:"• Custom timeline creation"}),i.jsx("li",{children:"• Manual budget planning"}),i.jsx("li",{children:"• Individual task assignment"})]}),i.jsx("button",{className:"w-full py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Create Manually"})]}),i.jsxs("div",{className:"border-2 border-blue-200 rounded-lg p-6 hover:border-blue-400 transition-colors bg-blue-50",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(cr,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-blue-900",children:"AI Assisted"}),i.jsx("p",{className:"text-sm text-blue-700",children:"AI suggestions with manual control"})]})]}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-2 mb-4",children:[i.jsx("li",{children:"• AI-generated suggestions"}),i.jsx("li",{children:"• Smart template recommendations"}),i.jsx("li",{children:"• Automated task suggestions"}),i.jsx("li",{children:"• Budget estimation help"})]}),i.jsx("button",{className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create with AI Help"})]}),i.jsxs("div",{className:"border-2 border-purple-200 rounded-lg p-6 hover:border-purple-400 transition-colors bg-purple-50",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(cr,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-purple-900",children:"AI Automated"}),i.jsx("p",{className:"text-sm text-purple-700",children:"Complete workflow generation"})]})]}),i.jsxs("ul",{className:"text-sm text-purple-700 space-y-2 mb-4",children:[i.jsx("li",{children:"• Complete workflow creation"}),i.jsx("li",{children:"• Automated timeline & tasks"}),i.jsx("li",{children:"• Budget & profit projections"}),i.jsx("li",{children:"• Communication campaigns"})]}),i.jsx("button",{className:"w-full py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Generate Full Workflow"})]})]})]});return i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Events Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"Manage your PTO events with manual control or AI assistance"})]}),i.jsx("div",{className:"flex items-center space-x-3",children:i.jsx("button",{onClick:()=>t(e==="grid"?"list":"grid"),className:"p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:e==="grid"?i.jsx(og,{className:"w-5 h-5"}):i.jsx(lg,{className:"w-5 h-5"})})})]}),i.jsx(g,{}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(cg,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search events...",value:a,onChange:f=>s(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("select",{value:o,onChange:f=>l(f.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"planning",children:"Planning"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"completed",children:"Completed"})]})]})}),i.jsx("div",{className:e==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:c.map(f=>e==="grid"?i.jsx(p,{event:f},f.id):i.jsx(m,{event:f},f.id))}),c.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ss,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first event"}),i.jsx("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Event"})]})]})})};function dt(e){"@babel/helpers - typeof";return dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(e)}var yr=Uint8Array,Wr=Uint16Array,ah=Int32Array,yc=new yr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wc=new yr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wd=new yr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yg=function(e,t){for(var r=new Wr(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new ah(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},wg=yg(yc,2),Ng=wg.b,Nd=wg.r;Ng[28]=258,Nd[258]=28;var jg=yg(wc,0),O2=jg.b,$f=jg.r,jd=new Wr(32768);for(var kt=0;kt<32768;++kt){var _a=(kt&43690)>>1|(kt&21845)<<1;_a=(_a&52428)>>2|(_a&13107)<<2,_a=(_a&61680)>>4|(_a&3855)<<4,jd[kt]=((_a&65280)>>8|(_a&255)<<8)>>1}var qn=function(e,t,r){for(var n=e.length,a=0,s=new Wr(t);a<n;++a)e[a]&&++s[e[a]-1];var o=new Wr(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new Wr(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var d=a<<4|e[a],p=t-e[a],m=o[e[a]-1]++<<p,g=m|(1<<p)-1;m<=g;++m)l[jd[m]>>c]=d}else for(l=new Wr(n),a=0;a<n;++a)e[a]&&(l[a]=jd[o[e[a]-1]++]>>15-e[a]);return l},La=new yr(288);for(var kt=0;kt<144;++kt)La[kt]=8;for(var kt=144;kt<256;++kt)La[kt]=9;for(var kt=256;kt<280;++kt)La[kt]=7;for(var kt=280;kt<288;++kt)La[kt]=8;var xo=new yr(32);for(var kt=0;kt<32;++kt)xo[kt]=5;var T2=qn(La,9,0),M2=qn(La,9,1),I2=qn(xo,5,0),R2=qn(xo,5,1),zu=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},yn=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},Uu=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},sh=function(e){return(e+7)/8|0},Sg=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new yr(e.subarray(t,r))},F2=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Nn=function(e,t,r){var n=new Error(t||F2[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Nn),!r)throw n;return n},$2=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new yr(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new yr(a*3));var d=function(Se){var Te=r.length;if(Se>Te){var Pe=new yr(Math.max(Te*2,Se));Pe.set(r),r=Pe}},p=t.f||0,m=t.p||0,g=t.b||0,f=t.l,N=t.d,x=t.m,S=t.n,y=a*8;do{if(!f){p=yn(e,m,1);var w=yn(e,m+1,3);if(m+=3,w)if(w==1)f=M2,N=R2,x=9,S=5;else if(w==2){var B=yn(e,m,31)+257,T=yn(e,m+10,15)+4,C=B+yn(e,m+5,31)+1;m+=14;for(var $=new yr(C),H=new yr(19),A=0;A<T;++A)H[wd[A]]=yn(e,m+A*3,7);m+=T*3;for(var O=zu(H),F=(1<<O)-1,U=qn(H,O,1),A=0;A<C;){var te=U[yn(e,m,F)];m+=te&15;var _=te>>4;if(_<16)$[A++]=_;else{var re=0,Z=0;for(_==16?(Z=3+yn(e,m,3),m+=2,re=$[A-1]):_==17?(Z=3+yn(e,m,7),m+=3):_==18&&(Z=11+yn(e,m,127),m+=7);Z--;)$[A++]=re}}var Q=$.subarray(0,B),Y=$.subarray(B);x=zu(Q),S=zu(Y),f=qn(Q,x,1),N=qn(Y,S,1)}else Nn(1);else{var _=sh(m)+4,E=e[_-4]|e[_-3]<<8,L=_+E;if(L>a){c&&Nn(0);break}l&&d(g+E),r.set(e.subarray(_,L),g),t.b=g+=E,t.p=m=L*8,t.f=p;continue}if(m>y){c&&Nn(0);break}}l&&d(g+131072);for(var X=(1<<x)-1,ce=(1<<S)-1,P=m;;P=m){var re=f[Uu(e,m)&X],q=re>>4;if(m+=re&15,m>y){c&&Nn(0);break}if(re||Nn(2),q<256)r[g++]=q;else if(q==256){P=m,f=null;break}else{var V=q-254;if(q>264){var A=q-257,ee=yc[A];V=yn(e,m,(1<<ee)-1)+Ng[A],m+=ee}var se=N[Uu(e,m)&ce],de=se>>4;se||Nn(3),m+=se&15;var Y=O2[de];if(de>3){var ee=wc[de];Y+=Uu(e,m)&(1<<ee)-1,m+=ee}if(m>y){c&&Nn(0);break}l&&d(g+131072);var fe=g+V;if(g<Y){var ge=s-Y,Ae=Math.min(Y,fe);for(ge+g<0&&Nn(3);g<Ae;++g)r[g]=n[ge+g]}for(;g<fe;++g)r[g]=r[g-Y]}}t.l=f,t.p=P,t.b=g,t.f=p,f&&(p=1,t.m=x,t.d=N,t.n=S)}while(!p);return g!=r.length&&o?Sg(r,0,g):r.subarray(0,g)},ia=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},ao=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},Wu=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:Ag,l:0};if(a==1){var o=new yr(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(L,B){return L.f-B.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,p=1,m=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};p!=a-1;)l=r[r[d].f<r[m].f?d++:m++],c=r[d!=p&&r[d].f<r[m].f?d++:m++],r[p++]={s:-1,f:l.f+c.f,l,r:c};for(var g=s[0].s,n=1;n<a;++n)s[n].s>g&&(g=s[n].s);var f=new Wr(g+1),N=Sd(r[p-1],f,0);if(N>t){var n=0,x=0,S=N-t,y=1<<S;for(s.sort(function(B,T){return f[T.s]-f[B.s]||B.f-T.f});n<a;++n){var w=s[n].s;if(f[w]>t)x+=y-(1<<N-f[w]),f[w]=t;else break}for(x>>=S;x>0;){var _=s[n].s;f[_]<t?x-=1<<t-f[_]++-1:++n}for(;n>=0&&x;--n){var E=s[n].s;f[E]==t&&(--f[E],++x)}N=t}return{t:new yr(f),l:N}},Sd=function(e,t,r){return e.s==-1?Math.max(Sd(e.l,t,r+1),Sd(e.r,t,r+1)):t[e.s]=r},Bf=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Wr(++t),n=0,a=e[0],s=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=e[l]}return{c:r.subarray(0,n),n:t}},so=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},_g=function(e,t,r){var n=r.length,a=sh(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},qf=function(e,t,r,n,a,s,o,l,c,d,p){ia(t,p++,r),++a[256];for(var m=Wu(a,15),g=m.t,f=m.l,N=Wu(s,15),x=N.t,S=N.l,y=Bf(g),w=y.c,_=y.n,E=Bf(x),L=E.c,B=E.n,T=new Wr(19),C=0;C<w.length;++C)++T[w[C]&31];for(var C=0;C<L.length;++C)++T[L[C]&31];for(var $=Wu(T,7),H=$.t,A=$.l,O=19;O>4&&!H[wd[O-1]];--O);var F=d+5<<3,U=so(a,La)+so(s,xo)+o,te=so(a,g)+so(s,x)+o+14+3*O+so(T,H)+2*T[16]+3*T[17]+7*T[18];if(c>=0&&F<=U&&F<=te)return _g(t,p,e.subarray(c,c+d));var re,Z,Q,Y;if(ia(t,p,1+(te<U)),p+=2,te<U){re=qn(g,f,0),Z=g,Q=qn(x,S,0),Y=x;var X=qn(H,A,0);ia(t,p,_-257),ia(t,p+5,B-1),ia(t,p+10,O-4),p+=14;for(var C=0;C<O;++C)ia(t,p+3*C,H[wd[C]]);p+=3*O;for(var ce=[w,L],P=0;P<2;++P)for(var q=ce[P],C=0;C<q.length;++C){var V=q[C]&31;ia(t,p,X[V]),p+=H[V],V>15&&(ia(t,p,q[C]>>5&127),p+=q[C]>>12)}}else re=T2,Z=La,Q=I2,Y=xo;for(var C=0;C<l;++C){var ee=n[C];if(ee>255){var V=ee>>18&31;ao(t,p,re[V+257]),p+=Z[V+257],V>7&&(ia(t,p,ee>>23&31),p+=yc[V]);var se=ee&31;ao(t,p,Q[se]),p+=Y[se],se>3&&(ao(t,p,ee>>5&8191),p+=wc[se])}else ao(t,p,re[ee]),p+=Z[ee]}return ao(t,p,re[256]),p+Z[256]},B2=new ah([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ag=new yr(0),q2=function(e,t,r,n,a,s){var o=s.z||e.length,l=new yr(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),d=s.l,p=(s.r||0)&7;if(t){p&&(c[0]=s.r>>3);for(var m=B2[t-1],g=m>>13,f=m&8191,N=(1<<r)-1,x=s.p||new Wr(32768),S=s.h||new Wr(N+1),y=Math.ceil(r/3),w=2*y,_=function(Ge){return(e[Ge]^e[Ge+1]<<y^e[Ge+2]<<w)&N},E=new ah(25e3),L=new Wr(288),B=new Wr(32),T=0,C=0,$=s.i||0,H=0,A=s.w||0,O=0;$+2<o;++$){var F=_($),U=$&32767,te=S[F];if(x[U]=te,S[F]=U,A<=$){var re=o-$;if((T>7e3||H>24576)&&(re>423||!d)){p=qf(e,c,0,E,L,B,C,H,O,$-O,p),H=T=C=0,O=$;for(var Z=0;Z<286;++Z)L[Z]=0;for(var Z=0;Z<30;++Z)B[Z]=0}var Q=2,Y=0,X=f,ce=U-te&32767;if(re>2&&F==_($-ce))for(var P=Math.min(g,re)-1,q=Math.min(32767,$),V=Math.min(258,re);ce<=q&&--X&&U!=te;){if(e[$+Q]==e[$+Q-ce]){for(var ee=0;ee<V&&e[$+ee]==e[$+ee-ce];++ee);if(ee>Q){if(Q=ee,Y=ce,ee>P)break;for(var se=Math.min(ce,ee-2),de=0,Z=0;Z<se;++Z){var fe=$-ce+Z&32767,ge=x[fe],Ae=fe-ge&32767;Ae>de&&(de=Ae,te=fe)}}}U=te,te=x[U],ce+=U-te&32767}if(Y){E[H++]=268435456|Nd[Q]<<18|$f[Y];var Se=Nd[Q]&31,Te=$f[Y]&31;C+=yc[Se]+wc[Te],++L[257+Se],++B[Te],A=$+Q,++T}else E[H++]=e[$],++L[e[$]]}}for($=Math.max($,A);$<o;++$)E[H++]=e[$],++L[e[$]];p=qf(e,c,d,E,L,B,C,H,O,$-O,p),d||(s.r=p&7|c[p/8|0]<<3,p-=7,s.h=S,s.p=x,s.i=$,s.w=A)}else{for(var $=s.w||0;$<o+d;$+=65535){var Pe=$+65535;Pe>=o&&(c[p/8|0]=d,Pe=o),p=_g(c,p+1,e.subarray($,Pe))}s.i=o}return Sg(l,0,n+sh(p)+a)},Cg=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},z2=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new yr(s.length+e.length);o.set(s),o.set(e,s.length),e=o,a.w=s.length}return q2(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},Eg=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},U2=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Cg();a.p(t.dictionary),Eg(e,2,a.d())}},W2=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Nn(6,"invalid zlib data"),(e[1]>>5&1)==1&&Nn(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function _d(e,t){t||(t={});var r=Cg();r.p(e);var n=z2(e,t,t.dictionary?6:2,4);return U2(n,t),Eg(n,n.length-4,r.d()),n}function H2(e,t){return $2(e.subarray(W2(e),-4),{i:2},t,t)}var G2=typeof TextDecoder<"u"&&new TextDecoder,V2=0;try{G2.decode(Ag,{stream:!0}),V2=1}catch{}var Ke=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Hu(){Ke.console&&typeof Ke.console.log=="function"&&Ke.console.log.apply(Ke.console,arguments)}var _t={log:Hu,warn:function(e){Ke.console&&(typeof Ke.console.warn=="function"?Ke.console.warn.apply(Ke.console,arguments):Hu.call(null,arguments))},error:function(e){Ke.console&&(typeof Ke.console.error=="function"?Ke.console.error.apply(Ke.console,arguments):Hu(e))}};function Gu(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){es(n.response,t,r)},n.onerror=function(){_t.error("could not download file")},n.send()}function zf(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Rl(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var po,Ad,es=Ke.saveAs||((typeof window>"u"?"undefined":dt(window))!=="object"||window!==Ke?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Ke.URL||Ke.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?zf(a.href)?Gu(e,t,r):Rl(a,a.target="_blank"):Rl(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Rl(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(zf(e))Gu(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Rl(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:dt(s)!=="object"&&(_t.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return Gu(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Ke.HTMLElement)||Ke.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":dt(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var p=l.result;p=o?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=p:location=p,n=null},l.readAsDataURL(e)}else{var c=Ke.URL||Ke.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Lg(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Vu(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=pr(r,n,a,s,t[0],7,-680876936),s=pr(s,r,n,a,t[1],12,-389564586),a=pr(a,s,r,n,t[2],17,606105819),n=pr(n,a,s,r,t[3],22,-1044525330),r=pr(r,n,a,s,t[4],7,-176418897),s=pr(s,r,n,a,t[5],12,1200080426),a=pr(a,s,r,n,t[6],17,-1473231341),n=pr(n,a,s,r,t[7],22,-45705983),r=pr(r,n,a,s,t[8],7,1770035416),s=pr(s,r,n,a,t[9],12,-1958414417),a=pr(a,s,r,n,t[10],17,-42063),n=pr(n,a,s,r,t[11],22,-1990404162),r=pr(r,n,a,s,t[12],7,1804603682),s=pr(s,r,n,a,t[13],12,-40341101),a=pr(a,s,r,n,t[14],17,-1502002290),r=mr(r,n=pr(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=mr(s,r,n,a,t[6],9,-1069501632),a=mr(a,s,r,n,t[11],14,643717713),n=mr(n,a,s,r,t[0],20,-373897302),r=mr(r,n,a,s,t[5],5,-701558691),s=mr(s,r,n,a,t[10],9,38016083),a=mr(a,s,r,n,t[15],14,-660478335),n=mr(n,a,s,r,t[4],20,-405537848),r=mr(r,n,a,s,t[9],5,568446438),s=mr(s,r,n,a,t[14],9,-1019803690),a=mr(a,s,r,n,t[3],14,-187363961),n=mr(n,a,s,r,t[8],20,1163531501),r=mr(r,n,a,s,t[13],5,-1444681467),s=mr(s,r,n,a,t[2],9,-51403784),a=mr(a,s,r,n,t[7],14,1735328473),r=gr(r,n=mr(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=gr(s,r,n,a,t[8],11,-2022574463),a=gr(a,s,r,n,t[11],16,1839030562),n=gr(n,a,s,r,t[14],23,-35309556),r=gr(r,n,a,s,t[1],4,-1530992060),s=gr(s,r,n,a,t[4],11,1272893353),a=gr(a,s,r,n,t[7],16,-155497632),n=gr(n,a,s,r,t[10],23,-1094730640),r=gr(r,n,a,s,t[13],4,681279174),s=gr(s,r,n,a,t[0],11,-358537222),a=gr(a,s,r,n,t[3],16,-722521979),n=gr(n,a,s,r,t[6],23,76029189),r=gr(r,n,a,s,t[9],4,-640364487),s=gr(s,r,n,a,t[12],11,-421815835),a=gr(a,s,r,n,t[15],16,530742520),r=vr(r,n=gr(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=vr(s,r,n,a,t[7],10,1126891415),a=vr(a,s,r,n,t[14],15,-1416354905),n=vr(n,a,s,r,t[5],21,-57434055),r=vr(r,n,a,s,t[12],6,1700485571),s=vr(s,r,n,a,t[3],10,-1894986606),a=vr(a,s,r,n,t[10],15,-1051523),n=vr(n,a,s,r,t[1],21,-2054922799),r=vr(r,n,a,s,t[8],6,1873313359),s=vr(s,r,n,a,t[15],10,-30611744),a=vr(a,s,r,n,t[6],15,-1560198380),n=vr(n,a,s,r,t[13],21,1309151649),r=vr(r,n,a,s,t[4],6,-145523070),s=vr(s,r,n,a,t[11],10,-1120210379),a=vr(a,s,r,n,t[2],15,718787259),n=vr(n,a,s,r,t[9],21,-343485551),e[0]=Ea(r,e[0]),e[1]=Ea(n,e[1]),e[2]=Ea(a,e[2]),e[3]=Ea(s,e[3])}function Nc(e,t,r,n,a,s){return t=Ea(Ea(t,e),Ea(n,s)),Ea(t<<a|t>>>32-a,r)}function pr(e,t,r,n,a,s,o){return Nc(t&r|~t&n,e,t,a,s,o)}function mr(e,t,r,n,a,s,o){return Nc(t&n|r&~n,e,t,a,s,o)}function gr(e,t,r,n,a,s,o){return Nc(t^r^n,e,t,a,s,o)}function vr(e,t,r,n,a,s,o){return Nc(r^(t|~n),e,t,a,s,o)}function Pg(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Vu(n,Y2(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(Vu(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,Vu(n,a),n}function Y2(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}po=Ke.atob.bind(Ke),Ad=Ke.btoa.bind(Ke);var Uf="0123456789abcdef".split("");function K2(e){for(var t="",r=0;r<4;r++)t+=Uf[e>>8*r+4&15]+Uf[e>>8*r&15];return t}function X2(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Cd(e){return Pg(e).map(X2).join("")}var J2=function(e){for(var t=0;t<e.length;t++)e[t]=K2(e[t]);return e.join("")}(Pg("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ea(e,t){if(J2){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Ed(e,t){var r,n,a,s;if(e!==r){for(var o=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var p=l[c];d=(d+p+o.charCodeAt(c))%256,l[c]=l[d],l[d]=p}r=e,n=l}else l=n;var m=t.length,g=0,f=0,N="";for(c=0;c<m;c++)f=(f+(p=l[g=(g+1)%256]))%256,l[g]=l[f],l[f]=p,o=l[(l[g]+l[f])%256],N+=String.fromCharCode(t.charCodeAt(c)^o);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Wf={print:4,modify:8,copy:16,"annot-forms":32};function ei(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(Wf.perm!==void 0)throw new Error("Invalid permission: "+l);a+=Wf[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=Cd(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Ed(this.encryptionKey,this.padding)}function ti(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function Hf(e){if(dt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var o=t[r][s];try{o[0].apply(e,n)}catch(l){Ke.console&&_t.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function sc(e){if(!(this instanceof sc))return new sc(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Dg(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ns(e,t,r,n,a){if(!(this instanceof ns))return new ns(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Dg.call(this,n,a)}function ni(e,t,r,n,a){if(!(this instanceof ni))return new ni(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Dg.call(this,n,a)}function Ye(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,d="S",p=null;dt(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,g={},f={internal:{},__private__:{}};f.__private__.PubSub=Hf;var N="1.3",x=f.__private__.getPdfVersion=function(){return N};f.__private__.setPdfVersion=function(v){N=v};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return S};var y=f.__private__.getPageFormat=function(v){return S[v]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},_=w.COMPAT;function E(){this.saveGraphicsState(),J(new Ve(Ie,0,0,-Ie,0,fa()*Ie).toString()+" cm"),this.setFontSize(this.getFontSize()/Ie),d="n",_=w.ADVANCED}function L(){this.restoreGraphicsState(),d="S",_=w.COMPAT}var B=f.__private__.combineFontStyleAndFontWeight=function(v,k){if(v=="bold"&&k=="normal"||v=="bold"&&k==400||v=="normal"&&k=="italic"||v=="bold"&&k=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return k&&(v=k==400||k==="normal"?v==="italic"?"italic":"normal":k!=700&&k!=="bold"||v!=="normal"?(k==700?"bold":k)+""+v:"bold"),v};f.advancedAPI=function(v){var k=_===w.COMPAT;return k&&E.call(this),typeof v!="function"||(v(this),k&&L.call(this)),this},f.compatAPI=function(v){var k=_===w.ADVANCED;return k&&L.call(this),typeof v!="function"||(v(this),k&&E.call(this)),this},f.isAdvancedAPI=function(){return _===w.ADVANCED};var T,C=function(v){if(_!==w.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=f.roundToPrecision=f.__private__.roundToPrecision=function(v,k){var K=t||k;if(isNaN(v)||isNaN(K))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(K).replace(/0+$/,"")};T=f.hpf=f.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return $(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return $(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return $(v,16)};var H=f.f2=f.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return $(v,2)},A=f.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return $(v,3)},O=f.scale=f.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return _===w.COMPAT?v*Ie:_===w.ADVANCED?v:void 0},F=function(v){return _===w.COMPAT?fa()-v:_===w.ADVANCED?v:void 0},U=function(v){return O(F(v))};f.__private__.setPrecision=f.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(t=parseInt(v,10))};var te,re="00000000000000000000000000000000",Z=f.__private__.getFileId=function(){return re},Q=f.__private__.setFileId=function(v){return re=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(hr=new ei(p.userPermissions,p.userPassword,p.ownerPassword,re)),re};f.setFileId=function(v){return Q(v),this},f.getFileId=function(){return Z()};var Y=f.__private__.convertDateToPDFDate=function(v){var k=v.getTimezoneOffset(),K=k<0?"+":"-",ne=Math.floor(Math.abs(k/60)),he=Math.abs(k%60),be=[K,V(ne),"'",V(he),"'"].join("");return["D:",v.getFullYear(),V(v.getMonth()+1),V(v.getDate()),V(v.getHours()),V(v.getMinutes()),V(v.getSeconds()),be].join("")},X=f.__private__.convertPDFDateToDate=function(v){var k=parseInt(v.substr(2,4),10),K=parseInt(v.substr(6,2),10)-1,ne=parseInt(v.substr(8,2),10),he=parseInt(v.substr(10,2),10),be=parseInt(v.substr(12,2),10),_e=parseInt(v.substr(14,2),10);return new Date(k,K,ne,he,be,_e,0)},ce=f.__private__.setCreationDate=function(v){var k;if(v===void 0&&(v=new Date),v instanceof Date)k=Y(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");k=v}return te=k},P=f.__private__.getCreationDate=function(v){var k=te;return v==="jsDate"&&(k=X(te)),k};f.setCreationDate=function(v){return ce(v),this},f.getCreationDate=function(v){return P(v)};var q,V=f.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},ee=f.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},se=0,de=[],fe=[],ge=0,Ae=[],Se=[],Te=!1,Pe=fe,Ge=function(){se=0,ge=0,fe=[],de=[],Ae=[],Kn=Yt(),hn=Yt()};f.__private__.setCustomOutputDestination=function(v){Te=!0,Pe=v};var xe=function(v){Te||(Pe=v)};f.__private__.resetCustomOutputDestination=function(){Te=!1,Pe=fe};var J=f.__private__.out=function(v){return v=v.toString(),ge+=v.length+1,Pe.push(v),Pe},Ze=f.__private__.write=function(v){return J(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},qe=f.__private__.getArrayBuffer=function(v){for(var k=v.length,K=new ArrayBuffer(k),ne=new Uint8Array(K);k--;)ne[k]=v.charCodeAt(k);return K},Ce=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Ce};var Ee=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(v){return Ee=_===w.ADVANCED?v/Ie:v,this};var Oe,ke=f.__private__.getFontSize=f.getFontSize=function(){return _===w.COMPAT?Ee:Ee*Ie},Ue=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(v){return Ue=v,this},f.__private__.getR2L=f.getR2L=function(){return Ue};var Xe,et=f.__private__.setZoomMode=function(v){var k=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Oe=v;else if(isNaN(v)){if(k.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Oe=v}else Oe=parseInt(v,10)};f.__private__.getZoomMode=function(){return Oe};var ot,ct=f.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Xe=v};f.__private__.getPageMode=function(){return Xe};var mt=f.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');ot=v};f.__private__.getLayoutMode=function(){return ot},f.__private__.setDisplayMode=f.setDisplayMode=function(v,k,K){return et(v),mt(k),ct(K),this};var Je={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(v){if(Object.keys(Je).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Je[v]},f.__private__.getDocumentProperties=function(){return Je},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(v){for(var k in Je)Je.hasOwnProperty(k)&&v[k]&&(Je[k]=v[k]);return this},f.__private__.setDocumentProperty=function(v,k){if(Object.keys(Je).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Je[v]=k};var lt,Ie,dr,pt,cn,jt={},Ot={},Cn=[],vt={},Fa={},Mt={},un={},Yn=null,It=0,tt=[],bt=new Hf(f),$a=e.hotfixes||[],ir={},En={},Ln=[],Ve=function v(k,K,ne,he,be,_e){if(!(this instanceof v))return new v(k,K,ne,he,be,_e);isNaN(k)&&(k=1),isNaN(K)&&(K=0),isNaN(ne)&&(ne=0),isNaN(he)&&(he=1),isNaN(be)&&(be=0),isNaN(_e)&&(_e=0),this._matrix=[k,K,ne,he,be,_e]};Object.defineProperty(Ve.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ve.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ve.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ve.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ve.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ve.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ve.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ve.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ve.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ve.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ve.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ve.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ve.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ve.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ve.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ve.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ve.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(v)},Ve.prototype.multiply=function(v){var k=v.sx*this.sx+v.shy*this.shx,K=v.sx*this.shy+v.shy*this.sy,ne=v.shx*this.sx+v.sy*this.shx,he=v.shx*this.shy+v.sy*this.sy,be=v.tx*this.sx+v.ty*this.shx+this.tx,_e=v.tx*this.shy+v.ty*this.sy+this.ty;return new Ve(k,K,ne,he,be,_e)},Ve.prototype.decompose=function(){var v=this.sx,k=this.shy,K=this.shx,ne=this.sy,he=this.tx,be=this.ty,_e=Math.sqrt(v*v+k*k),Re=(v/=_e)*K+(k/=_e)*ne;K-=v*Re,ne-=k*Re;var We=Math.sqrt(K*K+ne*ne);return Re/=We,v*(ne/=We)<k*(K/=We)&&(v=-v,k=-k,Re=-Re,_e=-_e),{scale:new Ve(_e,0,0,We,0,0),translate:new Ve(1,0,0,1,he,be),rotate:new Ve(v,k,-k,v,0,0),skew:new Ve(1,0,Re,1,0,0)}},Ve.prototype.toString=function(v){return this.join(" ")},Ve.prototype.inversed=function(){var v=this.sx,k=this.shy,K=this.shx,ne=this.sy,he=this.tx,be=this.ty,_e=1/(v*ne-k*K),Re=ne*_e,We=-k*_e,at=-K*_e,rt=v*_e;return new Ve(Re,We,at,rt,-Re*he-at*be,-We*he-rt*be)},Ve.prototype.applyToPoint=function(v){var k=v.x*this.sx+v.y*this.shx+this.tx,K=v.x*this.shy+v.y*this.sy+this.ty;return new Ts(k,K)},Ve.prototype.applyToRectangle=function(v){var k=this.applyToPoint(v),K=this.applyToPoint(new Ts(v.x+v.w,v.y+v.h));return new Fi(k.x,k.y,K.x-k.x,K.y-k.y)},Ve.prototype.clone=function(){var v=this.sx,k=this.shy,K=this.shx,ne=this.sy,he=this.tx,be=this.ty;return new Ve(v,k,K,ne,he,be)},f.Matrix=Ve;var dn=f.matrixMult=function(v,k){return k.multiply(v)},Pn=new Ve(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Pn;var Er=function(v,k){if(!Fa[v]){var K=(k instanceof ns?"Sh":"P")+(Object.keys(vt).length+1).toString(10);k.id=K,Fa[v]=K,vt[K]=k,bt.publish("addPattern",k)}};f.ShadingPattern=ns,f.TilingPattern=ni,f.addShadingPattern=function(v,k){return C("addShadingPattern()"),Er(v,k),this},f.beginTilingPattern=function(v){C("beginTilingPattern()"),cl(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},f.endTilingPattern=function(v,k){C("endTilingPattern()"),k.stream=Se[q].join(`
`),Er(v,k),bt.publish("endTilingPattern",k),Ln.pop().restore()};var Zt=f.__private__.newObject=function(){var v=Yt();return $r(v,!0),v},Yt=f.__private__.newObjectDeferred=function(){return se++,de[se]=function(){return ge},se},$r=function(v,k){return k=typeof k=="boolean"&&k,de[v]=ge,k&&J(v+" 0 obj"),v},ws=f.__private__.newAdditionalObject=function(){var v={objId:Yt(),content:""};return Ae.push(v),v},Kn=Yt(),hn=Yt(),fn=f.__private__.decodeColorString=function(v){var k=v.split(" ");if(k.length!==2||k[1]!=="g"&&k[1]!=="G")k.length===5&&(k[4]==="k"||k[4]==="K")&&(k=[(1-k[0])*(1-k[3]),(1-k[1])*(1-k[3]),(1-k[2])*(1-k[3]),"r"]);else{var K=parseFloat(k[0]);k=[K,K,K,"r"]}for(var ne="#",he=0;he<3;he++)ne+=("0"+Math.floor(255*parseFloat(k[he])).toString(16)).slice(-2);return ne},pn=f.__private__.encodeColorString=function(v){var k;typeof v=="string"&&(v={ch1:v});var K=v.ch1,ne=v.ch2,he=v.ch3,be=v.ch4,_e=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof K=="string"&&K.charAt(0)!=="#"){var Re=new Lg(K);if(Re.ok)K=Re.toHex();else if(!/^\d*\.?\d*$/.test(K))throw new Error('Invalid color "'+K+'" passed to jsPDF.encodeColorString.')}if(typeof K=="string"&&/^#[0-9A-Fa-f]{3}$/.test(K)&&(K="#"+K[1]+K[1]+K[2]+K[2]+K[3]+K[3]),typeof K=="string"&&/^#[0-9A-Fa-f]{6}$/.test(K)){var We=parseInt(K.substr(1),16);K=We>>16&255,ne=We>>8&255,he=255&We}if(ne===void 0||be===void 0&&K===ne&&ne===he)if(typeof K=="string")k=K+" "+_e[0];else switch(v.precision){case 2:k=H(K/255)+" "+_e[0];break;case 3:default:k=A(K/255)+" "+_e[0]}else if(be===void 0||dt(be)==="object"){if(be&&!isNaN(be.a)&&be.a===0)return k=["1.","1.","1.",_e[1]].join(" ");if(typeof K=="string")k=[K,ne,he,_e[1]].join(" ");else switch(v.precision){case 2:k=[H(K/255),H(ne/255),H(he/255),_e[1]].join(" ");break;default:case 3:k=[A(K/255),A(ne/255),A(he/255),_e[1]].join(" ")}}else if(typeof K=="string")k=[K,ne,he,be,_e[2]].join(" ");else switch(v.precision){case 2:k=[H(K),H(ne),H(he),H(be),_e[2]].join(" ");break;case 3:default:k=[A(K),A(ne),A(he),A(be),_e[2]].join(" ")}return k},Dn=f.__private__.getFilters=function(){return o},Gr=f.__private__.putStream=function(v){var k=(v=v||{}).data||"",K=v.filters||Dn(),ne=v.alreadyAppliedFilters||[],he=v.addLength1||!1,be=k.length,_e=v.objectId,Re=function(fr){return fr};if(p!==null&&_e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Re=hr.encryptor(_e,0));var We={};K===!0&&(K=["FlateEncode"]);var at=v.additionalKeyValues||[],rt=(We=Ye.API.processDataByFilters!==void 0?Ye.API.processDataByFilters(k,K):{data:k,reverseChain:[]}).reverseChain+(Array.isArray(ne)?ne.join(" "):ne.toString());if(We.data.length!==0&&(at.push({key:"Length",value:We.data.length}),he===!0&&at.push({key:"Length1",value:be})),rt.length!=0)if(rt.split("/").length-1==1)at.push({key:"Filter",value:rt});else{at.push({key:"Filter",value:"["+rt+"]"});for(var ht=0;ht<at.length;ht+=1)if(at[ht].key==="DecodeParms"){for(var Tt=[],Rt=0;Rt<We.reverseChain.split("/").length-1;Rt+=1)Tt.push("null");Tt.push(at[ht].value),at[ht].value="["+Tt.join(" ")+"]"}}J("<<");for(var Kt=0;Kt<at.length;Kt++)J("/"+at[Kt].key+" "+at[Kt].value);J(">>"),We.data.length!==0&&(J("stream"),J(Re(We.data)),J("endstream"))},kn=f.__private__.putPage=function(v){var k=v.number,K=v.data,ne=v.objId,he=v.contentsObjId;$r(ne,!0),J("<</Type /Page"),J("/Parent "+v.rootDictionaryObjId+" 0 R"),J("/Resources "+v.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(T(v.mediaBox.bottomLeftX))+" "+parseFloat(T(v.mediaBox.bottomLeftY))+" "+T(v.mediaBox.topRightX)+" "+T(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&J("/CropBox ["+T(v.cropBox.bottomLeftX)+" "+T(v.cropBox.bottomLeftY)+" "+T(v.cropBox.topRightX)+" "+T(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&J("/BleedBox ["+T(v.bleedBox.bottomLeftX)+" "+T(v.bleedBox.bottomLeftY)+" "+T(v.bleedBox.topRightX)+" "+T(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&J("/TrimBox ["+T(v.trimBox.bottomLeftX)+" "+T(v.trimBox.bottomLeftY)+" "+T(v.trimBox.topRightX)+" "+T(v.trimBox.topRightY)+"]"),v.artBox!==null&&J("/ArtBox ["+T(v.artBox.bottomLeftX)+" "+T(v.artBox.bottomLeftY)+" "+T(v.artBox.topRightX)+" "+T(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&J("/UserUnit "+v.userUnit),bt.publish("putPage",{objId:ne,pageContext:tt[k],pageNumber:k,page:K}),J("/Contents "+he+" 0 R"),J(">>"),J("endobj");var be=K.join(`
`);return _===w.ADVANCED&&(be+=`
Q`),$r(he,!0),Gr({data:be,filters:Dn(),objectId:he}),J("endobj"),ne},Ba=f.__private__.putPages=function(){var v,k,K=[];for(v=1;v<=It;v++)tt[v].objId=Yt(),tt[v].contentsObjId=Yt();for(v=1;v<=It;v++)K.push(kn({number:v,data:Se[v],objId:tt[v].objId,contentsObjId:tt[v].contentsObjId,mediaBox:tt[v].mediaBox,cropBox:tt[v].cropBox,bleedBox:tt[v].bleedBox,trimBox:tt[v].trimBox,artBox:tt[v].artBox,userUnit:tt[v].userUnit,rootDictionaryObjId:Kn,resourceDictionaryObjId:hn}));$r(Kn,!0),J("<</Type /Pages");var ne="/Kids [";for(k=0;k<It;k++)ne+=K[k]+" 0 R ";J(ne+"]"),J("/Count "+It),J(">>"),J("endobj"),bt.publish("postPutPages")},Ns=function(v){bt.publish("putFont",{font:v,out:J,newObject:Zt,putStream:Gr}),v.isAlreadyPutted!==!0&&(v.objectNumber=Zt(),J("<<"),J("/Type /Font"),J("/BaseFont /"+ti(v.postScriptName)),J("/Subtype /Type1"),typeof v.encoding=="string"&&J("/Encoding /"+v.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},js=function(){for(var v in jt)jt.hasOwnProperty(v)&&(m===!1||m===!0&&g.hasOwnProperty(v))&&Ns(jt[v])},Ss=function(v){v.objectNumber=Zt();var k=[];k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Form"}),k.push({key:"BBox",value:"["+[T(v.x),T(v.y),T(v.x+v.width),T(v.y+v.height)].join(" ")+"]"}),k.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var K=v.pages[1].join(`
`);Gr({data:K,additionalKeyValues:k,objectId:v.objectNumber}),J("endobj")},_s=function(){for(var v in ir)ir.hasOwnProperty(v)&&Ss(ir[v])},Ho=function(v,k){var K,ne=[],he=1/(k-1);for(K=0;K<1;K+=he)ne.push(K);if(ne.push(1),v[0].offset!=0){var be={offset:0,color:v[0].color};v.unshift(be)}if(v[v.length-1].offset!=1){var _e={offset:1,color:v[v.length-1].color};v.push(_e)}for(var Re="",We=0,at=0;at<ne.length;at++){for(K=ne[at];K>v[We+1].offset;)We++;var rt=v[We].offset,ht=(K-rt)/(v[We+1].offset-rt),Tt=v[We].color,Rt=v[We+1].color;Re+=ee(Math.round((1-ht)*Tt[0]+ht*Rt[0]).toString(16))+ee(Math.round((1-ht)*Tt[1]+ht*Rt[1]).toString(16))+ee(Math.round((1-ht)*Tt[2]+ht*Rt[2]).toString(16))}return Re.trim()},Jc=function(v,k){k||(k=21);var K=Zt(),ne=Ho(v.colors,k),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+k+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Gr({data:ne,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:K}),J("endobj"),v.objectNumber=Zt(),J("<< /ShadingType "+v.type),J("/ColorSpace /DeviceRGB");var be="/Coords ["+T(parseFloat(v.coords[0]))+" "+T(parseFloat(v.coords[1]))+" ";v.type===2?be+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3])):be+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3]))+" "+T(parseFloat(v.coords[4]))+" "+T(parseFloat(v.coords[5])),J(be+="]"),v.matrix&&J("/Matrix ["+v.matrix.toString()+"]"),J("/Function "+K+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Zc=function(v,k){var K=Yt(),ne=Zt();k.push({resourcesOid:K,objectOid:ne}),v.objectNumber=ne;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+v.boundingBox.map(T).join(" ")+"]"}),he.push({key:"XStep",value:T(v.xStep)}),he.push({key:"YStep",value:T(v.yStep)}),he.push({key:"Resources",value:K+" 0 R"}),v.matrix&&he.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Gr({data:v.stream,additionalKeyValues:he,objectId:v.objectNumber}),J("endobj")},As=function(v){var k;for(k in vt)vt.hasOwnProperty(k)&&(vt[k]instanceof ns?Jc(vt[k]):vt[k]instanceof ni&&Zc(vt[k],v))},Go=function(v){for(var k in v.objectNumber=Zt(),J("<<"),v)switch(k){case"opacity":J("/ca "+H(v[k]));break;case"stroke-opacity":J("/CA "+H(v[k]))}J(">>"),J("endobj")},Qc=function(){var v;for(v in Mt)Mt.hasOwnProperty(v)&&Go(Mt[v])},Ei=function(){for(var v in J("/XObject <<"),ir)ir.hasOwnProperty(v)&&ir[v].objectNumber>=0&&J("/"+v+" "+ir[v].objectNumber+" 0 R");bt.publish("putXobjectDict"),J(">>")},eu=function(){hr.oid=Zt(),J("<<"),J("/Filter /Standard"),J("/V "+hr.v),J("/R "+hr.r),J("/U <"+hr.toHexString(hr.U)+">"),J("/O <"+hr.toHexString(hr.O)+">"),J("/P "+hr.P),J(">>"),J("endobj")},Vo=function(){for(var v in J("/Font <<"),jt)jt.hasOwnProperty(v)&&(m===!1||m===!0&&g.hasOwnProperty(v))&&J("/"+v+" "+jt[v].objectNumber+" 0 R");J(">>")},tu=function(){if(Object.keys(vt).length>0){for(var v in J("/Shading <<"),vt)vt.hasOwnProperty(v)&&vt[v]instanceof ns&&vt[v].objectNumber>=0&&J("/"+v+" "+vt[v].objectNumber+" 0 R");bt.publish("putShadingPatternDict"),J(">>")}},Cs=function(v){if(Object.keys(vt).length>0){for(var k in J("/Pattern <<"),vt)vt.hasOwnProperty(k)&&vt[k]instanceof f.TilingPattern&&vt[k].objectNumber>=0&&vt[k].objectNumber<v&&J("/"+k+" "+vt[k].objectNumber+" 0 R");bt.publish("putTilingPatternDict"),J(">>")}},ru=function(){if(Object.keys(Mt).length>0){var v;for(v in J("/ExtGState <<"),Mt)Mt.hasOwnProperty(v)&&Mt[v].objectNumber>=0&&J("/"+v+" "+Mt[v].objectNumber+" 0 R");bt.publish("putGStateDict"),J(">>")}},zt=function(v){$r(v.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Vo(),tu(),Cs(v.objectOid),ru(),Ei(),J(">>"),J("endobj")},Yo=function(){var v=[];js(),Qc(),_s(),As(v),bt.publish("putResources"),v.forEach(zt),zt({resourcesOid:hn,objectOid:Number.MAX_SAFE_INTEGER}),bt.publish("postPutResources")},Ko=function(){bt.publish("putAdditionalObjects");for(var v=0;v<Ae.length;v++){var k=Ae[v];$r(k.objId,!0),J(k.content),J("endobj")}bt.publish("postPutAdditionalObjects")},Xo=function(v){Ot[v.fontName]=Ot[v.fontName]||{},Ot[v.fontName][v.fontStyle]=v.id},Li=function(v,k,K,ne,he){var be={id:"F"+(Object.keys(jt).length+1).toString(10),postScriptName:v,fontName:k,fontStyle:K,encoding:ne,isStandardFont:he||!1,metadata:{}};return bt.publish("addFont",{font:be,instance:this}),jt[be.id]=be,Xo(be),be.id},nu=function(v){for(var k=0,K=Ce.length;k<K;k++){var ne=Li.call(this,v[k][0],v[k][1],v[k][2],Ce[k][3],!0);m===!1&&(g[ne]=!0);var he=v[k][0].split("-");Xo({id:ne,fontName:he[0],fontStyle:he[1]||""})}bt.publish("addFonts",{fonts:jt,dictionary:Ot})},mn=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(ne){var k=ne.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var K="Error in function "+k.split(`
`)[0].split("<")[0]+": "+ne.message;if(!Ke.console)throw new Error(K);Ke.console.error(K,ne),Ke.alert&&alert(K)}},v.foo.bar=v,v.foo},Es=function(v,k){var K,ne,he,be,_e,Re,We,at,rt;if(he=(k=k||{}).sourceEncoding||"Unicode",_e=k.outputEncoding,(k.autoencode||_e)&&jt[lt].metadata&&jt[lt].metadata[he]&&jt[lt].metadata[he].encoding&&(be=jt[lt].metadata[he].encoding,!_e&&jt[lt].encoding&&(_e=jt[lt].encoding),!_e&&be.codePages&&(_e=be.codePages[0]),typeof _e=="string"&&(_e=be[_e]),_e)){for(We=!1,Re=[],K=0,ne=v.length;K<ne;K++)(at=_e[v.charCodeAt(K)])?Re.push(String.fromCharCode(at)):Re.push(v[K]),Re[K].charCodeAt(0)>>8&&(We=!0);v=Re.join("")}for(K=v.length;We===void 0&&K!==0;)v.charCodeAt(K-1)>>8&&(We=!0),K--;if(!We)return v;for(Re=k.noBOM?[]:[254,255],K=0,ne=v.length;K<ne;K++){if((rt=(at=v.charCodeAt(K))>>8)>>8)throw new Error("Character at position "+K+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Re.push(rt),Re.push(at-(rt<<8))}return String.fromCharCode.apply(void 0,Re)},Lr=f.__private__.pdfEscape=f.pdfEscape=function(v,k){return Es(v,k).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pi=f.__private__.beginPage=function(v){Se[++It]=[],tt[It]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Zo(It),xe(Se[q])},Jo=function(v,k){var K,ne,he;switch(r=k||r,typeof v=="string"&&(K=y(v.toLowerCase()),Array.isArray(K)&&(ne=K[0],he=K[1])),Array.isArray(v)&&(ne=v[0]*Ie,he=v[1]*Ie),isNaN(ne)&&(ne=a[0],he=a[1]),(ne>14400||he>14400)&&(_t.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ne=Math.min(14400,ne),he=Math.min(14400,he)),a=[ne,he],r.substr(0,1)){case"l":he>ne&&(a=[he,ne]);break;case"p":ne>he&&(a=[he,ne])}Pi(a),al(Ti),J(gn),Ii!==0&&J(Ii+" J"),Ri!==0&&J(Ri+" j"),bt.publish("addPage",{pageNumber:It})},au=function(v){v>0&&v<=It&&(Se.splice(v,1),tt.splice(v,1),It--,q>It&&(q=It),this.setPage(q))},Zo=function(v){v>0&&v<=It&&(q=v)},su=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Se.length-1},Qo=function(v,k,K){var ne,he=void 0;return K=K||{},v=v!==void 0?v:jt[lt].fontName,k=k!==void 0?k:jt[lt].fontStyle,ne=v.toLowerCase(),Ot[ne]!==void 0&&Ot[ne][k]!==void 0?he=Ot[ne][k]:Ot[v]!==void 0&&Ot[v][k]!==void 0?he=Ot[v][k]:K.disableWarning===!1&&_t.warn("Unable to look up font label for font '"+v+"', '"+k+"'. Refer to getFontList() for available fonts."),he||K.noFallback||(he=Ot.times[k])==null&&(he=Ot.times.normal),he},iu=f.__private__.putInfo=function(){var v=Zt(),k=function(ne){return ne};for(var K in p!==null&&(k=hr.encryptor(v,0)),J("<<"),J("/Producer ("+Lr(k("jsPDF "+Ye.version))+")"),Je)Je.hasOwnProperty(K)&&Je[K]&&J("/"+K.substr(0,1).toUpperCase()+K.substr(1)+" ("+Lr(k(Je[K]))+")");J("/CreationDate ("+Lr(k(te))+")"),J(">>"),J("endobj")},Di=f.__private__.putCatalog=function(v){var k=(v=v||{}).rootDictionaryObjId||Kn;switch(Zt(),J("<<"),J("/Type /Catalog"),J("/Pages "+k+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var K=""+Oe;K.substr(K.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&J("/OpenAction [3 0 R /XYZ null null "+H(Oe)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}Xe&&J("/PageMode /"+Xe),bt.publish("putCatalog"),J(">>"),J("endobj")},ou=f.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(se+1)),J("/Root "+se+" 0 R"),J("/Info "+(se-1)+" 0 R"),p!==null&&J("/Encrypt "+hr.oid+" 0 R"),J("/ID [ <"+re+"> <"+re+"> ]"),J(">>")},lu=f.__private__.putHeader=function(){J("%PDF-"+N),J("%ºß¬à")},cu=f.__private__.putXRef=function(){var v="0000000000";J("xref"),J("0 "+(se+1)),J("0000000000 65535 f ");for(var k=1;k<=se;k++)typeof de[k]=="function"?J((v+de[k]()).slice(-10)+" 00000 n "):de[k]!==void 0?J((v+de[k]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Xn=f.__private__.buildDocument=function(){Ge(),xe(fe),bt.publish("buildDocument"),lu(),Ba(),Ko(),Yo(),p!==null&&eu(),iu(),Di();var v=ge;return cu(),ou(),J("startxref"),J(""+v),J("%%EOF"),xe(Se[q]),fe.join(`
`)},Ls=f.__private__.getBlob=function(v){return new Blob([qe(v)],{type:"application/pdf"})},Ps=f.output=f.__private__.output=mn(function(v,k){switch(typeof(k=k||{})=="string"?k={filename:k}:k.filename=k.filename||"generated.pdf",v){case void 0:return Xn();case"save":f.save(k.filename);break;case"arraybuffer":return qe(Xn());case"blob":return Ls(Xn());case"bloburi":case"bloburl":if(Ke.URL!==void 0&&typeof Ke.URL.createObjectURL=="function")return Ke.URL&&Ke.URL.createObjectURL(Ls(Xn()))||void 0;_t.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var K="",ne=Xn();try{K=Ad(ne)}catch{K=Ad(unescape(encodeURIComponent(ne)))}return"data:application/pdf;filename="+k.filename+";base64,"+K;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ke)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';k.pdfObjectUrl&&(he=k.pdfObjectUrl,be="");var _e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(k)+");<\/script></body></html>",Re=Ke.open();return Re!==null&&Re.document.write(_e),Re}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ke)==="[object Window]"){var We='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(k.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+k.filename+'" width="500px" height="400px" /></body></html>',at=Ke.open();if(at!==null){at.document.write(We);var rt=this;at.document.documentElement.querySelector("#pdfViewer").onload=function(){at.document.title=k.filename,at.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(rt.output("bloburl"))}}return at}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ke)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",k)+'"></iframe></body></html>',Tt=Ke.open();if(Tt!==null&&(Tt.document.write(ht),Tt.document.title=k.filename),Tt||typeof safari>"u")return Tt;break;case"datauri":case"dataurl":return Ke.document.location.href=this.output("datauristring",k);default:return null}}),el=function(v){return Array.isArray($a)===!0&&$a.indexOf(v)>-1};switch(n){case"pt":Ie=1;break;case"mm":Ie=72/25.4;break;case"cm":Ie=72/2.54;break;case"in":Ie=72;break;case"px":Ie=el("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ie=12;break;case"ex":Ie=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ie=n}var hr=null;ce(),Q();var uu=function(v){return p!==null?hr.encryptor(v,0):function(k){return k}},tl=f.__private__.getPageInfo=f.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:tt[v].objId,pageNumber:v,pageContext:tt[v]}},Qe=f.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var k in tt)if(tt[k].objId===v)break;return tl(k)},du=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:tt[q].objId,pageNumber:q,pageContext:tt[q]}};f.addPage=function(){return Jo.apply(this,arguments),this},f.setPage=function(){return Zo.apply(this,arguments),xe.call(this,Se[q]),this},f.insertPage=function(v){return this.addPage(),this.movePage(q,v),this},f.movePage=function(v,k){var K,ne;if(v>k){K=Se[v],ne=tt[v];for(var he=v;he>k;he--)Se[he]=Se[he-1],tt[he]=tt[he-1];Se[k]=K,tt[k]=ne,this.setPage(k)}else if(v<k){K=Se[v],ne=tt[v];for(var be=v;be<k;be++)Se[be]=Se[be+1],tt[be]=tt[be+1];Se[k]=K,tt[k]=ne,this.setPage(k)}return this},f.deletePage=function(){return au.apply(this,arguments),this},f.__private__.text=f.text=function(v,k,K,ne,he){var be,_e,Re,We,at,rt,ht,Tt,Rt,Kt=(ne=ne||{}).scope||this;if(typeof v=="number"&&typeof k=="number"&&(typeof K=="string"||Array.isArray(K))){var fr=K;K=k,k=v,v=fr}if(arguments[3]instanceof Ve?(C("The transform parameter of text() with a Matrix value"),Rt=he):(Re=arguments[4],We=arguments[5],dt(ht=arguments[3])==="object"&&ht!==null||(typeof Re=="string"&&(We=Re,Re=null),typeof ht=="string"&&(We=ht,ht=null),typeof ht=="number"&&(Re=ht,ht=null),ne={flags:ht,angle:Re,align:We})),isNaN(k)||isNaN(K)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Kt;var rr="",vn=!1,Br=typeof ne.lineHeightFactor=="number"?ne.lineHeightFactor:za,Mn=Kt.internal.scaleFactor;function ul(Ct){return Ct=Ct.split("	").join(Array(ne.TabLen||9).join(" ")),Lr(Ct,ht)}function zi(Ct){for(var Et,Wt=Ct.concat(),Qt=[],ta=Wt.length;ta--;)typeof(Et=Wt.shift())=="string"?Qt.push(Et):Array.isArray(Ct)&&(Et.length===1||Et[1]===void 0&&Et[2]===void 0)?Qt.push(Et[0]):Qt.push([Et[0],Et[1],Et[2]]);return Qt}function Ui(Ct,Et){var Wt;if(typeof Ct=="string")Wt=Et(Ct)[0];else if(Array.isArray(Ct)){for(var Qt,ta,Ji=Ct.concat(),Hs=[],ml=Ji.length;ml--;)typeof(Qt=Ji.shift())=="string"?Hs.push(Et(Qt)[0]):Array.isArray(Qt)&&typeof Qt[0]=="string"&&(ta=Et(Qt[0],Qt[1],Qt[2]),Hs.push([ta[0],ta[1],ta[2]]));Wt=Hs}return Wt}var Is=!1,Wi=!0;if(typeof v=="string")Is=!0;else if(Array.isArray(v)){var Hi=v.concat();_e=[];for(var Rs,or=Hi.length;or--;)(typeof(Rs=Hi.shift())!="string"||Array.isArray(Rs)&&typeof Rs[0]!="string")&&(Wi=!1);Is=Wi}if(Is===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Fs=Ee/Kt.internal.scaleFactor,$s=Fs*(Br-1);switch(ne.baseline){case"bottom":K-=$s;break;case"top":K+=Fs-$s;break;case"hanging":K+=Fs-2*$s;break;case"middle":K+=Fs/2-$s}if((rt=ne.maxWidth||0)>0&&(typeof v=="string"?v=Kt.splitTextToSize(v,rt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Ct,Et){return Ct.concat(Kt.splitTextToSize(Et,rt))},[]))),be={text:v,x:k,y:K,options:ne,mutex:{pdfEscape:Lr,activeFontKey:lt,fonts:jt,activeFontSize:Ee}},bt.publish("preProcessText",be),v=be.text,Re=(ne=be.options).angle,!(Rt instanceof Ve)&&Re&&typeof Re=="number"){Re*=Math.PI/180,ne.rotationDirection===0&&(Re=-Re),_===w.ADVANCED&&(Re=-Re);var Bs=Math.cos(Re),Gi=Math.sin(Re);Rt=new Ve(Bs,Gi,-Gi,Bs,0,0)}else Re&&Re instanceof Ve&&(Rt=Re);_!==w.ADVANCED||Rt||(Rt=Pn),(at=ne.charSpace||Os)!==void 0&&(rr+=T(O(at))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Tt=ne.horizontalScale)!==void 0&&(rr+=T(100*Tt)+` Tz
`),ne.lang;var Pr=-1,wu=ne.renderingMode!==void 0?ne.renderingMode:ne.stroke,Vi=Kt.internal.getCurrentPageInfo().pageContext;switch(wu){case 0:case!1:case"fill":Pr=0;break;case 1:case!0:case"stroke":Pr=1;break;case 2:case"fillThenStroke":Pr=2;break;case 3:case"invisible":Pr=3;break;case 4:case"fillAndAddForClipping":Pr=4;break;case 5:case"strokeAndAddPathForClipping":Pr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Pr=6;break;case 7:case"addToPathForClipping":Pr=7}var dl=Vi.usedRenderingMode!==void 0?Vi.usedRenderingMode:-1;Pr!==-1?rr+=Pr+` Tr
`:dl!==-1&&(rr+=`0 Tr
`),Pr!==-1&&(Vi.usedRenderingMode=Pr),We=ne.align||"left";var Vr,qs=Ee*Br,hl=Kt.internal.pageSize.getWidth(),fl=jt[lt];at=ne.charSpace||Os,rt=ne.maxWidth||0,ht=Object.assign({autoencode:!0,noBOM:!0},ne.flags);var pa=[],Ha=function(Ct){return Kt.getStringUnitWidth(Ct,{font:fl,charSpace:at,fontSize:Ee,doKerning:!1})*Ee/Mn};if(Object.prototype.toString.call(v)==="[object Array]"){var Dr;_e=zi(v),We!=="left"&&(Vr=_e.map(Ha));var jr,ma=0;if(We==="right"){k-=Vr[0],v=[],or=_e.length;for(var Zn=0;Zn<or;Zn++)Zn===0?(jr=Tn(k),Dr=Jn(K)):(jr=O(ma-Vr[Zn]),Dr=-qs),v.push([_e[Zn],jr,Dr]),ma=Vr[Zn]}else if(We==="center"){k-=Vr[0]/2,v=[],or=_e.length;for(var Qn=0;Qn<or;Qn++)Qn===0?(jr=Tn(k),Dr=Jn(K)):(jr=O((ma-Vr[Qn])/2),Dr=-qs),v.push([_e[Qn],jr,Dr]),ma=Vr[Qn]}else if(We==="left"){v=[],or=_e.length;for(var zs=0;zs<or;zs++)v.push(_e[zs])}else if(We==="justify"&&fl.encoding==="Identity-H"){v=[],or=_e.length,rt=rt!==0?rt:hl;for(var ea=0,Ut=0;Ut<or;Ut++)if(Dr=Ut===0?Jn(K):-qs,jr=Ut===0?Tn(k):ea,Ut<or-1){var Yi=O((rt-Vr[Ut])/(_e[Ut].split(" ").length-1)),Sr=_e[Ut].split(" ");v.push([Sr[0]+" ",jr,Dr]),ea=0;for(var Yr=1;Yr<Sr.length;Yr++){var Us=(Ha(Sr[Yr-1]+" "+Sr[Yr])-Ha(Sr[Yr]))*Mn+Yi;Yr==Sr.length-1?v.push([Sr[Yr],Us,0]):v.push([Sr[Yr]+" ",Us,0]),ea-=Us}}else v.push([_e[Ut],jr,Dr]);v.push(["",ea,0])}else{if(We!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],or=_e.length,rt=rt!==0?rt:hl,Ut=0;Ut<or;Ut++)Dr=Ut===0?Jn(K):-qs,jr=Ut===0?Tn(k):0,Ut<or-1?pa.push(T(O((rt-Vr[Ut])/(_e[Ut].split(" ").length-1)))):pa.push(0),v.push([_e[Ut],jr,Dr])}}var pl=typeof ne.R2L=="boolean"?ne.R2L:Ue;pl===!0&&(v=Ui(v,function(Ct,Et,Wt){return[Ct.split("").reverse().join(""),Et,Wt]})),be={text:v,x:k,y:K,options:ne,mutex:{pdfEscape:Lr,activeFontKey:lt,fonts:jt,activeFontSize:Ee}},bt.publish("postProcessText",be),v=be.text,vn=be.mutex.isHex||!1;var Ki=jt[lt].encoding;Ki!=="WinAnsiEncoding"&&Ki!=="StandardEncoding"||(v=Ui(v,function(Ct,Et,Wt){return[ul(Ct),Et,Wt]})),_e=zi(v),v=[];for(var Ga,Va,ga,Ya=0,Ws=1,Ka=Array.isArray(_e[0])?Ws:Ya,va="",Xi=function(Ct,Et,Wt){var Qt="";return Wt instanceof Ve?(Wt=typeof ne.angle=="number"?dn(Wt,new Ve(1,0,0,1,Ct,Et)):dn(new Ve(1,0,0,1,Ct,Et),Wt),_===w.ADVANCED&&(Wt=dn(new Ve(1,0,0,-1,0,0),Wt)),Qt=Wt.join(" ")+` Tm
`):Qt=T(Ct)+" "+T(Et)+` Td
`,Qt},Kr=0;Kr<_e.length;Kr++){switch(va="",Ka){case Ws:ga=(vn?"<":"(")+_e[Kr][0]+(vn?">":")"),Ga=parseFloat(_e[Kr][1]),Va=parseFloat(_e[Kr][2]);break;case Ya:ga=(vn?"<":"(")+_e[Kr]+(vn?">":")"),Ga=Tn(k),Va=Jn(K)}pa!==void 0&&pa[Kr]!==void 0&&(va=pa[Kr]+` Tw
`),Kr===0?v.push(va+Xi(Ga,Va,Rt)+ga):Ka===Ya?v.push(va+ga):Ka===Ws&&v.push(va+Xi(Ga,Va,Rt)+ga)}v=Ka===Ya?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var Xr=`BT
/`;return Xr+=lt+" "+Ee+` Tf
`,Xr+=T(Ee*Br)+` TL
`,Xr+=Ua+`
`,Xr+=rr,Xr+=v,J(Xr+="ET"),g[lt]=!0,Kt};var hu=f.__private__.clip=f.clip=function(v){return J(v==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return hu("evenodd")},f.__private__.discardPath=f.discardPath=function(){return J("n"),this};var On=f.__private__.isValidStyle=function(v){var k=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(k=!0),k};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(v){return On(v)&&(d=v),this};var rl=f.__private__.getStyle=f.getStyle=function(v){var k=d;switch(v){case"D":case"S":k="S";break;case"F":k="f";break;case"FD":case"DF":k="B";break;case"f":case"f*":case"B":case"B*":k=v}return k},nl=f.close=function(){return J("h"),this};f.stroke=function(){return J("S"),this},f.fill=function(v){return Ds("f",v),this},f.fillEvenOdd=function(v){return Ds("f*",v),this},f.fillStroke=function(v){return Ds("B",v),this},f.fillStrokeEvenOdd=function(v){return Ds("B*",v),this};var Ds=function(v,k){dt(k)==="object"?pu(k,v):J(v)},ki=function(v){v===null||_===w.ADVANCED&&v===void 0||(v=rl(v),J(v))};function fu(v,k,K,ne,he){var be=new ni(k||this.boundingBox,K||this.xStep,ne||this.yStep,this.gState,he||this.matrix);be.stream=this.stream;var _e=v+"$$"+this.cloneIndex+++"$$";return Er(_e,be),be}var pu=function(v,k){var K=Fa[v.key],ne=vt[K];if(ne instanceof ns)J("q"),J(mu(k)),ne.gState&&f.setGState(ne.gState),J(v.matrix.toString()+" cm"),J("/"+K+" sh"),J("Q");else if(ne instanceof ni){var he=new Ve(1,0,0,-1,0,fa());v.matrix&&(he=he.multiply(v.matrix||Pn),K=fu.call(ne,v.key,v.boundingBox,v.xStep,v.yStep,he).id),J("q"),J("/Pattern cs"),J("/"+K+" scn"),ne.gState&&f.setGState(ne.gState),J(k),J("Q")}},mu=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Oi=f.moveTo=function(v,k){return J(T(O(v))+" "+T(U(k))+" m"),this},qa=f.lineTo=function(v,k){return J(T(O(v))+" "+T(U(k))+" l"),this},da=f.curveTo=function(v,k,K,ne,he,be){return J([T(O(v)),T(U(k)),T(O(K)),T(U(ne)),T(O(he)),T(U(be)),"c"].join(" ")),this};f.__private__.line=f.line=function(v,k,K,ne,he){if(isNaN(v)||isNaN(k)||isNaN(K)||isNaN(ne)||!On(he))throw new Error("Invalid arguments passed to jsPDF.line");return _===w.COMPAT?this.lines([[K-v,ne-k]],v,k,[1,1],he||"S"):this.lines([[K-v,ne-k]],v,k,[1,1]).stroke()},f.__private__.lines=f.lines=function(v,k,K,ne,he,be){var _e,Re,We,at,rt,ht,Tt,Rt,Kt,fr,rr,vn;if(typeof v=="number"&&(vn=K,K=k,k=v,v=vn),ne=ne||[1,1],be=be||!1,isNaN(k)||isNaN(K)||!Array.isArray(v)||!Array.isArray(ne)||!On(he)||typeof be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Oi(k,K),_e=ne[0],Re=ne[1],at=v.length,fr=k,rr=K,We=0;We<at;We++)(rt=v[We]).length===2?(fr=rt[0]*_e+fr,rr=rt[1]*Re+rr,qa(fr,rr)):(ht=rt[0]*_e+fr,Tt=rt[1]*Re+rr,Rt=rt[2]*_e+fr,Kt=rt[3]*Re+rr,fr=rt[4]*_e+fr,rr=rt[5]*Re+rr,da(ht,Tt,Rt,Kt,fr,rr));return be&&nl(),ki(he),this},f.path=function(v){for(var k=0;k<v.length;k++){var K=v[k],ne=K.c;switch(K.op){case"m":Oi(ne[0],ne[1]);break;case"l":qa(ne[0],ne[1]);break;case"c":da.apply(this,ne);break;case"h":nl()}}return this},f.__private__.rect=f.rect=function(v,k,K,ne,he){if(isNaN(v)||isNaN(k)||isNaN(K)||isNaN(ne)||!On(he))throw new Error("Invalid arguments passed to jsPDF.rect");return _===w.COMPAT&&(ne=-ne),J([T(O(v)),T(U(k)),T(O(K)),T(O(ne)),"re"].join(" ")),ki(he),this},f.__private__.triangle=f.triangle=function(v,k,K,ne,he,be,_e){if(isNaN(v)||isNaN(k)||isNaN(K)||isNaN(ne)||isNaN(he)||isNaN(be)||!On(_e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[K-v,ne-k],[he-K,be-ne],[v-he,k-be]],v,k,[1,1],_e,!0),this},f.__private__.roundedRect=f.roundedRect=function(v,k,K,ne,he,be,_e){if(isNaN(v)||isNaN(k)||isNaN(K)||isNaN(ne)||isNaN(he)||isNaN(be)||!On(_e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Re=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*K),be=Math.min(be,.5*ne),this.lines([[K-2*he,0],[he*Re,0,he,be-be*Re,he,be],[0,ne-2*be],[0,be*Re,-he*Re,be,-he,be],[2*he-K,0],[-he*Re,0,-he,-be*Re,-he,-be],[0,2*be-ne],[0,-be*Re,he*Re,-be,he,-be]],v+he,k,[1,1],_e,!0),this},f.__private__.ellipse=f.ellipse=function(v,k,K,ne,he){if(isNaN(v)||isNaN(k)||isNaN(K)||isNaN(ne)||!On(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var be=4/3*(Math.SQRT2-1)*K,_e=4/3*(Math.SQRT2-1)*ne;return Oi(v+K,k),da(v+K,k-_e,v+be,k-ne,v,k-ne),da(v-be,k-ne,v-K,k-_e,v-K,k),da(v-K,k+_e,v-be,k+ne,v,k+ne),da(v+be,k+ne,v+K,k+_e,v+K,k),ki(he),this},f.__private__.circle=f.circle=function(v,k,K,ne){if(isNaN(v)||isNaN(k)||isNaN(K)||!On(ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,k,K,K,ne)},f.setFont=function(v,k,K){return K&&(k=B(k,K)),lt=Qo(v,k,{disableWarning:!1}),this};var gu=f.__private__.getFont=f.getFont=function(){return jt[Qo.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var v,k,K={};for(v in Ot)if(Ot.hasOwnProperty(v))for(k in K[v]=[],Ot[v])Ot[v].hasOwnProperty(k)&&K[v].push(k);return K},f.addFont=function(v,k,K,ne,he){var be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&be.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&be.indexOf(arguments[3])==-1&&(K=B(K,ne)),he=he||"Identity-H",Li.call(this,v,k,K,he)};var za,Ti=e.lineWidth||.200025,ks=f.__private__.getLineWidth=f.getLineWidth=function(){return Ti},al=f.__private__.setLineWidth=f.setLineWidth=function(v){return Ti=v,J(T(O(v))+" w"),this};f.__private__.setLineDash=Ye.API.setLineDash=Ye.API.setLineDashPattern=function(v,k){if(v=v||[],k=k||0,isNaN(k)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(K){return T(O(K))}).join(" "),k=T(O(k)),J("["+v+"] "+k+" d"),this};var sl=f.__private__.getLineHeight=f.getLineHeight=function(){return Ee*za};f.__private__.getLineHeight=f.getLineHeight=function(){return Ee*za};var il=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(za=v),this},ol=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return za};il(e.lineHeight);var Tn=f.__private__.getHorizontalCoordinate=function(v){return O(v)},Jn=f.__private__.getVerticalCoordinate=function(v){return _===w.ADVANCED?v:tt[q].mediaBox.topRightY-tt[q].mediaBox.bottomLeftY-O(v)},vu=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(v){return T(Tn(v))},ha=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(v){return T(Jn(v))},gn=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return fn(gn)},f.__private__.setStrokeColor=f.setDrawColor=function(v,k,K,ne){return gn=pn({ch1:v,ch2:k,ch3:K,ch4:ne,pdfColorType:"draw",precision:2}),J(gn),this};var Mi=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return fn(Mi)},f.__private__.setFillColor=f.setFillColor=function(v,k,K,ne){return Mi=pn({ch1:v,ch2:k,ch3:K,ch4:ne,pdfColorType:"fill",precision:2}),J(Mi),this};var Ua=e.textColor||"0 g",bu=f.__private__.getTextColor=f.getTextColor=function(){return fn(Ua)};f.__private__.setTextColor=f.setTextColor=function(v,k,K,ne){return Ua=pn({ch1:v,ch2:k,ch3:K,ch4:ne,pdfColorType:"text",precision:3}),this};var Os=e.charSpace,xu=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Os||0)};f.__private__.setCharSpace=f.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Os=v,this};var Ii=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(v){var k=f.CapJoinStyles[v];if(k===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ii=k,J(k+" J"),this};var Ri=0;f.__private__.setLineJoin=f.setLineJoin=function(v){var k=f.CapJoinStyles[v];if(k===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ri=k,J(k+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(T(O(v))+" M"),this},f.GState=sc,f.setGState=function(v){(v=typeof v=="string"?Mt[un[v]]:ll(null,v)).equals(Yn)||(J("/"+v.id+" gs"),Yn=v)};var ll=function(v,k){if(!v||!un[v]){var K=!1;for(var ne in Mt)if(Mt.hasOwnProperty(ne)&&Mt[ne].equals(k)){K=!0;break}if(K)k=Mt[ne];else{var he="GS"+(Object.keys(Mt).length+1).toString(10);Mt[he]=k,k.id=he}return v&&(un[v]=k.id),bt.publish("addGState",k),k}};f.addGState=function(v,k){return ll(v,k),this},f.saveGraphicsState=function(){return J("q"),Cn.push({key:lt,size:Ee,color:Ua}),this},f.restoreGraphicsState=function(){J("Q");var v=Cn.pop();return lt=v.key,Ee=v.size,Ua=v.color,Yn=null,this},f.setCurrentTransformationMatrix=function(v){return J(v.toString()+" cm"),this},f.comment=function(v){return J("#"+v),this};var Ts=function(v,k){var K=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return K},set:function(be){isNaN(be)||(K=parseFloat(be))}});var ne=k||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ne},set:function(be){isNaN(be)||(ne=parseFloat(be))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(be){he=be.toString()}}),this},Fi=function(v,k,K,ne){Ts.call(this,v,k),this.type="rect";var he=K||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(_e){isNaN(_e)||(he=parseFloat(_e))}});var be=ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return be},set:function(_e){isNaN(_e)||(be=parseFloat(_e))}}),this},$i=function(){this.page=It,this.currentPage=q,this.pages=Se.slice(0),this.pagesContext=tt.slice(0),this.x=dr,this.y=pt,this.matrix=cn,this.width=Wa(q),this.height=fa(q),this.outputDestination=Pe,this.id="",this.objectNumber=-1};$i.prototype.restore=function(){It=this.page,q=this.currentPage,tt=this.pagesContext,Se=this.pages,dr=this.x,pt=this.y,cn=this.matrix,Bi(q,this.width),qi(q,this.height),Pe=this.outputDestination};var cl=function(v,k,K,ne,he){Ln.push(new $i),It=q=0,Se=[],dr=v,pt=k,cn=he,Pi([K,ne])},yu=function(v){if(En[v])Ln.pop().restore();else{var k=new $i,K="Xo"+(Object.keys(ir).length+1).toString(10);k.id=K,En[v]=K,ir[K]=k,bt.publish("addFormObject",k),Ln.pop().restore()}};for(var Ms in f.beginFormObject=function(v,k,K,ne,he){return cl(v,k,K,ne,he),this},f.endFormObject=function(v){return yu(v),this},f.doFormObject=function(v,k){var K=ir[En[v]];return J("q"),J(k.toString()+" cm"),J("/"+K.id+" Do"),J("Q"),this},f.getFormObject=function(v){var k=ir[En[v]];return{x:k.x,y:k.y,width:k.width,height:k.height,matrix:k.matrix}},f.save=function(v,k){return v=v||"generated.pdf",(k=k||{}).returnPromise=k.returnPromise||!1,k.returnPromise===!1?(es(Ls(Xn()),v),typeof es.unload=="function"&&Ke.setTimeout&&setTimeout(es.unload,911),this):new Promise(function(K,ne){try{var he=es(Ls(Xn()),v);typeof es.unload=="function"&&Ke.setTimeout&&setTimeout(es.unload,911),K(he)}catch(be){ne(be.message)}})},Ye.API)Ye.API.hasOwnProperty(Ms)&&(Ms==="events"&&Ye.API.events.length?function(v,k){var K,ne,he;for(he=k.length-1;he!==-1;he--)K=k[he][0],ne=k[he][1],v.subscribe.apply(v,[K].concat(typeof ne=="function"?[ne]:ne))}(bt,Ye.API.events):f[Ms]=Ye.API[Ms]);var Wa=f.getPageWidth=function(v){return(tt[v=v||q].mediaBox.topRightX-tt[v].mediaBox.bottomLeftX)/Ie},Bi=f.setPageWidth=function(v,k){tt[v].mediaBox.topRightX=k*Ie+tt[v].mediaBox.bottomLeftX},fa=f.getPageHeight=function(v){return(tt[v=v||q].mediaBox.topRightY-tt[v].mediaBox.bottomLeftY)/Ie},qi=f.setPageHeight=function(v,k){tt[v].mediaBox.topRightY=k*Ie+tt[v].mediaBox.bottomLeftY};return f.internal={pdfEscape:Lr,getStyle:rl,getFont:gu,getFontSize:ke,getCharSpace:xu,getTextColor:bu,getLineHeight:sl,getLineHeightFactor:ol,getLineWidth:ks,write:Ze,getHorizontalCoordinate:Tn,getVerticalCoordinate:Jn,getCoordinateString:vu,getVerticalCoordinateString:ha,collections:{},newObject:Zt,newAdditionalObject:ws,newObjectDeferred:Yt,newObjectDeferredBegin:$r,getFilters:Dn,putStream:Gr,events:bt,scaleFactor:Ie,pageSize:{getWidth:function(){return Wa(q)},setWidth:function(v){Bi(q,v)},getHeight:function(){return fa(q)},setHeight:function(v){qi(q,v)}},encryptionOptions:p,encryption:hr,getEncryptor:uu,output:Ps,getNumberOfPages:su,pages:Se,out:J,f2:H,f3:A,getPageInfo:tl,getPageInfoByObjId:Qe,getCurrentPageInfo:du,getPDFVersion:x,Point:Ts,Rectangle:Fi,Matrix:Ve,hasHotfix:el},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Wa(q)},set:function(v){Bi(q,v)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return fa(q)},set:function(v){qi(q,v)},enumerable:!0,configurable:!0}),nu.call(f,Ce),lt="F1",Jo(a,r),bt.publish("initialized"),f}ei.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},ei.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ei.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},ei.prototype.processOwnerPassword=function(e,t){return Ed(Cd(t).substr(0,5),e)},ei.prototype.encryptor=function(e,t){var r=Cd(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Ed(r,n)}},sc.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||dt(e)!==dt(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Ye.API={events:[]},Ye.version="3.0.1";var $t=Ye.API,ih=1,xs=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xs=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nt=function(e){return e.toFixed(2)},Aa=function(e){return e.toFixed(5)};$t.__acroform__={};var Fr=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Gf=function(e){return e*ih},Fn=function(e){var t=new Og,r=Be.internal.getHeight(e)||0,n=Be.internal.getWidth(e)||0;return t.BBox=[0,0,Number(nt(n)),Number(nt(r))],t},Z2=$t.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Q2=$t.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},eb=$t.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ht=$t.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return eb(e,t-1)},Gt=$t.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Z2(e,t-1)},Vt=$t.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Q2(e,t-1)},tb=$t.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(nt(c.lowerLeft_X)),Number(nt(c.lowerLeft_Y)),Number(nt(c.upperRight_X)),Number(nt(c.upperRight_Y))]},rb=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=Ld(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+nt(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Fn(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},Ld=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(A){return A.split(`
`)}):a.map(function(A){return[A]});var s=r,o=Be.internal.getHeight(e)||0;o=o<0?-o:o;var l=Be.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(A,O,F){if(A+1<a.length){var U=O+" "+a[A+1][0];return Fl(U,e,F).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var d,p,m=Fl("3",e,s).height,g=e.multiline?o-s:(o-m)/2,f=g+=2,N=0,x=0,S=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Fl(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",w=0,_=0;_<a.length;_++)if(a.hasOwnProperty(_)){var E=!1;if(a[_].length!==1&&S!==a[_].length-1){if((m+2)*(w+2)+2>o)continue e;y+=a[_][S],E=!0,x=_,_--}else{y=(y+=a[_][S]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var L=parseInt(_),B=c(L,y,s),T=_>=a.length-1;if(B&&!T){y+=" ",S=0;continue}if(B||T){if(T)x=L;else if(e.multiline&&(m+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(m+2)*(w+2)+2>o)continue e;x=L}}for(var C="",$=N;$<=x;$++){var H=a[$];if(e.multiline){if($===x){C+=H[S]+" ",S=(S+1)%H.length;continue}if($===N){C+=H[H.length-1]+" ";continue}}C+=H[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,p=Fl(C,e,s).width,e.textAlign){case"right":d=l-p-2;break;case"center":d=(l-p)/2;break;case"left":default:d=2}t+=nt(d)+" "+nt(f)+` Td
`,t+="("+xs(C)+`) Tj
`,t+=-nt(d)+` 0 Td
`,f=-(s+2),p=0,N=E?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},Fl=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},nb={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ab=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},sb=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),dt(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},ib=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(_n.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(nb)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ih=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Tg,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&ab(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=tb(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Be.createDefaultAppearanceStream(l),dt(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var p=rb(l);c.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(l.appearanceStreamContent){var m="";for(var g in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(g)){var f=l.appearanceStreamContent[g];if(m+="/"+g+" ",m+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var N=f[o];typeof N=="function"&&(N=N.call(a,l)),m+="/"+o+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=f)=="function"&&(N=N.call(a,l)),m+="/"+o+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&sb(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},kg=$t.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),dt(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+xs(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Yu=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+xs(n(e))+")"},Bn=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Bn.prototype.toString=function(){return this.objId+" 0 R"},Bn.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Bn.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:kg(a,this.objId,this.scope)}):a instanceof Bn?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var Og=function(){Bn.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Fr(Og,Bn);var Tg=function(){Bn.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+xs(r(e))+")"}},set:function(r){e=r}})};Fr(Tg,Bn);var _n=function e(){Bn.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ht(t,3)},set:function(y){y?this.F=Gt(t,3):this.F=Vt(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof ic)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+xs(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/ih:d},set:function(y){d=y}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(y){p=y}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof ic||this instanceof os))return Yu(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=y}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof sr?g:Yu(g,this.objId,this.scope)},set:function(y){y=y.toString(),g=this instanceof sr?y:y.substr(0,1)==="("?Xs(y.substr(1,y.length-2)):Xs(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof sr?Xs(g.substr(1,g.length-1)):g},set:function(y){y=y.toString(),g=this instanceof sr?"/"+y:y}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof sr?f:Yu(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof sr?y:y.substr(0,1)==="("?Xs(y.substr(1,y.length-2)):Xs(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof sr?Xs(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof sr?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(y){N=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,1)},set:function(y){y?this.Ff=Gt(this.Ff,1):this.Ff=Vt(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,2)},set:function(y){y?this.Ff=Gt(this.Ff,2):this.Ff=Vt(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,3)},set:function(y){y?this.Ff=Gt(this.Ff,3):this.Ff=Vt(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');S=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(S){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};Fr(_n,Bn);var ai=function(){_n.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return kg(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,d=[];c=o.exec(s);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,18)},set:function(r){r?this.Ff=Gt(this.Ff,18):this.Ff=Vt(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Gt(this.Ff,19):this.Ff=Vt(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,20)},set:function(r){r?(this.Ff=Gt(this.Ff,20),t.sort()):this.Ff=Vt(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,22)},set:function(r){r?this.Ff=Gt(this.Ff,22):this.Ff=Vt(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,23)},set:function(r){r?this.Ff=Gt(this.Ff,23):this.Ff=Vt(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,27)},set:function(r){r?this.Ff=Gt(this.Ff,27):this.Ff=Vt(this.Ff,27)}}),this.hasAppearanceStream=!1};Fr(ai,_n);var si=function(){ai.call(this),this.fontName="helvetica",this.combo=!1};Fr(si,ai);var ii=function(){si.call(this),this.combo=!0};Fr(ii,si);var Yl=function(){ii.call(this),this.edit=!0};Fr(Yl,ii);var sr=function(){_n.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,15)},set:function(r){r?this.Ff=Gt(this.Ff,15):this.Ff=Vt(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,16)},set:function(r){r?this.Ff=Gt(this.Ff,16):this.Ff=Vt(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,17)},set:function(r){r?this.Ff=Gt(this.Ff,17):this.Ff=Vt(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,26)},set:function(r){r?this.Ff=Gt(this.Ff,26):this.Ff=Vt(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+xs(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){dt(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Fr(sr,_n);var Kl=function(){sr.call(this),this.pushButton=!0};Fr(Kl,sr);var oi=function(){sr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Fr(oi,sr);var ic=function(){var e,t;_n.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+xs(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){dt(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Be.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Fr(ic,_n),oi.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},oi.prototype.createOption=function(e){var t=new ic;return t.Parent=this,t.optionName=e,this.Kids.push(t),ob.call(this.scope,t),t};var Xl=function(){sr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Be.CheckBox.createAppearanceStream()};Fr(Xl,sr);var os=function(){_n.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,13)},set:function(t){t?this.Ff=Gt(this.Ff,13):this.Ff=Vt(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,21)},set:function(t){t?this.Ff=Gt(this.Ff,21):this.Ff=Vt(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,23)},set:function(t){t?this.Ff=Gt(this.Ff,23):this.Ff=Vt(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,24)},set:function(t){t?this.Ff=Gt(this.Ff,24):this.Ff=Vt(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,25)},set:function(t){t?this.Ff=Gt(this.Ff,25):this.Ff=Vt(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,26)},set:function(t){t?this.Ff=Gt(this.Ff,26):this.Ff=Vt(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Fr(os,_n);var Jl=function(){os.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ht(this.Ff,14)},set:function(e){e?this.Ff=Gt(this.Ff,14):this.Ff=Vt(this.Ff,14)}}),this.password=!0};Fr(Jl,os);var Be={CheckBox:{createAppearanceStream:function(){return{N:{On:Be.CheckBox.YesNormal},D:{On:Be.CheckBox.YesPushDown,Off:Be.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Fn(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=Ld(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+nt(Be.internal.getWidth(e))+" "+nt(Be.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+nt(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Fn(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=Be.internal.getHeight(e),o=Be.internal.getWidth(e),l=Ld(e,e.caption);return a.push("1 g"),a.push("0 0 "+nt(o)+" "+nt(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+nt(o-1)+" "+nt(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+nt(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Fn(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+nt(Be.internal.getWidth(e))+" "+nt(Be.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Be.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Be.RadioButton.Circle.YesNormal,t.D[e]=Be.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Fn(e);t.scope=e.scope;var r=[],n=Be.internal.getWidth(e)<=Be.internal.getHeight(e)?Be.internal.getWidth(e)/4:Be.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Be.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Aa(Be.internal.getWidth(e)/2)+" "+Aa(Be.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Fn(e);t.scope=e.scope;var r=[],n=Be.internal.getWidth(e)<=Be.internal.getHeight(e)?Be.internal.getWidth(e)/4:Be.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Be.internal.Bezier_C).toFixed(5)),o=Number((n*Be.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Aa(Be.internal.getWidth(e)/2)+" "+Aa(Be.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Aa(Be.internal.getWidth(e)/2)+" "+Aa(Be.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Fn(e);t.scope=e.scope;var r=[],n=Be.internal.getWidth(e)<=Be.internal.getHeight(e)?Be.internal.getWidth(e)/4:Be.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Be.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Aa(Be.internal.getWidth(e)/2)+" "+Aa(Be.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Be.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Be.RadioButton.Cross.YesNormal,t.D[e]=Be.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Fn(e);t.scope=e.scope;var r=[],n=Be.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+nt(Be.internal.getWidth(e)-2)+" "+nt(Be.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(nt(n.x1.x)+" "+nt(n.x1.y)+" m"),r.push(nt(n.x2.x)+" "+nt(n.x2.y)+" l"),r.push(nt(n.x4.x)+" "+nt(n.x4.y)+" m"),r.push(nt(n.x3.x)+" "+nt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Fn(e);t.scope=e.scope;var r=Be.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+nt(Be.internal.getWidth(e))+" "+nt(Be.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+nt(Be.internal.getWidth(e)-2)+" "+nt(Be.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(nt(r.x1.x)+" "+nt(r.x1.y)+" m"),n.push(nt(r.x2.x)+" "+nt(r.x2.y)+" l"),n.push(nt(r.x4.x)+" "+nt(r.x4.y)+" m"),n.push(nt(r.x3.x)+" "+nt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Fn(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+nt(Be.internal.getWidth(e))+" "+nt(Be.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Be.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Be.internal.getWidth(e),r=Be.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Be.internal.getWidth=function(e){var t=0;return dt(e)==="object"&&(t=Gf(e.Rect[2])),t},Be.internal.getHeight=function(e){var t=0;return dt(e)==="object"&&(t=Gf(e.Rect[3])),t};var ob=$t.addField=function(e){if(ib(this,e),!(e instanceof _n))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};$t.AcroFormChoiceField=ai,$t.AcroFormListBox=si,$t.AcroFormComboBox=ii,$t.AcroFormEditBox=Yl,$t.AcroFormButton=sr,$t.AcroFormPushButton=Kl,$t.AcroFormRadioButton=oi,$t.AcroFormCheckBox=Xl,$t.AcroFormTextField=os,$t.AcroFormPasswordField=Jl,$t.AcroFormAppearance=Be,$t.AcroForm={ChoiceField:ai,ListBox:si,ComboBox:ii,EditBox:Yl,Button:sr,PushButton:Kl,RadioButton:oi,CheckBox:Xl,TextField:os,PasswordField:Jl,Appearance:Be},Ye.AcroForm={ChoiceField:ai,ListBox:si,ComboBox:ii,EditBox:Yl,Button:sr,PushButton:Kl,RadioButton:oi,CheckBox:Xl,TextField:os,PasswordField:Jl,Appearance:Be};Ye.AcroForm;function Mg(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(A,O){var F,U,te,re,Z,Q=t;if((O=O||t)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(B(A))for(Z in r)for(te=r[Z],F=0;F<te.length;F+=1){for(re=!0,U=0;U<te[F].length;U+=1)if(te[F][U]!==void 0&&te[F][U]!==A[U]){re=!1;break}if(re===!0){Q=Z;break}}else for(Z in r)for(te=r[Z],F=0;F<te.length;F+=1){for(re=!0,U=0;U<te[F].length;U+=1)if(te[F][U]!==void 0&&te[F][U]!==A.charCodeAt(U)){re=!1;break}if(re===!0){Q=Z;break}}return Q===t&&O!==t&&(Q=O),Q},a=function A(O){for(var F=this.internal.write,U=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:O.width}),re.push({key:"Height",value:O.height}),O.colorSpace===S.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===S.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var Z="",Q=0,Y=O.transparency.length;Q<Y;Q++)Z+=O.transparency[Q]+" "+O.transparency[Q]+" ";re.push({key:"Mask",value:"["+Z+"]"})}O.sMask!==void 0&&re.push({key:"SMask",value:O.objectId+1+" 0 R"});var X=O.filter!==void 0?["/"+O.filter]:void 0;if(U({data:O.data,additionalKeyValues:re,alreadyAppliedFilters:X,objectId:O.objectId}),F("endobj"),"sMask"in O&&O.sMask!==void 0){var ce="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,P={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:ce,data:O.sMask};"filter"in O&&(P.filter=O.filter),A.call(this,P)}if(O.colorSpace===S.INDEXED){var q=this.internal.newObject();U({data:C(new Uint8Array(O.palette)),objectId:q}),F("endobj")}},s=function(){var A=this.internal.collections.addImage_images;for(var O in A)a.call(this,A[O])},o=function(){var A,O=this.internal.collections.addImage_images,F=this.internal.write;for(var U in O)F("/I"+(A=O[U]).index,A.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var A=this.internal.collections.addImage_images;return l.call(this),A},d=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(A){return typeof e["process"+A.toUpperCase()]=="function"},m=function(A){return dt(A)==="object"&&A.nodeType===1},g=function(A,O){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var F=""+A.getAttribute("src");if(F.indexOf("data:image/")===0)return po(unescape(F).split("base64,").pop());var U=e.loadFile(F,!0);if(U!==void 0)return U}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var te;switch(O){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return po(A.toDataURL(te,1).split("base64,").pop())}},f=function(A){var O=this.internal.collections.addImage_images;if(O){for(var F in O)if(A===O[F].alias)return O[F]}},N=function(A,O,F){return A||O||(A=-96,O=-96),A<0&&(A=-1*F.width*72/A/this.internal.scaleFactor),O<0&&(O=-1*F.height*72/O/this.internal.scaleFactor),A===0&&(A=O*F.width/F.height),O===0&&(O=A*F.height/F.width),[A,O]},x=function(A,O,F,U,te,re){var Z=N.call(this,F,U,te),Q=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,X=c.call(this);if(F=Z[0],U=Z[1],X[te.index]=te,re){re*=Math.PI/180;var ce=Math.cos(re),P=Math.sin(re),q=function(ee){return ee.toFixed(4)},V=[q(ce),q(P),q(-1*P),q(ce),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,Q(A),Y(O+U),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([Q(F),"0","0",Q(U),"0","0","cm"].join(" "))):this.internal.write([Q(F),"0","0",Q(U),Q(A),Y(O+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},S=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(A){var O,F,U=0;if(typeof A=="string")for(F=A.length,O=0;O<F;O++)U=(U<<5)-U+A.charCodeAt(O),U|=0;else if(B(A))for(F=A.byteLength/2,O=0;O<F;O++)U=(U<<5)-U+A[O],U|=0;return U},_=e.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var O=!0;return A.length===0&&(O=!1),A.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(O=!1),O},E=e.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var O=A.indexOf(",");return O<0?null:A.substring(0,O).trim().endsWith("base64")?A.substring(O+1):null},L=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(A){return L()&&A instanceof ArrayBuffer};var B=e.__addimage__.isArrayBufferView=function(A){return L()&&typeof Uint32Array<"u"&&(A instanceof Int8Array||A instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array)},T=e.__addimage__.binaryStringToUint8Array=function(A){for(var O=A.length,F=new Uint8Array(O),U=0;U<O;U++)F[U]=A.charCodeAt(U);return F},C=e.__addimage__.arrayBufferToBinaryString=function(A){for(var O="",F=B(A)?A:new Uint8Array(A),U=0;U<F.length;U+=8192)O+=String.fromCharCode.apply(null,F.subarray(U,U+8192));return O};e.addImage=function(){var A,O,F,U,te,re,Z,Q,Y;if(typeof arguments[1]=="number"?(O=t,F=arguments[1],U=arguments[2],te=arguments[3],re=arguments[4],Z=arguments[5],Q=arguments[6],Y=arguments[7]):(O=arguments[1],F=arguments[2],U=arguments[3],te=arguments[4],re=arguments[5],Z=arguments[6],Q=arguments[7],Y=arguments[8]),dt(A=arguments[0])==="object"&&!m(A)&&"imageData"in A){var X=A;A=X.imageData,O=X.format||O||t,F=X.x||F||0,U=X.y||U||0,te=X.w||X.width||te,re=X.h||X.height||re,Z=X.alias||Z,Q=X.compression||Q,Y=X.rotation||X.angle||Y}var ce=this.internal.getFilters();if(Q===void 0&&ce.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(F)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=$.call(this,A,O,Z,Q);return x.call(this,F,U,te,re,P,Y),this};var $=function(A,O,F,U){var te,re,Z;if(typeof A=="string"&&n(A)===t){A=unescape(A);var Q=H(A,!1);(Q!==""||(Q=e.loadFile(A,!0))!==void 0)&&(A=Q)}if(m(A)&&(A=g(A,O)),O=n(A,O),!p(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((Z=F)==null||Z.length===0)&&(F=function(Y){return typeof Y=="string"||B(Y)?w(Y):B(Y.data)?w(Y.data):null}(A)),(te=f.call(this,F))||(L()&&(A instanceof Uint8Array||O==="RGBA"||(re=A,A=T(A))),te=this["process"+O.toUpperCase()](A,d.call(this),F,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in e.image_compression?Y:y.NONE}(U),re)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},H=e.__addimage__.convertBase64ToBinaryString=function(A,O){O=typeof O!="boolean"||O;var F,U="";if(typeof A=="string"){var te;F=(te=E(A))!==null&&te!==void 0?te:A;try{U=po(F)}catch(re){if(O)throw _(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};e.getImageProperties=function(A){var O,F,U="";if(m(A)&&(A=g(A)),typeof A=="string"&&n(A)===t&&((U=H(A,!1))===""&&(U=e.loadFile(A)||""),A=U),F=n(A),!p(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(!L()||A instanceof Uint8Array||(A=T(A)),!(O=this["process"+F.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=F,O}})(Ye.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Ye.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,p=!1,m=0;m<d.length&&!p;m++)switch((n=d[m]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var g=0;g<d.length;g++){n=d[g];var f=this.internal.pdfEscape,N=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+f(y(n.contents))+")",s+=" /Popup "+S.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+f(y(w))+") >>",x.content=s;var _=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(s+=" /Open true"),s+=" >>",S.content=s,this.internal.write(x.objId,"0 R",S.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var E=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(N(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var L=this.annotations._nameMap[n.options.name];n.options.pageNumber=L.page,n.options.top=L.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(N(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var B=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+B+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+a),h:d(n+s)},options:o,type:"link"})},e.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var p=this.splitTextToSize(r,l).length;o=Math.ceil(d*p)}else l=c,o=d;return this.text(r,n,a,s),a+=.2*d,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-d,l,o,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Ye.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(x){var S=0,y=r,w="",_=0;for(S=0;S<x.length;S+=1)y[x.charCodeAt(S)]!==void 0?(_++,typeof(y=y[x.charCodeAt(S)])=="number"&&(w+=String.fromCharCode(y),y=r,_=0),S===x.length-1&&(y=r,w+=x.charAt(S-(_-1)),S-=_-1,_=0)):(y=r,w+=x.charAt(S-_),S-=_,_=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(x,S,y){return o(x)?s(x)===!1?-1:!d(x)||!o(S)&&!o(y)||!o(y)&&l(S)||l(x)&&!o(S)||l(x)&&c(S)||l(x)&&l(S)?0:p(x)&&o(S)&&!l(S)&&o(y)&&d(y)?3:l(x)||!o(y)?1:2:-1},f=function(x){var S=0,y=0,w=0,_="",E="",L="",B=(x=x||"").split("\\s+"),T=[];for(S=0;S<B.length;S+=1){for(T.push(""),y=0;y<B[S].length;y+=1)_=B[S][y],E=B[S][y-1],L=B[S][y+1],o(_)?(w=g(_,E,L),T[S]+=w!==-1?String.fromCharCode(t[_.charCodeAt(0)][w]):_):T[S]+=_;T[S]=m(T[S])}return T.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var x,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(S)){var w=0;for(y=[],w=0;w<S.length;w+=1)Array.isArray(S[w])?y.push([f(S[w][0]),S[w][1],S[w][2]]):y.push([f(S[w])]);x=y}else x=f(S);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",N])}(Ye.API),Ye.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ye.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(x){g=x}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(x){N=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var p=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),g=d.scaleFactor||this.internal.scaleFactor,f=0,N=0,x=0,S=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,E){return _.concat(S.splitTextToSize(E,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)f<(x=this.getStringUnitWidth(c[w],{font:m})*p)&&(f=x);return f!==0&&(N=c.length),{w:f/=g,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,f&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-p,c.y+p,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+p,{align:"center",baseline:"top",maxWidth:c.width-p-p}):this.text(c.text,c.x+p,c.y+p,{align:"left",baseline:"top",maxWidth:c.width-p-p})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,p,m,g){if(n.call(this),!p)throw new Error("No data for PDF table.");var f,N,x,S,y=[],w=[],_=[],E={},L={},B=[],T=[],C=(g=g||{}).autoSize||!1,$=g.printHeaders!==!1,H=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,A=g.margins||Object.assign({width:this.getPageWidth()},t),O=typeof g.padding=="number"?g.padding:3,F=g.headerBackgroundColor||"#c8c8c8",U=g.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=H,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=U,this.setFontSize(H),m==null)w=y=Object.keys(p[0]),_=y.map(function(){return"left"});else if(Array.isArray(m)&&dt(m[0])==="object")for(y=m.map(function(X){return X.name}),w=m.map(function(X){return X.prompt||X.name||""}),_=m.map(function(X){return X.align||"left"}),f=0;f<m.length;f+=1)L[m[f].name]=m[f].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(w=y=m,_=y.map(function(){return"left"}));if(C||Array.isArray(m)&&typeof m[0]=="string")for(f=0;f<y.length;f+=1){for(E[S=y[f]]=p.map(function(X){return X[S]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(w[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=E[S],this.setFont(void 0,"normal"),x=0;x<N.length;x+=1)B.push(this.getTextDimensions(N[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[S]=Math.max.apply(null,B)+O+O,B=[]}if($){var te={};for(f=0;f<y.length;f+=1)te[y[f]]={},te[y[f]].text=w[f],te[y[f]].align=_[f];var re=l.call(this,te,L);T=y.map(function(X){return new s(c,d,L[X],re,te[X].text,void 0,te[X].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var Z=m.reduce(function(X,ce){return X[ce.name]=ce.align,X},{});for(f=0;f<p.length;f+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:f,data:p[f]},this);var Q=l.call(this,p[f],L);for(x=0;x<y.length;x+=1){var Y=p[f][y[x]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:f,col:x,data:Y},this),o.call(this,new s(c,d,L[y[x]],Q,Y,f+2,Z[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(f){var N=c[f];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,d[f]-p-p)},this).map(function(f){return this.getLineHeightFactor()*f.length*m/g+p+p},this).reduce(function(f,N){return Math.max(f,N)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){p=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(p.y=this.internal.__cell__.margins.top||0,g.push(p)),p.lineNumber=c;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,p),this.setTextColor(N)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}}(Ye.API);var Ig={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Rg=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Pd=Mg(Rg),Fg=[100,200,300,400,500,600,700,800,900],lb=Mg(Fg);function Dd(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Ig[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof Pd[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function Vf(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var cb={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Yf={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Kf(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function ub(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},cb,r.genericFontFamilies||{}),s=null,o=null,l=0;l<t.length;++l)if(a[(s=Dd(t[l])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+Kf(s)+"' and default family '"+n+"'.");if(o=function(c,d){if(d[c])return d[c];var p=Pd[c],m=p<=Pd.normal?-1:1,g=Vf(d,Rg,p,m);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(s.stretch,o),o=function(c,d){if(d[c])return d[c];for(var p=Ig[c],m=0;m<p.length;++m)if(d[p[m]])return d[p[m]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var p=lb[c],m=Vf(d,Fg,p,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Kf(s)+"'.");return o}function Xf(e){return e.trimLeft()}function db(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function hb(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var $l,Jf,Zf,Ku=["times"];(function(e){var t,r,n,a,s,o,l,c,d,p=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new o,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new o,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new p}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=P;Object.defineProperty(this,"pdf",{get:function(){return q}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(xe){V=!!xe}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(xe){ee=!!xe}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(xe){isNaN(xe)||(se=xe)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(xe){isNaN(xe)||(de=xe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(xe){var J;typeof xe=="number"?J=[xe,xe,xe,xe]:((J=new Array(4))[0]=xe[0],J[1]=xe.length>=2?xe[1]:J[0],J[2]=xe.length>=3?xe[2]:J[0],J[3]=xe.length>=4?xe[3]:J[1]),d.margin=J}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(xe){fe=xe}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(xe){ge=xe}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(xe){Ae=xe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(xe){xe instanceof p&&(d=xe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(xe){d.path=xe}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(xe){Se=xe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(xe){var J;J=g(xe),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(xe){var J=g(xe);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(xe){["butt","round","square"].indexOf(xe)!==-1&&(this.ctx.lineCap=xe,this.pdf.setLineCap(xe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(xe){isNaN(xe)||(this.ctx.lineWidth=xe,this.pdf.setLineWidth(xe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(xe){["bevel","round","miter"].indexOf(xe)!==-1&&(this.ctx.lineJoin=xe,this.pdf.setLineJoin(xe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(xe){isNaN(xe)||(this.ctx.miterLimit=xe,this.pdf.setMiterLimit(xe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(xe){this.ctx.textBaseline=xe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(xe){["right","end","center","left","start"].indexOf(xe)!==-1&&(this.ctx.textAlign=xe)}});var Te=null;function Pe(xe,J){if(Te===null){var Ze=function(qe){var Ce=[];return Object.keys(qe).forEach(function(Ee){qe[Ee].forEach(function(Oe){var ke=null;switch(Oe){case"bold":ke={family:Ee,weight:"bold"};break;case"italic":ke={family:Ee,style:"italic"};break;case"bolditalic":ke={family:Ee,weight:"bold",style:"italic"};break;case"":case"normal":ke={family:Ee}}ke!==null&&(ke.ref={name:Ee,style:Oe},Ce.push(ke))})}),Ce}(xe.getFontList());Te=function(qe){for(var Ce={},Ee=0;Ee<qe.length;++Ee){var Oe=Dd(qe[Ee]),ke=Oe.family,Ue=Oe.stretch,Xe=Oe.style,et=Oe.weight;Ce[ke]=Ce[ke]||{},Ce[ke][Ue]=Ce[ke][Ue]||{},Ce[ke][Ue][Xe]=Ce[ke][Ue][Xe]||{},Ce[ke][Ue][Xe][et]=Oe}return Ce}(Ze.concat(J))}return Te}var Ge=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ge},set:function(xe){Te=null,Ge=xe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(xe){var J;if(this.ctx.font=xe,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(xe))!==null){var Ze=J[1];J[2];var qe=J[3],Ce=J[4];J[5];var Ee=J[6],Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ce)[2];Ce=Math.floor(Oe==="px"?parseFloat(Ce)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Ce)*this.pdf.getFontSize():parseFloat(Ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ce);var ke=function(Je){var lt,Ie,dr=[],pt=Je.trim();if(pt==="")return Ku;if(pt in Yf)return[Yf[pt]];for(;pt!=="";){switch(Ie=null,lt=(pt=Xf(pt)).charAt(0)){case'"':case"'":Ie=db(pt.substring(1),lt);break;default:Ie=hb(pt)}if(Ie===null||(dr.push(Ie[0]),(pt=Xf(Ie[1]))!==""&&pt.charAt(0)!==","))return Ku;pt=pt.replace(/^,/,"")}return dr}(Ee);if(this.fontFaces){var Ue=ub(Pe(this.pdf,this.fontFaces),ke.map(function(Je){return{family:Je,stretch:"normal",weight:qe,style:Ze}}));this.pdf.setFont(Ue.ref.name,Ue.ref.style)}else{var Xe="";(qe==="bold"||parseInt(qe,10)>=700||Ze==="bold")&&(Xe="bold"),Ze==="italic"&&(Xe+="italic"),Xe.length===0&&(Xe="normal");for(var et="",ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ct=0;ct<ke.length;ct++){if(this.pdf.internal.getFont(ke[ct],Xe,{noFallback:!0,disableWarning:!0})!==void 0){et=ke[ct];break}if(Xe==="bolditalic"&&this.pdf.internal.getFont(ke[ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)et=ke[ct],Xe="bold";else if(this.pdf.internal.getFont(ke[ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){et=ke[ct],Xe="normal";break}}if(et===""){for(var mt=0;mt<ke.length;mt++)if(ot[ke[mt]]){et=ot[ke[mt]];break}}et=et===""?"Times":et,this.pdf.setFont(et,Xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(xe){this.ctx.globalCompositeOperation=xe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(xe){this.ctx.globalAlpha=xe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(xe){this.ctx.lineDashOffset=xe,ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(xe){this.ctx.lineDash=xe,ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(xe){this.ctx.ignoreClearRect=!!xe}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){E.call(this,"fill",!1)},m.prototype.stroke=function(){E.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,q){if(isNaN(P)||isNaN(q))throw _t.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(P,q)},m.prototype.closePath=function(){var P=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&dt(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){P=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(P.x,P.y)},m.prototype.lineTo=function(P,q){if(isNaN(P)||isNaN(q))throw _t.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,q,V,ee){if(isNaN(V)||isNaN(ee)||isNaN(P)||isNaN(q))throw _t.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(V,ee)),de=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"qct",x1:de.x,y1:de.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},m.prototype.bezierCurveTo=function(P,q,V,ee,se,de){if(isNaN(se)||isNaN(de)||isNaN(P)||isNaN(q)||isNaN(V)||isNaN(ee))throw _t.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new o(se,de)),ge=this.ctx.transform.applyToPoint(new o(P,q)),Ae=this.ctx.transform.applyToPoint(new o(V,ee));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:Ae.x,y2:Ae.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},m.prototype.arc=function(P,q,V,ee,se,de){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(ee)||isNaN(se))throw _t.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new o(P,q));P=fe.x,q=fe.y;var ge=this.ctx.transform.applyToPoint(new o(0,V)),Ae=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(ge.x-Ae.x,2)+Math.pow(ge.y-Ae.y,2))}Math.abs(se-ee)>=2*Math.PI&&(ee=0,se=2*Math.PI),this.path.push({type:"arc",x:P,y:q,radius:V,startAngle:ee,endAngle:se,counterclockwise:de})},m.prototype.arcTo=function(P,q,V,ee,se){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,q,V,ee){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(ee))throw _t.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,q),this.lineTo(P+V,q),this.lineTo(P+V,q+ee),this.lineTo(P,q+ee),this.lineTo(P,q),this.lineTo(P+V,q),this.lineTo(P,q)},m.prototype.fillRect=function(P,q,V,ee){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(ee))throw _t.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,q,V,ee),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},m.prototype.strokeRect=function(P,q,V,ee){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(ee))throw _t.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(P,q,V,ee),this.stroke())},m.prototype.clearRect=function(P,q,V,ee){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(ee))throw _t.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,q,V,ee))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(q),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(P){var q,V,ee,se;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))q=0,V=0,ee=0,se=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(de!==null)q=parseInt(de[1]),V=parseInt(de[2]),ee=parseInt(de[3]),se=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)q=parseInt(de[1]),V=parseInt(de[2]),ee=parseInt(de[3]),se=parseFloat(de[4]);else{if(se=1,typeof P=="string"&&P.charAt(0)!=="#"){var fe=new Lg(P);P=fe.ok?fe.toHex():"#000000"}P.length===4?(q=P.substring(1,2),q+=q,V=P.substring(2,3),V+=V,ee=P.substring(3,4),ee+=ee):(q=P.substring(1,3),V=P.substring(3,5),ee=P.substring(5,7)),q=parseInt(q,16),V=parseInt(V,16),ee=parseInt(ee,16)}}return{r:q,g:V,b:ee,a:se,style:P}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,q,V,ee){if(isNaN(q)||isNaN(V)||typeof P!="string")throw _t.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!f.call(this)){var se=Q(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;O.call(this,{text:P,x:q,y:V,scale:de,angle:se,align:this.textAlign,maxWidth:ee})}},m.prototype.strokeText=function(P,q,V,ee){if(isNaN(q)||isNaN(V)||typeof P!="string")throw _t.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ee=isNaN(ee)?void 0:ee;var se=Q(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;O.call(this,{text:P,x:q,y:V,scale:de,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:ee})}},m.prototype.measureText=function(P){if(typeof P!="string")throw _t.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,V=this.pdf.internal.scaleFactor,ee=q.internal.getFontSize(),se=q.getStringUnitWidth(P)*ee/q.internal.scaleFactor,de=function(fe){var ge=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this};return new de({width:se*=Math.round(96*V/72*1e4)/1e4})},m.prototype.scale=function(P,q){if(isNaN(P)||isNaN(q))throw _t.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(P,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.rotate=function(P){if(isNaN(P))throw _t.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.translate=function(P,q){if(isNaN(P)||isNaN(q))throw _t.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,P,q);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.transform=function(P,q,V,ee,se,de){if(isNaN(P)||isNaN(q)||isNaN(V)||isNaN(ee)||isNaN(se)||isNaN(de))throw _t.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new c(P,q,V,ee,se,de);this.ctx.transform=this.ctx.transform.multiply(fe)},m.prototype.setTransform=function(P,q,V,ee,se,de){P=isNaN(P)?1:P,q=isNaN(q)?0:q,V=isNaN(V)?0:V,ee=isNaN(ee)?1:ee,se=isNaN(se)?0:se,de=isNaN(de)?0:de,this.ctx.transform=new c(P,q,V,ee,se,de)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,q,V,ee,se,de,fe,ge,Ae){var Se=this.pdf.getImageProperties(P),Te=1,Pe=1,Ge=1,xe=1;ee!==void 0&&ge!==void 0&&(Ge=ge/ee,xe=Ae/se,Te=Se.width/ee*ge/ee,Pe=Se.height/se*Ae/se),de===void 0&&(de=q,fe=V,q=0,V=0),ee!==void 0&&ge===void 0&&(ge=ee,Ae=se),ee===void 0&&ge===void 0&&(ge=Se.width,Ae=Se.height);for(var J,Ze=this.ctx.transform.decompose(),qe=Q(Ze.rotate.shx),Ce=new c,Ee=(Ce=(Ce=(Ce=Ce.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new l(de-q*Ge,fe-V*xe,ee*Te,se*Pe)),Oe=S.call(this,Ee),ke=[],Ue=0;Ue<Oe.length;Ue+=1)ke.indexOf(Oe[Ue])===-1&&ke.push(Oe[Ue]);if(_(ke),this.autoPaging)for(var Xe=ke[0],et=ke[ke.length-1],ot=Xe;ot<et+1;ot++){this.pdf.setPage(ot);var ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mt=ot===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=ot===1?0:Je+(ot-2)*lt;if(this.ctx.clip_path.length!==0){var dr=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(J,this.posX+this.margin[3],-Ie+mt+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=dr}var pt=JSON.parse(JSON.stringify(Ee));pt=w([pt],this.posX+this.margin[3],-Ie+mt+this.ctx.prevPageLastElemOffset)[0];var cn=(ot>Xe||ot<et)&&x.call(this);cn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,lt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,qe),cn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,qe)};var S=function(P,q,V){var ee=[];q=q||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":ee.push(Math.floor((P.y+se)/V)+1);break;case"arc":ee.push(Math.floor((P.y+se-P.radius)/V)+1),ee.push(Math.floor((P.y+se+P.radius)/V)+1);break;case"qct":var de=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);ee.push(Math.floor((de.y+se)/V)+1),ee.push(Math.floor((de.y+de.h+se)/V)+1);break;case"bct":var fe=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);ee.push(Math.floor((fe.y+se)/V)+1),ee.push(Math.floor((fe.y+fe.h+se)/V)+1);break;case"rect":ee.push(Math.floor((P.y+se)/V)+1),ee.push(Math.floor((P.y+P.h+se)/V)+1)}for(var ge=0;ge<ee.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<ee[ge];)y.call(this);return ee},y=function(){var P=this.fillStyle,q=this.strokeStyle,V=this.font,ee=this.lineCap,se=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=q,this.font=V,this.lineCap=ee,this.lineWidth=se,this.lineJoin=de},w=function(P,q,V){for(var ee=0;ee<P.length;ee++)switch(P[ee].type){case"bct":P[ee].x2+=q,P[ee].y2+=V;case"qct":P[ee].x1+=q,P[ee].y1+=V;case"mt":case"lt":case"arc":default:P[ee].x+=q,P[ee].y+=V}return P},_=function(P){return P.sort(function(q,V){return q-V})},E=function(P,q){for(var V,ee,se=this.fillStyle,de=this.strokeStyle,fe=this.lineCap,ge=this.lineWidth,Ae=Math.abs(ge*this.ctx.transform.scaleX),Se=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),Ge=[],xe=0;xe<Pe.length;xe++)if(Pe[xe].x!==void 0)for(var J=S.call(this,Pe[xe]),Ze=0;Ze<J.length;Ze+=1)Ge.indexOf(J[Ze])===-1&&Ge.push(J[Ze]);for(var qe=0;qe<Ge.length;qe++)for(;this.pdf.internal.getNumberOfPages()<Ge[qe];)y.call(this);if(_(Ge),this.autoPaging)for(var Ce=Ge[0],Ee=Ge[Ge.length-1],Oe=Ce;Oe<Ee+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=se,this.strokeStyle=de,this.lineCap=fe,this.lineWidth=Ae,this.lineJoin=Se;var ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ue=Oe===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=Oe===1?0:Xe+(Oe-2)*et;if(this.ctx.clip_path.length!==0){var ct=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(V,this.posX+this.margin[3],-ot+Ue+this.ctx.prevPageLastElemOffset),L.call(this,P,!0),this.path=ct}if(ee=JSON.parse(JSON.stringify(Te)),this.path=w(ee,this.posX+this.margin[3],-ot+Ue+this.ctx.prevPageLastElemOffset),q===!1||Oe===0){var mt=(Oe>Ce||Oe<Ee)&&x.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,et,null).clip().discardPath()),L.call(this,P,q),mt&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=Ae,L.call(this,P,q),this.lineWidth=ge;this.path=Te},L=function(P,q){if((P!=="stroke"||q||!N.call(this))&&(P==="stroke"||q||!f.call(this))){for(var V,ee,se=[],de=this.path,fe=0;fe<de.length;fe++){var ge=de[fe];switch(ge.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:ge,deltas:[],abs:[]});break;case"lt":var Ae=se.length;if(de[fe-1]&&!isNaN(de[fe-1].x)&&(V=[ge.x-de[fe-1].x,ge.y-de[fe-1].y],Ae>0)){for(;Ae>=0;Ae--)if(se[Ae-1].close!==!0&&se[Ae-1].begin!==!0){se[Ae-1].deltas.push(V),se[Ae-1].abs.push(ge);break}}break;case"bct":V=[ge.x1-de[fe-1].x,ge.y1-de[fe-1].y,ge.x2-de[fe-1].x,ge.y2-de[fe-1].y,ge.x-de[fe-1].x,ge.y-de[fe-1].y],se[se.length-1].deltas.push(V);break;case"qct":var Se=de[fe-1].x+2/3*(ge.x1-de[fe-1].x),Te=de[fe-1].y+2/3*(ge.y1-de[fe-1].y),Pe=ge.x+2/3*(ge.x1-ge.x),Ge=ge.y+2/3*(ge.y1-ge.y),xe=ge.x,J=ge.y;V=[Se-de[fe-1].x,Te-de[fe-1].y,Pe-de[fe-1].x,Ge-de[fe-1].y,xe-de[fe-1].x,J-de[fe-1].y],se[se.length-1].deltas.push(V);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(ge)}}ee=q?null:P==="stroke"?"stroke":"fill";for(var Ze=!1,qe=0;qe<se.length;qe++)if(se[qe].arc)for(var Ce=se[qe].abs,Ee=0;Ee<Ce.length;Ee++){var Oe=Ce[Ee];Oe.type==="arc"?C.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,q,!Ze):F.call(this,Oe.x,Oe.y),Ze=!0}else if(se[qe].close===!0)this.pdf.internal.out("h"),Ze=!1;else if(se[qe].begin!==!0){var ke=se[qe].start.x,Ue=se[qe].start.y;U.call(this,se[qe].deltas,ke,Ue),Ze=!0}ee&&$.call(this,ee),q&&H.call(this)}},B=function(P){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-V;case"top":return P+q-V;case"hanging":return P+q-2*V;case"middle":return P+q/2-V;case"ideographic":return P;case"alphabetic":default:return P}},T=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(q,V){this.colorStops.push([q,V])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(P,q,V,ee,se,de,fe,ge,Ae){for(var Se=re.call(this,V,ee,se,de),Te=0;Te<Se.length;Te++){var Pe=Se[Te];Te===0&&(Ae?A.call(this,Pe.x1+P,Pe.y1+q):F.call(this,Pe.x1+P,Pe.y1+q)),te.call(this,P,q,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}ge?H.call(this):$.call(this,fe)},$=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},H=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(P,q){this.pdf.internal.out(r(P)+" "+n(q)+" m")},O=function(P){var q;switch(P.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var V=this.pdf.getTextDimensions(P.text),ee=B.call(this,P.y),se=T.call(this,ee)-V.h,de=this.ctx.transform.applyToPoint(new o(P.x,ee)),fe=this.ctx.transform.decompose(),ge=new c;ge=(ge=(ge=ge.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var Ae,Se,Te,Pe=this.ctx.transform.applyToRectangle(new l(P.x,ee,V.w,V.h)),Ge=ge.applyToRectangle(new l(P.x,se,V.w,V.h)),xe=S.call(this,Ge),J=[],Ze=0;Ze<xe.length;Ze+=1)J.indexOf(xe[Ze])===-1&&J.push(xe[Ze]);if(_(J),this.autoPaging)for(var qe=J[0],Ce=J[J.length-1],Ee=qe;Ee<Ce+1;Ee++){this.pdf.setPage(Ee);var Oe=Ee===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[2],Xe=Ue-this.margin[0],et=this.pdf.internal.pageSize.width-this.margin[1],ot=et-this.margin[3],ct=Ee===1?0:ke+(Ee-2)*Xe;if(this.ctx.clip_path.length!==0){var mt=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Ae,this.posX+this.margin[3],-1*ct+Oe),L.call(this,"fill",!0),this.path=mt}var Je=w([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-ct+Oe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*P.scale),Te=this.lineWidth,this.lineWidth=Te*P.scale);var lt=this.autoPaging!=="text";if(lt||Je.y+Je.h<=Ue){if(lt||Je.y>=Oe&&Je.x<=et){var Ie=lt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||et-Je.x)[0],dr=w([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-ct+Oe+this.ctx.prevPageLastElemOffset)[0],pt=lt&&(Ee>qe||Ee<Ce)&&x.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Xe,null).clip().discardPath()),this.pdf.text(Ie,dr.x,dr.y,{angle:P.angle,align:q,renderingMode:P.renderingMode}),pt&&this.pdf.restoreGraphicsState()}}else Je.y<Ue&&(this.ctx.prevPageLastElemOffset+=Ue-Je.y);P.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Te)}else P.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*P.scale),Te=this.lineWidth,this.lineWidth=Te*P.scale),this.pdf.text(P.text,de.x+this.posX,de.y+this.posY,{angle:P.angle,align:q,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Te)},F=function(P,q,V,ee){V=V||0,ee=ee||0,this.pdf.internal.out(r(P+V)+" "+n(q+ee)+" l")},U=function(P,q,V){return this.pdf.lines(P,q,V,null,null)},te=function(P,q,V,ee,se,de,fe,ge){this.pdf.internal.out([t(a(V+P)),t(s(ee+q)),t(a(se+P)),t(s(de+q)),t(a(fe+P)),t(s(ge+q)),"c"].join(" "))},re=function(P,q,V,ee){for(var se=2*Math.PI,de=Math.PI/2;q>V;)q-=se;var fe=Math.abs(V-q);fe<se&&ee&&(fe=se-fe);for(var ge=[],Ae=ee?-1:1,Se=q;fe>1e-5;){var Te=Se+Ae*Math.min(fe,de);ge.push(Z.call(this,P,Se,Te)),fe-=Math.abs(Te-Se),Se=Te}return ge},Z=function(P,q,V){var ee=(V-q)/2,se=P*Math.cos(ee),de=P*Math.sin(ee),fe=se,ge=-de,Ae=fe*fe+ge*ge,Se=Ae+fe*se+ge*de,Te=4/3*(Math.sqrt(2*Ae*Se)-Se)/(fe*de-ge*se),Pe=fe-Te*ge,Ge=ge+Te*fe,xe=Pe,J=-Ge,Ze=ee+q,qe=Math.cos(Ze),Ce=Math.sin(Ze);return{x1:P*Math.cos(q),y1:P*Math.sin(q),x2:Pe*qe-Ge*Ce,y2:Pe*Ce+Ge*qe,x3:xe*qe-J*Ce,y3:xe*Ce+J*qe,x4:P*Math.cos(V),y4:P*Math.sin(V)}},Q=function(P){return 180*P/Math.PI},Y=function(P,q,V,ee,se,de){var fe=P+.5*(V-P),ge=q+.5*(ee-q),Ae=se+.5*(V-se),Se=de+.5*(ee-de),Te=Math.min(P,se,fe,Ae),Pe=Math.max(P,se,fe,Ae),Ge=Math.min(q,de,ge,Se),xe=Math.max(q,de,ge,Se);return new l(Te,Ge,Pe-Te,xe-Ge)},X=function(P,q,V,ee,se,de,fe,ge){var Ae,Se,Te,Pe,Ge,xe,J,Ze,qe,Ce,Ee,Oe,ke,Ue,Xe=V-P,et=ee-q,ot=se-V,ct=de-ee,mt=fe-se,Je=ge-de;for(Se=0;Se<41;Se++)qe=(J=(Te=P+(Ae=Se/40)*Xe)+Ae*((Ge=V+Ae*ot)-Te))+Ae*(Ge+Ae*(se+Ae*mt-Ge)-J),Ce=(Ze=(Pe=q+Ae*et)+Ae*((xe=ee+Ae*ct)-Pe))+Ae*(xe+Ae*(de+Ae*Je-xe)-Ze),Se==0?(Ee=qe,Oe=Ce,ke=qe,Ue=Ce):(Ee=Math.min(Ee,qe),Oe=Math.min(Oe,Ce),ke=Math.max(ke,qe),Ue=Math.max(Ue,Ce));return new l(Math.round(Ee),Math.round(Oe),Math.round(ke-Ee),Math.round(Ue-Oe))},ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,q,V=(P=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:q}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(Ye.API),function(e){var t=function(s){var o,l,c,d,p,m,g,f,N,x;for(l=[],c=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>c;c+=4)(p=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(m=(p=((p=((p=((p=(p-(x=p%85))/85)-(N=p%85))/85)-(f=p%85))/85)-(g=p%85))/85)%85,l.push(m+33,g+33,f+33,N+33,x+33)):l.push(122);return function(S,y){for(var w=y;w>0;w--)S.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var o,l,c,d,p,m=String,g="length",f=255,N="charCodeAt",x="slice",S="replace";for(s[x](-2),s=s[x](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),c=[],d=0,p=(s+=o="uuuuu"[x](s[g]%5||5))[g];p>d;d+=5)l=52200625*(s[N](d)-33)+614125*(s[N](d+1)-33)+7225*(s[N](d+2)-33)+85*(s[N](d+3)-33)+(s[N](d+4)-33),c.push(f&l>>24,f&l>>16,f&l>>8,f&l);return function(y,w){for(var _=w;_>0;_--)y.pop()}(c,o[g]),m.fromCharCode.apply(m,c)},n=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return s=(o=_d(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var l=0,c=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(Ye.API),function(e){e.loadFile=function(t,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,p){var m=new XMLHttpRequest,g=0,f=function(N){var x=N.length,S=[],y=String.fromCharCode;for(g=0;g<x;g+=1)S.push(y(255&N.charCodeAt(g)));return S.join("")};if(m.open("GET",c,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?p(f(this.responseText)):p(void 0)}),m.send(null),d&&m.status===200)return f(m.responseText)}(a,s,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Ye.API),function(e){function t(){return(Ke.html2canvas?Promise.resolve(Ke.html2canvas):xd(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Ke.DOMPurify?Promise.resolve(Ke.DOMPurify):xd(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=dt(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,p){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),g=d.firstChild;g;g=g.nextSibling)p!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||m.appendChild(c(g,p));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var g=0;g<d.length;++g){var f=d[g],N=f.src.find(function(x){return x.format==="truetype"});N&&c.addFont(N.url,f.ref.name,f.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||Ye.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,p){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,d),m}).then(d,p).then(function(m){return c.updateProgress(1),m})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=c.call(d,o,l);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ye.getPageSize=function(o,l,c){if(dt(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var p,m=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var f,N=0,x=0;if(g.hasOwnProperty(m))N=g[m][1]/p,x=g[m][0]/p;else try{N=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>N&&(f=x,x=N,N=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",N>x&&(f=x,x=N,N=f)}return{width:x,height:N,unit:l,k:p,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Dd):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(Ye.API),Ye.API.addJS=function(e){return Zf=e,this.internal.events.subscribe("postPutResources",function(){$l=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($l+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Jf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Zf+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){$l!==void 0&&Jf!==void 0&&this.internal.out("/Names <</JavaScript "+$l+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,p=[];for(s=0;s<d;s++){var m=r.internal.newObject();p.push(m);var g=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<p.length;s++)r.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Ye.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,o,l){var c,d=this.decode.DCT_DECODE,p=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(m){for(var g,f=256*m.charCodeAt(4)+m.charCodeAt(5),N=m.length,x={width:0,height:0,numcomponents:1},S=4;S<N;S+=2){if(S+=f,t.indexOf(m.charCodeAt(S+1))!==-1){g=256*m.charCodeAt(S+5)+m.charCodeAt(S+6),x={width:256*m.charCodeAt(S+7)+m.charCodeAt(S+8),height:g,numcomponents:m.charCodeAt(S+9)};break}f=256*m.charCodeAt(S+2)+m.charCodeAt(S+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}p={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:a}}return p}}(Ye.API);var Js,Bl,Qf,ep,tp,fb=function(){var e,t,r;function n(s){var o,l,c,d,p,m,g,f,N,x,S,y,w,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(o=this.readUInt32(),N=(function(){var E,L;for(L=[],E=0;E<4;++E)L.push(String.fromCharCode(this.data[this.pos++]));return L}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),d=this.readUInt16()||100,m.delay=1e3*p/d,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,o-=4),s=(m!=null?m.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(S=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,S.slice(0,g)),this.text[f]=String.fromCharCode.apply(String,S.slice(g+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var o,l;for(l=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(m,g,f,N){var x,S,y,w,_,E,L,B,T,C,$,H,A,O,F,U,te,re,Z,Q,Y,X=Math.ceil((d.width-m)/f),ce=Math.ceil((d.height-g)/N),P=d.width==X&&d.height==ce;for(O=o*X,H=P?l:new Uint8Array(O*ce),E=s.length,A=0,S=0;A<ce&&c<E;){switch(s[c++]){case 0:for(w=te=0;te<O;w=te+=1)H[S++]=s[c++];break;case 1:for(w=re=0;re<O;w=re+=1)x=s[c++],_=w<o?0:H[S-o],H[S++]=(x+_)%256;break;case 2:for(w=Z=0;Z<O;w=Z+=1)x=s[c++],y=(w-w%o)/o,F=A&&H[(A-1)*O+y*o+w%o],H[S++]=(F+x)%256;break;case 3:for(w=Q=0;Q<O;w=Q+=1)x=s[c++],y=(w-w%o)/o,_=w<o?0:H[S-o],F=A&&H[(A-1)*O+y*o+w%o],H[S++]=(x+Math.floor((_+F)/2))%256;break;case 4:for(w=Y=0;Y<O;w=Y+=1)x=s[c++],y=(w-w%o)/o,_=w<o?0:H[S-o],A===0?F=U=0:(F=H[(A-1)*O+y*o+w%o],U=y&&H[(A-1)*O+(y-1)*o+w%o]),L=_+F-U,B=Math.abs(L-_),C=Math.abs(L-F),$=Math.abs(L-U),T=B<=C&&B<=$?_:C<=$?F:U,H[S++]=(x+T)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var q=((g+A*N)*d.width+m)*o,V=A*O;for(w=0;w<X;w+=1){for(var ee=0;ee<o;ee+=1)l[q++]=H[V++];q+=(f-1)*o}}A++}}return s=H2(s),d.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),l},n.prototype.decodePalette=function(){var s,o,l,c,d,p,m,g,f;for(l=this.palette,p=this.transparency.indexed||[],d=new Uint8Array((p.length||0)+l.length),c=0,s=0,o=m=0,g=l.length;m<g;o=m+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(f=p[s++])!=null?f:255;return d},n.prototype.copyToImageData=function(s,o){var l,c,d,p,m,g,f,N,x,S,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),N=(d=s.data||s).length,m=x||o,p=g=0,c===1)for(;p<N;)f=x?4*o[p/4]:g,S=m[f++],d[p++]=S,d[p++]=S,d[p++]=S,d[p++]=l?m[f++]:255,g=f;else for(;p<N;)f=x?4*o[p/4]:g,d[p++]=m[f++],d[p++]=m[f++],d[p++]=m[f++],d[p++]=l?m[f++]:255,g=f},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Ke)==="[object Window]"){try{t=Ke.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var o;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var o,l,c,d,p,m,g,f;if(this.animation){for(f=[],l=p=0,m=(g=this.animation.frames).length;p<m;l=++p)o=g[l],c=s.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,f.push(o.image=e(c));return f}},n.prototype.renderFrame=function(s,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(s){var o,l,c,d,p,m,g=this;return l=0,m=this.animation,d=m.numFrames,c=m.frames,p=m.numPlays,(o=function(){var f,N;if(f=l++%d,N=c[f],g.renderFrame(s,f),d>1&&l/d<p)return g.animation._timeout=setTimeout(o,N.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var o,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function pb(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=o,t+=3*o);var d=!0,p=[],m=0,g=null,f=0,N=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];m=e[t++]|e[t++]<<8,g=e[t++],!(1&x)&&(g=null),f=x>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var S=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,E=e[t++],L=E>>6&1,B=1<<(7&E)+1,T=l,C=c,$=!1;E>>7&&($=!0,T=t,C=B,t+=3*B);var H=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}p.push({x:S,y,width:w,height:_,has_local_palette:$,palette_offset:T,palette_size:C,data_offset:H,data_length:t-H,transparent_index:g,interlaced:!!L,delay:m,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(O){if(O<0||O>=p.length)throw new Error("Frame index out of range.");return p[O]},this.decodeAndBlitFrameBGRA=function(O,F){var U=this.frameInfo(O),te=U.width*U.height,re=new Uint8Array(te);rp(e,U.data_offset,re,te);var Z=U.palette_offset,Q=U.transparent_index;Q===null&&(Q=256);var Y=U.width,X=r-Y,ce=Y,P=4*(U.y*r+U.x),q=4*((U.y+U.height)*r+U.x),V=P,ee=4*X;U.interlaced===!0&&(ee+=4*r*7);for(var se=8,de=0,fe=re.length;de<fe;++de){var ge=re[de];if(ce===0&&(ce=Y,(V+=ee)>=q&&(ee=4*X+4*r*(se-1),V=P+(Y+X)*(se<<1),se>>=1)),ge===Q)V+=4;else{var Ae=e[Z+3*ge],Se=e[Z+3*ge+1],Te=e[Z+3*ge+2];F[V++]=Te,F[V++]=Se,F[V++]=Ae,F[V++]=255}--ce}},this.decodeAndBlitFrameRGBA=function(O,F){var U=this.frameInfo(O),te=U.width*U.height,re=new Uint8Array(te);rp(e,U.data_offset,re,te);var Z=U.palette_offset,Q=U.transparent_index;Q===null&&(Q=256);var Y=U.width,X=r-Y,ce=Y,P=4*(U.y*r+U.x),q=4*((U.y+U.height)*r+U.x),V=P,ee=4*X;U.interlaced===!0&&(ee+=4*r*7);for(var se=8,de=0,fe=re.length;de<fe;++de){var ge=re[de];if(ce===0&&(ce=Y,(V+=ee)>=q&&(ee=4*X+4*r*(se-1),V=P+(Y+X)*(se<<1),se>>=1)),ge===Q)V+=4;else{var Ae=e[Z+3*ge],Se=e[Z+3*ge+1],Te=e[Z+3*ge+2];F[V++]=Ae,F[V++]=Se,F[V++]=Te,F[V++]=255}--ce}}}function rp(e,t,r,n){for(var a=e[t++],s=1<<a,o=s+1,l=o+1,c=a+1,d=(1<<c)-1,p=0,m=0,g=0,f=e[t++],N=new Int32Array(4096),x=null;;){for(;p<16&&f!==0;)m|=e[t++]<<p,p+=8,f===1?f=e[t++]:--f;if(p<c)break;var S=m&d;if(m>>=c,p-=c,S!==s){if(S===o)break;for(var y=S<l?S:x,w=0,_=y;_>s;)_=N[_]>>8,++w;var E=_;if(g+w+(y!==S?1:0)>n)return void _t.log("Warning, gif stream longer than expected.");r[g++]=E;var L=g+=w;for(y!==S&&(r[g++]=E),_=y;w--;)_=N[_],r[--L]=255&_,_>>=8;x!==null&&l<4096&&(N[l++]=x<<8|E,l>=d+1&&c<12&&(++c,d=d<<1|1)),x=S}else l=o+1,d=(1<<(c=a+1))-1,x=null}return g!==n&&_t.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Xu(e){var t,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(64),m=new Array(65535),g=new Array(65535),f=new Array(64),N=new Array(64),x=[],S=0,y=7,w=new Array(64),_=new Array(64),E=new Array(64),L=new Array(256),B=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(P,q){for(var V=0,ee=0,se=new Array,de=1;de<=16;de++){for(var fe=1;fe<=P[de];fe++)se[q[ee]]=[],se[q[ee]][0]=V,se[q[ee]][1]=de,ee++,V++;V*=2}return se}function Z(P){for(var q=P[0],V=P[1]-1;V>=0;)q&1<<V&&(S|=1<<y),V--,--y<0&&(S==255?(Q(255),Q(0)):Q(S),y=7,S=0)}function Q(P){x.push(P)}function Y(P){Q(P>>8&255),Q(255&P)}function X(P,q,V,ee,se){for(var de,fe=se[0],ge=se[240],Ae=function(Ce,Ee){var Oe,ke,Ue,Xe,et,ot,ct,mt,Je,lt,Ie=0;for(Je=0;Je<8;++Je){Oe=Ce[Ie],ke=Ce[Ie+1],Ue=Ce[Ie+2],Xe=Ce[Ie+3],et=Ce[Ie+4],ot=Ce[Ie+5],ct=Ce[Ie+6];var dr=Oe+(mt=Ce[Ie+7]),pt=Oe-mt,cn=ke+ct,jt=ke-ct,Ot=Ue+ot,Cn=Ue-ot,vt=Xe+et,Fa=Xe-et,Mt=dr+vt,un=dr-vt,Yn=cn+Ot,It=cn-Ot;Ce[Ie]=Mt+Yn,Ce[Ie+4]=Mt-Yn;var tt=.707106781*(It+un);Ce[Ie+2]=un+tt,Ce[Ie+6]=un-tt;var bt=.382683433*((Mt=Fa+Cn)-(It=jt+pt)),$a=.5411961*Mt+bt,ir=1.306562965*It+bt,En=.707106781*(Yn=Cn+jt),Ln=pt+En,Ve=pt-En;Ce[Ie+5]=Ve+$a,Ce[Ie+3]=Ve-$a,Ce[Ie+1]=Ln+ir,Ce[Ie+7]=Ln-ir,Ie+=8}for(Ie=0,Je=0;Je<8;++Je){Oe=Ce[Ie],ke=Ce[Ie+8],Ue=Ce[Ie+16],Xe=Ce[Ie+24],et=Ce[Ie+32],ot=Ce[Ie+40],ct=Ce[Ie+48];var dn=Oe+(mt=Ce[Ie+56]),Pn=Oe-mt,Er=ke+ct,Zt=ke-ct,Yt=Ue+ot,$r=Ue-ot,ws=Xe+et,Kn=Xe-et,hn=dn+ws,fn=dn-ws,pn=Er+Yt,Dn=Er-Yt;Ce[Ie]=hn+pn,Ce[Ie+32]=hn-pn;var Gr=.707106781*(Dn+fn);Ce[Ie+16]=fn+Gr,Ce[Ie+48]=fn-Gr;var kn=.382683433*((hn=Kn+$r)-(Dn=Zt+Pn)),Ba=.5411961*hn+kn,Ns=1.306562965*Dn+kn,js=.707106781*(pn=$r+Zt),Ss=Pn+js,_s=Pn-js;Ce[Ie+40]=_s+Ba,Ce[Ie+24]=_s-Ba,Ce[Ie+8]=Ss+Ns,Ce[Ie+56]=Ss-Ns,Ie++}for(Je=0;Je<64;++Je)lt=Ce[Je]*Ee[Je],f[Je]=lt>0?lt+.5|0:lt-.5|0;return f}(P,q),Se=0;Se<64;++Se)N[T[Se]]=Ae[Se];var Te=N[0]-V;V=N[0],Te==0?Z(ee[0]):(Z(ee[g[de=32767+Te]]),Z(m[de]));for(var Pe=63;Pe>0&&N[Pe]==0;)Pe--;if(Pe==0)return Z(fe),V;for(var Ge,xe=1;xe<=Pe;){for(var J=xe;N[xe]==0&&xe<=Pe;)++xe;var Ze=xe-J;if(Ze>=16){Ge=Ze>>4;for(var qe=1;qe<=Ge;++qe)Z(ge);Ze&=15}de=32767+N[xe],Z(se[(Ze<<4)+g[de]]),Z(m[de]),xe++}return Pe!=63&&Z(fe),V}function ce(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(q){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var se=o((V[ee]*q+50)/100);se=Math.min(Math.max(se,1),255),l[T[ee]]=se}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var ge=o((de[fe]*q+50)/100);ge=Math.min(Math.max(ge,1),255),c[T[fe]]=ge}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,Te=0;Te<8;Te++)for(var Pe=0;Pe<8;Pe++)d[Se]=1/(l[T[Se]]*Ae[Te]*Ae[Pe]*8),p[Se]=1/(c[T[Se]]*Ae[Te]*Ae[Pe]*8),Se++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,q){q&&ce(q),x=new Array,S=0,y=7,Y(65496),Y(65504),Y(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),Y(1),Y(1),Q(0),Q(0),function(){Y(65499),Y(132),Q(0);for(var ke=0;ke<64;ke++)Q(l[ke]);Q(1);for(var Ue=0;Ue<64;Ue++)Q(c[Ue])}(),function(ke,Ue){Y(65472),Y(17),Q(8),Y(Ue),Y(ke),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(P.width,P.height),function(){Y(65476),Y(418),Q(0);for(var ke=0;ke<16;ke++)Q(C[ke+1]);for(var Ue=0;Ue<=11;Ue++)Q($[Ue]);Q(16);for(var Xe=0;Xe<16;Xe++)Q(H[Xe+1]);for(var et=0;et<=161;et++)Q(A[et]);Q(1);for(var ot=0;ot<16;ot++)Q(O[ot+1]);for(var ct=0;ct<=11;ct++)Q(F[ct]);Q(17);for(var mt=0;mt<16;mt++)Q(U[mt+1]);for(var Je=0;Je<=161;Je++)Q(te[Je])}(),Y(65498),Y(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var V=0,ee=0,se=0;S=0,y=7,this.encode.displayName="_encode_";for(var de,fe,ge,Ae,Se,Te,Pe,Ge,xe,J=P.data,Ze=P.width,qe=P.height,Ce=4*Ze,Ee=0;Ee<qe;){for(de=0;de<Ce;){for(Se=Ce*Ee+de,Pe=-1,Ge=0,xe=0;xe<64;xe++)Te=Se+(Ge=xe>>3)*Ce+(Pe=4*(7&xe)),Ee+Ge>=qe&&(Te-=Ce*(Ee+1+Ge-qe)),de+Pe>=Ce&&(Te-=de+Pe-Ce+4),fe=J[Te++],ge=J[Te++],Ae=J[Te++],w[xe]=(B[fe]+B[ge+256>>0]+B[Ae+512>>0]>>16)-128,_[xe]=(B[fe+768>>0]+B[ge+1024>>0]+B[Ae+1280>>0]>>16)-128,E[xe]=(B[fe+1280>>0]+B[ge+1536>>0]+B[Ae+1792>>0]>>16)-128;V=X(w,d,V,t,n),ee=X(_,p,ee,r,a),se=X(E,p,se,r,a),de+=32}Ee+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,Z(Oe)}return Y(65497),new Uint8Array(x)},e=e||50,function(){for(var P=String.fromCharCode,q=0;q<256;q++)L[q]=P(q)}(),t=re(C,$),r=re(O,F),n=re(H,A),a=re(U,te),function(){for(var P=1,q=2,V=1;V<=15;V++){for(var ee=P;ee<q;ee++)g[32767+ee]=V,m[32767+ee]=[],m[32767+ee][1]=V,m[32767+ee][0]=ee;for(var se=-(q-1);se<=-P;se++)g[32767+se]=V,m[32767+se]=[],m[32767+se][1]=V,m[32767+se][0]=q-1+se;P<<=1,q<<=1}}(),function(){for(var P=0;P<256;P++)B[P]=19595*P,B[P+256>>0]=38470*P,B[P+512>>0]=7471*P+32768,B[P+768>>0]=-11059*P,B[P+1024>>0]=-21709*P,B[P+1280>>0]=32768*P+8421375,B[P+1536>>0]=-27439*P,B[P+1792>>0]=-5329*P}(),ce(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wn(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function np(e){function t(C){if(!C)throw Error("assert :P")}function r(C,$,H){for(var A=0;4>A;A++)if(C[$+A]!=H.charCodeAt(A))return!0;return!1}function n(C,$,H,A,O){for(var F=0;F<O;F++)C[$+F]=H[A+F]}function a(C,$,H,A){for(var O=0;O<A;O++)C[$+O]=H}function s(C){return new Int32Array(C)}function o(C,$){for(var H=[],A=0;A<C;A++)H.push(new $);return H}function l(C,$){var H=[];return function A(O,F,U){for(var te=U[F],re=0;re<te&&(O.push(U.length>F+1?[]:new $),!(U.length<F+1));re++)A(O[re],F+1,U)}(H,0,C),H}var c=function(){var C=this;function $(u,h){for(var b=1<<h-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function H(u,h,b,j,D){t(!(j%b));do u[h+(j-=b)]=D;while(0<j)}function A(u,h,b,j,D){if(t(2328>=D),512>=D)var M=s(512);else if((M=s(D))==null)return 0;return function(I,R,z,G,ae,pe){var me,le,Ne=R,ve=1<<z,ie=s(16),oe=s(16);for(t(ae!=0),t(G!=null),t(I!=null),t(0<z),le=0;le<ae;++le){if(15<G[le])return 0;++ie[G[le]]}if(ie[0]==ae)return 0;for(oe[1]=0,me=1;15>me;++me){if(ie[me]>1<<me)return 0;oe[me+1]=oe[me]+ie[me]}for(le=0;le<ae;++le)me=G[le],0<G[le]&&(pe[oe[me]++]=le);if(oe[15]==1)return(G=new O).g=0,G.value=pe[0],H(I,Ne,1,ve,G),ve;var ye,je=-1,we=ve-1,Fe=0,De=1,He=1,Me=1<<z;for(le=0,me=1,ae=2;me<=z;++me,ae<<=1){if(De+=He<<=1,0>(He-=ie[me]))return 0;for(;0<ie[me];--ie[me])(G=new O).g=me,G.value=pe[le++],H(I,Ne+Fe,ae,Me,G),Fe=$(Fe,me)}for(me=z+1,ae=2;15>=me;++me,ae<<=1){if(De+=He<<=1,0>(He-=ie[me]))return 0;for(;0<ie[me];--ie[me]){if(G=new O,(Fe&we)!=je){for(Ne+=Me,ye=1<<(je=me)-z;15>je&&!(0>=(ye-=ie[je]));)++je,ye<<=1;ve+=Me=1<<(ye=je-z),I[R+(je=Fe&we)].g=ye+z,I[R+je].value=Ne-R-je}G.g=me-z,G.value=pe[le++],H(I,Ne+(Fe>>z),ae,Me,G),Fe=$(Fe,me)}}return De!=2*oe[15]-1?0:ve}(u,h,b,j,D,M)}function O(){this.value=this.g=0}function F(){this.value=this.g=0}function U(){this.G=o(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(or,F)}function te(u,h,b,j){t(u!=null),t(h!=null),t(2147483648>j),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=h,u.pa=b,u.Jd=h,u.Yc=b+j,u.Zc=4<=j?b+j-4+1:b,de(u)}function re(u,h){for(var b=0;0<h--;)b|=ge(u,128)<<h;return b}function Z(u,h){var b=re(u,h);return fe(u)?-b:b}function Q(u,h,b,j){var D,M=0;for(t(u!=null),t(h!=null),t(4294967288>j),u.Sb=j,u.Ra=0,u.u=0,u.h=0,4<j&&(j=4),D=0;D<j;++D)M+=h[b+D]<<8*D;u.Ra=M,u.bb=j,u.oa=h,u.pa=b}function Y(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Bs-8>>>0,++u.bb,u.u-=8;V(u)&&(u.h=1,u.u=0)}function X(u,h){if(t(0<=h),!u.h&&h<=$s){var b=q(u)&Fs[h];return u.u+=h,Y(u),b}return u.h=1,u.u=0}function ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(u){return u.Ra>>>(u.u&Bs-1)>>>0}function V(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Bs}function ee(u,h){u.u=h,u.h=V(u)}function se(u){u.u>=Gi&&(t(u.u>=Gi),Y(u))}function de(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function fe(u){return re(u,1)}function ge(u,h){var b=u.Ca;0>u.b&&de(u);var j=u.b,D=b*h>>>8,M=(u.I>>>j>D)+0;for(M?(b-=D,u.I-=D+1<<j>>>0):b=D+1,j=b,D=0;256<=j;)D+=8,j>>=8;return j=7^D+Pr[j],u.b-=j,u.Ca=(b<<j)-1,M}function Ae(u,h,b){u[h+0]=b>>24&255,u[h+1]=b>>16&255,u[h+2]=b>>8&255,u[h+3]=b>>0&255}function Se(u,h){return u[h+0]<<0|u[h+1]<<8}function Te(u,h){return Se(u,h)|u[h+2]<<16}function Pe(u,h){return Se(u,h)|Se(u,h+2)<<16}function Ge(u,h){var b=1<<h;return t(u!=null),t(0<h),u.X=s(b),u.X==null?0:(u.Mb=32-h,u.Xa=h,1)}function xe(u,h){t(u!=null),t(h!=null),t(u.Xa==h.Xa),n(h.X,0,u.X,0,1<<h.Xa)}function J(){this.X=[],this.Xa=this.Mb=0}function Ze(u,h,b,j){t(b!=null),t(j!=null);var D=b[0],M=j[0];return D==0&&(D=(u*M+h/2)/h),M==0&&(M=(h*D+u/2)/u),0>=D||0>=M?0:(b[0]=D,j[0]=M,1)}function qe(u,h){return u+(1<<h)-1>>>h}function Ce(u,h){return((4278255360&u)+(4278255360&h)>>>0&4278255360)+((16711935&u)+(16711935&h)>>>0&16711935)>>>0}function Ee(u,h){C[h]=function(b,j,D,M,I,R,z){var G;for(G=0;G<I;++G){var ae=C[u](R[z+G-1],D,M+G);R[z+G]=Ce(b[j+G],ae)}}}function Oe(){this.ud=this.hd=this.jd=0}function ke(u,h){return((4278124286&(u^h))>>>1)+(u&h)>>>0}function Ue(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function Xe(u,h){return Ue(u+(u-h+.5>>1))}function et(u,h,b){return Math.abs(h-b)-Math.abs(u-b)}function ot(u,h,b,j,D,M,I){for(j=M[I-1],b=0;b<D;++b)M[I+b]=j=Ce(u[h+b],j)}function ct(u,h,b,j,D){var M;for(M=0;M<b;++M){var I=u[h+M],R=I>>8&255,z=16711935&(z=(z=16711935&I)+((R<<16)+R));j[D+M]=(4278255360&I)+z>>>0}}function mt(u,h){h.jd=u>>0&255,h.hd=u>>8&255,h.ud=u>>16&255}function Je(u,h,b,j,D,M){var I;for(I=0;I<j;++I){var R=h[b+I],z=R>>>8,G=R,ae=255&(ae=(ae=R>>>16)+((u.jd<<24>>24)*(z<<24>>24)>>>5));G=255&(G=(G=G+((u.hd<<24>>24)*(z<<24>>24)>>>5))+((u.ud<<24>>24)*(ae<<24>>24)>>>5)),D[M+I]=(4278255360&R)+(ae<<16)+G}}function lt(u,h,b,j,D){C[h]=function(M,I,R,z,G,ae,pe,me,le){for(z=pe;z<me;++z)for(pe=0;pe<le;++pe)G[ae++]=D(R[j(M[I++])])},C[u]=function(M,I,R,z,G,ae,pe){var me=8>>M.b,le=M.Ea,Ne=M.K[0],ve=M.w;if(8>me)for(M=(1<<M.b)-1,ve=(1<<me)-1;I<R;++I){var ie,oe=0;for(ie=0;ie<le;++ie)ie&M||(oe=j(z[G++])),ae[pe++]=D(Ne[oe&ve]),oe>>=me}else C["VP8LMapColor"+b](z,G,Ne,ve,ae,pe,I,R,le)}}function Ie(u,h,b,j,D){for(b=h+b;h<b;){var M=u[h++];j[D++]=M>>16&255,j[D++]=M>>8&255,j[D++]=M>>0&255}}function dr(u,h,b,j,D){for(b=h+b;h<b;){var M=u[h++];j[D++]=M>>16&255,j[D++]=M>>8&255,j[D++]=M>>0&255,j[D++]=M>>24&255}}function pt(u,h,b,j,D){for(b=h+b;h<b;){var M=(I=u[h++])>>16&240|I>>12&15,I=I>>0&240|I>>28&15;j[D++]=M,j[D++]=I}}function cn(u,h,b,j,D){for(b=h+b;h<b;){var M=(I=u[h++])>>16&248|I>>13&7,I=I>>5&224|I>>3&31;j[D++]=M,j[D++]=I}}function jt(u,h,b,j,D){for(b=h+b;h<b;){var M=u[h++];j[D++]=M>>0&255,j[D++]=M>>8&255,j[D++]=M>>16&255}}function Ot(u,h,b,j,D,M){if(M==0)for(b=h+b;h<b;)Ae(j,((M=u[h++])[0]>>24|M[1]>>8&65280|M[2]<<8&16711680|M[3]<<24)>>>0),D+=32;else n(j,D,u,h,b)}function Cn(u,h){C[h][0]=C[u+"0"],C[h][1]=C[u+"1"],C[h][2]=C[u+"2"],C[h][3]=C[u+"3"],C[h][4]=C[u+"4"],C[h][5]=C[u+"5"],C[h][6]=C[u+"6"],C[h][7]=C[u+"7"],C[h][8]=C[u+"8"],C[h][9]=C[u+"9"],C[h][10]=C[u+"10"],C[h][11]=C[u+"11"],C[h][12]=C[u+"12"],C[h][13]=C[u+"13"],C[h][14]=C[u+"0"],C[h][15]=C[u+"0"]}function vt(u){return u==Su||u==_u||u==wl||u==Au}function Fa(){this.eb=[],this.size=this.A=this.fb=0}function Mt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function un(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Fa,this.f.kb=new Mt,this.sd=null}function Yn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function tt(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function bt(u,h){var b=u.T,j=h.ba.f.RGBA,D=j.eb,M=j.fb+u.ka*j.A,I=Zr[h.ba.S],R=u.y,z=u.O,G=u.f,ae=u.N,pe=u.ea,me=u.W,le=h.cc,Ne=h.dc,ve=h.Mc,ie=h.Nc,oe=u.ka,ye=u.ka+u.T,je=u.U,we=je+1>>1;for(oe==0?I(R,z,null,null,G,ae,pe,me,G,ae,pe,me,D,M,null,null,je):(I(h.ec,h.fc,R,z,le,Ne,ve,ie,G,ae,pe,me,D,M-j.A,D,M,je),++b);oe+2<ye;oe+=2)le=G,Ne=ae,ve=pe,ie=me,ae+=u.Rc,me+=u.Rc,M+=2*j.A,I(R,(z+=2*u.fa)-u.fa,R,z,le,Ne,ve,ie,G,ae,pe,me,D,M-j.A,D,M,je);return z+=u.fa,u.j+ye<u.o?(n(h.ec,h.fc,R,z,je),n(h.cc,h.dc,G,ae,we),n(h.Mc,h.Nc,pe,me,we),b--):1&ye||I(R,z,null,null,G,ae,pe,me,G,ae,pe,me,D,M+j.A,null,null,je),b}function $a(u,h,b){var j=u.F,D=[u.J];if(j!=null){var M=u.U,I=h.ba.S,R=I==yl||I==wl;h=h.ba.f.RGBA;var z=[0],G=u.ka;z[0]=u.T,u.Kb&&(G==0?--z[0]:(--G,D[0]-=u.width),u.j+u.ka+u.T==u.o&&(z[0]=u.o-u.j-G));var ae=h.eb;G=h.fb+G*h.A,u=Et(j,D[0],u.width,M,z,ae,G+(R?0:3),h.A),t(b==z),u&&vt(I)&&Xr(ae,G,R,M,z,h.A)}return 0}function ir(u){var h=u.ma,b=h.ba.S,j=11>b,D=b==bl||b==xl||b==yl||b==ju||b==12||vt(b);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Wi(h.Oa,u,D?11:12))return 0;if(D&&vt(b)&&_e(),u.da)alert("todo:use_scaling");else{if(j){if(h.Ib=tt,u.Kb){if(b=u.U+1>>1,h.memory=s(u.U+2*b),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+u.U,h.Mc=h.cc,h.Nc=h.dc+b,h.Ib=bt,_e()}}else alert("todo:EmitYUV");D&&(h.Jb=$a,j&&he())}if(j&&!hf){for(u=0;256>u;++u)g1[u]=89858*(u-128)+jl>>Nl,x1[u]=-22014*(u-128)+jl,b1[u]=-45773*(u-128),v1[u]=113618*(u-128)+jl>>Nl;for(u=Qi;u<Lu;++u)h=76283*(u-16)+jl>>Nl,y1[u-Qi]=Br(h,255),w1[u-Qi]=Br(h+8>>4,15);hf=1}return 1}function En(u){var h=u.ma,b=u.U,j=u.T;return t(!(1&u.ka)),0>=b||0>=j?0:(b=h.Ib(u,h),h.Jb!=null&&h.Jb(u,h,b),h.Dc+=b,1)}function Ln(u){u.ma.memory=null}function Ve(u,h,b,j){return X(u,8)!=47?0:(h[0]=X(u,14)+1,b[0]=X(u,14)+1,j[0]=X(u,1),X(u,3)!=0?0:!u.h)}function dn(u,h){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+X(h,b)+1}function Pn(u,h){return 120<h?h-120:1<=(b=((b=r1[h-1])>>4)*u+(8-(15&b)))?b:1;var b}function Er(u,h,b){var j=q(b),D=u[h+=255&j].g-8;return 0<D&&(ee(b,b.u+8),j=q(b),h+=u[h].value,h+=j&(1<<D)-1),ee(b,b.u+u[h].g),u[h].value}function Zt(u,h,b){return b.g+=u.g,b.value+=u.value<<h>>>0,t(8>=b.g),u.g}function Yt(u,h,b){var j=u.xc;return t((h=j==0?0:u.vc[u.md*(b>>j)+(h>>j)])<u.Wb),u.Ya[h]}function $r(u,h,b,j){var D=u.ab,M=u.c*h,I=u.C;h=I+h;var R=b,z=j;for(j=u.Ta,b=u.Ua;0<D--;){var G=u.gc[D],ae=I,pe=h,me=R,le=z,Ne=(z=j,R=b,G.Ea);switch(t(ae<pe),t(pe<=G.nc),G.hc){case 2:dl(me,le,(pe-ae)*Ne,z,R);break;case 0:var ve=ae,ie=pe,oe=z,ye=R,je=(Me=G).Ea;ve==0&&(wu(me,le,null,null,1,oe,ye),ot(me,le+1,0,0,je-1,oe,ye+1),le+=je,ye+=je,++ve);for(var we=1<<Me.b,Fe=we-1,De=qe(je,Me.b),He=Me.K,Me=Me.w+(ve>>Me.b)*De;ve<ie;){var gt=He,xt=Me,ft=1;for(Vi(me,le,oe,ye-je,1,oe,ye);ft<je;){var ut=(ft&~Fe)+we;ut>je&&(ut=je),(0,pa[gt[xt++]>>8&15])(me,le+ +ft,oe,ye+ft-je,ut-ft,oe,ye+ft),ft=ut}le+=je,ye+=je,++ve&Fe||(Me+=De)}pe!=G.nc&&n(z,R-Ne,z,R+(pe-ae-1)*Ne,Ne);break;case 1:for(Ne=me,ie=le,je=(me=G.Ea)-(ye=me&~(oe=(le=1<<G.b)-1)),ve=qe(me,G.b),we=G.K,G=G.w+(ae>>G.b)*ve;ae<pe;){for(Fe=we,De=G,He=new Oe,Me=ie+ye,gt=ie+me;ie<Me;)mt(Fe[De++],He),Ha(He,Ne,ie,le,z,R),ie+=le,R+=le;ie<gt&&(mt(Fe[De++],He),Ha(He,Ne,ie,je,z,R),ie+=je,R+=je),++ae&oe||(G+=ve)}break;case 3:if(me==z&&le==R&&0<G.b){for(ie=z,me=Ne=R+(pe-ae)*Ne-(ye=(pe-ae)*qe(G.Ea,G.b)),le=z,oe=R,ve=[],ye=(je=ye)-1;0<=ye;--ye)ve[ye]=le[oe+ye];for(ye=je-1;0<=ye;--ye)ie[me+ye]=ve[ye];Vr(G,ae,pe,z,Ne,z,R)}else Vr(G,ae,pe,me,le,z,R)}R=j,z=b}z!=b&&n(j,b,R,z,M)}function ws(u,h){var b=u.V,j=u.Ba+u.c*u.C,D=h-u.C;if(t(h<=u.l.o),t(16>=D),0<D){var M=u.l,I=u.Ta,R=u.Ua,z=M.width;if($r(u,D,b,j),D=R=[R],t((b=u.C)<(j=h)),t(M.v<M.va),j>M.o&&(j=M.o),b<M.j){var G=M.j-b;b=M.j,D[0]+=G*z}if(b>=j?b=0:(D[0]+=4*M.v,M.ka=b-M.j,M.U=M.va-M.v,M.T=j-b,b=1),b){if(R=R[0],11>(b=u.ca).S){var ae=b.f.RGBA,pe=(j=b.S,D=M.U,M=M.T,G=ae.eb,ae.A),me=M;for(ae=ae.fb+u.Ma*ae.A;0<me--;){var le=I,Ne=R,ve=D,ie=G,oe=ae;switch(j){case vl:Dr(le,Ne,ve,ie,oe);break;case bl:jr(le,Ne,ve,ie,oe);break;case Su:jr(le,Ne,ve,ie,oe),Xr(ie,oe,0,ve,1,0);break;case rf:Qn(le,Ne,ve,ie,oe);break;case xl:Ot(le,Ne,ve,ie,oe,1);break;case _u:Ot(le,Ne,ve,ie,oe,1),Xr(ie,oe,0,ve,1,0);break;case yl:Ot(le,Ne,ve,ie,oe,0);break;case wl:Ot(le,Ne,ve,ie,oe,0),Xr(ie,oe,1,ve,1,0);break;case ju:ma(le,Ne,ve,ie,oe);break;case Au:ma(le,Ne,ve,ie,oe),Ct(ie,oe,ve,1,0);break;case nf:Zn(le,Ne,ve,ie,oe);break;default:t(0)}R+=z,ae+=pe}u.Ma+=M}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=b.height)}}u.C=h,t(u.C<=u.i)}function Kn(u){var h;if(0<u.ua)return 0;for(h=0;h<u.Wb;++h){var b=u.Ya[h].G,j=u.Ya[h].H;if(0<b[1][j[1]+0].g||0<b[2][j[2]+0].g||0<b[3][j[3]+0].g)return 0}return 1}function hn(u,h,b,j,D,M){if(u.Z!=0){var I=u.qd,R=u.rd;for(t(xa[u.Z]!=null);h<b;++h)xa[u.Z](I,R,j,D,j,D,M),I=j,R=D,D+=M;u.qd=I,u.rd=R}}function fn(u,h){var b=u.l.ma,j=b.Z==0||b.Z==1?u.l.j:u.C;if(j=u.C<j?j:u.C,t(h<=u.l.o),h>j){var D=u.l.width,M=b.ca,I=b.tb+D*j,R=u.V,z=u.Ba+u.c*j,G=u.gc;t(u.ab==1),t(G[0].hc==3),hl(G[0],j,h,R,z,M,I),hn(b,j,h,M,I,D)}u.C=u.Ma=h}function pn(u,h,b,j,D,M,I){var R=u.$/j,z=u.$%j,G=u.m,ae=u.s,pe=b+u.$,me=pe;D=b+j*D;var le=b+j*M,Ne=280+ae.ua,ve=u.Pb?R:16777216,ie=0<ae.ua?ae.Wa:null,oe=ae.wc,ye=pe<le?Yt(ae,z,R):null;t(u.C<M),t(le<=D);var je=!1;e:for(;;){for(;je||pe<le;){var we=0;if(R>=ve){var Fe=pe-b;t((ve=u).Pb),ve.wd=ve.m,ve.xd=Fe,0<ve.s.ua&&xe(ve.s.Wa,ve.s.vb),ve=R+a1}if(z&oe||(ye=Yt(ae,z,R)),t(ye!=null),ye.Qb&&(h[pe]=ye.qb,je=!0),!je)if(se(G),ye.jc){we=G,Fe=h;var De=pe,He=ye.pd[q(we)&or-1];t(ye.jc),256>He.g?(ee(we,we.u+He.g),Fe[De]=He.value,we=0):(ee(we,we.u+He.g-256),t(256<=He.value),we=He.value),we==0&&(je=!0)}else we=Er(ye.G[0],ye.H[0],G);if(G.h)break;if(je||256>we){if(!je)if(ye.nd)h[pe]=(ye.qb|we<<8)>>>0;else{if(se(G),je=Er(ye.G[1],ye.H[1],G),se(G),Fe=Er(ye.G[2],ye.H[2],G),De=Er(ye.G[3],ye.H[3],G),G.h)break;h[pe]=(De<<24|je<<16|we<<8|Fe)>>>0}if(je=!1,++pe,++z>=j&&(z=0,++R,I!=null&&R<=M&&!(R%16)&&I(u,R),ie!=null))for(;me<pe;)we=h[me++],ie.X[(506832829*we&4294967295)>>>ie.Mb]=we}else if(280>we){if(we=dn(we-256,G),Fe=Er(ye.G[4],ye.H[4],G),se(G),Fe=Pn(j,Fe=dn(Fe,G)),G.h)break;if(pe-b<Fe||D-pe<we)break e;for(De=0;De<we;++De)h[pe+De]=h[pe+De-Fe];for(pe+=we,z+=we;z>=j;)z-=j,++R,I!=null&&R<=M&&!(R%16)&&I(u,R);if(t(pe<=D),z&oe&&(ye=Yt(ae,z,R)),ie!=null)for(;me<pe;)we=h[me++],ie.X[(506832829*we&4294967295)>>>ie.Mb]=we}else{if(!(we<Ne))break e;for(je=we-280,t(ie!=null);me<pe;)we=h[me++],ie.X[(506832829*we&4294967295)>>>ie.Mb]=we;we=pe,t(!(je>>>(Fe=ie).Xa)),h[we]=Fe.X[je],je=!0}je||t(G.h==V(G))}if(u.Pb&&G.h&&pe<D)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&xe(u.s.vb,u.s.Wa);else{if(G.h)break e;I!=null&&I(u,R>M?M:R),u.a=0,u.$=pe-b}return 1}return u.a=3,0}function Dn(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var h=u.Wa;h!=null&&(h.X=null),u.vb=null,t(u!=null)}function Gr(){var u=new yu;return u==null?null:(u.a=0,u.xb=of,Cn("Predictor","VP8LPredictors"),Cn("Predictor","VP8LPredictors_C"),Cn("PredictorAdd","VP8LPredictorsAdd"),Cn("PredictorAdd","VP8LPredictorsAdd_C"),dl=ct,Ha=Je,Dr=Ie,jr=dr,ma=pt,Zn=cn,Qn=jt,C.VP8LMapColor32b=qs,C.VP8LMapColor8b=fl,u)}function kn(u,h,b,j,D){var M=1,I=[u],R=[h],z=j.m,G=j.s,ae=null,pe=0;e:for(;;){if(b)for(;M&&X(z,1);){var me=I,le=R,Ne=j,ve=1,ie=Ne.m,oe=Ne.gc[Ne.ab],ye=X(ie,2);if(Ne.Oc&1<<ye)M=0;else{switch(Ne.Oc|=1<<ye,oe.hc=ye,oe.Ea=me[0],oe.nc=le[0],oe.K=[null],++Ne.ab,t(4>=Ne.ab),ye){case 0:case 1:oe.b=X(ie,3)+2,ve=kn(qe(oe.Ea,oe.b),qe(oe.nc,oe.b),0,Ne,oe.K),oe.K=oe.K[0];break;case 3:var je,we=X(ie,8)+1,Fe=16<we?0:4<we?1:2<we?2:3;if(me[0]=qe(oe.Ea,Fe),oe.b=Fe,je=ve=kn(we,1,0,Ne,oe.K)){var De,He=we,Me=oe,gt=1<<(8>>Me.b),xt=s(gt);if(xt==null)je=0;else{var ft=Me.K[0],ut=Me.w;for(xt[0]=Me.K[0][0],De=1;De<1*He;++De)xt[De]=Ce(ft[ut+De],xt[De-1]);for(;De<4*gt;++De)xt[De]=0;Me.K[0]=null,Me.K[0]=xt,je=1}}ve=je;break;case 2:break;default:t(0)}M=ve}}if(I=I[0],R=R[0],M&&X(z,1)&&!(M=1<=(pe=X(z,4))&&11>=pe)){j.a=3;break e}var St;if(St=M)t:{var Nt,st,Xt,kr=j,Jt=I,Or=R,yt=pe,zr=b,Ur=kr.m,nr=kr.s,lr=[null],_r=1,Qr=0,In=n1[yt];r:for(;;){if(zr&&X(Ur,1)){var ar=X(Ur,3)+2,na=qe(Jt,ar),Xa=qe(Or,ar),Gs=na*Xa;if(!kn(na,Xa,0,kr,lr))break r;for(lr=lr[0],nr.xc=ar,Nt=0;Nt<Gs;++Nt){var ya=lr[Nt]>>8&65535;lr[Nt]=ya,ya>=_r&&(_r=ya+1)}}if(Ur.h)break r;for(st=0;5>st;++st){var Ft=af[st];!st&&0<yt&&(Ft+=1<<yt),Qr<Ft&&(Qr=Ft)}var Pu=o(_r*In,O),mf=_r,gf=o(mf,U);if(gf==null)var _l=null;else t(65536>=mf),_l=gf;var eo=s(Qr);if(_l==null||eo==null||Pu==null){kr.a=1;break r}var Al=Pu;for(Nt=Xt=0;Nt<_r;++Nt){var xn=_l[Nt],Vs=xn.G,Ys=xn.H,vf=0,Cl=1,bf=0;for(st=0;5>st;++st){Ft=af[st],Vs[st]=Al,Ys[st]=Xt,!st&&0<yt&&(Ft+=1<<yt);a:{var El,Du=Ft,Ll=kr,to=eo,S1=Al,_1=Xt,ku=0,wa=Ll.m,A1=X(wa,1);if(a(to,0,0,Du),A1){var C1=X(wa,1)+1,E1=X(wa,1),xf=X(wa,E1==0?1:8);to[xf]=1,C1==2&&(to[xf=X(wa,8)]=1);var Pl=1}else{var yf=s(19),wf=X(wa,4)+4;if(19<wf){Ll.a=3;var Dl=0;break a}for(El=0;El<wf;++El)yf[t1[El]]=X(wa,3);var Ou=void 0,ro=void 0,Nf=Ll,L1=yf,kl=Du,jf=to,Tu=0,Na=Nf.m,Sf=8,_f=o(128,O);n:for(;A(_f,0,7,L1,19);){if(X(Na,1)){var P1=2+2*X(Na,3);if((Ou=2+X(Na,P1))>kl)break n}else Ou=kl;for(ro=0;ro<kl&&Ou--;){se(Na);var Af=_f[0+(127&q(Na))];ee(Na,Na.u+Af.g);var Ks=Af.value;if(16>Ks)jf[ro++]=Ks,Ks!=0&&(Sf=Ks);else{var D1=Ks==16,Cf=Ks-16,k1=Qv[Cf],Ef=X(Na,Zv[Cf])+k1;if(ro+Ef>kl)break n;for(var O1=D1?Sf:0;0<Ef--;)jf[ro++]=O1}}Tu=1;break n}Tu||(Nf.a=3),Pl=Tu}(Pl=Pl&&!wa.h)&&(ku=A(S1,_1,8,to,Du)),Pl&&ku!=0?Dl=ku:(Ll.a=3,Dl=0)}if(Dl==0)break r;if(Cl&&e1[st]==1&&(Cl=Al[Xt].g==0),vf+=Al[Xt].g,Xt+=Dl,3>=st){var no,Mu=eo[0];for(no=1;no<Ft;++no)eo[no]>Mu&&(Mu=eo[no]);bf+=Mu}}if(xn.nd=Cl,xn.Qb=0,Cl&&(xn.qb=(Vs[3][Ys[3]+0].value<<24|Vs[1][Ys[1]+0].value<<16|Vs[2][Ys[2]+0].value)>>>0,vf==0&&256>Vs[0][Ys[0]+0].value&&(xn.Qb=1,xn.qb+=Vs[0][Ys[0]+0].value<<8)),xn.jc=!xn.Qb&&6>bf,xn.jc){var Ol,aa=xn;for(Ol=0;Ol<or;++Ol){var ja=Ol,Sa=aa.pd[ja],Tl=aa.G[0][aa.H[0]+ja];256<=Tl.value?(Sa.g=Tl.g+256,Sa.value=Tl.value):(Sa.g=0,Sa.value=0,ja>>=Zt(Tl,8,Sa),ja>>=Zt(aa.G[1][aa.H[1]+ja],16,Sa),ja>>=Zt(aa.G[2][aa.H[2]+ja],0,Sa),Zt(aa.G[3][aa.H[3]+ja],24,Sa))}}}nr.vc=lr,nr.Wb=_r,nr.Ya=_l,nr.yc=Pu,St=1;break t}St=0}if(!(M=St)){j.a=3;break e}if(0<pe){if(G.ua=1<<pe,!Ge(G.Wa,pe)){j.a=1,M=0;break e}}else G.ua=0;var Iu=j,Lf=I,T1=R,Ru=Iu.s,Fu=Ru.xc;if(Iu.c=Lf,Iu.i=T1,Ru.md=qe(Lf,Fu),Ru.wc=Fu==0?-1:(1<<Fu)-1,b){j.xb=d1;break e}if((ae=s(I*R))==null){j.a=1,M=0;break e}M=(M=pn(j,ae,0,I,R,R,null))&&!z.h;break e}return M?(D!=null?D[0]=ae:(t(ae==null),t(b)),j.$=0,b||Dn(G)):Dn(G),M}function Ba(u,h){var b=u.c*u.i,j=b+h+16*h;return t(u.c<=h),u.V=s(j),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+h,1)}function Ns(u,h){var b=u.C,j=h-b,D=u.V,M=u.Ba+u.c*b;for(t(h<=u.l.o);0<j;){var I=16<j?16:j,R=u.l.ma,z=u.l.width,G=z*I,ae=R.ca,pe=R.tb+z*b,me=u.Ta,le=u.Ua;$r(u,I,D,M),Wt(me,le,ae,pe,G),hn(R,b,b+I,ae,pe,z),j-=I,D+=I*u.c,b+=I}t(b==h),u.C=u.Ma=h}function js(){this.ub=this.yd=this.td=this.Rb=0}function Ss(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _s(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ho(){this.Yb=function(){var u=[];return function h(b,j,D){for(var M=D[j],I=0;I<M&&(b.push(D.length>j+1?[]:0),!(D.length<j+1));I++)h(b[I],j+1,D)}(u,0,[3,11]),u}()}function Jc(){this.jb=s(3),this.Wc=l([4,8],Ho),this.Xc=l([4,17],Ho)}function Zc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function As(){this.ld=this.La=this.dd=this.tc=0}function Go(){this.Na=this.la=0}function Qc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ei(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function eu(){this.uc=this.M=this.Nb=0,this.wa=Array(new As),this.Y=0,this.ya=Array(new Ei),this.aa=0,this.l=new Cs}function Vo(){this.y=s(16),this.f=s(8),this.ea=s(8)}function tu(){this.cb=this.a=0,this.sc="",this.m=new ce,this.Od=new js,this.Kc=new Ss,this.ed=new Zc,this.Qa=new _s,this.Ic=this.$c=this.Aa=0,this.D=new eu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ce),this.ia=0,this.pb=o(4,Qc),this.Pa=new Jc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vo),this.Hd=0,this.rb=Array(new Go),this.sb=0,this.wa=Array(new As),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ei),this.L=this.aa=0,this.gd=l([4,2],As),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Cs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ru(){var u=new tu;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,Zi||(Zi=Xo)),u}function zt(u,h,b){return u.a==0&&(u.a=h,u.sc=b,u.cb=0),0}function Yo(u,h,b){return 3<=b&&u[h+0]==157&&u[h+1]==1&&u[h+2]==42}function Ko(u,h){if(u==null)return 0;if(u.a=0,u.sc="OK",h==null)return zt(u,2,"null VP8Io passed to VP8GetHeaders()");var b=h.data,j=h.w,D=h.ha;if(4>D)return zt(u,7,"Truncated header.");var M=b[j+0]|b[j+1]<<8|b[j+2]<<16,I=u.Od;if(I.Rb=!(1&M),I.td=M>>1&7,I.yd=M>>4&1,I.ub=M>>5,3<I.td)return zt(u,3,"Incorrect keyframe parameters.");if(!I.yd)return zt(u,4,"Frame not displayable.");j+=3,D-=3;var R=u.Kc;if(I.Rb){if(7>D)return zt(u,7,"cannot parse picture header");if(!Yo(b,j,D))return zt(u,3,"Bad code word");R.c=16383&(b[j+4]<<8|b[j+3]),R.Td=b[j+4]>>6,R.i=16383&(b[j+6]<<8|b[j+5]),R.Ud=b[j+6]>>6,j+=7,D-=7,u.za=R.c+15>>4,u.Ub=R.i+15>>4,h.width=R.c,h.height=R.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,a((M=u.Pa).jb,0,255,M.jb.length),t((M=u.Qa)!=null),M.Cb=0,M.Bb=0,M.Fb=1,a(M.Zb,0,0,M.Zb.length),a(M.Lb,0,0,M.Lb)}if(I.ub>D)return zt(u,7,"bad partition length");te(M=u.m,b,j,I.ub),j+=I.ub,D-=I.ub,I.Rb&&(R.Ld=fe(M),R.Kd=fe(M)),R=u.Qa;var z,G=u.Pa;if(t(M!=null),t(R!=null),R.Cb=fe(M),R.Cb){if(R.Bb=fe(M),fe(M)){for(R.Fb=fe(M),z=0;4>z;++z)R.Zb[z]=fe(M)?Z(M,7):0;for(z=0;4>z;++z)R.Lb[z]=fe(M)?Z(M,6):0}if(R.Bb)for(z=0;3>z;++z)G.jb[z]=fe(M)?re(M,8):255}else R.Bb=0;if(M.Ka)return zt(u,3,"cannot parse segment header");if((R=u.ed).zd=fe(M),R.Tb=re(M,6),R.wb=re(M,3),R.Pc=fe(M),R.Pc&&fe(M)){for(G=0;4>G;++G)fe(M)&&(R.vd[G]=Z(M,6));for(G=0;4>G;++G)fe(M)&&(R.od[G]=Z(M,6))}if(u.L=R.Tb==0?0:R.zd?1:2,M.Ka)return zt(u,3,"cannot parse filter header");var ae=D;if(D=z=j,j=z+ae,R=ae,u.Xb=(1<<re(u.m,2))-1,ae<3*(G=u.Xb))b=7;else{for(z+=3*G,R-=3*G,ae=0;ae<G;++ae){var pe=b[D+0]|b[D+1]<<8|b[D+2]<<16;pe>R&&(pe=R),te(u.Jc[+ae],b,z,pe),z+=pe,R-=pe,D+=3}te(u.Jc[+G],b,z,R),b=z<j?0:5}if(b!=0)return zt(u,b,"cannot parse partitions");for(b=re(z=u.m,7),D=fe(z)?Z(z,4):0,j=fe(z)?Z(z,4):0,R=fe(z)?Z(z,4):0,G=fe(z)?Z(z,4):0,z=fe(z)?Z(z,4):0,ae=u.Qa,pe=0;4>pe;++pe){if(ae.Cb){var me=ae.Zb[pe];ae.Fb||(me+=b)}else{if(0<pe){u.pb[pe]=u.pb[0];continue}me=b}var le=u.pb[pe];le.Sc[0]=Cu[Br(me+D,127)],le.Sc[1]=Eu[Br(me+0,127)],le.Eb[0]=2*Cu[Br(me+j,127)],le.Eb[1]=101581*Eu[Br(me+R,127)]>>16,8>le.Eb[1]&&(le.Eb[1]=8),le.Qc[0]=Cu[Br(me+G,117)],le.Qc[1]=Eu[Br(me+z,127)],le.lc=me+z}if(!I.Rb)return zt(u,4,"Not a key frame.");for(fe(M),I=u.Pa,b=0;4>b;++b){for(D=0;8>D;++D)for(j=0;3>j;++j)for(R=0;11>R;++R)G=ge(M,c1[b][D][j][R])?re(M,8):o1[b][D][j][R],I.Wc[b][D].Yb[j][R]=G;for(D=0;17>D;++D)I.Xc[b][D]=I.Wc[b][u1[D]]}return u.kc=fe(M),u.kc&&(u.Bd=re(M,8)),u.cb=1}function Xo(u,h,b,j,D,M,I){var R=h[D].Yb[b];for(b=0;16>D;++D){if(!ge(u,R[b+0]))return D;for(;!ge(u,R[b+1]);)if(R=h[++D].Yb[0],b=0,D==16)return 16;var z=h[D+1].Yb;if(ge(u,R[b+2])){var G=u,ae=0;if(ge(G,(me=R)[(pe=b)+3]))if(ge(G,me[pe+6])){for(R=0,pe=2*(ae=ge(G,me[pe+8]))+(me=ge(G,me[pe+9+ae])),ae=0,me=s1[pe];me[R];++R)ae+=ae+ge(G,me[R]);ae+=3+(8<<pe)}else ge(G,me[pe+7])?(ae=7+2*ge(G,165),ae+=ge(G,145)):ae=5+ge(G,159);else ae=ge(G,me[pe+4])?3+ge(G,me[pe+5]):2;R=z[2]}else ae=1,R=z[1];z=I+i1[D],0>(G=u).b&&de(G);var pe,me=G.b,le=(pe=G.Ca>>1)-(G.I>>me)>>31;--G.b,G.Ca+=le,G.Ca|=1,G.I-=(pe+1&le)<<me,M[z]=((ae^le)-le)*j[(0<D)+0]}return 16}function Li(u){var h=u.rb[u.sb-1];h.la=0,h.Na=0,a(u.zc,0,0,u.zc.length),u.ja=0}function nu(u,h){if(u==null)return 0;if(h==null)return zt(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!Ko(u,h))return 0;if(t(u.cb),h.ac==null||h.ac(h)){h.ob&&(u.L=0);var b=Sl[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=h.v-b>>4,u.zb=h.j-b>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=h.o+15+b>>4,u.Hb=h.va+15+b>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var j=u.ed;for(b=0;4>b;++b){var D;if(u.Qa.Cb){var M=u.Qa.Lb[b];u.Qa.Fb||(M+=j.Tb)}else M=j.Tb;for(D=0;1>=D;++D){var I=u.gd[b][D],R=M;if(j.Pc&&(R+=j.vd[0],D&&(R+=j.od[0])),0<(R=0>R?0:63<R?63:R)){var z=R;0<j.wb&&(z=4<j.wb?z>>2:z>>1)>9-j.wb&&(z=9-j.wb),1>z&&(z=1),I.dd=z,I.tc=2*R+z,I.ld=40<=R?2:15<=R?1:0}else I.tc=0;I.La=D}}}b=0}else zt(u,6,"Frame setup failed"),b=u.a;if(b=b==0){if(b){u.$c=0,0<u.Aa||(u.Ic=j1);e:{b=u.Ic,j=4*(z=u.za);var G=32*z,ae=z+1,pe=0<u.L?z*(0<u.Aa?2:1):0,me=(u.Aa==2?2:1)*z;if((I=j+832+(D=3*(16*b+Sl[u.L])/2*G)+(M=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=I)b=0;else{if(I>u.Vb){if(u.Vb=0,u.Ec=s(I),u.Fc=0,u.Ec==null){b=zt(u,1,"no memory during frame initialization.");break e}u.Vb=I}I=u.Ec,R=u.Fc,u.Ac=I,u.Bc=R,R+=j,u.Gd=o(G,Vo),u.Hd=0,u.rb=o(ae+1,Go),u.sb=1,u.wa=pe?o(pe,As):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=z),t(!0),u.oc=I,u.pc=R,R+=832,u.ya=o(me,Ei),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=z),u.R=16*z,u.B=8*z,z=(G=Sl[u.L])*u.R,G=G/2*u.B,u.sa=I,u.ta=R+z,u.qa=u.sa,u.ra=u.ta+16*b*u.R+G,u.Ha=u.qa,u.Ia=u.ra+8*b*u.B+G,u.$c=0,R+=D,u.mb=M?I:null,u.nb=M?R:null,t(R+M<=u.Fc+u.Vb),Li(u),a(u.Ac,u.Bc,0,j),b=1}}if(b){if(h.ka=0,h.y=u.sa,h.O=u.ta,h.f=u.qa,h.N=u.ra,h.ea=u.Ha,h.Vd=u.Ia,h.fa=u.R,h.Rc=u.B,h.F=null,h.J=0,!ml){for(b=-255;255>=b;++b)Qt[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)ta[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)Ji[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)Hs[255+b]=0>b?0:255<b?255:b;ml=1}zs=iu,ea=au,Yi=Zo,Sr=su,Yr=Qo,Ut=Jo,Us=Mi,pl=Ua,Ki=xu,Ga=Ii,Va=bu,ga=Os,Ya=Ri,Ws=ll,Ka=ol,va=Tn,Xi=Jn,Kr=vu,bn[0]=On,bn[1]=ou,bn[2]=du,bn[3]=hu,bn[4]=rl,bn[5]=Ds,bn[6]=nl,bn[7]=ki,bn[8]=pu,bn[9]=fu,ba[0]=el,ba[1]=cu,ba[2]=Xn,ba[3]=Ls,ba[4]=hr,ba[5]=uu,ba[6]=tl,ra[0]=da,ra[1]=lu,ra[2]=mu,ra[3]=Oi,ra[4]=za,ra[5]=gu,ra[6]=Ti,b=1}else b=0}b&&(b=function(le,Ne){for(le.M=0;le.M<le.Va;++le.M){var ve,ie=le.Jc[le.M&le.Xb],oe=le.m,ye=le;for(ve=0;ve<ye.za;++ve){var je=oe,we=ye,Fe=we.Ac,De=we.Bc+4*ve,He=we.zc,Me=we.ya[we.aa+ve];if(we.Qa.Bb?Me.$b=ge(je,we.Pa.jb[0])?2+ge(je,we.Pa.jb[2]):ge(je,we.Pa.jb[1]):Me.$b=0,we.kc&&(Me.Ad=ge(je,we.Bd)),Me.Za=!ge(je,145)+0,Me.Za){var gt=Me.Ob,xt=0;for(we=0;4>we;++we){var ft,ut=He[0+we];for(ft=0;4>ft;++ft){ut=l1[Fe[De+ft]][ut];for(var St=sf[ge(je,ut[0])];0<St;)St=sf[2*St+ge(je,ut[St])];ut=-St,Fe[De+ft]=ut}n(gt,xt,Fe,De,4),xt+=4,He[0+we]=ut}}else ut=ge(je,156)?ge(je,128)?1:3:ge(je,163)?2:0,Me.Ob[0]=ut,a(Fe,De,ut,4),a(He,0,ut,4);Me.Dd=ge(je,142)?ge(je,114)?ge(je,183)?1:3:2:0}if(ye.m.Ka)return zt(le,7,"Premature end-of-partition0 encountered.");for(;le.ja<le.za;++le.ja){if(ye=ie,je=(oe=le).rb[oe.sb-1],Fe=oe.rb[oe.sb+oe.ja],ve=oe.ya[oe.aa+oe.ja],De=oe.kc?ve.Ad:0)je.la=Fe.la=0,ve.Za||(je.Na=Fe.Na=0),ve.Hc=0,ve.Gc=0,ve.ia=0;else{var Nt,st;if(je=Fe,Fe=ye,De=oe.Pa.Xc,He=oe.ya[oe.aa+oe.ja],Me=oe.pb[He.$b],we=He.ad,gt=0,xt=oe.rb[oe.sb-1],ut=ft=0,a(we,gt,0,384),He.Za)var Xt=0,kr=De[3];else{St=s(16);var Jt=je.Na+xt.Na;if(Jt=Zi(Fe,De[1],Jt,Me.Eb,0,St,0),je.Na=xt.Na=(0<Jt)+0,1<Jt)zs(St,0,we,gt);else{var Or=St[0]+3>>3;for(St=0;256>St;St+=16)we[gt+St]=Or}Xt=1,kr=De[0]}var yt=15&je.la,zr=15&xt.la;for(St=0;4>St;++St){var Ur=1&zr;for(Or=st=0;4>Or;++Or)yt=yt>>1|(Ur=(Jt=Zi(Fe,kr,Jt=Ur+(1&yt),Me.Sc,Xt,we,gt))>Xt)<<7,st=st<<2|(3<Jt?3:1<Jt?2:we[gt+0]!=0),gt+=16;yt>>=4,zr=zr>>1|Ur<<7,ft=(ft<<8|st)>>>0}for(kr=yt,Xt=zr>>4,Nt=0;4>Nt;Nt+=2){for(st=0,yt=je.la>>4+Nt,zr=xt.la>>4+Nt,St=0;2>St;++St){for(Ur=1&zr,Or=0;2>Or;++Or)Jt=Ur+(1&yt),yt=yt>>1|(Ur=0<(Jt=Zi(Fe,De[2],Jt,Me.Qc,0,we,gt)))<<3,st=st<<2|(3<Jt?3:1<Jt?2:we[gt+0]!=0),gt+=16;yt>>=2,zr=zr>>1|Ur<<5}ut|=st<<4*Nt,kr|=yt<<4<<Nt,Xt|=(240&zr)<<Nt}je.la=kr,xt.la=Xt,He.Hc=ft,He.Gc=ut,He.ia=43690&ut?0:Me.ia,De=!(ft|ut)}if(0<oe.L&&(oe.wa[oe.Y+oe.ja]=oe.gd[ve.$b][ve.Za],oe.wa[oe.Y+oe.ja].La|=!De),ye.Ka)return zt(le,7,"Premature end-of-file encountered.")}if(Li(le),oe=Ne,ye=1,ve=(ie=le).D,je=0<ie.L&&ie.M>=ie.zb&&ie.M<=ie.Va,ie.Aa==0)e:{if(ve.M=ie.M,ve.uc=je,Ui(ie,ve),ye=1,ve=(st=ie.D).Nb,je=(ut=Sl[ie.L])*ie.R,Fe=ut/2*ie.B,St=16*ve*ie.R,Or=8*ve*ie.B,De=ie.sa,He=ie.ta-je+St,Me=ie.qa,we=ie.ra-Fe+Or,gt=ie.Ha,xt=ie.Ia-Fe+Or,zr=(yt=st.M)==0,ft=yt>=ie.Va-1,ie.Aa==2&&Ui(ie,st),st.uc)for(Ur=(Jt=ie).D.M,t(Jt.D.uc),st=Jt.yb;st<Jt.Hb;++st){Xt=st,kr=Ur;var nr=(lr=(Ft=Jt).D).Nb;Nt=Ft.R;var lr=lr.wa[lr.Y+Xt],_r=Ft.sa,Qr=Ft.ta+16*nr*Nt+16*Xt,In=lr.dd,ar=lr.tc;if(ar!=0)if(t(3<=ar),Ft.L==1)0<Xt&&va(_r,Qr,Nt,ar+4),lr.La&&Kr(_r,Qr,Nt,ar),0<kr&&Ka(_r,Qr,Nt,ar+4),lr.La&&Xi(_r,Qr,Nt,ar);else{var na=Ft.B,Xa=Ft.qa,Gs=Ft.ra+8*nr*na+8*Xt,ya=Ft.Ha,Ft=Ft.Ia+8*nr*na+8*Xt;nr=lr.ld,0<Xt&&(pl(_r,Qr,Nt,ar+4,In,nr),Ga(Xa,Gs,ya,Ft,na,ar+4,In,nr)),lr.La&&(ga(_r,Qr,Nt,ar,In,nr),Ws(Xa,Gs,ya,Ft,na,ar,In,nr)),0<kr&&(Us(_r,Qr,Nt,ar+4,In,nr),Ki(Xa,Gs,ya,Ft,na,ar+4,In,nr)),lr.La&&(Va(_r,Qr,Nt,ar,In,nr),Ya(Xa,Gs,ya,Ft,na,ar,In,nr))}}if(ie.ia&&alert("todo:DitherRow"),oe.put!=null){if(st=16*yt,yt=16*(yt+1),zr?(oe.y=ie.sa,oe.O=ie.ta+St,oe.f=ie.qa,oe.N=ie.ra+Or,oe.ea=ie.Ha,oe.W=ie.Ia+Or):(st-=ut,oe.y=De,oe.O=He,oe.f=Me,oe.N=we,oe.ea=gt,oe.W=xt),ft||(yt-=ut),yt>oe.o&&(yt=oe.o),oe.F=null,oe.J=null,ie.Fa!=null&&0<ie.Fa.length&&st<yt&&(oe.J=qi(ie,oe,st,yt-st),oe.F=ie.mb,oe.F==null&&oe.F.length==0)){ye=zt(ie,3,"Could not decode alpha data.");break e}st<oe.j&&(ut=oe.j-st,st=oe.j,t(!(1&ut)),oe.O+=ie.R*ut,oe.N+=ie.B*(ut>>1),oe.W+=ie.B*(ut>>1),oe.F!=null&&(oe.J+=oe.width*ut)),st<yt&&(oe.O+=oe.v,oe.N+=oe.v>>1,oe.W+=oe.v>>1,oe.F!=null&&(oe.J+=oe.v),oe.ka=st-oe.j,oe.U=oe.va-oe.v,oe.T=yt-st,ye=oe.put(oe))}ve+1!=ie.Ic||ft||(n(ie.sa,ie.ta-je,De,He+16*ie.R,je),n(ie.qa,ie.ra-Fe,Me,we+8*ie.B,Fe),n(ie.Ha,ie.Ia-Fe,gt,xt+8*ie.B,Fe))}if(!ye)return zt(le,6,"Output aborted.")}return 1}(u,h)),h.bc!=null&&h.bc(h),b&=1}return b?(u.cb=0,b):0}function mn(u,h,b,j,D){D=u[h+b+32*j]+(D>>3),u[h+b+32*j]=-256&D?0>D?0:255:D}function Es(u,h,b,j,D,M){mn(u,h,0,b,j+D),mn(u,h,1,b,j+M),mn(u,h,2,b,j-M),mn(u,h,3,b,j-D)}function Lr(u){return(20091*u>>16)+u}function Pi(u,h,b,j){var D,M=0,I=s(16);for(D=0;4>D;++D){var R=u[h+0]+u[h+8],z=u[h+0]-u[h+8],G=(35468*u[h+4]>>16)-Lr(u[h+12]),ae=Lr(u[h+4])+(35468*u[h+12]>>16);I[M+0]=R+ae,I[M+1]=z+G,I[M+2]=z-G,I[M+3]=R-ae,M+=4,h++}for(D=M=0;4>D;++D)R=(u=I[M+0]+4)+I[M+8],z=u-I[M+8],G=(35468*I[M+4]>>16)-Lr(I[M+12]),mn(b,j,0,0,R+(ae=Lr(I[M+4])+(35468*I[M+12]>>16))),mn(b,j,1,0,z+G),mn(b,j,2,0,z-G),mn(b,j,3,0,R-ae),M++,j+=32}function Jo(u,h,b,j){var D=u[h+0]+4,M=35468*u[h+4]>>16,I=Lr(u[h+4]),R=35468*u[h+1]>>16;Es(b,j,0,D+I,u=Lr(u[h+1]),R),Es(b,j,1,D+M,u,R),Es(b,j,2,D-M,u,R),Es(b,j,3,D-I,u,R)}function au(u,h,b,j,D){Pi(u,h,b,j),D&&Pi(u,h+16,b,j+4)}function Zo(u,h,b,j){ea(u,h+0,b,j,1),ea(u,h+32,b,j+128,1)}function su(u,h,b,j){var D;for(u=u[h+0]+4,D=0;4>D;++D)for(h=0;4>h;++h)mn(b,j,h,D,u)}function Qo(u,h,b,j){u[h+0]&&Sr(u,h+0,b,j),u[h+16]&&Sr(u,h+16,b,j+4),u[h+32]&&Sr(u,h+32,b,j+128),u[h+48]&&Sr(u,h+48,b,j+128+4)}function iu(u,h,b,j){var D,M=s(16);for(D=0;4>D;++D){var I=u[h+0+D]+u[h+12+D],R=u[h+4+D]+u[h+8+D],z=u[h+4+D]-u[h+8+D],G=u[h+0+D]-u[h+12+D];M[0+D]=I+R,M[8+D]=I-R,M[4+D]=G+z,M[12+D]=G-z}for(D=0;4>D;++D)I=(u=M[0+4*D]+3)+M[3+4*D],R=M[1+4*D]+M[2+4*D],z=M[1+4*D]-M[2+4*D],G=u-M[3+4*D],b[j+0]=I+R>>3,b[j+16]=G+z>>3,b[j+32]=I-R>>3,b[j+48]=G-z>>3,j+=64}function Di(u,h,b){var j,D=h-32,M=qr,I=255-u[D-1];for(j=0;j<b;++j){var R,z=M,G=I+u[h-1];for(R=0;R<b;++R)u[h+R]=z[G+u[D+R]];h+=32}}function ou(u,h){Di(u,h,4)}function lu(u,h){Di(u,h,8)}function cu(u,h){Di(u,h,16)}function Xn(u,h){var b;for(b=0;16>b;++b)n(u,h+32*b,u,h-32,16)}function Ls(u,h){var b;for(b=16;0<b;--b)a(u,h,u[h-1],16),h+=32}function Ps(u,h,b){var j;for(j=0;16>j;++j)a(h,b+32*j,u,16)}function el(u,h){var b,j=16;for(b=0;16>b;++b)j+=u[h-1+32*b]+u[h+b-32];Ps(j>>5,u,h)}function hr(u,h){var b,j=8;for(b=0;16>b;++b)j+=u[h-1+32*b];Ps(j>>4,u,h)}function uu(u,h){var b,j=8;for(b=0;16>b;++b)j+=u[h+b-32];Ps(j>>4,u,h)}function tl(u,h){Ps(128,u,h)}function Qe(u,h,b){return u+2*h+b+2>>2}function du(u,h){var b,j=h-32;for(j=new Uint8Array([Qe(u[j-1],u[j+0],u[j+1]),Qe(u[j+0],u[j+1],u[j+2]),Qe(u[j+1],u[j+2],u[j+3]),Qe(u[j+2],u[j+3],u[j+4])]),b=0;4>b;++b)n(u,h+32*b,j,0,j.length)}function hu(u,h){var b=u[h-1],j=u[h-1+32],D=u[h-1+64],M=u[h-1+96];Ae(u,h+0,16843009*Qe(u[h-1-32],b,j)),Ae(u,h+32,16843009*Qe(b,j,D)),Ae(u,h+64,16843009*Qe(j,D,M)),Ae(u,h+96,16843009*Qe(D,M,M))}function On(u,h){var b,j=4;for(b=0;4>b;++b)j+=u[h+b-32]+u[h-1+32*b];for(j>>=3,b=0;4>b;++b)a(u,h+32*b,j,4)}function rl(u,h){var b=u[h-1+0],j=u[h-1+32],D=u[h-1+64],M=u[h-1-32],I=u[h+0-32],R=u[h+1-32],z=u[h+2-32],G=u[h+3-32];u[h+0+96]=Qe(j,D,u[h-1+96]),u[h+1+96]=u[h+0+64]=Qe(b,j,D),u[h+2+96]=u[h+1+64]=u[h+0+32]=Qe(M,b,j),u[h+3+96]=u[h+2+64]=u[h+1+32]=u[h+0+0]=Qe(I,M,b),u[h+3+64]=u[h+2+32]=u[h+1+0]=Qe(R,I,M),u[h+3+32]=u[h+2+0]=Qe(z,R,I),u[h+3+0]=Qe(G,z,R)}function nl(u,h){var b=u[h+1-32],j=u[h+2-32],D=u[h+3-32],M=u[h+4-32],I=u[h+5-32],R=u[h+6-32],z=u[h+7-32];u[h+0+0]=Qe(u[h+0-32],b,j),u[h+1+0]=u[h+0+32]=Qe(b,j,D),u[h+2+0]=u[h+1+32]=u[h+0+64]=Qe(j,D,M),u[h+3+0]=u[h+2+32]=u[h+1+64]=u[h+0+96]=Qe(D,M,I),u[h+3+32]=u[h+2+64]=u[h+1+96]=Qe(M,I,R),u[h+3+64]=u[h+2+96]=Qe(I,R,z),u[h+3+96]=Qe(R,z,z)}function Ds(u,h){var b=u[h-1+0],j=u[h-1+32],D=u[h-1+64],M=u[h-1-32],I=u[h+0-32],R=u[h+1-32],z=u[h+2-32],G=u[h+3-32];u[h+0+0]=u[h+1+64]=M+I+1>>1,u[h+1+0]=u[h+2+64]=I+R+1>>1,u[h+2+0]=u[h+3+64]=R+z+1>>1,u[h+3+0]=z+G+1>>1,u[h+0+96]=Qe(D,j,b),u[h+0+64]=Qe(j,b,M),u[h+0+32]=u[h+1+96]=Qe(b,M,I),u[h+1+32]=u[h+2+96]=Qe(M,I,R),u[h+2+32]=u[h+3+96]=Qe(I,R,z),u[h+3+32]=Qe(R,z,G)}function ki(u,h){var b=u[h+0-32],j=u[h+1-32],D=u[h+2-32],M=u[h+3-32],I=u[h+4-32],R=u[h+5-32],z=u[h+6-32],G=u[h+7-32];u[h+0+0]=b+j+1>>1,u[h+1+0]=u[h+0+64]=j+D+1>>1,u[h+2+0]=u[h+1+64]=D+M+1>>1,u[h+3+0]=u[h+2+64]=M+I+1>>1,u[h+0+32]=Qe(b,j,D),u[h+1+32]=u[h+0+96]=Qe(j,D,M),u[h+2+32]=u[h+1+96]=Qe(D,M,I),u[h+3+32]=u[h+2+96]=Qe(M,I,R),u[h+3+64]=Qe(I,R,z),u[h+3+96]=Qe(R,z,G)}function fu(u,h){var b=u[h-1+0],j=u[h-1+32],D=u[h-1+64],M=u[h-1+96];u[h+0+0]=b+j+1>>1,u[h+2+0]=u[h+0+32]=j+D+1>>1,u[h+2+32]=u[h+0+64]=D+M+1>>1,u[h+1+0]=Qe(b,j,D),u[h+3+0]=u[h+1+32]=Qe(j,D,M),u[h+3+32]=u[h+1+64]=Qe(D,M,M),u[h+3+64]=u[h+2+64]=u[h+0+96]=u[h+1+96]=u[h+2+96]=u[h+3+96]=M}function pu(u,h){var b=u[h-1+0],j=u[h-1+32],D=u[h-1+64],M=u[h-1+96],I=u[h-1-32],R=u[h+0-32],z=u[h+1-32],G=u[h+2-32];u[h+0+0]=u[h+2+32]=b+I+1>>1,u[h+0+32]=u[h+2+64]=j+b+1>>1,u[h+0+64]=u[h+2+96]=D+j+1>>1,u[h+0+96]=M+D+1>>1,u[h+3+0]=Qe(R,z,G),u[h+2+0]=Qe(I,R,z),u[h+1+0]=u[h+3+32]=Qe(b,I,R),u[h+1+32]=u[h+3+64]=Qe(j,b,I),u[h+1+64]=u[h+3+96]=Qe(D,j,b),u[h+1+96]=Qe(M,D,j)}function mu(u,h){var b;for(b=0;8>b;++b)n(u,h+32*b,u,h-32,8)}function Oi(u,h){var b;for(b=0;8>b;++b)a(u,h,u[h-1],8),h+=32}function qa(u,h,b){var j;for(j=0;8>j;++j)a(h,b+32*j,u,8)}function da(u,h){var b,j=8;for(b=0;8>b;++b)j+=u[h+b-32]+u[h-1+32*b];qa(j>>4,u,h)}function gu(u,h){var b,j=4;for(b=0;8>b;++b)j+=u[h+b-32];qa(j>>3,u,h)}function za(u,h){var b,j=4;for(b=0;8>b;++b)j+=u[h-1+32*b];qa(j>>3,u,h)}function Ti(u,h){qa(128,u,h)}function ks(u,h,b){var j=u[h-b],D=u[h+0],M=3*(D-j)+Nu[1020+u[h-2*b]-u[h+b]],I=gl[112+(M+4>>3)];u[h-b]=qr[255+j+gl[112+(M+3>>3)]],u[h+0]=qr[255+D-I]}function al(u,h,b,j){var D=u[h+0],M=u[h+b];return Jr[255+u[h-2*b]-u[h-b]]>j||Jr[255+M-D]>j}function sl(u,h,b,j){return 4*Jr[255+u[h-b]-u[h+0]]+Jr[255+u[h-2*b]-u[h+b]]<=j}function il(u,h,b,j,D){var M=u[h-3*b],I=u[h-2*b],R=u[h-b],z=u[h+0],G=u[h+b],ae=u[h+2*b],pe=u[h+3*b];return 4*Jr[255+R-z]+Jr[255+I-G]>j?0:Jr[255+u[h-4*b]-M]<=D&&Jr[255+M-I]<=D&&Jr[255+I-R]<=D&&Jr[255+pe-ae]<=D&&Jr[255+ae-G]<=D&&Jr[255+G-z]<=D}function ol(u,h,b,j){var D=2*j+1;for(j=0;16>j;++j)sl(u,h+j,b,D)&&ks(u,h+j,b)}function Tn(u,h,b,j){var D=2*j+1;for(j=0;16>j;++j)sl(u,h+j*b,1,D)&&ks(u,h+j*b,1)}function Jn(u,h,b,j){var D;for(D=3;0<D;--D)ol(u,h+=4*b,b,j)}function vu(u,h,b,j){var D;for(D=3;0<D;--D)Tn(u,h+=4,b,j)}function ha(u,h,b,j,D,M,I,R){for(M=2*M+1;0<D--;){if(il(u,h,b,M,I))if(al(u,h,b,R))ks(u,h,b);else{var z=u,G=h,ae=b,pe=z[G-2*ae],me=z[G-ae],le=z[G+0],Ne=z[G+ae],ve=z[G+2*ae],ie=27*(ye=Nu[1020+3*(le-me)+Nu[1020+pe-Ne]])+63>>7,oe=18*ye+63>>7,ye=9*ye+63>>7;z[G-3*ae]=qr[255+z[G-3*ae]+ye],z[G-2*ae]=qr[255+pe+oe],z[G-ae]=qr[255+me+ie],z[G+0]=qr[255+le-ie],z[G+ae]=qr[255+Ne-oe],z[G+2*ae]=qr[255+ve-ye]}h+=j}}function gn(u,h,b,j,D,M,I,R){for(M=2*M+1;0<D--;){if(il(u,h,b,M,I))if(al(u,h,b,R))ks(u,h,b);else{var z=u,G=h,ae=b,pe=z[G-ae],me=z[G+0],le=z[G+ae],Ne=gl[112+((ve=3*(me-pe))+4>>3)],ve=gl[112+(ve+3>>3)],ie=Ne+1>>1;z[G-2*ae]=qr[255+z[G-2*ae]+ie],z[G-ae]=qr[255+pe+ve],z[G+0]=qr[255+me-Ne],z[G+ae]=qr[255+le-ie]}h+=j}}function Mi(u,h,b,j,D,M){ha(u,h,b,1,16,j,D,M)}function Ua(u,h,b,j,D,M){ha(u,h,1,b,16,j,D,M)}function bu(u,h,b,j,D,M){var I;for(I=3;0<I;--I)gn(u,h+=4*b,b,1,16,j,D,M)}function Os(u,h,b,j,D,M){var I;for(I=3;0<I;--I)gn(u,h+=4,1,b,16,j,D,M)}function xu(u,h,b,j,D,M,I,R){ha(u,h,D,1,8,M,I,R),ha(b,j,D,1,8,M,I,R)}function Ii(u,h,b,j,D,M,I,R){ha(u,h,1,D,8,M,I,R),ha(b,j,1,D,8,M,I,R)}function Ri(u,h,b,j,D,M,I,R){gn(u,h+4*D,D,1,8,M,I,R),gn(b,j+4*D,D,1,8,M,I,R)}function ll(u,h,b,j,D,M,I,R){gn(u,h+4,1,D,8,M,I,R),gn(b,j+4,1,D,8,M,I,R)}function Ts(){this.ba=new un,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fi(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function $i(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function cl(){this.ua=0,this.Wa=new J,this.vb=new J,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new O}function yu(){this.xb=this.a=0,this.l=new Cs,this.ca=new un,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new cl,this.ab=0,this.gc=o(4,$i),this.Oc=0}function Ms(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Cs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Wa(u,h,b,j,D,M,I){for(u=u==null?0:u[h+0],h=0;h<I;++h)D[M+h]=u+b[j+h]&255,u=D[M+h]}function Bi(u,h,b,j,D,M,I){var R;if(u==null)Wa(null,null,b,j,D,M,I);else for(R=0;R<I;++R)D[M+R]=u[h+R]+b[j+R]&255}function fa(u,h,b,j,D,M,I){if(u==null)Wa(null,null,b,j,D,M,I);else{var R,z=u[h+0],G=z,ae=z;for(R=0;R<I;++R)G=ae+(z=u[h+R])-G,ae=b[j+R]+(-256&G?0>G?0:255:G)&255,G=z,D[M+R]=ae}}function qi(u,h,b,j){var D=h.width,M=h.o;if(t(u!=null&&h!=null),0>b||0>=j||b+j>M)return null;if(!u.Cc){if(u.ga==null){var I;if(u.ga=new Ms,(I=u.ga==null)||(I=h.width*h.o,t(u.Gb.length==0),u.Gb=s(I),u.Uc=0,u.Gb==null?I=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,I=1),I=!I),!I){I=u.ga;var R=u.Fa,z=u.P,G=u.qc,ae=u.mb,pe=u.nb,me=z+1,le=G-1,Ne=I.l;if(t(R!=null&&ae!=null&&h!=null),xa[0]=null,xa[1]=Wa,xa[2]=Bi,xa[3]=fa,I.ca=ae,I.tb=pe,I.c=h.width,I.i=h.height,t(0<I.c&&0<I.i),1>=G)h=0;else if(I.$a=R[z+0]>>0&3,I.Z=R[z+0]>>2&3,I.Lc=R[z+0]>>4&3,z=R[z+0]>>6&3,0>I.$a||1<I.$a||4<=I.Z||1<I.Lc||z)h=0;else if(Ne.put=En,Ne.ac=ir,Ne.bc=Ln,Ne.ma=I,Ne.width=h.width,Ne.height=h.height,Ne.Da=h.Da,Ne.v=h.v,Ne.va=h.va,Ne.j=h.j,Ne.o=h.o,I.$a)e:{t(I.$a==1),h=Gr();t:for(;;){if(h==null){h=0;break e}if(t(I!=null),I.mc=h,h.c=I.c,h.i=I.i,h.l=I.l,h.l.ma=I,h.l.width=I.c,h.l.height=I.i,h.a=0,Q(h.m,R,me,le),!kn(I.c,I.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&Kn(h.s)?(I.ic=1,R=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(R),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(I.ic=0,h=Ba(h,I.c)),!h))break t;h=1;break e}I.mc=null,h=0}else h=le>=I.c*I.i;I=!h}if(I)return null;u.ga.Lc!=1?u.Ga=0:j=M-b}t(u.ga!=null),t(b+j<=M);e:{if(h=(R=u.ga).c,M=R.l.o,R.$a==0){if(me=u.rc,le=u.Vc,Ne=u.Fa,z=u.P+1+b*h,G=u.mb,ae=u.nb+b*h,t(z<=u.P+u.qc),R.Z!=0)for(t(xa[R.Z]!=null),I=0;I<j;++I)xa[R.Z](me,le,Ne,z,G,ae,h),me=G,le=ae,ae+=h,z+=h;else for(I=0;I<j;++I)n(G,ae,Ne,z,h),me=G,le=ae,ae+=h,z+=h;u.rc=me,u.Vc=le}else{if(t(R.mc!=null),h=b+j,t((I=R.mc)!=null),t(h<=I.i),I.C>=h)h=1;else if(R.ic||he(),R.ic){R=I.V,me=I.Ba,le=I.c;var ve=I.i,ie=(Ne=1,z=I.$/le,G=I.$%le,ae=I.m,pe=I.s,I.$),oe=le*ve,ye=le*h,je=pe.wc,we=ie<ye?Yt(pe,G,z):null;t(ie<=oe),t(h<=ve),t(Kn(pe));t:for(;;){for(;!ae.h&&ie<ye;){if(G&je||(we=Yt(pe,G,z)),t(we!=null),se(ae),256>(ve=Er(we.G[0],we.H[0],ae)))R[me+ie]=ve,++ie,++G>=le&&(G=0,++z<=h&&!(z%16)&&fn(I,z));else{if(!(280>ve)){Ne=0;break t}ve=dn(ve-256,ae);var Fe,De=Er(we.G[4],we.H[4],ae);if(se(ae),!(ie>=(De=Pn(le,De=dn(De,ae)))&&oe-ie>=ve)){Ne=0;break t}for(Fe=0;Fe<ve;++Fe)R[me+ie+Fe]=R[me+ie+Fe-De];for(ie+=ve,G+=ve;G>=le;)G-=le,++z<=h&&!(z%16)&&fn(I,z);ie<ye&&G&je&&(we=Yt(pe,G,z))}t(ae.h==V(ae))}fn(I,z>h?h:z);break t}!Ne||ae.h&&ie<oe?(Ne=0,I.a=ae.h?5:3):I.$=ie,h=Ne}else h=pn(I,I.V,I.Ba,I.c,I.i,h,Ns);if(!h){j=0;break e}}b+j>=M&&(u.Cc=1),j=1}if(!j)return null;if(u.Cc&&((j=u.ga)!=null&&(j.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*D}function v(u,h,b,j,D,M){for(;0<D--;){var I,R=u,z=h+(b?1:0),G=u,ae=h+(b?0:3);for(I=0;I<j;++I){var pe=G[ae+4*I];pe!=255&&(pe*=32897,R[z+4*I+0]=R[z+4*I+0]*pe>>23,R[z+4*I+1]=R[z+4*I+1]*pe>>23,R[z+4*I+2]=R[z+4*I+2]*pe>>23)}h+=M}}function k(u,h,b,j,D){for(;0<j--;){var M;for(M=0;M<b;++M){var I=u[h+2*M+0],R=15&(G=u[h+2*M+1]),z=4369*R,G=(240&G|G>>4)*z>>16;u[h+2*M+0]=(240&I|I>>4)*z>>16&240|(15&I|I<<4)*z>>16>>4&15,u[h+2*M+1]=240&G|R}h+=D}}function K(u,h,b,j,D,M,I,R){var z,G,ae=255;for(G=0;G<D;++G){for(z=0;z<j;++z){var pe=u[h+z];M[I+4*z]=pe,ae&=pe}h+=b,I+=R}return ae!=255}function ne(u,h,b,j,D){var M;for(M=0;M<D;++M)b[j+M]=u[h+M]>>8}function he(){Xr=v,Ct=k,Et=K,Wt=ne}function be(u,h,b){C[u]=function(j,D,M,I,R,z,G,ae,pe,me,le,Ne,ve,ie,oe,ye,je){var we,Fe=je-1>>1,De=R[z+0]|G[ae+0]<<16,He=pe[me+0]|le[Ne+0]<<16;t(j!=null);var Me=3*De+He+131074>>2;for(h(j[D+0],255&Me,Me>>16,ve,ie),M!=null&&(Me=3*He+De+131074>>2,h(M[I+0],255&Me,Me>>16,oe,ye)),we=1;we<=Fe;++we){var gt=R[z+we]|G[ae+we]<<16,xt=pe[me+we]|le[Ne+we]<<16,ft=De+gt+He+xt+524296,ut=ft+2*(gt+He)>>3;Me=ut+De>>1,De=(ft=ft+2*(De+xt)>>3)+gt>>1,h(j[D+2*we-1],255&Me,Me>>16,ve,ie+(2*we-1)*b),h(j[D+2*we-0],255&De,De>>16,ve,ie+(2*we-0)*b),M!=null&&(Me=ft+He>>1,De=ut+xt>>1,h(M[I+2*we-1],255&Me,Me>>16,oe,ye+(2*we-1)*b),h(M[I+2*we+0],255&De,De>>16,oe,ye+(2*we+0)*b)),De=gt,He=xt}1&je||(Me=3*De+He+131074>>2,h(j[D+je-1],255&Me,Me>>16,ve,ie+(je-1)*b),M!=null&&(Me=3*He+De+131074>>2,h(M[I+je-1],255&Me,Me>>16,oe,ye+(je-1)*b)))}}function _e(){Zr[vl]=h1,Zr[bl]=lf,Zr[rf]=f1,Zr[xl]=cf,Zr[yl]=uf,Zr[ju]=df,Zr[nf]=p1,Zr[Su]=lf,Zr[_u]=cf,Zr[wl]=uf,Zr[Au]=df}function Re(u){return u&-16384?0>u?0:255:u>>m1}function We(u,h){return Re((19077*u>>8)+(26149*h>>8)-14234)}function at(u,h,b){return Re((19077*u>>8)-(6419*h>>8)-(13320*b>>8)+8708)}function rt(u,h){return Re((19077*u>>8)+(33050*h>>8)-17685)}function ht(u,h,b,j,D){j[D+0]=We(u,b),j[D+1]=at(u,h,b),j[D+2]=rt(u,h)}function Tt(u,h,b,j,D){j[D+0]=rt(u,h),j[D+1]=at(u,h,b),j[D+2]=We(u,b)}function Rt(u,h,b,j,D){var M=at(u,h,b);h=M<<3&224|rt(u,h)>>3,j[D+0]=248&We(u,b)|M>>5,j[D+1]=h}function Kt(u,h,b,j,D){var M=240&rt(u,h)|15;j[D+0]=240&We(u,b)|at(u,h,b)>>4,j[D+1]=M}function fr(u,h,b,j,D){j[D+0]=255,ht(u,h,b,j,D+1)}function rr(u,h,b,j,D){Tt(u,h,b,j,D),j[D+3]=255}function vn(u,h,b,j,D){ht(u,h,b,j,D),j[D+3]=255}function Br(u,h){return 0>u?0:u>h?h:u}function Mn(u,h,b){C[u]=function(j,D,M,I,R,z,G,ae,pe){for(var me=ae+(-2&pe)*b;ae!=me;)h(j[D+0],M[I+0],R[z+0],G,ae),h(j[D+1],M[I+0],R[z+0],G,ae+b),D+=2,++I,++z,ae+=2*b;1&pe&&h(j[D+0],M[I+0],R[z+0],G,ae)}}function ul(u,h,b){return b==0?u==0?h==0?6:5:h==0?4:0:b}function zi(u,h,b,j,D){switch(u>>>30){case 3:ea(h,b,j,D,0);break;case 2:Ut(h,b,j,D);break;case 1:Sr(h,b,j,D)}}function Ui(u,h){var b,j,D=h.M,M=h.Nb,I=u.oc,R=u.pc+40,z=u.oc,G=u.pc+584,ae=u.oc,pe=u.pc+600;for(b=0;16>b;++b)I[R+32*b-1]=129;for(b=0;8>b;++b)z[G+32*b-1]=129,ae[pe+32*b-1]=129;for(0<D?I[R-1-32]=z[G-1-32]=ae[pe-1-32]=129:(a(I,R-32-1,127,21),a(z,G-32-1,127,9),a(ae,pe-32-1,127,9)),j=0;j<u.za;++j){var me=h.ya[h.aa+j];if(0<j){for(b=-1;16>b;++b)n(I,R+32*b-4,I,R+32*b+12,4);for(b=-1;8>b;++b)n(z,G+32*b-4,z,G+32*b+4,4),n(ae,pe+32*b-4,ae,pe+32*b+4,4)}var le=u.Gd,Ne=u.Hd+j,ve=me.ad,ie=me.Hc;if(0<D&&(n(I,R-32,le[Ne].y,0,16),n(z,G-32,le[Ne].f,0,8),n(ae,pe-32,le[Ne].ea,0,8)),me.Za){var oe=I,ye=R-32+16;for(0<D&&(j>=u.za-1?a(oe,ye,le[Ne].y[15],4):n(oe,ye,le[Ne+1].y,0,4)),b=0;4>b;b++)oe[ye+128+b]=oe[ye+256+b]=oe[ye+384+b]=oe[ye+0+b];for(b=0;16>b;++b,ie<<=2)oe=I,ye=R+ff[b],bn[me.Ob[b]](oe,ye),zi(ie,ve,16*+b,oe,ye)}else if(oe=ul(j,D,me.Ob[0]),ba[oe](I,R),ie!=0)for(b=0;16>b;++b,ie<<=2)zi(ie,ve,16*+b,I,R+ff[b]);for(b=me.Gc,oe=ul(j,D,me.Dd),ra[oe](z,G),ra[oe](ae,pe),ie=ve,oe=z,ye=G,255&(me=b>>0)&&(170&me?Yi(ie,256,oe,ye):Yr(ie,256,oe,ye)),me=ae,ie=pe,255&(b>>=8)&&(170&b?Yi(ve,320,me,ie):Yr(ve,320,me,ie)),D<u.Ub-1&&(n(le[Ne].y,0,I,R+480,16),n(le[Ne].f,0,z,G+224,8),n(le[Ne].ea,0,ae,pe+224,8)),b=8*M*u.B,le=u.sa,Ne=u.ta+16*j+16*M*u.R,ve=u.qa,me=u.ra+8*j+b,ie=u.Ha,oe=u.Ia+8*j+b,b=0;16>b;++b)n(le,Ne+b*u.R,I,R+32*b,16);for(b=0;8>b;++b)n(ve,me+b*u.B,z,G+32*b,8),n(ie,oe+b*u.B,ae,pe+32*b,8)}}function Is(u,h,b,j,D,M,I,R,z){var G=[0],ae=[0],pe=0,me=z!=null?z.kd:0,le=z??new Fi;if(u==null||12>b)return 7;le.data=u,le.w=h,le.ha=b,h=[h],b=[b],le.gb=[le.gb];e:{var Ne=h,ve=b,ie=le.gb;if(t(u!=null),t(ve!=null),t(ie!=null),ie[0]=0,12<=ve[0]&&!r(u,Ne[0],"RIFF")){if(r(u,Ne[0]+8,"WEBP")){ie=3;break e}var oe=Pe(u,Ne[0]+4);if(12>oe||4294967286<oe){ie=3;break e}if(me&&oe>ve[0]-8){ie=7;break e}ie[0]=oe,Ne[0]+=12,ve[0]-=12}ie=0}if(ie!=0)return ie;for(oe=0<le.gb[0],b=b[0];;){e:{var ye=u;ve=h,ie=b;var je=G,we=ae,Fe=Ne=[0];if((Me=pe=[pe])[0]=0,8>ie[0])ie=7;else{if(!r(ye,ve[0],"VP8X")){if(Pe(ye,ve[0]+4)!=10){ie=3;break e}if(18>ie[0]){ie=7;break e}var De=Pe(ye,ve[0]+8),He=1+Te(ye,ve[0]+12);if(2147483648<=He*(ye=1+Te(ye,ve[0]+15))){ie=3;break e}Fe!=null&&(Fe[0]=De),je!=null&&(je[0]=He),we!=null&&(we[0]=ye),ve[0]+=18,ie[0]-=18,Me[0]=1}ie=0}}if(pe=pe[0],Ne=Ne[0],ie!=0)return ie;if(ve=!!(2&Ne),!oe&&pe)return 3;if(M!=null&&(M[0]=!!(16&Ne)),I!=null&&(I[0]=ve),R!=null&&(R[0]=0),I=G[0],Ne=ae[0],pe&&ve&&z==null){ie=0;break}if(4>b){ie=7;break}if(oe&&pe||!oe&&!pe&&!r(u,h[0],"ALPH")){b=[b],le.na=[le.na],le.P=[le.P],le.Sa=[le.Sa];e:{De=u,ie=h,oe=b;var Me=le.gb;je=le.na,we=le.P,Fe=le.Sa,He=22,t(De!=null),t(oe!=null),ye=ie[0];var gt=oe[0];for(t(je!=null),t(Fe!=null),je[0]=null,we[0]=null,Fe[0]=0;;){if(ie[0]=ye,oe[0]=gt,8>gt){ie=7;break e}var xt=Pe(De,ye+4);if(4294967286<xt){ie=3;break e}var ft=8+xt+1&-2;if(He+=ft,0<Me&&He>Me){ie=3;break e}if(!r(De,ye,"VP8 ")||!r(De,ye,"VP8L")){ie=0;break e}if(gt[0]<ft){ie=7;break e}r(De,ye,"ALPH")||(je[0]=De,we[0]=ye+8,Fe[0]=xt),ye+=ft,gt-=ft}}if(b=b[0],le.na=le.na[0],le.P=le.P[0],le.Sa=le.Sa[0],ie!=0)break}b=[b],le.Ja=[le.Ja],le.xa=[le.xa];e:if(Me=u,ie=h,oe=b,je=le.gb[0],we=le.Ja,Fe=le.xa,De=ie[0],ye=!r(Me,De,"VP8 "),He=!r(Me,De,"VP8L"),t(Me!=null),t(oe!=null),t(we!=null),t(Fe!=null),8>oe[0])ie=7;else{if(ye||He){if(Me=Pe(Me,De+4),12<=je&&Me>je-12){ie=3;break e}if(me&&Me>oe[0]-8){ie=7;break e}we[0]=Me,ie[0]+=8,oe[0]-=8,Fe[0]=He}else Fe[0]=5<=oe[0]&&Me[De+0]==47&&!(Me[De+4]>>5),we[0]=oe[0];ie=0}if(b=b[0],le.Ja=le.Ja[0],le.xa=le.xa[0],h=h[0],ie!=0)break;if(4294967286<le.Ja)return 3;if(R==null||ve||(R[0]=le.xa?2:1),I=[I],Ne=[Ne],le.xa){if(5>b){ie=7;break}R=I,me=Ne,ve=M,u==null||5>b?u=0:5<=b&&u[h+0]==47&&!(u[h+4]>>5)?(oe=[0],Me=[0],je=[0],Q(we=new P,u,h,b),Ve(we,oe,Me,je)?(R!=null&&(R[0]=oe[0]),me!=null&&(me[0]=Me[0]),ve!=null&&(ve[0]=je[0]),u=1):u=0):u=0}else{if(10>b){ie=7;break}R=Ne,u==null||10>b||!Yo(u,h+3,b-3)?u=0:(me=u[h+0]|u[h+1]<<8|u[h+2]<<16,ve=16383&(u[h+7]<<8|u[h+6]),u=16383&(u[h+9]<<8|u[h+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=le.Ja||!ve||!u?u=0:(I&&(I[0]=ve),R&&(R[0]=u),u=1))}if(!u||(I=I[0],Ne=Ne[0],pe&&(G[0]!=I||ae[0]!=Ne)))return 3;z!=null&&(z[0]=le,z.offset=h-z.w,t(4294967286>h-z.w),t(z.offset==z.ha-b));break}return ie==0||ie==7&&pe&&z==null?(M!=null&&(M[0]|=le.na!=null&&0<le.na.length),j!=null&&(j[0]=I),D!=null&&(D[0]=Ne),0):ie}function Wi(u,h,b){var j=h.width,D=h.height,M=0,I=0,R=j,z=D;if(h.Da=u!=null&&0<u.Da,h.Da&&(R=u.cd,z=u.bd,M=u.v,I=u.j,11>b||(M&=-2,I&=-2),0>M||0>I||0>=R||0>=z||M+R>j||I+z>D))return 0;if(h.v=M,h.j=I,h.va=M+R,h.o=I+z,h.U=R,h.T=z,h.da=u!=null&&0<u.da,h.da){if(!Ze(R,z,b=[u.ib],M=[u.hb]))return 0;h.ib=b[0],h.hb=M[0]}return h.ob=u!=null&&u.ob,h.Kb=u==null||!u.Sd,h.da&&(h.ob=h.ib<3*j/4&&h.hb<3*D/4,h.Kb=0),1}function Hi(u){if(u==null)return 2;if(11>u.S){var h=u.f.RGBA;h.fb+=(u.height-1)*h.A,h.A=-h.A}else h=u.f.kb,u=u.height,h.O+=(u-1)*h.fa,h.fa=-h.fa,h.N+=(u-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(u-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(u-1)*h.lb,h.lb=-h.lb);return 0}function Rs(u,h,b,j){if(j==null||0>=u||0>=h)return 2;if(b!=null){if(b.Da){var D=b.cd,M=b.bd,I=-2&b.v,R=-2&b.j;if(0>I||0>R||0>=D||0>=M||I+D>u||R+M>h)return 2;u=D,h=M}if(b.da){if(!Ze(u,h,D=[b.ib],M=[b.hb]))return 2;u=D[0],h=M[0]}}j.width=u,j.height=h;e:{var z=j.width,G=j.height;if(u=j.S,0>=z||0>=G||!(u>=vl&&13>u))u=2;else{if(0>=j.Rd&&j.sd==null){I=M=D=h=0;var ae=(R=z*pf[u])*G;if(11>u||(M=(G+1)/2*(h=(z+1)/2),u==12&&(I=(D=z)*G)),(G=s(ae+2*M+I))==null){u=1;break e}j.sd=G,11>u?((z=j.f.RGBA).eb=G,z.fb=0,z.A=R,z.size=ae):((z=j.f.kb).y=G,z.O=0,z.fa=R,z.Fd=ae,z.f=G,z.N=0+ae,z.Ab=h,z.Cd=M,z.ea=G,z.W=0+ae+M,z.Db=h,z.Ed=M,u==12&&(z.F=G,z.J=0+ae+2*M),z.Tc=I,z.lb=D)}if(h=1,D=j.S,M=j.width,I=j.height,D>=vl&&13>D)if(11>D)u=j.f.RGBA,h&=(R=Math.abs(u.A))*(I-1)+M<=u.size,h&=R>=M*pf[D],h&=u.eb!=null;else{u=j.f.kb,R=(M+1)/2,ae=(I+1)/2,z=Math.abs(u.fa),G=Math.abs(u.Ab);var pe=Math.abs(u.Db),me=Math.abs(u.lb),le=me*(I-1)+M;h&=z*(I-1)+M<=u.Fd,h&=G*(ae-1)+R<=u.Cd,h=(h&=pe*(ae-1)+R<=u.Ed)&z>=M&G>=R&pe>=R,h&=u.y!=null,h&=u.f!=null,h&=u.ea!=null,D==12&&(h&=me>=M,h&=le<=u.Tc,h&=u.F!=null)}else h=0;u=h?0:2}}return u!=0||b!=null&&b.fd&&(u=Hi(j)),u}var or=64,Fs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$s=24,Bs=32,Gi=8,Pr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ee("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(u){return u},C.Predictor2=function(u,h,b){return h[b+0]},C.Predictor3=function(u,h,b){return h[b+1]},C.Predictor4=function(u,h,b){return h[b-1]},C.Predictor5=function(u,h,b){return ke(ke(u,h[b+1]),h[b+0])},C.Predictor6=function(u,h,b){return ke(u,h[b-1])},C.Predictor7=function(u,h,b){return ke(u,h[b+0])},C.Predictor8=function(u,h,b){return ke(h[b-1],h[b+0])},C.Predictor9=function(u,h,b){return ke(h[b+0],h[b+1])},C.Predictor10=function(u,h,b){return ke(ke(u,h[b-1]),ke(h[b+0],h[b+1]))},C.Predictor11=function(u,h,b){var j=h[b+0];return 0>=et(j>>24&255,u>>24&255,(h=h[b-1])>>24&255)+et(j>>16&255,u>>16&255,h>>16&255)+et(j>>8&255,u>>8&255,h>>8&255)+et(255&j,255&u,255&h)?j:u},C.Predictor12=function(u,h,b){var j=h[b+0];return(Ue((u>>24&255)+(j>>24&255)-((h=h[b-1])>>24&255))<<24|Ue((u>>16&255)+(j>>16&255)-(h>>16&255))<<16|Ue((u>>8&255)+(j>>8&255)-(h>>8&255))<<8|Ue((255&u)+(255&j)-(255&h)))>>>0},C.Predictor13=function(u,h,b){var j=h[b-1];return(Xe((u=ke(u,h[b+0]))>>24&255,j>>24&255)<<24|Xe(u>>16&255,j>>16&255)<<16|Xe(u>>8&255,j>>8&255)<<8|Xe(u>>0&255,j>>0&255))>>>0};var wu=C.PredictorAdd0;C.PredictorAdd1=ot,Ee("Predictor2","PredictorAdd2"),Ee("Predictor3","PredictorAdd3"),Ee("Predictor4","PredictorAdd4"),Ee("Predictor5","PredictorAdd5"),Ee("Predictor6","PredictorAdd6"),Ee("Predictor7","PredictorAdd7"),Ee("Predictor8","PredictorAdd8"),Ee("Predictor9","PredictorAdd9"),Ee("Predictor10","PredictorAdd10"),Ee("Predictor11","PredictorAdd11"),Ee("Predictor12","PredictorAdd12"),Ee("Predictor13","PredictorAdd13");var Vi=C.PredictorAdd2;lt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var dl,Vr=C.ColorIndexInverseTransform,qs=C.MapARGB,hl=C.VP8LColorIndexInverseTransformAlpha,fl=C.MapAlpha,pa=C.VP8LPredictorsAdd=[];pa.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Ha,Dr,jr,ma,Zn,Qn,zs,ea,Ut,Yi,Sr,Yr,Us,pl,Ki,Ga,Va,ga,Ya,Ws,Ka,va,Xi,Kr,Xr,Ct,Et,Wt,Qt=s(511),ta=s(2041),Ji=s(225),Hs=s(767),ml=0,Nu=ta,gl=Ji,qr=Hs,Jr=Qt,vl=0,bl=1,rf=2,xl=3,yl=4,ju=5,nf=6,Su=7,_u=8,wl=9,Au=10,Zv=[2,3,7],Qv=[3,3,11],af=[280,256,256,256,40],e1=[0,1,1,1,0],t1=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],r1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],n1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],a1=8,Cu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Eu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Zi=null,s1=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],i1=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],o1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],l1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],c1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],u1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ba=[],bn=[],ra=[],d1=1,of=2,xa=[],Zr=[];be("UpsampleRgbLinePair",ht,3),be("UpsampleBgrLinePair",Tt,3),be("UpsampleRgbaLinePair",vn,4),be("UpsampleBgraLinePair",rr,4),be("UpsampleArgbLinePair",fr,4),be("UpsampleRgba4444LinePair",Kt,2),be("UpsampleRgb565LinePair",Rt,2);var h1=C.UpsampleRgbLinePair,f1=C.UpsampleBgrLinePair,lf=C.UpsampleRgbaLinePair,cf=C.UpsampleBgraLinePair,uf=C.UpsampleArgbLinePair,df=C.UpsampleRgba4444LinePair,p1=C.UpsampleRgb565LinePair,Nl=16,jl=1<<Nl-1,Qi=-227,Lu=482,m1=6,hf=0,g1=s(256),v1=s(256),b1=s(256),x1=s(256),y1=s(Lu-Qi),w1=s(Lu-Qi);Mn("YuvToRgbRow",ht,3),Mn("YuvToBgrRow",Tt,3),Mn("YuvToRgbaRow",vn,4),Mn("YuvToBgraRow",rr,4),Mn("YuvToArgbRow",fr,4),Mn("YuvToRgba4444Row",Kt,2),Mn("YuvToRgb565Row",Rt,2);var ff=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Sl=[0,2,8],N1=[8,7,6,4,4,2,2,2,1,1,1,1],j1=1;this.WebPDecodeRGBA=function(u,h,b,j,D){var M=bl,I=new Ts,R=new un;I.ba=R,R.S=M,R.width=[R.width],R.height=[R.height];var z=R.width,G=R.height,ae=new Yn;if(ae==null||u==null)var pe=2;else t(ae!=null),pe=Is(u,h,b,ae.width,ae.height,ae.Pd,ae.Qd,ae.format,null);if(pe!=0?z=0:(z!=null&&(z[0]=ae.width[0]),G!=null&&(G[0]=ae.height[0]),z=1),z){R.width=R.width[0],R.height=R.height[0],j!=null&&(j[0]=R.width),D!=null&&(D[0]=R.height);e:{if(j=new Cs,(D=new Fi).data=u,D.w=h,D.ha=b,D.kd=1,h=[0],t(D!=null),((u=Is(D.data,D.w,D.ha,null,null,null,h,null,D))==0||u==7)&&h[0]&&(u=4),(h=u)==0){if(t(I!=null),j.data=D.data,j.w=D.w+D.offset,j.ha=D.ha-D.offset,j.put=En,j.ac=ir,j.bc=Ln,j.ma=I,D.xa){if((u=Gr())==null){I=1;break e}if(function(me,le){var Ne=[0],ve=[0],ie=[0];t:for(;;){if(me==null)return 0;if(le==null)return me.a=2,0;if(me.l=le,me.a=0,Q(me.m,le.data,le.w,le.ha),!Ve(me.m,Ne,ve,ie)){me.a=3;break t}if(me.xb=of,le.width=Ne[0],le.height=ve[0],!kn(Ne[0],ve[0],1,me,null))break t;return 1}return t(me.a!=0),0}(u,j)){if(j=(h=Rs(j.width,j.height,I.Oa,I.ba))==0){t:{j=u;r:for(;;){if(j==null){j=0;break t}if(t(j.s.yc!=null),t(j.s.Ya!=null),t(0<j.s.Wb),t((b=j.l)!=null),t((D=b.ma)!=null),j.xb!=0){if(j.ca=D.ba,j.tb=D.tb,t(j.ca!=null),!Wi(D.Oa,b,xl)){j.a=2;break r}if(!Ba(j,b.width)||b.da)break r;if((b.da||vt(j.ca.S))&&he(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&he()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!Ge(j.s.vb,j.s.Wa.Xa)){j.a=1;break r}j.xb=0}if(!pn(j,j.V,j.Ba,j.c,j.i,b.o,ws))break r;D.Dc=j.Ma,j=1;break t}t(j.a!=0),j=0}j=!j}j&&(h=u.a)}else h=u.a}else{if((u=new ru)==null){I=1;break e}if(u.Fa=D.na,u.P=D.P,u.qc=D.Sa,Ko(u,j)){if((h=Rs(j.width,j.height,I.Oa,I.ba))==0){if(u.Aa=0,b=I.Oa,t((D=u)!=null),b!=null){if(0<(z=0>(z=b.Md)?0:100<z?255:255*z/100)){for(G=ae=0;4>G;++G)12>(pe=D.pb[G]).lc&&(pe.ia=z*N1[0>pe.lc?0:pe.lc]>>3),ae|=pe.ia;ae&&(alert("todo:VP8InitRandom"),D.ia=1)}D.Ga=b.Id,100<D.Ga?D.Ga=100:0>D.Ga&&(D.Ga=0)}nu(u,j)||(h=u.a)}}else h=u.a}h==0&&I.Oa!=null&&I.Oa.fd&&(h=Hi(I.ba))}I=h}M=I!=0?null:11>M?R.f.RGBA.eb:R.f.kb.y}else M=null;return M};var pf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(C,$){for(var H="",A=0;A<4;A++)H+=String.fromCharCode(C[$++]);return H}function p(C,$){return(C[$+0]<<0|C[$+1]<<8|C[$+2]<<16)>>>0}function m(C,$){return(C[$+0]<<0|C[$+1]<<8|C[$+2]<<16|C[$+3]<<24)>>>0}new c;var g=[0],f=[0],N=[],x=new c,S=e,y=function(C,$){var H={},A=0,O=!1,F=0,U=0;if(H.frames=[],!function(q,V,ee,se){for(var de=0;de<se;de++)if(q[V+de]!=ee.charCodeAt(de))return!0;return!1}(C,$,"RIFF",4)){for(m(C,$+=4),$+=8;$<C.length;){var te=d(C,$),re=m(C,$+=4);$+=4;var Z=re+(1&re);switch(te){case"VP8 ":case"VP8L":H.frames[A]===void 0&&(H.frames[A]={}),(X=H.frames[A]).src_off=O?U:$-8,X.src_size=F+re+8,A++,O&&(O=!1,F=0,U=0);break;case"VP8X":(X=H.header={}).feature_flags=C[$];var Q=$+4;X.canvas_width=1+p(C,Q),Q+=3,X.canvas_height=1+p(C,Q),Q+=3;break;case"ALPH":O=!0,F=Z+8,U=$-8;break;case"ANIM":(X=H.header).bgcolor=m(C,$),Q=$+4,X.loop_count=(ce=C)[(P=Q)+0]<<0|ce[P+1]<<8,Q+=2;break;case"ANMF":var Y,X;(X=H.frames[A]={}).offset_x=2*p(C,$),$+=3,X.offset_y=2*p(C,$),$+=3,X.width=1+p(C,$),$+=3,X.height=1+p(C,$),$+=3,X.duration=p(C,$),$+=3,Y=C[$++],X.dispose=1&Y,X.blend=Y>>1&1}te!="ANMF"&&($+=Z)}var ce,P;return H}}(S,0);y.response=S,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,_=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,g=[w.canvas_height],f=[w.canvas_width];for(var E=0;E<_.length&&_[E].blend!=0;E++);}var L=_[0],B=x.WebPDecodeRGBA(S,L.src_off,L.src_size,f,g);L.rgba=B,L.imgwidth=f[0],L.imgheight=g[0];for(var T=0;T<f[0]*g[0]*4;T++)N[T]=B[T];return this.width=f,this.height=g,this.data=N,this}(function(e){var t=function(){return typeof _d=="function"},r=function(g,f,N,x){var S=4,y=o;switch(x){case e.image_compression.FAST:S=1,y=s;break;case e.image_compression.MEDIUM:S=6,y=l;break;case e.image_compression.SLOW:S=9,y=c}g=n(g,f,N,y);var w=_d(g,{level:S});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(g,f,N,x){for(var S,y,w,_=g.length/f,E=new Uint8Array(g.length+_),L=p(),B=0;B<_;B+=1){if(w=B*f,S=g.subarray(w,w+f),x)E.set(x(S,N,y),w+B);else{for(var T,C=L.length,$=[];T<C;T+=1)$[T]=L[T](S,N,y);var H=m($.concat());E.set($[H],w+B)}y=S}return E},a=function(g){var f=Array.apply([],g);return f.unshift(0),f},s=function(g,f){var N,x=[],S=g.length;x[0]=1;for(var y=0;y<S;y+=1)N=g[y-f]||0,x[y+1]=g[y]-N+256&255;return x},o=function(g,f,N){var x,S=[],y=g.length;S[0]=2;for(var w=0;w<y;w+=1)x=N&&N[w]||0,S[w+1]=g[w]-x+256&255;return S},l=function(g,f,N){var x,S,y=[],w=g.length;y[0]=3;for(var _=0;_<w;_+=1)x=g[_-f]||0,S=N&&N[_]||0,y[_+1]=g[_]+256-(x+S>>>1)&255;return y},c=function(g,f,N){var x,S,y,w,_=[],E=g.length;_[0]=4;for(var L=0;L<E;L+=1)x=g[L-f]||0,S=N&&N[L]||0,y=N&&N[L-f]||0,w=d(x,S,y),_[L+1]=g[L]-w+256&255;return _},d=function(g,f,N){if(g===f&&f===N)return g;var x=Math.abs(f-N),S=Math.abs(g-N),y=Math.abs(g+f-N-N);return x<=S&&x<=y?g:S<=y?f:N},p=function(){return[a,s,o,l,c]},m=function(g){var f=g.map(function(N){return N.reduce(function(x,S){return x+Math.abs(S)},0)});return f.indexOf(Math.min.apply(null,f))};e.processPNG=function(g,f,N,x){var S,y,w,_,E,L,B,T,C,$,H,A,O,F,U,te=this.decode.FLATE_DECODE,re="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(w=new fb(g)).imgData,y=w.bits,S=w.colorSpace,E=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){C=(T=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,H=new Uint8Array(C*w.colors),$=new Uint8Array(C);var Z,Q=w.pixelBitlength-w.bits;for(F=0,U=0;F<C;F++){for(O=T[F],Z=0;Z<Q;)H[U++]=O>>>Z&255,Z+=w.bits;$[F]=O>>>Z&255}}if(w.bits===16){C=(T=new Uint32Array(w.decodePixels().buffer)).length,H=new Uint8Array(C*(32/w.pixelBitlength)*w.colors),$=new Uint8Array(C*(32/w.pixelBitlength)),A=w.colors>1,F=0,U=0;for(var Y=0;F<C;)O=T[F++],H[U++]=O>>>0&255,A&&(H[U++]=O>>>16&255,O=T[F++],H[U++]=O>>>0&255),$[Y++]=O>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(g=r(H,w.width*w.colors,w.colors,x),B=r($,w.width,1,x)):(g=H,B=$,te=void 0)}if(w.colorType===3&&(S=this.color_spaces.INDEXED,L=w.palette,w.transparency.indexed)){var X=w.transparency.indexed,ce=0;for(F=0,C=X.length;F<C;++F)ce+=X[F];if((ce/=255)===C-1&&X.indexOf(0)!==-1)_=[X.indexOf(0)];else if(ce!==C){for(T=w.decodePixels(),$=new Uint8Array(T.length),F=0,C=T.length;F<C;F++)$[F]=X[T[F]];B=r($,w.width,1)}}var P=function(q){var V;switch(q){case e.image_compression.FAST:V=11;break;case e.image_compression.MEDIUM:V=13;break;case e.image_compression.SLOW:V=14;break;default:V=12}return V}(x);return te===this.decode.FLATE_DECODE&&(re="/Predictor "+P+" "),re+="/Colors "+E+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:N,data:g,index:f,filter:te,decodeParameters:re,transparency:_,palette:L,sMask:B,predictor:P,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:S}}}})(Ye.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new pb(t),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},p=new Xu(100).encode(d,100);return e.processJPEG.call(this,p,r,n,a)},e.processGIF87A=e.processGIF89A}(Ye.API),wn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wn.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){_t.log("bit decode error:"+r)}},wn.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},wn.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},wn.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},wn.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,d=s>>15?255:0,p=n*this.width*4+4*a;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=o,this.data[p+3]=d}this.pos+=e}},wn.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,p=a*this.width*4+4*s;this.data[p]=d,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=255}this.pos+=e}},wn.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},wn.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},wn.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new wn(t,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},d=new Xu(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}}(Ye.API),np.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new np(t),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},d=new Xu(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}}(Ye.API),Ye.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var p=n[d],m=n[d+1],g=n[d+2],f=n[d+3];s[l++]=p,s[l++]=m,s[l++]=g,o[c++]=f}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:N,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ye.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Js=Ye.API,Bl=Js.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,p=d.fof?d.fof:1,m=t.doKerning!==!1,g=0,f=e.length,N=0,x=l[0]||c,S=[];for(r=0;r<f;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?S.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(g=m&&dt(d[n])==="object"&&!isNaN(parseInt(d[n][N],10))?d[n][N]/p:0,S.push((l[n]||x)/c+g)),N=n;return S},Qf=Js.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Js.processArabic&&(e=Js.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Bl.apply(this,arguments).reduce(function(s,o){return s+o},0)},ep=function(e,t,r,n){for(var a=[],s=0,o=e.length,l=0;s!==o&&l+t[s]<r;)l+=t[s],s++;a.push(e.slice(0,s));var c=s;for(l=0;s!==o;)l+t[s]>n&&(a.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},tp=function(e,t,r){r||(r={});var n,a,s,o,l,c,d,p=[],m=[p],g=r.textIndent||0,f=0,N=0,x=e.split(" "),S=Bl.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(E){(E=E.split(/\s*\n/)).length>1?w=w.concat(E.map(function(L,B){return(B&&L.length?`
`:"")+L})):w.push(E[0])}),x=w,c=Qf.apply(this,[y,r])}for(s=0,o=x.length;s<o;s++){var _=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),_=1),g+f+(N=(a=Bl.apply(this,[n,r])).reduce(function(E,L){return E+L},0))>t||_){if(N>t){for(l=ep.apply(this,[n,a,t-(g+f),t]),p.push(l.shift()),p=[l.pop()];l.length;)m.push([l.shift()]);N=a.slice(n.length-(p[0]?p[0].length:0)).reduce(function(E,L){return E+L},0)}else p=[n];m.push(p),g=N+c,f=S}else p.push(n),g+=f+N,f=S}return d=c?function(E,L){return(L?y:"")+E.join(" ")}:function(E){return E.join(" ")},m.map(d)},Js.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat(tp.apply(this,[n[l],o,s]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(m){return"0x"+parseInt(m,10).toString(16)},o=e.__fontmetrics__.compress=function(m){var g,f,N,x,S=["{"];for(var y in m){if(g=m[y],isNaN(parseInt(y,10))?f="'"+y+"'":(y=parseInt(y,10),f=(f=s(y).slice(2)).slice(0,-1)+n[f.slice(-1)]),typeof g=="number")g<0?(N=s(g).slice(3),x="-"):(N=s(g).slice(2),x=""),N=x+N.slice(0,-1)+n[N.slice(-1)];else{if(dt(g)!=="object")throw new Error("Don't know what to do with value type "+dt(g)+".");N=o(g)}S.push(f+N)}return S.push("}"),S.join("")},l=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,f,N,x,S={},y=1,w=S,_=[],E="",L="",B=m.length-1,T=1;T<B;T+=1)(x=m[T])=="'"?g?(N=g.join(""),g=void 0):g=[]:g?g.push(x):x=="{"?(_.push([w,N]),w={},N=void 0):x=="}"?((f=_.pop())[0][f[1]]=w,N=void 0,w=f[0]):x=="-"?y=-1:N===void 0?r.hasOwnProperty(x)?(E+=r[x],N=parseInt(E,16)*y,y=1,E=""):E+=x:r.hasOwnProperty(x)?(L+=r[x],w[N]=parseInt(L,16)*y,y=1,N=void 0,L=""):L+=x;return S},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var g=m.font,f=p.Unicode[g.postScriptName];f&&(g.metadata.Unicode={},g.metadata.Unicode.widths=f.widths,g.metadata.Unicode.kerning=f.kerning);var N=d.Unicode[g.postScriptName];N&&(g.metadata.Unicode.encoding=N,g.encoding=N.codePages[0])}])}(Ye.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(po(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(Ye),function(e){function t(){return(Ke.canvg?Promise.resolve(Ke.canvg):xd(()=>import("./index.es-CUk3EGg0.js"),__vite__mapDeps([0,1,2,3,4]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Ye.API.addSvgAsImage=function(r,n,a,s,o,l,c,d){if(isNaN(n)||isNaN(a))throw _t.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw _t.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=o;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return t().then(function(N){return N.fromString(m,r,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(g)}).then(function(){f.addImage(p.toDataURL("image/jpeg",1),n,a,s,o,c,d)})}}(),Ye.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Ye.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,p=0,m=0;function g(N,x){var S,y=!1;for(S=0;S<N.length;S+=1)N[S]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=l.length;for(m=0;m<f;m+=1)r[l[m]].value=r[l[m]].defaultValue,r[l[m]].explicitSet=!1}if(dt(e)==="object"){for(a in e)if(s=e[a],g(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&g(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(d=0;d<s.length;d+=1)if(n=!0,s[d].length===1&&typeof s[d][0]=="number")c.push(String(s[d]-1));else if(s[d].length>1){for(p=0;p<s[d].length;p+=1)typeof s[d][p]!="number"&&(n=!1);n===!0&&c.push([s[d][0]-1,s[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,x=[];for(N in r)r[N].explicitSet===!0&&(r[N].type==="name"?x.push("/"+N+" /"+r[N].value):x.push("/"+N+" "+r[N].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Ye.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],p=[""],m=0,g=s.length;m<g;++m){if(l=o.metadata.characterToGlyph(s.charCodeAt(m)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return p.join("");l=l.toString(16),p.push(d[4-l.length],l)}return p.join("")},n=function(s){var o,l,c,d,p,m,g;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,g=(l=Object.keys(s).sort(function(f,N){return f-N})).length;m<g;m++)o=l[m],c.length>=100&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(d=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,d=o.newObject,p=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,g=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",N=0;N<g.length;N++)f+=String.fromCharCode(g[N]);var x=d();p({data:f,addLength1:!0,objectId:x}),c("endobj");var S=d();p({data:n(l.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ti(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+ti(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+S+" 0 R"),c("/BaseFont /"+ti(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,d=o.newObject,p=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,g="",f=0;f<m.length;f++)g+=String.fromCharCode(m[f]);var N=d();p({data:g,addLength1:!0,objectId:N}),c("endobj");var x=d();p({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var S=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+N+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+ti(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+ti(l.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,d=s.y,p=s.options||{},m=s.mutex||{},g=m.pdfEscape,f=m.activeFontKey,N=m.fonts,x=f,S="",y=0,w="",_=N[x].encoding;if(N[x].encoding!=="Identity-H")return{text:l,x:c,y:d,options:p,mutex:m};for(w=l,x=f,Array.isArray(l)&&(w=l[0]),y=0;y<w.length;y+=1)N[x].metadata.hasOwnProperty("cmap")&&(o=N[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),o||w[y].charCodeAt(0)<256&&N[x].metadata.hasOwnProperty("Unicode")?S+=w[y]:S+="";var E="";return parseInt(x.slice(1))<14||_==="WinAnsiEncoding"?E=g(S,x).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(E=r(S,N[x])),m.isHex=!0,{text:E,x:c,y:d,options:p,mutex:m}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(Ye),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Ye.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,o,l,c,d,p,m=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,_=0;this.__bidiEngine__={};var E=function(A){var O=A.charCodeAt(),F=O>>8,U=x[F];return U!==void 0?m[256*U+(255&O)]:F===252||F===253?"AL":y.test(F)?"L":F===8?"R":"N"},L=function(A){for(var O,F=0;F<A.length;F++){if((O=E(A.charAt(F)))==="L")return!1;if(O==="R")return!0}return!1},B=function(A,O,F,U){var te,re,Z,Q,Y=O[U];switch(Y){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(Y="AN");break;case"AL":w=!0,Y="R";break;case"WS":Y="N";break;case"CS":U<1||U+1>=O.length||(te=F[U-1])!=="EN"&&te!=="AN"||(re=O[U+1])!=="EN"&&re!=="AN"?Y="N":w&&(re="AN"),Y=re===te?re:"N";break;case"ES":Y=(te=U>0?F[U-1]:"B")==="EN"&&U+1<O.length&&O[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&F[U-1]==="EN"){Y="EN";break}if(w){Y="N";break}for(Z=U+1,Q=O.length;Z<Q&&O[Z]==="ET";)Z++;Y=Z<Q&&O[Z]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(Q=O.length,Z=U+1;Z<Q&&O[Z]==="NSM";)Z++;if(Z<Q){var X=A[U],ce=X>=1425&&X<=2303||X===64286;if(te=O[Z],ce&&(te==="R"||te==="AL")){Y="R";break}}}Y=U<1||(te=O[U-1])==="B"?"N":F[U-1];break;case"B":w=!1,a=!0,Y=_;break;case"S":s=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":Y="N"}return Y},T=function(A,O,F){var U=A.split("");return F&&C(U,F,{hiLevel:_}),U.reverse(),O&&O.reverse(),U.join("")},C=function(A,O,F){var U,te,re,Z,Q,Y=-1,X=A.length,ce=0,P=[],q=_?f:g,V=[];for(w=!1,a=!1,s=!1,te=0;te<X;te++)V[te]=E(A[te]);for(re=0;re<X;re++){if(Q=ce,P[re]=B(A,V,P,re),U=240&(ce=q[Q][N[P[re]]]),ce&=15,O[re]=Z=q[ce][5],U>0)if(U===16){for(te=Y;te<re;te++)O[te]=1;Y=-1}else Y=-1;if(q[ce][6])Y===-1&&(Y=re);else if(Y>-1){for(te=Y;te<re;te++)O[te]=Z;Y=-1}V[re]==="B"&&(O[re]=0),F.hiLevel|=Z}s&&function(ee,se,de){for(var fe=0;fe<de;fe++)if(ee[fe]==="S"){se[fe]=_;for(var ge=fe-1;ge>=0&&ee[ge]==="WS";ge--)se[ge]=_}}(V,O,X)},$=function(A,O,F,U,te){if(!(te.hiLevel<A)){if(A===1&&_===1&&!a)return O.reverse(),void(F&&F.reverse());for(var re,Z,Q,Y,X=O.length,ce=0;ce<X;){if(U[ce]>=A){for(Q=ce+1;Q<X&&U[Q]>=A;)Q++;for(Y=ce,Z=Q-1;Y<Z;Y++,Z--)re=O[Y],O[Y]=O[Z],O[Z]=re,F&&(re=F[Y],F[Y]=F[Z],F[Z]=re);ce=Q}ce++}}},H=function(A,O,F){var U=A.split(""),te={hiLevel:_};return F||(F=[]),C(U,F,te),function(re,Z,Q){if(Q.hiLevel!==0&&p)for(var Y,X=0;X<re.length;X++)Z[X]===1&&(Y=S.indexOf(re[X]))>=0&&(re[X]=S[Y+1])}(U,F,te),$(2,U,O,F,te),$(1,U,O,F,te),U.join("")};return this.__bidiEngine__.doBidiReorder=function(A,O,F){if(function(te,re){if(re)for(var Z=0;Z<te.length;Z++)re[Z]=Z;l===void 0&&(l=L(te)),d===void 0&&(d=L(te))}(A,O),o||!c||d)if(o&&c&&l^d)_=l?1:0,A=T(A,O,F);else if(!o&&c&&d)_=l?1:0,A=H(A,O,F),A=T(A,O);else if(!o||l||c||d){if(o&&!c&&l^d)A=T(A,O),l?(_=0,A=H(A,O,F)):(_=1,A=H(A,O,F),A=T(A,O));else if(o&&l&&!c&&d)_=1,A=H(A,O,F),A=T(A,O);else if(!o&&!c&&l^d){var U=p;l?(_=1,A=H(A,O,F),_=0,p=!1,A=H(A,O,F),p=U):(_=0,A=H(A,O,F),A=T(A,O),_=1,p=!1,A=H(A,O,F),p=U,A=T(A,O))}}else _=0,A=H(A,O,F);else _=l?1:0,A=H(A,O,F);return A},this.__bidiEngine__.setOptions=function(A){A&&(o=A.isInputVisual,c=A.isOutputVisual,l=A.isInputRtl,d=A.isOutputRtl,p=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Ye),Ye.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Pa(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Lb(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new mb(this.contents),this.head=new vb(this),this.name=new Nb(this),this.cmap=new $g(this),this.toUnicode={},this.hhea=new bb(this),this.maxp=new jb(this),this.hmtx=new Sb(this),this.post=new yb(this),this.os2=new xb(this),this.loca=new Eb(this),this.glyf=new _b(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var An,Pa=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),mb=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,o,l,c,d,p,m,g,f,N,x;for(x in f=Object.keys(r).length,c=Math.log(2),m=16*Math.floor(Math.log(f)/c),o=Math.floor(m/c),p=16*f-m,(a=new Pa).writeInt(this.scalarType),a.writeShort(f),a.writeShort(m),a.writeShort(o),a.writeShort(p),s=16*f,d=a.pos+s,l=null,N=[],r)for(g=r[x],a.writeString(x),a.writeInt(e(g)),a.writeInt(d),a.writeInt(g.length),N=N.concat(g),x==="head"&&(l=d),d+=g.length;d%4;)N.push(0),d++;return a.write(N),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,o;for(r=Bg.call(r);r.length%4;)r.push(0);for(s=new Pa(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),gb={}.hasOwnProperty,Gn=function(e,t){for(var r in t)gb.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};An=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var vb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Gn(t,An),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Pa).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),ap=function(){function e(t,r){var n,a,s,o,l,c,d,p,m,g,f,N,x,S,y,w,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(f=t.readUInt16(),g=f/2,t.pos+=6,s=function(){var E,L;for(L=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)L.push(t.readUInt16());return L}(),t.pos+=2,x=function(){var E,L;for(L=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)L.push(t.readUInt16());return L}(),d=function(){var E,L;for(L=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)L.push(t.readUInt16());return L}(),p=function(){var E,L;for(L=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)L.push(t.readUInt16());return L}(),a=(this.length-t.pos+this.offset)/2,l=function(){var E,L;for(L=[],c=E=0;0<=a?E<a:E>a;c=0<=a?++E:--E)L.push(t.readUInt16());return L}(),c=y=0,_=s.length;y<_;c=++y)for(S=s[c],n=w=N=x[c];N<=S?w<=S:w>=S;n=N<=S?++w:--w)p[c]===0?o=n+d[c]:(o=l[p[c]/2+(n-N)-(g-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}t.pos=m}return e.encode=function(t,r){var n,a,s,o,l,c,d,p,m,g,f,N,x,S,y,w,_,E,L,B,T,C,$,H,A,O,F,U,te,re,Z,Q,Y,X,ce,P,q,V,ee,se,de,fe,ge,Ae,Se,Te;switch(U=new Pa,o=Object.keys(t).sort(function(Pe,Ge){return Pe-Ge}),r){case"macroman":for(x=0,S=function(){var Pe=[];for(N=0;N<256;++N)Pe.push(0);return Pe}(),w={0:0},s={},te=0,Y=o.length;te<Y;te++)w[ge=t[a=o[te]]]==null&&(w[ge]=++x),s[a]={old:t[a],new:w[t[a]]},S[a]=w[t[a]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(S),{charMap:s,subtable:U.data,maxGlyphID:x+1};case"unicode":for(O=[],m=[],_=0,w={},n={},y=d=null,re=0,X=o.length;re<X;re++)w[L=t[a=o[re]]]==null&&(w[L]=++_),n[a]={old:L,new:w[L]},l=w[L]-a,y!=null&&l===d||(y&&m.push(y),O.push(a),d=l),y=a;for(y&&m.push(y),m.push(65535),O.push(65535),H=2*($=O.length),C=2*Math.pow(Math.log($)/Math.LN2,2),g=Math.log(C/2)/Math.LN2,T=2*$-C,c=[],B=[],f=[],N=Z=0,ce=O.length;Z<ce;N=++Z){if(A=O[N],p=m[N],A===65535){c.push(0),B.push(0);break}if(A-(F=n[A].new)>=32768)for(c.push(0),B.push(2*(f.length+$-N)),a=Q=A;A<=p?Q<=p:Q>=p;a=A<=p?++Q:--Q)f.push(n[a].new);else c.push(F-A),B.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*$+2*f.length),U.writeUInt16(0),U.writeUInt16(H),U.writeUInt16(C),U.writeUInt16(g),U.writeUInt16(T),de=0,P=m.length;de<P;de++)a=m[de],U.writeUInt16(a);for(U.writeUInt16(0),fe=0,q=O.length;fe<q;fe++)a=O[fe],U.writeUInt16(a);for(Ae=0,V=c.length;Ae<V;Ae++)l=c[Ae],U.writeUInt16(l);for(Se=0,ee=B.length;Se<ee;Se++)E=B[Se],U.writeUInt16(E);for(Te=0,se=f.length;Te<se;Te++)x=f[Te],U.writeUInt16(x);return{charMap:n,subtable:U.data,maxGlyphID:_+1}}},e}(),$g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Gn(t,An),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new ap(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=ap.encode(r,n),(s=new Pa).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),bb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Gn(t,An),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),xb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Gn(t,An),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),yb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Gn(t,An),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),wb=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Nb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Gn(t,An),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,o,l,c,d,p,m,g,f;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=m=0,g=a.length;m<g;o=++m)s=a[o],r.pos=s.offset,p=r.readString(s.length),l=new wb(p,s),d[f=s.nameID]==null&&(d[f]=[]),d[s.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),jb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Gn(t,An),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),Sb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Gn(t,An),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,o,l,c,d;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,m;for(m=[],n=p=0;0<=s?p<s:p>s;n=0<=s?++p:--p)m.push(r.readInt16());return m}(),this.widths=(function(){var p,m,g,f;for(f=[],p=0,m=(g=this.metrics).length;p<m;p++)o=g[p],f.push(o.advance);return f}).call(this),a=this.widths[this.widths.length-1],d=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)d.push(this.widths.push(a));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Bg=[].slice,_b=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Gn(t,An),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,o,l,c,d,p,m,g;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(s=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Pa(n.read(s))).readShort(),p=c.readShort(),g=c.readShort(),d=c.readShort(),m=c.readShort(),this.cache[r]=l===-1?new Cb(c,p,g,d,m):new Ab(c,l,p,g,d,m),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,o,l,c,d;for(l=[],o=[],c=0,d=n.length;c<d;c++)s=r[n[c]],o.push(l.length),s&&(l=l.concat(s.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),Ab=function(){function e(t,r,n,a,s,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Cb=function(){function e(t,r,n,a,s){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Pa(Bg.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Eb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Gn(t,An),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,o=0,l=0;l<a.length;++l)if(a[l]=s,o<n.length&&n[o]==l){++o,a[l]=s;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(s+=d)}for(var p=new Array(4*a.length),m=0;m<a.length;++m)p[4*m+3]=255&a[m],p[4*m+2]=(65280&a[m])>>8,p[4*m+1]=(16711680&a[m])>>16,p[4*m]=(4278190080&a[m])>>24;return p},t}(),Lb=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[s=t[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,o,l,c,d,p,m,g,f,N,x,S,y;for(a in n=$g.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},y=n.charMap)f[(c=y[a]).old]=c.new;for(N in g=n.maxGlyphID,o)N in f||(f[N]=g++);return p=function(w){var _,E;for(_ in E={},w)E[w[_]]=_;return E}(f),m=Object.keys(p).sort(function(w,_){return w-_}),x=function(){var w,_,E;for(E=[],w=0,_=m.length;w<_;w++)l=m[w],E.push(p[l]);return E}(),s=this.font.glyf.encode(o,x,f),d=this.font.loca.encode(s.offsets,x),S={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},e}();Ye.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)n=r[l],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+r},t}();function Pb(){const[e,t]=W.useState({title:"",description:"",event_date:"",start_time:"",end_time:"",location:"",school_level:"elementary",category:"",visibility:"public",estimated_budget:"",share_public:!1}),[r,n]=W.useState(""),[a,s]=W.useState(""),[o,l]=W.useState(!1),[c,d]=W.useState({type:"",season:"",audience:"",theme:"",goal:""}),[p,m]=W.useState(""),g=w=>{const{name:_,value:E,type:L,checked:B}=w.target;t(T=>({...T,[_]:L==="checkbox"?B:E}))},f=async w=>{w.preventDefault(),n(""),s("");const{data:{session:_},error:E}=await ze.auth.getSession();if(E||!(_!=null&&_.access_token)){s("Authentication error. Please log in again.");return}try{const L=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_.access_token}`},body:JSON.stringify(e)}),B=await L.json();if(!L.ok){s(B.error||"Failed to create event");return}n("Event created successfully!"),t({title:"",description:"",event_date:"",start_time:"",end_time:"",location:"",school_level:"elementary",category:"",visibility:"public",estimated_budget:"",share_public:!1})}catch(L){s("Failed to connect to server."),console.error("Submit error:",L)}},N=w=>{const{name:_,value:E}=w.target;d(L=>({...L,[_]:E}))},x=async()=>{m("Generating...");try{const{data:w}=await xr.post("/api/ai/generate-event",c);m(w.result)}catch{m("AI generation failed.")}},S=()=>{try{const w=JSON.parse(p);t(_=>({..._,title:w.title||"",description:w.description||"",event_date:w.event_date||"",category:w.category||"",school_level:w.school_level||"",location:w.location||"",estimated_budget:w.estimated_budget||""}))}catch(w){alert("Failed to parse AI response. Please review the output and enter manually."),console.error("Parse error:",w)}},y=()=>{try{const w=JSON.parse(p),_=new Ye;_.setFontSize(14),_.text(w.title||"Event Summary",10,20),_.setFontSize(10),_.text(`Date: ${w.event_date||"TBD"}`,10,30),_.text(`Category: ${w.category||"N/A"}`,10,36),_.text(`School Level: ${w.school_level||"N/A"}`,10,42),_.setFontSize(12),_.text("Description:",10,52),_.setFontSize(10),_.text(_.splitTextToSize(w.description||"",180),10,58),_.setFontSize(12),_.text("Planning Tasks:",10,100),(w.tasks||[]).forEach((L,B)=>{_.text(`- ${L}`,10,106+B*6)}),_.save(`${w.title||"event-summary"}.pdf`)}catch(w){alert("Unable to print. Please check that the AI returned a valid result."),console.error("Print error:",w)}};return i.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Create New Event"}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsx("input",{name:"title",value:e.title,onChange:g,placeholder:"Event Title",className:"w-full border p-2",required:!0}),i.jsx("textarea",{name:"description",value:e.description,onChange:g,placeholder:"Description",className:"w-full border p-2"}),i.jsx("input",{type:"date",name:"event_date",value:e.event_date,onChange:g,className:"w-full border p-2",required:!0}),i.jsx("input",{type:"time",name:"start_time",value:e.start_time,onChange:g,className:"w-full border p-2"}),i.jsx("input",{type:"time",name:"end_time",value:e.end_time,onChange:g,className:"w-full border p-2"}),i.jsx("input",{name:"location",value:e.location,onChange:g,placeholder:"Location",className:"w-full border p-2"}),i.jsxs("select",{name:"school_level",value:e.school_level,onChange:g,className:"w-full border p-2",children:[i.jsx("option",{value:"elementary",children:"Elementary"}),i.jsx("option",{value:"upper_elementary",children:"Upper Elementary"}),i.jsx("option",{value:"middle",children:"Middle"}),i.jsx("option",{value:"junior_high",children:"Junior High"}),i.jsx("option",{value:"high",children:"High School"})]}),i.jsx("input",{name:"category",value:e.category,onChange:g,placeholder:"Category (e.g., Fundraiser)",className:"w-full border p-2"}),i.jsx("input",{name:"estimated_budget",value:e.estimated_budget,onChange:g,placeholder:"Estimated Budget",className:"w-full border p-2"}),i.jsxs("select",{name:"visibility",value:e.visibility,onChange:g,className:"w-full border p-2",children:[i.jsx("option",{value:"public",children:"Public"}),i.jsx("option",{value:"private",children:"Private"})]}),i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",name:"share_public",checked:e.share_public,onChange:g}),i.jsx("span",{children:"Share this event to the PTO Connect Idea Library"})]}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:"Create Event"}),r&&i.jsx("p",{className:"text-green-600",children:r}),a&&i.jsx("p",{className:"text-red-600",children:a})]}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("button",{onClick:()=>l(!o),className:"text-blue-600 underline",children:o?"Hide AI Event Assistant":"Use AI Event Assistant"}),o&&i.jsxs("div",{className:"mt-4 space-y-3",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"AI Event Assistant"}),i.jsx("input",{type:"text",name:"type",placeholder:"Event Type",value:c.type,onChange:N,className:"w-full border p-2"}),i.jsx("input",{type:"text",name:"season",placeholder:"Season or Month",value:c.season,onChange:N,className:"w-full border p-2"}),i.jsx("input",{type:"text",name:"audience",placeholder:"Audience (e.g. families, teachers)",value:c.audience,onChange:N,className:"w-full border p-2"}),i.jsx("input",{type:"text",name:"theme",placeholder:"Theme (e.g. fall festival)",value:c.theme,onChange:N,className:"w-full border p-2"}),i.jsx("input",{type:"text",name:"goal",placeholder:"Goal (e.g. raise funds for library)",value:c.goal,onChange:N,className:"w-full border p-2"}),i.jsx("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Generate Event Idea"}),p&&i.jsxs("div",{className:"border p-4 mt-4 bg-gray-50 rounded",children:[i.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:p}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx("button",{onClick:S,className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600",children:"Use This Event"}),i.jsx("button",{onClick:y,className:"bg-gray-600 text-white px-3 py-1 rounded hover:bg-gray-700",children:"Print Summary"})]})]})]})]})]})}function Db(){const[e,t]=W.useState(null),[r,n]=W.useState(""),a=Hn(),{id:s}=a2();W.useEffect(()=>{async function c(){const{data:d,error:p}=await ze.from("events").select("*").eq("id",s).single();p?(n("Failed to load event."),console.error(p)):t(d)}c()},[s]);const o=c=>{const{name:d,value:p,type:m,checked:g}=c.target;t(f=>({...f,[d]:m==="checkbox"?g:p}))},l=async c=>{c.preventDefault();const{error:d}=await ze.from("events").update({title:e.title,event_date:e.event_date,category:e.category,school_level:e.school_level,share_public:e.share_public}).eq("id",s);d?(n("Update failed."),console.error(d)):a("/events")};return e?i.jsxs("div",{className:"max-w-xl mx-auto mt-8 p-6 bg-white shadow rounded",children:[i.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Edit Event"}),r&&i.jsx("p",{className:"text-red-500 mb-2",children:r}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsx("input",{type:"text",name:"title",value:e.title,onChange:o,className:"w-full border p-2 rounded",required:!0}),i.jsx("input",{type:"date",name:"event_date",value:e.event_date,onChange:o,className:"w-full border p-2 rounded",required:!0}),i.jsxs("select",{name:"category",value:e.category,onChange:o,className:"w-full border p-2 rounded",required:!0,children:[i.jsx("option",{value:"Fundraiser",children:"Fundraiser"}),i.jsx("option",{value:"Meeting",children:"Meeting"}),i.jsx("option",{value:"Celebration",children:"Celebration"}),i.jsx("option",{value:"Other",children:"Other"})]}),i.jsxs("select",{name:"school_level",value:e.school_level,onChange:o,className:"w-full border p-2 rounded",required:!0,children:[i.jsx("option",{value:"Elementary",children:"Elementary"}),i.jsx("option",{value:"Middle",children:"Middle"}),i.jsx("option",{value:"High",children:"High"})]}),i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",name:"share_public",checked:e.share_public,onChange:o}),i.jsx("span",{children:"Share Publicly"})]}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Save Changes"})]})]}):i.jsx("p",{className:"p-4",children:"Loading event..."})}function kb(e,t){if(dt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qg(e){var t=kb(e,"string");return dt(t)=="symbol"?t:t+""}function as(e,t,r){return(t=qg(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sp(Object(r),!0).forEach(function(n){as(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jc(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Wn(e,t){if(e==null)return{};var r,n,a=jc(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ip(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qg(n.key),n)}}function tr(e,t,r){return t&&ip(e.prototype,t),r&&ip(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oc(e){return oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oc(e)}function zg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zg=function(){return!!e})()}function Ob(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tb(e,t){if(t&&(dt(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ob(e)}function wr(e,t,r){return t=oc(t),Tb(e,zg()?Reflect.construct(t,r||[],oc(e).constructor):t.apply(e,r))}function lc(e,t){return lc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},lc(e,t)}function Nr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lc(e,t)}function Ug(e){if(Array.isArray(e))return e}function Mb(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(p){d=!0,a=p}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function kd(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oh(e,t){if(e){if(typeof e=="string")return kd(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kd(e,t):void 0}}function Wg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function us(e,t){return Ug(e)||Mb(e,t)||oh(e,t)||Wg()}function Hg(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Hg(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function qt(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Hg(e))&&(n&&(n+=" "),n+=t);return n}function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bt.apply(null,arguments)}var Ib=function(e,t,r,n,a,s,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,a,s,o,l],p=0;c=new Error(t.replace(/%s/g,function(){return d[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Rb=Ib;const yo=Rr(Rb);var Fb=function(){};function $b(e,t){var r={};return Object.keys(e).forEach(function(n){r[Zl(n)]=Fb}),r}function op(e,t){return e[t]!==void 0}function Zl(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Bb(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function qb(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,lc(e,t)}function Gg(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function Vg(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function Yg(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}Gg.__suppressDeprecationWarning=!0;Vg.__suppressDeprecationWarning=!0;Yg.__suppressDeprecationWarning=!0;function zb(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,a=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?a="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(a="UNSAFE_componentWillUpdate"),r!==null||n!==null||a!==null){var s=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(a!==null?`
  `+a:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=Gg,t.componentWillReceiveProps=Vg),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Yg;var l=t.componentDidUpdate;t.componentDidUpdate=function(d,p,m){var g=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:m;l.call(this,d,p,g)}}return e}var Ub="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function Kg(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",a=Bb(e),s=Object.keys(t),o=s.map(Zl);a||!r.length||yo(!1);var l=function(d){qb(p,d);function p(){for(var g,f=arguments.length,N=new Array(f),x=0;x<f;x++)N[x]=arguments[x];g=d.call.apply(d,[this].concat(N))||this,g.handlers=Object.create(null),s.forEach(function(y){var w=t[y],_=function(L){if(g.props[w]){var B;g._notifying=!0;for(var T=arguments.length,C=new Array(T>1?T-1:0),$=1;$<T;$++)C[$-1]=arguments[$];(B=g.props)[w].apply(B,[L].concat(C)),g._notifying=!1}g.unmounted||g.setState(function(H){var A,O=H.values;return{values:Bt(Object.create(null),O,(A={},A[y]=L,A))}})};g.handlers[w]=_}),r.length&&(g.attachRef=function(y){g.inner=y});var S=Object.create(null);return s.forEach(function(y){S[y]=g.props[Zl(y)]}),g.state={values:S,prevProps:{}},g}var m=p.prototype;return m.shouldComponentUpdate=function(){return!this._notifying},p.getDerivedStateFromProps=function(f,N){var x=N.values,S=N.prevProps,y={values:Bt(Object.create(null),x),prevProps:{}};return s.forEach(function(w){y.prevProps[w]=f[w],!op(f,w)&&op(S,w)&&(y.values[w]=f[Zl(w)])}),y},m.componentWillUnmount=function(){this.unmounted=!0},m.render=function(){var f=this,N=this.props,x=N.innerRef,S=jc(N,["innerRef"]);o.forEach(function(w){delete S[w]});var y={};return s.forEach(function(w){var _=f.props[w];y[w]=_!==void 0?_:f.state.values[w]}),ue.createElement(e,Bt({},S,y,this.handlers,{ref:x||this.attachRef}))},p}(ue.Component);zb(l),l.displayName="Uncontrolled("+n+")",l.propTypes=Bt({innerRef:function(){}},$b(t)),r.forEach(function(d){l.prototype[d]=function(){var m;return(m=this.inner)[d].apply(m,arguments)}});var c=l;return ue.forwardRef&&(c=ue.forwardRef(function(d,p){return ue.createElement(l,Bt({},d,{innerRef:p,__source:{fileName:Ub,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,p,m){return p===void 0&&(p={}),Kg(d,Bt({},t,p),m)},c}var cc="milliseconds",wo="seconds",No="minutes",jo="hours",ds="day",li="week",So="month",hs="year",fs="decade",ps="century",Xg={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},Wb={month:1,year:12,decade:10*12,century:100*12};function Hb(e){return[31,Gb(e),31,30,31,30,31,31,30,31,30,31]}function Gb(e){return e%4===0&&e%100!==0||e%400===0?29:28}function Sn(e,t,r){switch(e=new Date(e),r){case cc:case wo:case No:case jo:case ds:case li:return Vb(e,t*Xg[r]);case So:case hs:case fs:case ps:return Yb(e,t*Wb[r])}throw new TypeError('Invalid units: "'+r+'"')}function Vb(e,t){var r=new Date(+e+t);return Kb(e,r)}function Yb(e,t){var r=e.getFullYear(),n=e.getMonth(),a=e.getDate(),s=r*12+n+t,o=Math.trunc(s/12),l=s%12,c=Math.min(a,Hb(o)[l]),d=new Date(e);return d.setFullYear(o),d.setDate(1),d.setMonth(l),d.setDate(c),d}function Kb(e,t){var r=e.getTimezoneOffset(),n=t.getTimezoneOffset(),a=n-r;return new Date(+t+a*Xg.minutes)}function _o(e,t,r){return Sn(e,-t,r)}function ur(e,t,r){switch(e=new Date(e),t){case ps:case fs:case hs:e=dc(e,0);case So:e=t0(e,1);case li:case ds:e=Eo(e,0);case jo:e=ci(e,0);case No:e=Co(e,0);case wo:e=Ao(e,0)}return t===fs&&(e=_o(e,ms(e)%10,"year")),t===ps&&(e=_o(e,ms(e)%100,"year")),t===li&&(e=r0(e,0,r)),e}function uc(e,t,r){switch(e=new Date(e),e=ur(e,t,r),t){case ps:case fs:case hs:case So:case li:e=Sn(e,1,t),e=_o(e,1,ds),e.setHours(23,59,59,999);break;case ds:e.setHours(23,59,59,999);break;case jo:case No:case wo:e=Sn(e,1,t),e=_o(e,1,cc)}return e}var mi=vi(function(e,t){return e===t}),lh=vi(function(e,t){return e!==t}),Sc=vi(function(e,t){return e>t}),To=vi(function(e,t){return e>=t}),ch=vi(function(e,t){return e<t}),gi=vi(function(e,t){return e<=t});function Jg(){return new Date(Math.min.apply(Math,arguments))}function Zg(){return new Date(Math.max.apply(Math,arguments))}function Qg(e,t,r,n){return n=n||"day",(!t||To(e,t,n))&&(!r||gi(e,r,n))}var Ao=Ma("Milliseconds"),Co=Ma("Seconds"),ci=Ma("Minutes"),Eo=Ma("Hours"),e0=Ma("Day"),t0=Ma("Date"),dc=Ma("Month"),ms=Ma("FullYear");function Xb(e,t){return t===void 0?ms(ur(e,fs)):Sn(e,t+10,hs)}function Jb(e,t){return t===void 0?ms(ur(e,ps)):Sn(e,t+100,hs)}function r0(e,t,r){var n=(e0(e)+7-(r||0))%7;return t===void 0?n:Sn(e,t-n,ds)}function Zb(e,t,r,n){var a,s,o;switch(r){case cc:case wo:case No:case jo:case ds:case li:a=t.getTime()-e.getTime();break;case So:case hs:case fs:case ps:a=(ms(t)-ms(e))*12+dc(t)-dc(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case cc:s=1;break;case wo:s=1e3;break;case No:s=1e3*60;break;case jo:s=1e3*60*60;break;case ds:s=1e3*60*60*24;break;case li:s=1e3*60*60*24*7;break;case So:s=1;break;case hs:s=12;break;case fs:s=120;break;case ps:s=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return o=a/s,n?o:Math.round(o)}function Ma(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,n){if(n===void 0)return r["get"+e]();var a=new Date(r);return a["set"+e](n),t&&a["get"+e]()!=n&&(e==="Hours"||n>=t&&a.getHours()-r.getHours()<Math.floor(n/t))&&a["set"+e](n+t),a}}function vi(e){return function(t,r,n){return e(+ur(t,n),+ur(r,n))}}const lp=Object.freeze(Object.defineProperty({__proto__:null,add:Sn,century:Jb,date:t0,day:e0,decade:Xb,diff:Zb,endOf:uc,eq:mi,gt:Sc,gte:To,hours:Eo,inRange:Qg,lt:ch,lte:gi,max:Zg,milliseconds:Ao,min:Jg,minutes:ci,month:dc,neq:lh,seconds:Co,startOf:ur,subtract:_o,weekday:r0,year:ms},Symbol.toStringTag,{value:"Module"}));function Qb(e){if(Array.isArray(e))return kd(e)}function n0(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ex(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ql(e){return Qb(e)||n0(e)||oh(e)||ex()}function tx(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}var a0=tx;function rx(e,t){return e===t||e!==e&&t!==t}var Mo=rx,nx=typeof nn=="object"&&nn&&nn.Object===Object&&nn,s0=nx,ax=s0,sx=typeof self=="object"&&self&&self.Object===Object&&self,ix=ax||sx||Function("return this")(),Vn=ix,ox=Vn,lx=ox.Symbol,bi=lx,cp=bi,i0=Object.prototype,cx=i0.hasOwnProperty,ux=i0.toString,io=cp?cp.toStringTag:void 0;function dx(e){var t=cx.call(e,io),r=e[io];try{e[io]=void 0;var n=!0}catch{}var a=ux.call(e);return n&&(t?e[io]=r:delete e[io]),a}var hx=dx,fx=Object.prototype,px=fx.toString;function mx(e){return px.call(e)}var gx=mx,up=bi,vx=hx,bx=gx,xx="[object Null]",yx="[object Undefined]",dp=up?up.toStringTag:void 0;function wx(e){return e==null?e===void 0?yx:xx:dp&&dp in Object(e)?vx(e):bx(e)}var xi=wx;function Nx(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ua=Nx,jx=xi,Sx=ua,_x="[object AsyncFunction]",Ax="[object Function]",Cx="[object GeneratorFunction]",Ex="[object Proxy]";function Lx(e){if(!Sx(e))return!1;var t=jx(e);return t==Ax||t==Cx||t==_x||t==Ex}var uh=Lx,Px=9007199254740991;function Dx(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Px}var dh=Dx,kx=uh,Ox=dh;function Tx(e){return e!=null&&Ox(e.length)&&!kx(e)}var Io=Tx,Mx=9007199254740991,Ix=/^(?:0|[1-9]\d*)$/;function Rx(e,t){var r=typeof e;return t=t??Mx,!!t&&(r=="number"||r!="symbol"&&Ix.test(e))&&e>-1&&e%1==0&&e<t}var hh=Rx,Fx=Mo,$x=Io,Bx=hh,qx=ua;function zx(e,t,r){if(!qx(r))return!1;var n=typeof t;return(n=="number"?$x(r)&&Bx(t,r.length):n=="string"&&t in r)?Fx(r[t],e):!1}var _c=zx,Ux=/\s/;function Wx(e){for(var t=e.length;t--&&Ux.test(e.charAt(t)););return t}var Hx=Wx,Gx=Hx,Vx=/^\s+/;function Yx(e){return e&&e.slice(0,Gx(e)+1).replace(Vx,"")}var Kx=Yx;function Xx(e){return e!=null&&typeof e=="object"}var Ia=Xx,Jx=xi,Zx=Ia,Qx="[object Symbol]";function e5(e){return typeof e=="symbol"||Zx(e)&&Jx(e)==Qx}var Ro=e5,t5=Kx,hp=ua,r5=Ro,fp=NaN,n5=/^[-+]0x[0-9a-f]+$/i,a5=/^0b[01]+$/i,s5=/^0o[0-7]+$/i,i5=parseInt;function o5(e){if(typeof e=="number")return e;if(r5(e))return fp;if(hp(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=hp(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=t5(e);var r=a5.test(e);return r||s5.test(e)?i5(e.slice(2),r?2:8):n5.test(e)?fp:+e}var l5=o5,c5=l5,pp=1/0,u5=17976931348623157e292;function d5(e){if(!e)return e===0?e:0;if(e=c5(e),e===pp||e===-pp){var t=e<0?-1:1;return t*u5}return e===e?e:0}var o0=d5,h5=o0;function f5(e){var t=h5(e),r=t%1;return t===t?r?t-r:t:0}var l0=f5,p5=a0,m5=_c,g5=l0,v5=Math.ceil,b5=Math.max;function x5(e,t,r){(r?m5(e,t,r):t===void 0)?t=1:t=b5(g5(t),0);var n=e==null?0:e.length;if(!n||t<1)return[];for(var a=0,s=0,o=Array(v5(n/t));a<n;)o[s++]=p5(e,a,a+=t);return o}var y5=x5;const w5=Rr(y5);function Fo(e){return e&&e.ownerDocument||document}function N5(e){var t=Fo(e);return t&&t.defaultView||window}function j5(e,t){return N5(e).getComputedStyle(e,t)}var S5=/([A-Z])/g;function _5(e){return e.replace(S5,"-$1").toLowerCase()}var A5=/^ms-/;function ql(e){return _5(e).replace(A5,"-ms-")}var C5=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function E5(e){return!!(e&&C5.test(e))}function ri(e,t){var r="",n="";if(typeof t=="string")return e.style.getPropertyValue(ql(t))||j5(e).getPropertyValue(ql(t));Object.keys(t).forEach(function(a){var s=t[a];!s&&s!==0?e.style.removeProperty(ql(a)):E5(a)?n+=a+"("+s+") ":r+=ql(a)+": "+s+";"}),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r}function Lo(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function L5(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function fh(e){return"window"in e&&e.window===e?e:L5(e)&&e.defaultView||!1}function c0(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(n,a){var s=fh(n);if(a===void 0)return s?s[e]:n[t];s?s.scrollTo(s[e],a):n[t]=a}return r}const u0=c0("pageXOffset"),d0=c0("pageYOffset");function ls(e){var t=Fo(e),r={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return!n||!Lo(n,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+d0(n)-(n.clientTop||0),left:r.left+u0(n)-(n.clientLeft||0),width:r.width,height:r.height}),r}var P5=function(t){return!!t&&"offsetParent"in t};function D5(e){for(var t=Fo(e),r=e&&e.offsetParent;P5(r)&&r.nodeName!=="HTML"&&ri(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var k5=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function h0(e,t){var r={top:0,left:0},n;if(ri(e,"position")==="fixed")n=e.getBoundingClientRect();else{var a=t||D5(e);n=ls(e),k5(a)!=="html"&&(r=ls(a));var s=String(ri(a,"borderTopWidth")||0);r.top+=parseInt(s,10)-d0(a)||0;var o=String(ri(a,"borderLeftWidth")||0);r.left+=parseInt(o,10)-u0(a)||0}var l=String(ri(e,"marginTop")||0),c=String(ri(e,"marginLeft")||0);return Bt({},n,{top:n.top-r.top-(parseInt(l,10)||0),left:n.left-r.left-(parseInt(c,10)||0)})}const ph=!!(typeof window<"u"&&window.document&&window.document.createElement);var mp=new Date().getTime();function O5(e){var t=new Date().getTime(),r=Math.max(0,16-(t-mp)),n=setTimeout(e,r);return mp=t,n}var T5=["","webkit","moz","o","ms"],Od="clearTimeout",Td=O5,gp=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};ph&&T5.some(function(e){var t=gp(e,"request");return t in window&&(Od=gp(e,"cancel"),Td=function(n){return window[t](n)}),!!Td});var vp=function(t){typeof window[Od]=="function"&&window[Od](t)},f0=Td,Ju;function M5(e,t){if(!Ju){var r=document.body,n=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;Ju=function(s,o){return n.call(s,o)}}return Ju(e,t)}var I5=Function.prototype.bind.call(Function.prototype.call,[].slice);function R5(e,t){return I5(e.querySelectorAll(t))}var Md=!1,Id=!1;try{var Zu={get passive(){return Md=!0},get once(){return Id=Md=!0}};ph&&(window.addEventListener("test",Zu,Zu),window.removeEventListener("test",Zu,!0))}catch{}function F5(e,t,r,n){if(n&&typeof n!="boolean"&&!Id){var a=n.once,s=n.capture,o=r;!Id&&a&&(o=r.__once||function l(c){this.removeEventListener(t,l,s),r.call(this,c)},r.__once=o),e.addEventListener(t,o,Md?n:s)}e.addEventListener(t,r,n)}function $5(e){const t=W.useRef(e);return W.useEffect(()=>{t.current=e},[e]),t}function bp(e){const t=$5(e);return W.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function xp(){return W.useState(null)}function B5(){const e=W.useRef(!0),t=W.useRef(()=>e.current);return W.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function q5(e){const t=B5();return[e[0],W.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var Tr="top",an="bottom",sn="right",Mr="left",mh="auto",$o=[Tr,an,sn,Mr],ui="start",Po="end",z5="clippingParents",p0="viewport",oo="popper",U5="reference",yp=$o.reduce(function(e,t){return e.concat([t+"-"+ui,t+"-"+Po])},[]),gh=[].concat($o,[mh]).reduce(function(e,t){return e.concat([t,t+"-"+ui,t+"-"+Po])},[]),W5="beforeRead",H5="read",G5="afterRead",V5="beforeMain",Y5="main",K5="afterMain",X5="beforeWrite",J5="write",Z5="afterWrite",Q5=[W5,H5,G5,V5,Y5,K5,X5,J5,Z5];function zn(e){return e.split("-")[0]}function Hr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function gs(e){var t=Hr(e).Element;return e instanceof t||e instanceof Element}function Un(e){var t=Hr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function vh(e){if(typeof ShadowRoot>"u")return!1;var t=Hr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var cs=Math.max,hc=Math.min,di=Math.round;function Rd(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function m0(){return!/^((?!chrome|android).)*safari/i.test(Rd())}function hi(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),a=1,s=1;t&&Un(e)&&(a=e.offsetWidth>0&&di(n.width)/e.offsetWidth||1,s=e.offsetHeight>0&&di(n.height)/e.offsetHeight||1);var o=gs(e)?Hr(e):window,l=o.visualViewport,c=!m0()&&r,d=(n.left+(c&&l?l.offsetLeft:0))/a,p=(n.top+(c&&l?l.offsetTop:0))/s,m=n.width/a,g=n.height/s;return{width:m,height:g,top:p,right:d+m,bottom:p+g,left:d,x:d,y:p}}function bh(e){var t=hi(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function g0(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&vh(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Da(e){return e?(e.nodeName||"").toLowerCase():null}function ca(e){return Hr(e).getComputedStyle(e)}function ey(e){return["table","td","th"].indexOf(Da(e))>=0}function Ra(e){return((gs(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ac(e){return Da(e)==="html"?e:e.assignedSlot||e.parentNode||(vh(e)?e.host:null)||Ra(e)}function wp(e){return!Un(e)||ca(e).position==="fixed"?null:e.offsetParent}function ty(e){var t=/firefox/i.test(Rd()),r=/Trident/i.test(Rd());if(r&&Un(e)){var n=ca(e);if(n.position==="fixed")return null}var a=Ac(e);for(vh(a)&&(a=a.host);Un(a)&&["html","body"].indexOf(Da(a))<0;){var s=ca(a);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return a;a=a.parentNode}return null}function Bo(e){for(var t=Hr(e),r=wp(e);r&&ey(r)&&ca(r).position==="static";)r=wp(r);return r&&(Da(r)==="html"||Da(r)==="body"&&ca(r).position==="static")?t:r||ty(e)||t}function xh(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function mo(e,t,r){return cs(e,hc(t,r))}function ry(e,t,r){var n=mo(e,t,r);return n>r?r:n}function v0(){return{top:0,right:0,bottom:0,left:0}}function b0(e){return Object.assign({},v0(),e)}function x0(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var ny=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,b0(typeof t!="number"?t:x0(t,$o))};function ay(e){var t,r=e.state,n=e.name,a=e.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,l=zn(r.placement),c=xh(l),d=[Mr,sn].indexOf(l)>=0,p=d?"height":"width";if(!(!s||!o)){var m=ny(a.padding,r),g=bh(s),f=c==="y"?Tr:Mr,N=c==="y"?an:sn,x=r.rects.reference[p]+r.rects.reference[c]-o[c]-r.rects.popper[p],S=o[c]-r.rects.reference[c],y=Bo(s),w=y?c==="y"?y.clientHeight||0:y.clientWidth||0:0,_=x/2-S/2,E=m[f],L=w-g[p]-m[N],B=w/2-g[p]/2+_,T=mo(E,B,L),C=c;r.modifiersData[n]=(t={},t[C]=T,t.centerOffset=T-B,t)}}function sy(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||g0(t.elements.popper,a)&&(t.elements.arrow=a))}const iy={name:"arrow",enabled:!0,phase:"main",fn:ay,effect:sy,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fi(e){return e.split("-")[1]}var oy={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ly(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:di(r*a)/a||0,y:di(n*a)/a||0}}function Np(e){var t,r=e.popper,n=e.popperRect,a=e.placement,s=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,p=e.roundOffsets,m=e.isFixed,g=o.x,f=g===void 0?0:g,N=o.y,x=N===void 0?0:N,S=typeof p=="function"?p({x:f,y:x}):{x:f,y:x};f=S.x,x=S.y;var y=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),_=Mr,E=Tr,L=window;if(d){var B=Bo(r),T="clientHeight",C="clientWidth";if(B===Hr(r)&&(B=Ra(r),ca(B).position!=="static"&&l==="absolute"&&(T="scrollHeight",C="scrollWidth")),B=B,a===Tr||(a===Mr||a===sn)&&s===Po){E=an;var $=m&&B===L&&L.visualViewport?L.visualViewport.height:B[T];x-=$-n.height,x*=c?1:-1}if(a===Mr||(a===Tr||a===an)&&s===Po){_=sn;var H=m&&B===L&&L.visualViewport?L.visualViewport.width:B[C];f-=H-n.width,f*=c?1:-1}}var A=Object.assign({position:l},d&&oy),O=p===!0?ly({x:f,y:x},Hr(r)):{x:f,y:x};if(f=O.x,x=O.y,c){var F;return Object.assign({},A,(F={},F[E]=w?"0":"",F[_]=y?"0":"",F.transform=(L.devicePixelRatio||1)<=1?"translate("+f+"px, "+x+"px)":"translate3d("+f+"px, "+x+"px, 0)",F))}return Object.assign({},A,(t={},t[E]=w?x+"px":"",t[_]=y?f+"px":"",t.transform="",t))}function cy(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,s=r.adaptive,o=s===void 0?!0:s,l=r.roundOffsets,c=l===void 0?!0:l,d={placement:zn(t.placement),variation:fi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Np(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Np(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const uy={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:cy,data:{}};var zl={passive:!0};function dy(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,s=a===void 0?!0:a,o=n.resize,l=o===void 0?!0:o,c=Hr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&d.forEach(function(p){p.addEventListener("scroll",r.update,zl)}),l&&c.addEventListener("resize",r.update,zl),function(){s&&d.forEach(function(p){p.removeEventListener("scroll",r.update,zl)}),l&&c.removeEventListener("resize",r.update,zl)}}const hy={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dy,data:{}};var fy={left:"right",right:"left",bottom:"top",top:"bottom"};function ec(e){return e.replace(/left|right|bottom|top/g,function(t){return fy[t]})}var py={start:"end",end:"start"};function jp(e){return e.replace(/start|end/g,function(t){return py[t]})}function yh(e){var t=Hr(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function wh(e){return hi(Ra(e)).left+yh(e).scrollLeft}function my(e,t){var r=Hr(e),n=Ra(e),a=r.visualViewport,s=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){s=a.width,o=a.height;var d=m0();(d||!d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:s,height:o,x:l+wh(e),y:c}}function gy(e){var t,r=Ra(e),n=yh(e),a=(t=e.ownerDocument)==null?void 0:t.body,s=cs(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=cs(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),l=-n.scrollLeft+wh(e),c=-n.scrollTop;return ca(a||r).direction==="rtl"&&(l+=cs(r.clientWidth,a?a.clientWidth:0)-s),{width:s,height:o,x:l,y:c}}function Nh(e){var t=ca(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function y0(e){return["html","body","#document"].indexOf(Da(e))>=0?e.ownerDocument.body:Un(e)&&Nh(e)?e:y0(Ac(e))}function go(e,t){var r;t===void 0&&(t=[]);var n=y0(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=Hr(n),o=a?[s].concat(s.visualViewport||[],Nh(n)?n:[]):n,l=t.concat(o);return a?l:l.concat(go(Ac(o)))}function Fd(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function vy(e,t){var r=hi(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Sp(e,t,r){return t===p0?Fd(my(e,r)):gs(t)?vy(t,r):Fd(gy(Ra(e)))}function by(e){var t=go(Ac(e)),r=["absolute","fixed"].indexOf(ca(e).position)>=0,n=r&&Un(e)?Bo(e):e;return gs(n)?t.filter(function(a){return gs(a)&&g0(a,n)&&Da(a)!=="body"}):[]}function xy(e,t,r,n){var a=t==="clippingParents"?by(e):[].concat(t),s=[].concat(a,[r]),o=s[0],l=s.reduce(function(c,d){var p=Sp(e,d,n);return c.top=cs(p.top,c.top),c.right=hc(p.right,c.right),c.bottom=hc(p.bottom,c.bottom),c.left=cs(p.left,c.left),c},Sp(e,o,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function w0(e){var t=e.reference,r=e.element,n=e.placement,a=n?zn(n):null,s=n?fi(n):null,o=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,c;switch(a){case Tr:c={x:o,y:t.y-r.height};break;case an:c={x:o,y:t.y+t.height};break;case sn:c={x:t.x+t.width,y:l};break;case Mr:c={x:t.x-r.width,y:l};break;default:c={x:t.x,y:t.y}}var d=a?xh(a):null;if(d!=null){var p=d==="y"?"height":"width";switch(s){case ui:c[d]=c[d]-(t[p]/2-r[p]/2);break;case Po:c[d]=c[d]+(t[p]/2-r[p]/2);break}}return c}function Do(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,s=r.strategy,o=s===void 0?e.strategy:s,l=r.boundary,c=l===void 0?z5:l,d=r.rootBoundary,p=d===void 0?p0:d,m=r.elementContext,g=m===void 0?oo:m,f=r.altBoundary,N=f===void 0?!1:f,x=r.padding,S=x===void 0?0:x,y=b0(typeof S!="number"?S:x0(S,$o)),w=g===oo?U5:oo,_=e.rects.popper,E=e.elements[N?w:g],L=xy(gs(E)?E:E.contextElement||Ra(e.elements.popper),c,p,o),B=hi(e.elements.reference),T=w0({reference:B,element:_,placement:a}),C=Fd(Object.assign({},_,T)),$=g===oo?C:B,H={top:L.top-$.top+y.top,bottom:$.bottom-L.bottom+y.bottom,left:L.left-$.left+y.left,right:$.right-L.right+y.right},A=e.modifiersData.offset;if(g===oo&&A){var O=A[a];Object.keys(H).forEach(function(F){var U=[sn,an].indexOf(F)>=0?1:-1,te=[Tr,an].indexOf(F)>=0?"y":"x";H[F]+=O[te]*U})}return H}function yy(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,s=r.rootBoundary,o=r.padding,l=r.flipVariations,c=r.allowedAutoPlacements,d=c===void 0?gh:c,p=fi(n),m=p?l?yp:yp.filter(function(N){return fi(N)===p}):$o,g=m.filter(function(N){return d.indexOf(N)>=0});g.length===0&&(g=m);var f=g.reduce(function(N,x){return N[x]=Do(e,{placement:x,boundary:a,rootBoundary:s,padding:o})[zn(x)],N},{});return Object.keys(f).sort(function(N,x){return f[N]-f[x]})}function wy(e){if(zn(e)===mh)return[];var t=ec(e);return[jp(e),t,jp(t)]}function Ny(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,s=a===void 0?!0:a,o=r.altAxis,l=o===void 0?!0:o,c=r.fallbackPlacements,d=r.padding,p=r.boundary,m=r.rootBoundary,g=r.altBoundary,f=r.flipVariations,N=f===void 0?!0:f,x=r.allowedAutoPlacements,S=t.options.placement,y=zn(S),w=y===S,_=c||(w||!N?[ec(S)]:wy(S)),E=[S].concat(_).reduce(function(V,ee){return V.concat(zn(ee)===mh?yy(t,{placement:ee,boundary:p,rootBoundary:m,padding:d,flipVariations:N,allowedAutoPlacements:x}):ee)},[]),L=t.rects.reference,B=t.rects.popper,T=new Map,C=!0,$=E[0],H=0;H<E.length;H++){var A=E[H],O=zn(A),F=fi(A)===ui,U=[Tr,an].indexOf(O)>=0,te=U?"width":"height",re=Do(t,{placement:A,boundary:p,rootBoundary:m,altBoundary:g,padding:d}),Z=U?F?sn:Mr:F?an:Tr;L[te]>B[te]&&(Z=ec(Z));var Q=ec(Z),Y=[];if(s&&Y.push(re[O]<=0),l&&Y.push(re[Z]<=0,re[Q]<=0),Y.every(function(V){return V})){$=A,C=!1;break}T.set(A,Y)}if(C)for(var X=N?3:1,ce=function(ee){var se=E.find(function(de){var fe=T.get(de);if(fe)return fe.slice(0,ee).every(function(ge){return ge})});if(se)return $=se,"break"},P=X;P>0;P--){var q=ce(P);if(q==="break")break}t.placement!==$&&(t.modifiersData[n]._skip=!0,t.placement=$,t.reset=!0)}}const jy={name:"flip",enabled:!0,phase:"main",fn:Ny,requiresIfExists:["offset"],data:{_skip:!1}};function _p(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Ap(e){return[Tr,sn,an,Mr].some(function(t){return e[t]>=0})}function Sy(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,s=t.modifiersData.preventOverflow,o=Do(t,{elementContext:"reference"}),l=Do(t,{altBoundary:!0}),c=_p(o,n),d=_p(l,a,s),p=Ap(c),m=Ap(d);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":m})}const _y={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Sy};function Ay(e,t,r){var n=zn(e),a=[Mr,Tr].indexOf(n)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=s[0],l=s[1];return o=o||0,l=(l||0)*a,[Mr,sn].indexOf(n)>=0?{x:l,y:o}:{x:o,y:l}}function Cy(e){var t=e.state,r=e.options,n=e.name,a=r.offset,s=a===void 0?[0,0]:a,o=gh.reduce(function(p,m){return p[m]=Ay(m,t.rects,s),p},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=o}const Ey={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Cy};function Ly(e){var t=e.state,r=e.name;t.modifiersData[r]=w0({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Py={name:"popperOffsets",enabled:!0,phase:"read",fn:Ly,data:{}};function Dy(e){return e==="x"?"y":"x"}function ky(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,s=a===void 0?!0:a,o=r.altAxis,l=o===void 0?!1:o,c=r.boundary,d=r.rootBoundary,p=r.altBoundary,m=r.padding,g=r.tether,f=g===void 0?!0:g,N=r.tetherOffset,x=N===void 0?0:N,S=Do(t,{boundary:c,rootBoundary:d,padding:m,altBoundary:p}),y=zn(t.placement),w=fi(t.placement),_=!w,E=xh(y),L=Dy(E),B=t.modifiersData.popperOffsets,T=t.rects.reference,C=t.rects.popper,$=typeof x=="function"?x(Object.assign({},t.rects,{placement:t.placement})):x,H=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(B){if(s){var F,U=E==="y"?Tr:Mr,te=E==="y"?an:sn,re=E==="y"?"height":"width",Z=B[E],Q=Z+S[U],Y=Z-S[te],X=f?-C[re]/2:0,ce=w===ui?T[re]:C[re],P=w===ui?-C[re]:-T[re],q=t.elements.arrow,V=f&&q?bh(q):{width:0,height:0},ee=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:v0(),se=ee[U],de=ee[te],fe=mo(0,T[re],V[re]),ge=_?T[re]/2-X-fe-se-H.mainAxis:ce-fe-se-H.mainAxis,Ae=_?-T[re]/2+X+fe+de+H.mainAxis:P+fe+de+H.mainAxis,Se=t.elements.arrow&&Bo(t.elements.arrow),Te=Se?E==="y"?Se.clientTop||0:Se.clientLeft||0:0,Pe=(F=A==null?void 0:A[E])!=null?F:0,Ge=Z+ge-Pe-Te,xe=Z+Ae-Pe,J=mo(f?hc(Q,Ge):Q,Z,f?cs(Y,xe):Y);B[E]=J,O[E]=J-Z}if(l){var Ze,qe=E==="x"?Tr:Mr,Ce=E==="x"?an:sn,Ee=B[L],Oe=L==="y"?"height":"width",ke=Ee+S[qe],Ue=Ee-S[Ce],Xe=[Tr,Mr].indexOf(y)!==-1,et=(Ze=A==null?void 0:A[L])!=null?Ze:0,ot=Xe?ke:Ee-T[Oe]-C[Oe]-et+H.altAxis,ct=Xe?Ee+T[Oe]+C[Oe]-et-H.altAxis:Ue,mt=f&&Xe?ry(ot,Ee,ct):mo(f?ot:ke,Ee,f?ct:Ue);B[L]=mt,O[L]=mt-Ee}t.modifiersData[n]=O}}const Oy={name:"preventOverflow",enabled:!0,phase:"main",fn:ky,requiresIfExists:["offset"]};function Ty(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function My(e){return e===Hr(e)||!Un(e)?yh(e):Ty(e)}function Iy(e){var t=e.getBoundingClientRect(),r=di(t.width)/e.offsetWidth||1,n=di(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Ry(e,t,r){r===void 0&&(r=!1);var n=Un(t),a=Un(t)&&Iy(t),s=Ra(t),o=hi(e,a,r),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((Da(t)!=="body"||Nh(s))&&(l=My(t)),Un(t)?(c=hi(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=wh(s))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function Fy(e){var t=new Map,r=new Set,n=[];e.forEach(function(s){t.set(s.name,s)});function a(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(l){if(!r.has(l)){var c=t.get(l);c&&a(c)}}),n.push(s)}return e.forEach(function(s){r.has(s.name)||a(s)}),n}function $y(e){var t=Fy(e);return Q5.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function By(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function qy(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var Cp={placement:"bottom",modifiers:[],strategy:"absolute"};function Ep(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function zy(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,s=a===void 0?Cp:a;return function(l,c,d){d===void 0&&(d=s);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},Cp,s),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},m=[],g=!1,f={state:p,setOptions:function(y){var w=typeof y=="function"?y(p.options):y;x(),p.options=Object.assign({},s,p.options,w),p.scrollParents={reference:gs(l)?go(l):l.contextElement?go(l.contextElement):[],popper:go(c)};var _=$y(qy([].concat(n,p.options.modifiers)));return p.orderedModifiers=_.filter(function(E){return E.enabled}),N(),f.update()},forceUpdate:function(){if(!g){var y=p.elements,w=y.reference,_=y.popper;if(Ep(w,_)){p.rects={reference:Ry(w,Bo(_),p.options.strategy==="fixed"),popper:bh(_)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(H){return p.modifiersData[H.name]=Object.assign({},H.data)});for(var E=0;E<p.orderedModifiers.length;E++){if(p.reset===!0){p.reset=!1,E=-1;continue}var L=p.orderedModifiers[E],B=L.fn,T=L.options,C=T===void 0?{}:T,$=L.name;typeof B=="function"&&(p=B({state:p,options:C,name:$,instance:f})||p)}}}},update:By(function(){return new Promise(function(S){f.forceUpdate(),S(p)})}),destroy:function(){x(),g=!0}};if(!Ep(l,c))return f;f.setOptions(d).then(function(S){!g&&d.onFirstUpdate&&d.onFirstUpdate(S)});function N(){p.orderedModifiers.forEach(function(S){var y=S.name,w=S.options,_=w===void 0?{}:w,E=S.effect;if(typeof E=="function"){var L=E({state:p,name:y,instance:f,options:_}),B=function(){};m.push(L||B)}})}function x(){m.forEach(function(S){return S()}),m=[]}return f}}var Uy=zy({defaultModifiers:[_y,Py,uy,hy,Ey,jy,Oy,iy]}),Lp=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},Wy={name:"applyStyles",enabled:!1},Hy={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var n=r.elements,a=n.reference,s=n.popper;if("removeAttribute"in a){var o=(a.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==s.id});o.length?a.setAttribute("aria-describedby",o.join(",")):a.removeAttribute("aria-describedby")}}},fn:function(t){var r,n=t.state,a=n.elements,s=a.popper,o=a.reference,l=(r=s.getAttribute("role"))==null?void 0:r.toLowerCase();if(s.id&&l==="tooltip"&&"setAttribute"in o){var c=o.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(s.id)!==-1)return;o.setAttribute("aria-describedby",c?c+","+s.id:s.id)}}},Gy=[];function Vy(e,t,r){var n=r===void 0?{}:r,a=n.enabled,s=a===void 0?!0:a,o=n.placement,l=o===void 0?"bottom":o,c=n.strategy,d=c===void 0?"absolute":c,p=n.modifiers,m=p===void 0?Gy:p,g=jc(n,["enabled","placement","strategy","modifiers"]),f=W.useRef(),N=W.useCallback(function(){var E;(E=f.current)==null||E.update()},[]),x=W.useCallback(function(){var E;(E=f.current)==null||E.forceUpdate()},[]),S=q5(W.useState({placement:l,update:N,forceUpdate:x,attributes:{},styles:{popper:Lp(d),arrow:{}}})),y=S[0],w=S[1],_=W.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(L){var B=L.state,T={},C={};Object.keys(B.elements).forEach(function($){T[$]=B.styles[$],C[$]=B.attributes[$]}),w({state:B,styles:T,attributes:C,update:N,forceUpdate:x,placement:B.placement})}}},[N,x,w]);return W.useEffect(function(){!f.current||!s||f.current.setOptions({placement:l,strategy:d,modifiers:[].concat(m,[_,Wy])})},[d,l,_,s]),W.useEffect(function(){if(!(!s||e==null||t==null))return f.current=Uy(e,t,Bt({},g,{placement:l,strategy:d,modifiers:[].concat(m,[Hy,_])})),function(){f.current!=null&&(f.current.destroy(),f.current=void 0,w(function(E){return Bt({},E,{attributes:{},styles:{popper:Lp(d)}})}))}},[s,e,t]),y}function Yy(e,t,r,n){var a=n&&typeof n!="boolean"?n.capture:n;e.removeEventListener(t,r,a),r.__once&&e.removeEventListener(t,r.__once,a)}function fo(e,t,r,n){return F5(e,t,r,n),function(){Yy(e,t,r,n)}}var Ky=function(){},Xy=Ky;const Jy=Rr(Xy);function Zy(e){return e&&"setState"in e?vg.findDOMNode(e):e??null}const Qy=function(e){return Fo(Zy(e))};var ew=27,Pp=function(){};function tw(e){return e.button===0}function rw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Dp=function(t){return t&&("current"in t?t.current:t)};function nw(e,t,r){var n=r===void 0?{}:r,a=n.disabled,s=n.clickTrigger,o=s===void 0?"click":s,l=W.useRef(!1),c=t||Pp,d=W.useCallback(function(g){var f,N=Dp(e);Jy(!!N,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!N||rw(g)||!tw(g)||!!Lo(N,(f=g.composedPath==null?void 0:g.composedPath()[0])!=null?f:g.target)},[e]),p=bp(function(g){l.current||c(g)}),m=bp(function(g){g.keyCode===ew&&c(g)});W.useEffect(function(){if(!(a||e==null)){var g=window.event,f=Qy(Dp(e)),N=fo(f,o,d,!0),x=fo(f,o,function(w){if(w===g){g=void 0;return}p(w)}),S=fo(f,"keyup",function(w){if(w===g){g=void 0;return}m(w)}),y=[];return"ontouchstart"in f.documentElement&&(y=[].slice.call(f.body.children).map(function(w){return fo(w,"mousemove",Pp)})),function(){N(),x(),S(),y.forEach(function(w){return w()})}}},[e,a,o,d,p,m])}function aw(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function sw(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function iw(e){var t,r,n,a,s=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,p=e.fixed,m=e.containerPadding,g=e.arrowElement,f=e.popperConfig,N=f===void 0?{}:f,x=aw(N.modifiers);return Bt({},N,{placement:l,enabled:s,strategy:p?"fixed":N.strategy,modifiers:sw(Bt({},x,{eventListeners:{enabled:o},preventOverflow:Bt({},x.preventOverflow,{options:m?Bt({padding:m},(t=x.preventOverflow)==null?void 0:t.options):(r=x.preventOverflow)==null?void 0:r.options}),offset:{options:Bt({offset:d},(n=x.offset)==null?void 0:n.options)},arrow:Bt({},x.arrow,{enabled:!!g,options:Bt({},(a=x.arrow)==null?void 0:a.options,{element:g})}),flip:Bt({enabled:!!c},x.flip)}))})}function ow(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function lw(e,t){e.classList?e.classList.add(t):ow(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function kp(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function cw(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=kp(e.className,t):e.setAttribute("class",kp(e.className&&e.className.baseVal||"",t))}var Ul;function jh(e){if((!Ul&&Ul!==0||e)&&ph){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Ul=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Ul}var Qu=function(t){var r;return typeof document>"u"?null:t==null?Fo().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function Op(e,t){var r=W.useState(function(){return Qu(e)}),n=r[0],a=r[1];if(!n){var s=Qu(e);s&&a(s)}return W.useEffect(function(){},[t,n]),W.useEffect(function(){var o=Qu(e);o!==n&&a(o)},[e,n]),n}const Tp=e=>!e||typeof e=="function"?e:t=>{e.current=t};function uw(e,t){const r=Tp(e),n=Tp(t);return a=>{r&&r(a),n&&n(a)}}function dw(e,t){return W.useMemo(()=>uw(e,t),[e,t])}var Sh=ue.forwardRef(function(e,t){var r=e.flip,n=e.offset,a=e.placement,s=e.containerPadding,o=s===void 0?5:s,l=e.popperConfig,c=l===void 0?{}:l,d=e.transition,p=xp(),m=p[0],g=p[1],f=xp(),N=f[0],x=f[1],S=dw(g,t),y=Op(e.container),w=Op(e.target),_=W.useState(!e.show),E=_[0],L=_[1],B=Vy(w,m,iw({placement:a,enableEvents:!!e.show,containerPadding:o||5,flip:r,offset:n,arrowElement:N,popperConfig:c})),T=B.styles,C=B.attributes,$=jc(B,["styles","attributes"]);e.show?E&&L(!1):!e.transition&&!E&&L(!0);var H=function(){L(!0),e.onExited&&e.onExited.apply(e,arguments)},A=e.show||d&&!E;if(nw(m,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!A)return null;var O=e.children(Bt({},$,{show:!!e.show,props:Bt({},C.popper,{style:T.popper,ref:S}),arrowProps:Bt({},C.arrow,{style:T.arrow,ref:x})}));if(d){var F=e.onExit,U=e.onExiting,te=e.onEnter,re=e.onEntering,Z=e.onEntered;O=ue.createElement(d,{in:e.show,appear:!0,onExit:F,onExiting:U,onExited:H,onEnter:te,onEntering:re,onEntered:Z},O)}return y?vg.createPortal(O,y):null});Sh.displayName="Overlay";Sh.propTypes={show:Le.bool,placement:Le.oneOf(gh),target:Le.any,container:Le.any,flip:Le.bool,children:Le.func.isRequired,containerPadding:Le.number,popperConfig:Le.object,rootClose:Le.bool,rootCloseEvent:Le.oneOf(["click","mousedown"]),rootCloseDisabled:Le.bool,onHide:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];if(t.rootClose){var s;return(s=Le.func).isRequired.apply(s,[t].concat(n))}return Le.func.apply(Le,[t].concat(n))},transition:Le.elementType,onEnter:Le.func,onEntering:Le.func,onEntered:Le.func,onExit:Le.func,onExiting:Le.func,onExited:Le.func};function hw(){this.__data__=[],this.size=0}var fw=hw,pw=Mo;function mw(e,t){for(var r=e.length;r--;)if(pw(e[r][0],t))return r;return-1}var Cc=mw,gw=Cc,vw=Array.prototype,bw=vw.splice;function xw(e){var t=this.__data__,r=gw(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():bw.call(t,r,1),--this.size,!0}var yw=xw,ww=Cc;function Nw(e){var t=this.__data__,r=ww(t,e);return r<0?void 0:t[r][1]}var jw=Nw,Sw=Cc;function _w(e){return Sw(this.__data__,e)>-1}var Aw=_w,Cw=Cc;function Ew(e,t){var r=this.__data__,n=Cw(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Lw=Ew,Pw=fw,Dw=yw,kw=jw,Ow=Aw,Tw=Lw;function yi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}yi.prototype.clear=Pw;yi.prototype.delete=Dw;yi.prototype.get=kw;yi.prototype.has=Ow;yi.prototype.set=Tw;var Ec=yi,Mw=Ec;function Iw(){this.__data__=new Mw,this.size=0}var Rw=Iw;function Fw(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var $w=Fw;function Bw(e){return this.__data__.get(e)}var qw=Bw;function zw(e){return this.__data__.has(e)}var Uw=zw,Ww=Vn,Hw=Ww["__core-js_shared__"],Gw=Hw,ed=Gw,Mp=function(){var e=/[^.]+$/.exec(ed&&ed.keys&&ed.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Vw(e){return!!Mp&&Mp in e}var Yw=Vw,Kw=Function.prototype,Xw=Kw.toString;function Jw(e){if(e!=null){try{return Xw.call(e)}catch{}try{return e+""}catch{}}return""}var N0=Jw,Zw=uh,Qw=Yw,eN=ua,tN=N0,rN=/[\\^$.*+?()[\]{}|]/g,nN=/^\[object .+?Constructor\]$/,aN=Function.prototype,sN=Object.prototype,iN=aN.toString,oN=sN.hasOwnProperty,lN=RegExp("^"+iN.call(oN).replace(rN,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cN(e){if(!eN(e)||Qw(e))return!1;var t=Zw(e)?lN:nN;return t.test(tN(e))}var uN=cN;function dN(e,t){return e==null?void 0:e[t]}var hN=dN,fN=uN,pN=hN;function mN(e,t){var r=pN(e,t);return fN(r)?r:void 0}var ys=mN,gN=ys,vN=Vn,bN=gN(vN,"Map"),_h=bN,xN=ys,yN=xN(Object,"create"),Lc=yN,Ip=Lc;function wN(){this.__data__=Ip?Ip(null):{},this.size=0}var NN=wN;function jN(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var SN=jN,_N=Lc,AN="__lodash_hash_undefined__",CN=Object.prototype,EN=CN.hasOwnProperty;function LN(e){var t=this.__data__;if(_N){var r=t[e];return r===AN?void 0:r}return EN.call(t,e)?t[e]:void 0}var PN=LN,DN=Lc,kN=Object.prototype,ON=kN.hasOwnProperty;function TN(e){var t=this.__data__;return DN?t[e]!==void 0:ON.call(t,e)}var MN=TN,IN=Lc,RN="__lodash_hash_undefined__";function FN(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=IN&&t===void 0?RN:t,this}var $N=FN,BN=NN,qN=SN,zN=PN,UN=MN,WN=$N;function wi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}wi.prototype.clear=BN;wi.prototype.delete=qN;wi.prototype.get=zN;wi.prototype.has=UN;wi.prototype.set=WN;var HN=wi,Rp=HN,GN=Ec,VN=_h;function YN(){this.size=0,this.__data__={hash:new Rp,map:new(VN||GN),string:new Rp}}var KN=YN;function XN(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var JN=XN,ZN=JN;function QN(e,t){var r=e.__data__;return ZN(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Pc=QN,e4=Pc;function t4(e){var t=e4(this,e).delete(e);return this.size-=t?1:0,t}var r4=t4,n4=Pc;function a4(e){return n4(this,e).get(e)}var s4=a4,i4=Pc;function o4(e){return i4(this,e).has(e)}var l4=o4,c4=Pc;function u4(e,t){var r=c4(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var d4=u4,h4=KN,f4=r4,p4=s4,m4=l4,g4=d4;function Ni(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ni.prototype.clear=h4;Ni.prototype.delete=f4;Ni.prototype.get=p4;Ni.prototype.has=m4;Ni.prototype.set=g4;var Ah=Ni,v4=Ec,b4=_h,x4=Ah,y4=200;function w4(e,t){var r=this.__data__;if(r instanceof v4){var n=r.__data__;if(!b4||n.length<y4-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new x4(n)}return r.set(e,t),this.size=r.size,this}var N4=w4,j4=Ec,S4=Rw,_4=$w,A4=qw,C4=Uw,E4=N4;function ji(e){var t=this.__data__=new j4(e);this.size=t.size}ji.prototype.clear=S4;ji.prototype.delete=_4;ji.prototype.get=A4;ji.prototype.has=C4;ji.prototype.set=E4;var Ch=ji,L4="__lodash_hash_undefined__";function P4(e){return this.__data__.set(e,L4),this}var D4=P4;function k4(e){return this.__data__.has(e)}var O4=k4,T4=Ah,M4=D4,I4=O4;function fc(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new T4;++t<r;)this.add(e[t])}fc.prototype.add=fc.prototype.push=M4;fc.prototype.has=I4;var R4=fc;function F4(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var $4=F4;function B4(e,t){return e.has(t)}var q4=B4,z4=R4,U4=$4,W4=q4,H4=1,G4=2;function V4(e,t,r,n,a,s){var o=r&H4,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=s.get(e),p=s.get(t);if(d&&p)return d==t&&p==e;var m=-1,g=!0,f=r&G4?new z4:void 0;for(s.set(e,t),s.set(t,e);++m<l;){var N=e[m],x=t[m];if(n)var S=o?n(x,N,m,t,e,s):n(N,x,m,e,t,s);if(S!==void 0){if(S)continue;g=!1;break}if(f){if(!U4(t,function(y,w){if(!W4(f,w)&&(N===y||a(N,y,r,n,s)))return f.push(w)})){g=!1;break}}else if(!(N===x||a(N,x,r,n,s))){g=!1;break}}return s.delete(e),s.delete(t),g}var j0=V4,Y4=Vn,K4=Y4.Uint8Array,S0=K4;function X4(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var J4=X4;function Z4(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Q4=Z4,Fp=bi,$p=S0,e3=Mo,t3=j0,r3=J4,n3=Q4,a3=1,s3=2,i3="[object Boolean]",o3="[object Date]",l3="[object Error]",c3="[object Map]",u3="[object Number]",d3="[object RegExp]",h3="[object Set]",f3="[object String]",p3="[object Symbol]",m3="[object ArrayBuffer]",g3="[object DataView]",Bp=Fp?Fp.prototype:void 0,td=Bp?Bp.valueOf:void 0;function v3(e,t,r,n,a,s,o){switch(r){case g3:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case m3:return!(e.byteLength!=t.byteLength||!s(new $p(e),new $p(t)));case i3:case o3:case u3:return e3(+e,+t);case l3:return e.name==t.name&&e.message==t.message;case d3:case f3:return e==t+"";case c3:var l=r3;case h3:var c=n&a3;if(l||(l=n3),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;n|=s3,o.set(e,t);var p=t3(l(e),l(t),n,a,s,o);return o.delete(e),p;case p3:if(td)return td.call(e)==td.call(t)}return!1}var b3=v3;function x3(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var Eh=x3,y3=Array.isArray,on=y3,w3=Eh,N3=on;function j3(e,t,r){var n=t(e);return N3(e)?n:w3(n,r(e))}var _0=j3;function S3(e,t){for(var r=-1,n=e==null?0:e.length,a=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}var _3=S3;function A3(){return[]}var A0=A3,C3=_3,E3=A0,L3=Object.prototype,P3=L3.propertyIsEnumerable,qp=Object.getOwnPropertySymbols,D3=qp?function(e){return e==null?[]:(e=Object(e),C3(qp(e),function(t){return P3.call(e,t)}))}:E3,Lh=D3;function k3(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var O3=k3,T3=xi,M3=Ia,I3="[object Arguments]";function R3(e){return M3(e)&&T3(e)==I3}var F3=R3,zp=F3,$3=Ia,C0=Object.prototype,B3=C0.hasOwnProperty,q3=C0.propertyIsEnumerable,z3=zp(function(){return arguments}())?zp:function(e){return $3(e)&&B3.call(e,"callee")&&!q3.call(e,"callee")},Ph=z3,pc={exports:{}};function U3(){return!1}var W3=U3;pc.exports;(function(e,t){var r=Vn,n=W3,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d})(pc,pc.exports);var Dc=pc.exports,H3=xi,G3=dh,V3=Ia,Y3="[object Arguments]",K3="[object Array]",X3="[object Boolean]",J3="[object Date]",Z3="[object Error]",Q3="[object Function]",ej="[object Map]",tj="[object Number]",rj="[object Object]",nj="[object RegExp]",aj="[object Set]",sj="[object String]",ij="[object WeakMap]",oj="[object ArrayBuffer]",lj="[object DataView]",cj="[object Float32Array]",uj="[object Float64Array]",dj="[object Int8Array]",hj="[object Int16Array]",fj="[object Int32Array]",pj="[object Uint8Array]",mj="[object Uint8ClampedArray]",gj="[object Uint16Array]",vj="[object Uint32Array]",Pt={};Pt[cj]=Pt[uj]=Pt[dj]=Pt[hj]=Pt[fj]=Pt[pj]=Pt[mj]=Pt[gj]=Pt[vj]=!0;Pt[Y3]=Pt[K3]=Pt[oj]=Pt[X3]=Pt[lj]=Pt[J3]=Pt[Z3]=Pt[Q3]=Pt[ej]=Pt[tj]=Pt[rj]=Pt[nj]=Pt[aj]=Pt[sj]=Pt[ij]=!1;function bj(e){return V3(e)&&G3(e.length)&&!!Pt[H3(e)]}var xj=bj;function yj(e){return function(t){return e(t)}}var kc=yj,mc={exports:{}};mc.exports;(function(e,t){var r=s0,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,o=s&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(mc,mc.exports);var Dh=mc.exports,wj=xj,Nj=kc,Up=Dh,Wp=Up&&Up.isTypedArray,jj=Wp?Nj(Wp):wj,kh=jj,Sj=O3,_j=Ph,Aj=on,Cj=Dc,Ej=hh,Lj=kh,Pj=Object.prototype,Dj=Pj.hasOwnProperty;function kj(e,t){var r=Aj(e),n=!r&&_j(e),a=!r&&!n&&Cj(e),s=!r&&!n&&!a&&Lj(e),o=r||n||a||s,l=o?Sj(e.length,String):[],c=l.length;for(var d in e)(t||Dj.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Ej(d,c)))&&l.push(d);return l}var E0=kj,Oj=Object.prototype;function Tj(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Oj;return e===r}var Oh=Tj;function Mj(e,t){return function(r){return e(t(r))}}var L0=Mj,Ij=L0,Rj=Ij(Object.keys,Object),Fj=Rj,$j=Oh,Bj=Fj,qj=Object.prototype,zj=qj.hasOwnProperty;function Uj(e){if(!$j(e))return Bj(e);var t=[];for(var r in Object(e))zj.call(e,r)&&r!="constructor"&&t.push(r);return t}var Wj=Uj,Hj=E0,Gj=Wj,Vj=Io;function Yj(e){return Vj(e)?Hj(e):Gj(e)}var qo=Yj,Kj=_0,Xj=Lh,Jj=qo;function Zj(e){return Kj(e,Jj,Xj)}var P0=Zj,Hp=P0,Qj=1,eS=Object.prototype,tS=eS.hasOwnProperty;function rS(e,t,r,n,a,s){var o=r&Qj,l=Hp(e),c=l.length,d=Hp(t),p=d.length;if(c!=p&&!o)return!1;for(var m=c;m--;){var g=l[m];if(!(o?g in t:tS.call(t,g)))return!1}var f=s.get(e),N=s.get(t);if(f&&N)return f==t&&N==e;var x=!0;s.set(e,t),s.set(t,e);for(var S=o;++m<c;){g=l[m];var y=e[g],w=t[g];if(n)var _=o?n(w,y,g,t,e,s):n(y,w,g,e,t,s);if(!(_===void 0?y===w||a(y,w,r,n,s):_)){x=!1;break}S||(S=g=="constructor")}if(x&&!S){var E=e.constructor,L=t.constructor;E!=L&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof L=="function"&&L instanceof L)&&(x=!1)}return s.delete(e),s.delete(t),x}var nS=rS,aS=ys,sS=Vn,iS=aS(sS,"DataView"),oS=iS,lS=ys,cS=Vn,uS=lS(cS,"Promise"),dS=uS,hS=ys,fS=Vn,pS=hS(fS,"Set"),mS=pS,gS=ys,vS=Vn,bS=gS(vS,"WeakMap"),xS=bS,$d=oS,Bd=_h,qd=dS,zd=mS,Ud=xS,D0=xi,Si=N0,Gp="[object Map]",yS="[object Object]",Vp="[object Promise]",Yp="[object Set]",Kp="[object WeakMap]",Xp="[object DataView]",wS=Si($d),NS=Si(Bd),jS=Si(qd),SS=Si(zd),_S=Si(Ud),ts=D0;($d&&ts(new $d(new ArrayBuffer(1)))!=Xp||Bd&&ts(new Bd)!=Gp||qd&&ts(qd.resolve())!=Vp||zd&&ts(new zd)!=Yp||Ud&&ts(new Ud)!=Kp)&&(ts=function(e){var t=D0(e),r=t==yS?e.constructor:void 0,n=r?Si(r):"";if(n)switch(n){case wS:return Xp;case NS:return Gp;case jS:return Vp;case SS:return Yp;case _S:return Kp}return t});var Oc=ts,rd=Ch,AS=j0,CS=b3,ES=nS,Jp=Oc,Zp=on,Qp=Dc,LS=kh,PS=1,em="[object Arguments]",tm="[object Array]",Wl="[object Object]",DS=Object.prototype,rm=DS.hasOwnProperty;function kS(e,t,r,n,a,s){var o=Zp(e),l=Zp(t),c=o?tm:Jp(e),d=l?tm:Jp(t);c=c==em?Wl:c,d=d==em?Wl:d;var p=c==Wl,m=d==Wl,g=c==d;if(g&&Qp(e)){if(!Qp(t))return!1;o=!0,p=!1}if(g&&!p)return s||(s=new rd),o||LS(e)?AS(e,t,r,n,a,s):CS(e,t,c,r,n,a,s);if(!(r&PS)){var f=p&&rm.call(e,"__wrapped__"),N=m&&rm.call(t,"__wrapped__");if(f||N){var x=f?e.value():e,S=N?t.value():t;return s||(s=new rd),a(x,S,r,n,s)}}return g?(s||(s=new rd),ES(e,t,r,n,a,s)):!1}var OS=kS,TS=OS,nm=Ia;function k0(e,t,r,n,a){return e===t?!0:e==null||t==null||!nm(e)&&!nm(t)?e!==e&&t!==t:TS(e,t,r,n,k0,a)}var Th=k0,MS=Th;function IS(e,t){return MS(e,t)}var RS=IS;const FS=Rr(RS);function nd(e,t){var r=fh(e);return r?r.innerHeight:ls(e).height}function O0(e,t,r){e.closest&&!r&&e.closest(t);var n=e;do{if(M5(n,t))return n;n=n.parentElement}while(n&&n!==r&&n.nodeType===document.ELEMENT_NODE);return null}function $S(e,t,r,n){for(var a=e.length,s=r+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return-1}var BS=$S,qS=Ch,zS=Th,US=1,WS=2;function HS(e,t,r,n){var a=r.length,s=a,o=!n;if(e==null)return!s;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=r[a];var c=l[0],d=e[c],p=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var m=new qS;if(n)var g=n(d,p,c,e,t,m);if(!(g===void 0?zS(p,d,US|WS,n,m):g))return!1}}return!0}var GS=HS,VS=ua;function YS(e){return e===e&&!VS(e)}var T0=YS,KS=T0,XS=qo;function JS(e){for(var t=XS(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,KS(a)]}return t}var ZS=JS;function QS(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var M0=QS,e6=GS,t6=ZS,r6=M0;function n6(e){var t=t6(e);return t.length==1&&t[0][2]?r6(t[0][0],t[0][1]):function(r){return r===e||e6(r,e,t)}}var a6=n6,s6=on,i6=Ro,o6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l6=/^\w*$/;function c6(e,t){if(s6(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||i6(e)?!0:l6.test(e)||!o6.test(e)||t!=null&&e in Object(t)}var Mh=c6,I0=Ah,u6="Expected a function";function Ih(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(u6);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,n);return r.cache=s.set(a,o)||s,o};return r.cache=new(Ih.Cache||I0),r}Ih.Cache=I0;var d6=Ih,h6=d6,f6=500;function p6(e){var t=h6(e,function(n){return r.size===f6&&r.clear(),n}),r=t.cache;return t}var m6=p6,g6=m6,v6=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,b6=/\\(\\)?/g,x6=g6(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(v6,function(r,n,a,s){t.push(a?s.replace(b6,"$1"):n||r)}),t}),y6=x6;function w6(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Rh=w6,am=bi,N6=Rh,j6=on,S6=Ro,sm=am?am.prototype:void 0,im=sm?sm.toString:void 0;function R0(e){if(typeof e=="string")return e;if(j6(e))return N6(e,R0)+"";if(S6(e))return im?im.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var _6=R0,A6=_6;function C6(e){return e==null?"":A6(e)}var E6=C6,L6=on,P6=Mh,D6=y6,k6=E6;function O6(e,t){return L6(e)?e:P6(e,t)?[e]:D6(k6(e))}var Tc=O6,T6=Ro;function M6(e){if(typeof e=="string"||T6(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var zo=M6,I6=Tc,R6=zo;function F6(e,t){t=I6(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[R6(t[r++])];return r&&r==n?e:void 0}var Mc=F6,$6=Mc;function B6(e,t,r){var n=e==null?void 0:$6(e,t);return n===void 0?r:n}var q6=B6;function z6(e,t){return e!=null&&t in Object(e)}var U6=z6,W6=Tc,H6=Ph,G6=on,V6=hh,Y6=dh,K6=zo;function X6(e,t,r){t=W6(t,e);for(var n=-1,a=t.length,s=!1;++n<a;){var o=K6(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=a?s:(a=e==null?0:e.length,!!a&&Y6(a)&&V6(o,a)&&(G6(e)||H6(e)))}var J6=X6,Z6=U6,Q6=J6;function e_(e,t){return e!=null&&Q6(e,t,Z6)}var t_=e_,r_=Th,n_=q6,a_=t_,s_=Mh,i_=T0,o_=M0,l_=zo,c_=1,u_=2;function d_(e,t){return s_(e)&&i_(t)?o_(l_(e),t):function(r){var n=n_(r,e);return n===void 0&&n===t?a_(r,e):r_(t,n,c_|u_)}}var h_=d_;function f_(e){return e}var Ic=f_;function p_(e){return function(t){return t==null?void 0:t[e]}}var m_=p_,g_=Mc;function v_(e){return function(t){return g_(t,e)}}var b_=v_,x_=m_,y_=b_,w_=Mh,N_=zo;function j_(e){return w_(e)?x_(N_(e)):y_(e)}var S_=j_,__=a6,A_=h_,C_=Ic,E_=on,L_=S_;function P_(e){return typeof e=="function"?e:e==null?C_:typeof e=="object"?E_(e)?A_(e[0],e[1]):__(e):L_(e)}var Rc=P_,D_=BS,k_=Rc,O_=l0,T_=Math.max;function M_(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:O_(r);return a<0&&(a=T_(n+a,0)),D_(e,k_(t),a)}var I_=M_;const R_=Rr(I_);var F_=Math.ceil,$_=Math.max;function B_(e,t,r,n){for(var a=-1,s=$_(F_((t-e)/(r||1)),0),o=Array(s);s--;)o[n?s:++a]=e,e+=r;return o}var q_=B_,z_=q_,U_=_c,ad=o0;function W_(e){return function(t,r,n){return n&&typeof n!="number"&&U_(t,r,n)&&(r=n=void 0),t=ad(t),r===void 0?(r=t,t=0):r=ad(r),n=n===void 0?t<r?1:-1:ad(n),z_(t,r,n,e)}}var H_=W_,G_=H_,V_=G_(),Y_=V_;const K_=Rr(Y_);var om=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function X_(e,t){return!!(e===t||om(e)&&om(t))}function J_(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!X_(e[r],t[r]))return!1;return!0}function F0(e,t){t===void 0&&(t=J_);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}function Wd(e,t){var r=fh(e);return r?r.innerWidth:ls(e).width}var lm=bi,Z_=Ph,Q_=on,cm=lm?lm.isConcatSpreadable:void 0;function eA(e){return Q_(e)||Z_(e)||!!(cm&&e&&e[cm])}var tA=eA,rA=Eh,nA=tA;function $0(e,t,r,n,a){var s=-1,o=e.length;for(r||(r=nA),a||(a=[]);++s<o;){var l=e[s];t>0&&r(l)?t>1?$0(l,t-1,r,n,a):rA(a,l):n||(a[a.length]=l)}return a}var B0=$0;function aA(e){return function(t,r,n){for(var a=-1,s=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(s[c],c,s)===!1)break}return t}}var sA=aA,iA=sA,oA=iA(),lA=oA,cA=lA,uA=qo;function dA(e,t){return e&&cA(e,t,uA)}var Fh=dA,hA=Io;function fA(e,t){return function(r,n){if(r==null)return r;if(!hA(r))return e(r,n);for(var a=r.length,s=t?a:-1,o=Object(r);(t?s--:++s<a)&&n(o[s],s,o)!==!1;);return r}}var pA=fA,mA=Fh,gA=pA,vA=gA(mA),bA=vA,xA=bA,yA=Io;function wA(e,t){var r=-1,n=yA(e)?Array(e.length):[];return xA(e,function(a,s,o){n[++r]=t(a,s,o)}),n}var NA=wA;function jA(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var SA=jA,um=Ro;function _A(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,s=um(e),o=t!==void 0,l=t===null,c=t===t,d=um(t);if(!l&&!d&&!s&&e>t||s&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!a)return 1;if(!n&&!s&&!d&&e<t||d&&r&&a&&!n&&!s||l&&r&&a||!o&&a||!c)return-1}return 0}var AA=_A,CA=AA;function EA(e,t,r){for(var n=-1,a=e.criteria,s=t.criteria,o=a.length,l=r.length;++n<o;){var c=CA(a[n],s[n]);if(c){if(n>=l)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return e.index-t.index}var LA=EA,sd=Rh,PA=Mc,DA=Rc,kA=NA,OA=SA,TA=kc,MA=LA,IA=Ic,RA=on;function FA(e,t,r){t.length?t=sd(t,function(s){return RA(s)?function(o){return PA(o,s.length===1?s[0]:s)}:s}):t=[IA];var n=-1;t=sd(t,TA(DA));var a=kA(e,function(s,o,l){var c=sd(t,function(d){return d(s)});return{criteria:c,index:++n,value:s}});return OA(a,function(s,o){return MA(s,o,r)})}var $A=FA;function BA(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var qA=BA,zA=qA,dm=Math.max;function UA(e,t,r){return t=dm(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=dm(n.length-t,0),o=Array(s);++a<s;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),zA(e,this,l)}}var q0=UA;function WA(e){return function(){return e}}var HA=WA,GA=ys,VA=function(){try{var e=GA(Object,"defineProperty");return e({},"",{}),e}catch{}}(),z0=VA,YA=HA,hm=z0,KA=Ic,XA=hm?function(e,t){return hm(e,"toString",{configurable:!0,enumerable:!1,value:YA(t),writable:!0})}:KA,JA=XA,ZA=800,QA=16,e8=Date.now;function t8(e){var t=0,r=0;return function(){var n=e8(),a=QA-(n-r);if(r=n,a>0){if(++t>=ZA)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r8=t8,n8=JA,a8=r8,s8=a8(n8),U0=s8,i8=Ic,o8=q0,l8=U0;function c8(e,t){return l8(o8(e,t,i8),e+"")}var W0=c8,u8=B0,d8=$A,h8=W0,fm=_c,f8=h8(function(e,t){if(e==null)return[];var r=t.length;return r>1&&fm(e,t[0],t[1])?t=[]:r>2&&fm(t[0],t[1],t[2])&&(t=[t[0]]),d8(e,u8(t,1),[])}),p8=f8;const m8=Rr(p8);function H0(e){return Ug(e)||n0(e)||oh(e)||Wg()}function g8(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var v8=g8,b8=ua,x8=Oh,y8=v8,w8=Object.prototype,N8=w8.hasOwnProperty;function j8(e){if(!b8(e))return y8(e);var t=x8(e),r=[];for(var n in e)n=="constructor"&&(t||!N8.call(e,n))||r.push(n);return r}var S8=j8,_8=E0,A8=S8,C8=Io;function E8(e){return C8(e)?_8(e,!0):A8(e)}var Fc=E8,L8=W0,P8=Mo,D8=_c,k8=Fc,G0=Object.prototype,O8=G0.hasOwnProperty,T8=L8(function(e,t){e=Object(e);var r=-1,n=t.length,a=n>2?t[2]:void 0;for(a&&D8(t[0],t[1],a)&&(n=1);++r<n;)for(var s=t[r],o=k8(s),l=-1,c=o.length;++l<c;){var d=o[l],p=e[d];(p===void 0||P8(p,G0[d])&&!O8.call(e,d))&&(e[d]=s[d])}return e}),M8=T8;const I8=Rr(M8);var pm=z0;function R8(e,t,r){t=="__proto__"&&pm?pm(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var $h=R8,F8=$h,$8=Fh,B8=Rc;function q8(e,t){var r={};return t=B8(t),$8(e,function(n,a,s){F8(r,a,t(n,a,s))}),r}var z8=q8;const U8=Rr(z8);function W8(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var V0=W8,H8=$h,G8=Mo,V8=Object.prototype,Y8=V8.hasOwnProperty;function K8(e,t,r){var n=e[t];(!(Y8.call(e,t)&&G8(n,r))||r===void 0&&!(t in e))&&H8(e,t,r)}var Y0=K8,X8=Y0,J8=$h;function Z8(e,t,r,n){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var l=t[s],c=n?n(r[l],e[l],l,r,e):void 0;c===void 0&&(c=e[l]),a?J8(r,l,c):X8(r,l,c)}return r}var Uo=Z8,Q8=Uo,eC=qo;function tC(e,t){return e&&Q8(t,eC(t),e)}var rC=tC,nC=Uo,aC=Fc;function sC(e,t){return e&&nC(t,aC(t),e)}var iC=sC,gc={exports:{}};gc.exports;(function(e,t){var r=Vn,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,o=s?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,p){if(p)return d.slice();var m=d.length,g=l?l(m):new d.constructor(m);return d.copy(g),g}e.exports=c})(gc,gc.exports);var oC=gc.exports;function lC(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var cC=lC,uC=Uo,dC=Lh;function hC(e,t){return uC(e,dC(e),t)}var fC=hC,pC=L0,mC=pC(Object.getPrototypeOf,Object),$c=mC,gC=Eh,vC=$c,bC=Lh,xC=A0,yC=Object.getOwnPropertySymbols,wC=yC?function(e){for(var t=[];e;)gC(t,bC(e)),e=vC(e);return t}:xC,K0=wC,NC=Uo,jC=K0;function SC(e,t){return NC(e,jC(e),t)}var _C=SC,AC=_0,CC=K0,EC=Fc;function LC(e){return AC(e,EC,CC)}var X0=LC,PC=Object.prototype,DC=PC.hasOwnProperty;function kC(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&DC.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var OC=kC,mm=S0;function TC(e){var t=new e.constructor(e.byteLength);return new mm(t).set(new mm(e)),t}var Bh=TC,MC=Bh;function IC(e,t){var r=t?MC(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var RC=IC,FC=/\w*$/;function $C(e){var t=new e.constructor(e.source,FC.exec(e));return t.lastIndex=e.lastIndex,t}var BC=$C,gm=bi,vm=gm?gm.prototype:void 0,bm=vm?vm.valueOf:void 0;function qC(e){return bm?Object(bm.call(e)):{}}var zC=qC,UC=Bh;function WC(e,t){var r=t?UC(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var HC=WC,GC=Bh,VC=RC,YC=BC,KC=zC,XC=HC,JC="[object Boolean]",ZC="[object Date]",QC="[object Map]",eE="[object Number]",tE="[object RegExp]",rE="[object Set]",nE="[object String]",aE="[object Symbol]",sE="[object ArrayBuffer]",iE="[object DataView]",oE="[object Float32Array]",lE="[object Float64Array]",cE="[object Int8Array]",uE="[object Int16Array]",dE="[object Int32Array]",hE="[object Uint8Array]",fE="[object Uint8ClampedArray]",pE="[object Uint16Array]",mE="[object Uint32Array]";function gE(e,t,r){var n=e.constructor;switch(t){case sE:return GC(e);case JC:case ZC:return new n(+e);case iE:return VC(e,r);case oE:case lE:case cE:case uE:case dE:case hE:case fE:case pE:case mE:return XC(e,r);case QC:return new n;case eE:case nE:return new n(e);case tE:return YC(e);case rE:return new n;case aE:return KC(e)}}var vE=gE,bE=ua,xm=Object.create,xE=function(){function e(){}return function(t){if(!bE(t))return{};if(xm)return xm(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),J0=xE,yE=J0,wE=$c,NE=Oh;function jE(e){return typeof e.constructor=="function"&&!NE(e)?yE(wE(e)):{}}var SE=jE,_E=Oc,AE=Ia,CE="[object Map]";function EE(e){return AE(e)&&_E(e)==CE}var LE=EE,PE=LE,DE=kc,ym=Dh,wm=ym&&ym.isMap,kE=wm?DE(wm):PE,OE=kE,TE=Oc,ME=Ia,IE="[object Set]";function RE(e){return ME(e)&&TE(e)==IE}var FE=RE,$E=FE,BE=kc,Nm=Dh,jm=Nm&&Nm.isSet,qE=jm?BE(jm):$E,zE=qE,UE=Ch,WE=V0,HE=Y0,GE=rC,VE=iC,YE=oC,KE=cC,XE=fC,JE=_C,ZE=P0,QE=X0,eL=Oc,tL=OC,rL=vE,nL=SE,aL=on,sL=Dc,iL=OE,oL=ua,lL=zE,cL=qo,uL=Fc,dL=1,hL=2,fL=4,Z0="[object Arguments]",pL="[object Array]",mL="[object Boolean]",gL="[object Date]",vL="[object Error]",Q0="[object Function]",bL="[object GeneratorFunction]",xL="[object Map]",yL="[object Number]",ev="[object Object]",wL="[object RegExp]",NL="[object Set]",jL="[object String]",SL="[object Symbol]",_L="[object WeakMap]",AL="[object ArrayBuffer]",CL="[object DataView]",EL="[object Float32Array]",LL="[object Float64Array]",PL="[object Int8Array]",DL="[object Int16Array]",kL="[object Int32Array]",OL="[object Uint8Array]",TL="[object Uint8ClampedArray]",ML="[object Uint16Array]",IL="[object Uint32Array]",Lt={};Lt[Z0]=Lt[pL]=Lt[AL]=Lt[CL]=Lt[mL]=Lt[gL]=Lt[EL]=Lt[LL]=Lt[PL]=Lt[DL]=Lt[kL]=Lt[xL]=Lt[yL]=Lt[ev]=Lt[wL]=Lt[NL]=Lt[jL]=Lt[SL]=Lt[OL]=Lt[TL]=Lt[ML]=Lt[IL]=!0;Lt[vL]=Lt[Q0]=Lt[_L]=!1;function tc(e,t,r,n,a,s){var o,l=t&dL,c=t&hL,d=t&fL;if(r&&(o=a?r(e,n,a,s):r(e)),o!==void 0)return o;if(!oL(e))return e;var p=aL(e);if(p){if(o=tL(e),!l)return KE(e,o)}else{var m=eL(e),g=m==Q0||m==bL;if(sL(e))return YE(e,l);if(m==ev||m==Z0||g&&!a){if(o=c||g?{}:nL(e),!l)return c?JE(e,VE(o,e)):XE(e,GE(o,e))}else{if(!Lt[m])return a?e:{};o=rL(e,m,l)}}s||(s=new UE);var f=s.get(e);if(f)return f;s.set(e,o),lL(e)?e.forEach(function(S){o.add(tc(S,t,r,S,e,s))}):iL(e)&&e.forEach(function(S,y){o.set(y,tc(S,t,r,y,e,s))});var N=d?c?QE:ZE:c?uL:cL,x=p?void 0:N(e);return WE(x||e,function(S,y){x&&(y=S,S=e[y]),HE(o,y,tc(S,t,r,y,e,s))}),o}var RL=tc;function FL(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var $L=FL,BL=Mc,qL=a0;function zL(e,t){return t.length<2?e:BL(e,qL(t,0,-1))}var UL=zL,WL=Tc,HL=$L,GL=UL,VL=zo;function YL(e,t){return t=WL(t,e),e=GL(e,t),e==null||delete e[VL(HL(t))]}var KL=YL,XL=xi,JL=$c,ZL=Ia,QL="[object Object]",e7=Function.prototype,t7=Object.prototype,tv=e7.toString,r7=t7.hasOwnProperty,n7=tv.call(Object);function a7(e){if(!ZL(e)||XL(e)!=QL)return!1;var t=JL(e);if(t===null)return!0;var r=r7.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&tv.call(r)==n7}var s7=a7,i7=s7;function o7(e){return i7(e)?void 0:e}var l7=o7,c7=B0;function u7(e){var t=e==null?0:e.length;return t?c7(e,1):[]}var d7=u7,h7=d7,f7=q0,p7=U0;function m7(e){return p7(f7(e,void 0,h7),e+"")}var g7=m7,v7=Rh,b7=RL,x7=KL,y7=Tc,w7=Uo,N7=l7,j7=g7,S7=X0,_7=1,A7=2,C7=4,E7=j7(function(e,t){var r={};if(e==null)return r;var n=!1;t=v7(t,function(s){return s=y7(s,e),n||(n=s.length>1),s}),w7(e,S7(e),r),n&&(r=b7(r,_7|A7|C7,N7));for(var a=t.length;a--;)x7(r,t[a]);return r}),L7=E7;const P7=Rr(L7);var D7=V0,k7=J0,O7=Fh,T7=Rc,M7=$c,I7=on,R7=Dc,F7=uh,$7=ua,B7=kh;function q7(e,t,r){var n=I7(e),a=n||R7(e)||B7(e);if(t=T7(t),r==null){var s=e&&e.constructor;a?r=n?new s:[]:$7(e)?r=F7(s)?k7(M7(e)):{}:r={}}return(a?D7:O7)(e,function(o,l,c){return t(r,o,l,c)}),r}var z7=q7;const U7=Rr(z7);var W7={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(nn,function(){return function(r,n,a){n.prototype.isBetween=function(s,o,l,c){var d=a(s),p=a(o),m=(c=c||"()")[0]==="(",g=c[1]===")";return(m?this.isAfter(d,l):!this.isBefore(d,l))&&(g?this.isBefore(p,l):!this.isAfter(p,l))||(m?this.isBefore(d,l):!this.isAfter(d,l))&&(g?this.isAfter(p,l):!this.isBefore(p,l))}}})})(W7);var H7={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(nn,function(){return function(r,n){n.prototype.isSameOrAfter=function(a,s){return this.isSame(a,s)||this.isAfter(a,s)}}})})(H7);var G7={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(nn,function(){return function(r,n){n.prototype.isSameOrBefore=function(a,s){return this.isSame(a,s)||this.isBefore(a,s)}}})})(G7);var V7={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(nn,function(){return function(r,n,a){var s=n.prototype,o=function(m){return m&&(m.indexOf?m:m.s)},l=function(m,g,f,N,x){var S=m.name?m:m.$locale(),y=o(S[g]),w=o(S[f]),_=y||w.map(function(L){return L.slice(0,N)});if(!x)return _;var E=S.weekStart;return _.map(function(L,B){return _[(B+(E||0))%7]})},c=function(){return a.Ls[a.locale()]},d=function(m,g){return m.formats[g]||function(f){return f.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(N,x,S){return x||S.slice(1)})}(m.formats[g.toUpperCase()])},p=function(){var m=this;return{months:function(g){return g?g.format("MMMM"):l(m,"months")},monthsShort:function(g){return g?g.format("MMM"):l(m,"monthsShort","months",3)},firstDayOfWeek:function(){return m.$locale().weekStart||0},weekdays:function(g){return g?g.format("dddd"):l(m,"weekdays")},weekdaysMin:function(g){return g?g.format("dd"):l(m,"weekdaysMin","weekdays",2)},weekdaysShort:function(g){return g?g.format("ddd"):l(m,"weekdaysShort","weekdays",3)},longDateFormat:function(g){return d(m.$locale(),g)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return p.bind(this)()},a.localeData=function(){var m=c();return{firstDayOfWeek:function(){return m.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(g){return d(m,g)},meridiem:m.meridiem,ordinal:m.ordinal}},a.months=function(){return l(c(),"months")},a.monthsShort=function(){return l(c(),"monthsShort","months",3)},a.weekdays=function(m){return l(c(),"weekdays",null,null,m)},a.weekdaysShort=function(m){return l(c(),"weekdaysShort","weekdays",3,m)},a.weekdaysMin=function(m){return l(c(),"weekdaysMin","weekdays",2,m)}}})})(V7);var Y7={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(nn,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,a,s){var o=a.prototype,l=o.format;s.en.formats=r,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,p=function(m,g){return m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(f,N,x){var S=x&&x.toUpperCase();return N||g[x]||r[x]||g[S].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(y,w,_){return w||_.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,p)}}})})(Y7);var K7={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(nn,function(){return function(r,n,a){var s=function(o,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(p){return p}))[0];for(var d=1;d<l.length;d+=1)l[d].isValid()&&!l[d][o](c)||(c=l[d]);return c};a.max=function(){var o=[].slice.call(arguments,0);return s("isAfter",o)},a.min=function(){var o=[].slice.call(arguments,0);return s("isBefore",o)}}})})(K7);var X7={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(nn,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(s,o,l){var c=o.prototype;l.utc=function(x){var S={date:x,utc:!0,args:arguments};return new o(S)},c.utc=function(x){var S=l(this.toDate(),{locale:this.$L,utc:!0});return x?S.add(this.utcOffset(),r):S},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(x){x.utc&&(this.$u=!0),this.$utils().u(x.$offset)||(this.$offset=x.$offset),d.call(this,x)};var p=c.init;c.init=function(){if(this.$u){var x=this.$d;this.$y=x.getUTCFullYear(),this.$M=x.getUTCMonth(),this.$D=x.getUTCDate(),this.$W=x.getUTCDay(),this.$H=x.getUTCHours(),this.$m=x.getUTCMinutes(),this.$s=x.getUTCSeconds(),this.$ms=x.getUTCMilliseconds()}else p.call(this)};var m=c.utcOffset;c.utcOffset=function(x,S){var y=this.$utils().u;if(y(x))return this.$u?0:y(this.$offset)?m.call(this):this.$offset;if(typeof x=="string"&&(x=function(L){L===void 0&&(L="");var B=L.match(n);if(!B)return null;var T=(""+B[0]).match(a)||["-",0,0],C=T[0],$=60*+T[1]+ +T[2];return $===0?0:C==="+"?$:-$}(x),x===null))return this;var w=Math.abs(x)<=16?60*x:x,_=this;if(S)return _.$offset=w,_.$u=x===0,_;if(x!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(w+E,r)).$offset=w,_.$x.$localOffset=E}else _=this.utc();return _};var g=c.format;c.format=function(x){var S=x||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,S)},c.valueOf=function(){var x=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*x},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var f=c.toDate;c.toDate=function(x){return x==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var N=c.diff;c.diff=function(x,S,y){if(x&&this.$u===x.$u)return N.call(this,x,S,y);var w=this.local(),_=l(x).local();return N.call(w,_,S,y)}}})})(X7);var J7={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(nn,function(){return function(r,n){n.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(J7);function $n(e){return e.children}var Ir={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Ar={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Sm=Object.keys(Ar).map(function(e){return Ar[e]});Le.oneOfType([Le.string,Le.func]);Le.any;Le.func;Le.oneOfType([Le.arrayOf(Le.oneOf(Sm)),Le.objectOf(function(e,t){var r=Sm.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];return Le.elementType.apply(Le,[e,t].concat(a))})]);Le.oneOfType([Le.oneOf(["overlap","no-overlap"]),Le.func]);var _m={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function rv(e,t){var r=ur(e,"month");return ur(r,"week",t.startOfWeek())}function nv(e,t){var r=uc(e,"month");return uc(r,"week",t.startOfWeek())}function Z7(e,t){for(var r=rv(e,t),n=nv(e,t),a=[];gi(r,n,"day");)a.push(r),r=Sn(r,1,"day");return a}function Q7(e,t){var r=ur(e,t);return mi(r,e)?r:Sn(r,1,t)}function eP(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",n=e,a=[];gi(n,t,r);)a.push(n),n=Sn(n,1,r);return a}function tP(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=ur(e,"day"),e=Eo(e,Eo(t)),e=ci(e,ci(t)),e=Co(e,Co(t)),Ao(e,Ao(t)))}function Am(e){return Eo(e)===0&&ci(e)===0&&Co(e)===0&&Ao(e)===0}function rP(e,t,r,n){return r==="day"&&(r="date"),Math.abs(lp[r](e,void 0,n)-lp[r](t,void 0,n))}function qh(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+ur(e,r)/_m[r]-+ur(t,r)/_m[r]))}var nP=Le.oneOfType([Le.string,Le.func]);function aP(e,t,r,n,a){var s=typeof n=="function"?n(r,a,e):t.call(e,r,n,a);return yo(s==null||typeof s=="string","`localizer format(..)` must return a string, null, or undefined"),s}function sP(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function zh(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function iP(e,t){return qh(e,t,"minutes")+zh(e,t)}function oP(e){var t=ur(e,"day");return qh(t,e,"minutes")+zh(t,e)}function lP(e,t){return ch(e,t,"day")}function cP(e,t,r){var n=mi(e,t,"minutes");return n?To(t,r,"minutes"):Sc(t,r,"minutes")}function Hd(e,t){return rP(e,t,"day")}function uP(e){var t=e.evtA,r=t.start,n=t.end,a=t.allDay,s=e.evtB,o=s.start,l=s.end,c=s.allDay,d=+ur(r,"day")-+ur(o,"day"),p=Hd(r,n),m=Hd(o,l);return d||m-p||!!c-!!a||+r-+o||+n-+l}function dP(e){var t=e.event,r=t.start,n=t.end,a=e.range,s=a.start,o=a.end,l=ur(r,"day"),c=gi(l,o,"day"),d=lh(l,n,"minutes"),p=d?Sc(n,s,"minutes"):To(n,s,"minutes");return c&&p}function hP(e,t){return mi(e,t,"day")}function fP(e,t){return Am(e)&&Am(t)}var pP=tr(function e(t){var r=this;er(this,e),yo(typeof t.format=="function","date localizer `format(..)` must be a function"),yo(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||nP,this.formats=t.formats,this.format=function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return aP.apply(void 0,[r,t.format].concat(a))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||tP,this.inRange=t.inRange||Qg,this.lt=t.lt||ch,this.lte=t.lte||gi,this.gt=t.gt||Sc,this.gte=t.gte||To,this.eq=t.eq||mi,this.neq=t.neq||lh,this.startOf=t.startOf||ur,this.endOf=t.endOf||uc,this.add=t.add||Sn,this.range=t.range||eP,this.diff=t.diff||qh,this.ceil=t.ceil||Q7,this.min=t.min||Jg,this.max=t.max||Zg,this.minutes=t.minutes||ci,this.daySpan=t.daySpan||Hd,this.firstVisibleDay=t.firstVisibleDay||rv,this.lastVisibleDay=t.lastVisibleDay||nv,this.visibleDays=t.visibleDays||Z7,this.getSlotDate=t.getSlotDate||sP,this.getTimezoneOffset=t.getTimezoneOffset||function(n){return n.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||zh,this.getTotalMin=t.getTotalMin||iP,this.getMinutesFromMidnight=t.getMinutesFromMidnight||oP,this.continuesPrior=t.continuesPrior||lP,this.continuesAfter=t.continuesAfter||cP,this.sortEvents=t.sortEvents||uP,this.inEventRange=t.inEventRange||dP,this.isSameDate=t.isSameDate||hP,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||fP,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function mP(e,t,r,n){var a=At(At({},e.formats),r);return At(At({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(o,l){return e.format(o,a[l]||l,t)}})}var gP=function(e){function t(){var r;er(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=wr(this,t,[].concat(a)),r.navigate=function(o){r.props.onNavigate(o)},r.view=function(o){r.props.onView(o)},r}return Nr(t,e),tr(t,[{key:"render",value:function(){var n=this.props,a=n.localizer.messages,s=n.label;return ue.createElement("div",{className:"rbc-toolbar"},ue.createElement("span",{className:"rbc-btn-group"},ue.createElement("button",{type:"button",onClick:this.navigate.bind(null,Ir.TODAY)},a.today),ue.createElement("button",{type:"button",onClick:this.navigate.bind(null,Ir.PREVIOUS)},a.previous),ue.createElement("button",{type:"button",onClick:this.navigate.bind(null,Ir.NEXT)},a.next)),ue.createElement("span",{className:"rbc-toolbar-label"},s),ue.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(a)))}},{key:"viewNamesGroup",value:function(n){var a=this,s=this.props.views,o=this.props.view;if(s.length>1)return s.map(function(l){return ue.createElement("button",{type:"button",key:l,className:qt({"rbc-active":o===l}),onClick:a.view.bind(null,l)},n[l])})}}])}(ue.Component);function Dt(e,t){e&&e.apply(null,[].concat(t))}var vP={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function bP(e){return At(At({},vP),e)}function xP(e){var t=e.ref,r=e.callback;W.useEffect(function(){var n=function(s){t.current&&!t.current.contains(s.target)&&r()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[t,r])}var yP=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],av=function(e){function t(){return er(this,t),wr(this,t,arguments)}return Nr(t,e),tr(t,[{key:"render",value:function(){var n=this.props,a=n.style,s=n.className,o=n.event,l=n.selected,c=n.isAllDay,d=n.onSelect,p=n.onDoubleClick,m=n.onKeyPress,g=n.localizer,f=n.continuesPrior,N=n.continuesAfter,x=n.accessors,S=n.getters,y=n.children,w=n.components,_=w.event,E=w.eventWrapper,L=n.slotStart,B=n.slotEnd,T=Wn(n,yP);delete T.resizable;var C=x.title(o),$=x.tooltip(o),H=x.end(o),A=x.start(o),O=x.allDay(o),F=c||O||g.diff(A,g.ceil(H,"day"),"day")>1,U=S.eventProp(o,A,H,l),te=ue.createElement("div",{className:"rbc-event-content",title:$||void 0},_?ue.createElement(_,{event:o,continuesPrior:f,continuesAfter:N,title:C,isAllDay:O,localizer:g,slotStart:L,slotEnd:B}):C);return ue.createElement(E,Object.assign({},this.props,{type:"date"}),ue.createElement("div",Object.assign({},T,{style:At(At({},U.style),a),className:qt("rbc-event",s,U.className,{"rbc-selected":l,"rbc-event-allday":F,"rbc-event-continues-prior":f,"rbc-event-continues-after":N}),onClick:function(Z){return d&&d(o,Z)},onDoubleClick:function(Z){return p&&p(o,Z)},onKeyDown:function(Z){return m&&m(o,Z)}}),typeof y=="function"?y(te):te))}}])}(ue.Component);function Bc(e,t){return!e||t==null?!1:FS(e,t)}function sv(e,t){var r=e.right-e.left,n=r/t;return n}function iv(e,t,r,n){var a=sv(e,n);return r?n-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function wP(e,t){var r=t.x,n=t.y;return n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right}function NP(e,t,r,n,a){var s=-1,o=-1,l=n-1,c=sv(t,n),d=iv(t,r.x,a,n),p=t.top<r.y&&t.bottom>r.y,m=t.top<e.y&&t.bottom>e.y,g=e.y>t.bottom,f=t.top>e.y,N=r.top<t.top&&r.bottom>t.bottom;return N&&(s=0,o=l),p&&(f?(s=0,o=d):g&&(s=d,o=l)),m&&(s=o=a?l-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),p?d<s?s=d:o=d:e.y<r.y?o=l:s=0),{startIdx:s,endIdx:o}}function jP(e){var t=e.target,r=e.offset,n=e.container,a=e.box,s=ls(t),o=s.top,l=s.left,c=s.width,d=s.height,p=ls(n),m=p.top,g=p.left,f=p.width,N=p.height,x=ls(a),S=x.width,y=x.height,w=m+N,_=g+f,E=o+y,L=l+S,B=r.x,T=r.y,C=E>w?o-y-T:o+T+d,$=L>_?l+B-S+c:l+B;return{topOffset:C,leftOffset:$}}function SP(e){var t=e.containerRef,r=e.accessors,n=e.getters,a=e.selected,s=e.components,o=e.localizer,l=e.position,c=e.show,d=e.events,p=e.slotStart,m=e.slotEnd,g=e.onSelect,f=e.onDoubleClick,N=e.onKeyPress,x=e.handleDragStart,S=e.popperRef,y=e.target,w=e.offset;xP({ref:S,callback:c}),W.useLayoutEffect(function(){var L=jP({target:y,offset:w,container:t.current,box:S.current}),B=L.topOffset,T=L.leftOffset;S.current.style.top="".concat(B,"px"),S.current.style.left="".concat(T,"px")},[w.x,w.y,y]);var _=l.width,E={minWidth:_+_/2};return ue.createElement("div",{style:E,className:"rbc-overlay",ref:S},ue.createElement("div",{className:"rbc-overlay-header"},o.format(p,"dayHeaderFormat")),d.map(function(L,B){return ue.createElement(av,{key:B,type:"popup",localizer:o,event:L,getters:n,onSelect:g,accessors:r,components:s,onDoubleClick:f,onKeyPress:N,continuesPrior:o.lt(r.end(L),p,"day"),continuesAfter:o.gte(r.start(L),m,"day"),slotStart:p,slotEnd:m,selected:Bc(L,a),draggable:!0,onDragStart:function(){return x(L)},onDragEnd:function(){return c()}})}))}var ov=ue.forwardRef(function(e,t){return ue.createElement(SP,Object.assign({},e,{popperRef:t}))});ov.propTypes={accessors:Le.object.isRequired,getters:Le.object.isRequired,selected:Le.object,components:Le.object.isRequired,localizer:Le.object.isRequired,position:Le.object.isRequired,show:Le.func.isRequired,events:Le.array.isRequired,slotStart:Le.instanceOf(Date).isRequired,slotEnd:Le.instanceOf(Date),onSelect:Le.func,onDoubleClick:Le.func,onKeyPress:Le.func,handleDragStart:Le.func,style:Le.object,offset:Le.shape({x:Le.number,y:Le.number})};function _P(e){var t=e.containerRef,r=e.popupOffset,n=r===void 0?5:r,a=e.overlay,s=e.accessors,o=e.localizer,l=e.components,c=e.getters,d=e.selected,p=e.handleSelectEvent,m=e.handleDoubleClickEvent,g=e.handleKeyPressEvent,f=e.handleDragStart,N=e.onHide,x=e.overlayDisplay,S=W.useRef(null);if(!a.position)return null;var y=n;isNaN(n)||(y={x:n,y:n});var w=a.position,_=a.events,E=a.date,L=a.end;return ue.createElement(Sh,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:N,target:a.target},function(B){var T=B.props;return ue.createElement(ov,Object.assign({},T,{containerRef:t,ref:S,target:a.target,offset:y,accessors:s,getters:c,selected:d,components:l,localizer:o,position:w,show:x,events:_,slotStart:E,slotEnd:L,onSelect:p,onDoubleClick:m,onKeyPress:g,handleDragStart:f}))})}var Uh=ue.forwardRef(function(e,t){return ue.createElement(_P,Object.assign({},e,{containerRef:t}))});Uh.propTypes={popupOffset:Le.oneOfType([Le.number,Le.shape({x:Le.number,y:Le.number})]),overlay:Le.shape({position:Le.object,events:Le.array,date:Le.instanceOf(Date),end:Le.instanceOf(Date)}),accessors:Le.object.isRequired,localizer:Le.object.isRequired,components:Le.object.isRequired,getters:Le.object.isRequired,selected:Le.object,handleSelectEvent:Le.func,handleDoubleClickEvent:Le.func,handleKeyPressEvent:Le.func,handleDragStart:Le.func,onHide:Le.func,overlayDisplay:Le.func};function br(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return fo(r,e,t,{passive:!1})}function AP(e,t,r){return!e||Lo(e,document.elementFromPoint(t,r))}function CP(e,t){var r=t.clientX,n=t.clientY,a=document.elementFromPoint(r,n);return O0(a,".rbc-event",e)}function EP(e,t){var r=t.clientX,n=t.clientY,a=document.elementFromPoint(r,n);return O0(a,".rbc-show-more",e)}function vc(e,t){return!!CP(e,t)}function LP(e,t){return!!EP(e,t)}function lo(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var Cm=5,PP=250,lv=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.global,a=n===void 0?!1:n,s=r.longPressThreshold,o=s===void 0?250:s,l=r.validContainers,c=l===void 0?[]:l;er(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=br("touchmove",function(){},window),this._removeKeyDownListener=br("keydown",this._keyListener),this._removeKeyUpListener=br("keyup",this._keyListener),this._removeDropFromOutsideListener=br("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=br("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return tr(e,[{key:"on",value:function(r,n){var a=this._listeners[r]||(this._listeners[r]=[]);return a.push(n),{remove:function(){var o=a.indexOf(n);o!==-1&&a.splice(o,1)}}}},{key:"emit",value:function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];var o,l=this._listeners[r]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,a))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var n=this._selectRect;return!n||!this.selecting?!1:Em(n,vs(r))}},{key:"filter",value:function(r){var n=this._selectRect;return!n||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,n){var a=this,s=null,o=null,l=null,c=function(g){s=setTimeout(function(){p(),r(g)},a.longPressThreshold),o=br("touchmove",function(){return p()}),l=br("touchend",function(){return p()})},d=br("touchstart",c),p=function(){s&&clearTimeout(s),o&&o(),l&&l(),s=null,o=null,l=null};return n&&c(n),function(){p(),d()}}},{key:"_addInitialEventListener",value:function(){var r=this,n=br("mousedown",function(s){r._removeInitialEventListener(),r._handleInitialEvent(s),r._removeInitialEventListener=br("mousedown",r._handleInitialEvent)}),a=br("touchstart",function(s){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,s)});this._removeInitialEventListener=function(){n(),a()}}},{key:"_dropFromOutsideListener",value:function(r){var n=lo(r),a=n.pageX,s=n.pageY,o=n.clientX,l=n.clientY;this.emit("dropFromOutside",{x:a,y:s,clientX:o,clientY:l}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var n=lo(r),a=n.pageX,s=n.pageY,o=n.clientX,l=n.clientY;this.emit("dragOverFromOutside",{x:a,y:s,clientX:o,clientY:l}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var n=lo(r),a=n.clientX,s=n.clientY,o=n.pageX,l=n.pageY,c=this.container(),d,p;if(!(r.which===3||r.button===2||!AP(c,a,s))){if(!this.globalMouse&&c&&!Lo(c,r.target)){var m=DP(0),g=m.top,f=m.left,N=m.bottom,x=m.right;if(p=vs(c),d=Em({top:p.top-g,left:p.left-f,bottom:p.bottom+N,right:p.right+x},{top:l,left:o}),!d)return}var S=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:o,y:l,clientX:a,clientY:s});if(S!==!1)switch(r.type){case"mousedown":this._removeEndListener=br("mouseup",this._handleTerminatingEvent),this._onEscListener=br("keydown",this._handleTerminatingEvent),this._removeMoveListener=br("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=br("touchend",this._handleTerminatingEvent),this._removeMoveListener=br("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var n=r.target,a=this.validContainers;return!a||!a.length||!n?!0:a.some(function(s){return!!n.closest(s)})}},{key:"_handleTerminatingEvent",value:function(r){var n=this.selecting,a=this._selectRect;if(!n&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var s=!this.container||Lo(this.container(),r.target),o=this._isWithinValidContainer(r);return r.key==="Escape"||!o?this.emit("reset"):!n&&s?this._handleClickEvent(r):n?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var n=lo(r),a=n.pageX,s=n.pageY,o=n.clientX,l=n.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<PP?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:s,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:a,y:s,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var n=this._initialEventData,a=n.x,s=n.y,o=lo(r),l=o.pageX,c=o.pageY,d=Math.abs(a-l),p=Math.abs(s-c),m=Math.min(l,a),g=Math.min(c,s),f=this.selecting,N=this.isClick(l,c);N&&!f&&!(d||p)||(!f&&!N&&this.emit("selectStart",this._initialEventData),N||(this.selecting=!0,this._selectRect={top:g,left:m,x:l,y:c,right:m+d,bottom:g+p},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,n){var a=this._initialEventData,s=a.x,o=a.y,l=a.isTouch;return!l&&Math.abs(r-s)<=Cm&&Math.abs(n-o)<=Cm}}])}();function DP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return dt(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function Em(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=vs(e),a=n.top,s=n.left,o=n.right,l=o===void 0?s:o,c=n.bottom,d=c===void 0?a:c,p=vs(t),m=p.top,g=p.left,f=p.right,N=f===void 0?g:f,x=p.bottom,S=x===void 0?m:x;return!(d-r<m||a+r>S||l-r<g||s+r>N)}function vs(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+Lm("left"),n=t.top+Lm("top");return{top:n,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+n}}function Lm(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var kP=function(e){function t(r,n){var a;return er(this,t),a=wr(this,t,[r,n]),a.state={selecting:!1},a.containerRef=W.createRef(),a}return Nr(t,e),tr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(n){!n.selectable&&this.props.selectable&&this._selectable(),n.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var n=this.props,a=n.range,s=n.getNow,o=n.getters,l=n.date,c=n.components.dateCellWrapper,d=n.localizer,p=this.state,m=p.selecting,g=p.startIdx,f=p.endIdx,N=s();return ue.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},a.map(function(x,S){var y=m&&S>=g&&S<=f,w=o.dayProp(x),_=w.className,E=w.style;return ue.createElement(c,{key:S,value:x,range:a},ue.createElement("div",{style:E,className:qt("rbc-day-bg",_,y&&"rbc-selected-cell",d.isSameDate(x,N)&&"rbc-today",l&&d.neq(l,x,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var n=this,a=this.containerRef.current,s=this._selector=new lv(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(c,d){if(!vc(a,c)&&!LP(a,c)){var p=vs(a),m=n.props,g=m.range,f=m.rtl;if(wP(p,c)){var N=iv(p,c.x,f,g.length);n._selectSlot({startIdx:N,endIdx:N,action:d,box:c})}}n._initial={},n.setState({selecting:!1})};s.on("selecting",function(l){var c=n.props,d=c.range,p=c.rtl,m=-1,g=-1;if(n.state.selecting||(Dt(n.props.onSelectStart,[l]),n._initial={x:l.x,y:l.y}),s.isSelected(a)){var f=vs(a),N=NP(n._initial,f,l,d.length,p);m=N.startIdx,g=N.endIdx}n.setState({selecting:!0,startIdx:m,endIdx:g})}),s.on("beforeSelect",function(l){if(n.props.selectable==="ignoreEvents")return!vc(n.containerRef.current,l)}),s.on("click",function(l){return o(l,"click")}),s.on("doubleClick",function(l){return o(l,"doubleClick")}),s.on("select",function(l){n._selectSlot(At(At({},n.state),{},{action:"select",bounds:l})),n._initial={},n.setState({selecting:!1}),Dt(n.props.onSelectEnd,[n.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(n){var a=n.endIdx,s=n.startIdx,o=n.action,l=n.bounds,c=n.box;a!==-1&&s!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:s,end:a,action:o,bounds:l,box:c,resourceId:this.props.resourceId})}}])}(ue.Component),tn={propTypes:{slotMetrics:Le.object.isRequired,selected:Le.object,isAllDay:Le.bool,accessors:Le.object.isRequired,localizer:Le.object.isRequired,components:Le.object.isRequired,getters:Le.object.isRequired,onSelect:Le.func,onDoubleClick:Le.func,onKeyPress:Le.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var n=t.selected;t.isAllDay;var a=t.accessors,s=t.getters,o=t.onSelect,l=t.onDoubleClick,c=t.onKeyPress,d=t.localizer,p=t.slotMetrics,m=t.components,g=t.resizable,f=p.continuesPrior(r),N=p.continuesAfter(r);return ue.createElement(av,{event:r,getters:s,localizer:d,accessors:a,components:m,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:f,continuesAfter:N,slotStart:p.first,slotEnd:p.last,selected:Bc(r,n),resizable:g})},renderSpan:function(t,r,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",s=Math.abs(r)/t*100+"%";return ue.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:s,flexBasis:s,maxWidth:s}},a)}},cv=function(e){function t(){return er(this,t),wr(this,t,arguments)}return Nr(t,e),tr(t,[{key:"render",value:function(){var n=this,a=this.props,s=a.segments,o=a.slotMetrics.slots,l=a.className,c=1;return ue.createElement("div",{className:qt(l,"rbc-row")},s.reduce(function(d,p,m){var g=p.event,f=p.left,N=p.right,x=p.span,S="_lvl_"+m,y=f-c,w=tn.renderEvent(n.props,g);return y&&d.push(tn.renderSpan(o,y,"".concat(S,"_gap"))),d.push(tn.renderSpan(o,x,S,w)),c=N+1,d},[]))}}])}(ue.Component);cv.defaultProps=At({},tn.defaultProps);function uv(e){var t=e.dateRange,r=e.unit,n=r===void 0?"day":r,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,n)}}function OP(e,t,r,n){var a=uv({dateRange:t,localizer:n}),s=a.first,o=a.last,l=n.diff(s,o,"day"),c=n.max(n.startOf(r.start(e),"day"),s),d=n.min(n.ceil(r.end(e),"day"),o),p=R_(t,function(g){return n.isSameDate(g,c)}),m=n.diff(c,d,"day");return m=Math.min(m,l),m=Math.max(m-n.segmentOffset,1),{event:e,span:m,left:p+1,right:Math.max(p+m,1)}}function Gd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,n,a,s=[],o=[];for(r=0;r<e.length;r++){for(a=e[r],n=0;n<s.length&&TP(a,s[n]);n++);n>=t?o.push(a):(s[n]||(s[n]=[])).push(a)}for(r=0;r<s.length;r++)s[r].sort(function(l,c){return l.left-c.left});return{levels:s,extra:o}}function ko(e,t,r,n,a){var s={start:n.start(e),end:n.end(e)},o={start:t,end:r};return a.inEventRange({event:s,range:o})}function TP(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function MP(e,t,r){var n=Ql(e),a=[],s=[];n.forEach(function(c){var d=t.start(c),p=t.end(c);r.daySpan(d,p)>1?a.push(c):s.push(c)});var o=a.sort(function(c,d){return Vd(c,d,t,r)}),l=s.sort(function(c,d){return Vd(c,d,t,r)});return[].concat(Ql(o),Ql(l))}function Vd(e,t,r,n){var a={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},s={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return n.sortEvents({evtA:a,evtB:s})}var Yd=function(t,r){return t.left<=r&&t.right>=r},id=function(t,r){return t.filter(function(n){return Yd(n,r)}).map(function(n){return n.event})},dv=function(e){function t(){return er(this,t),wr(this,t,arguments)}return Nr(t,e),tr(t,[{key:"render",value:function(){for(var n=this.props,a=n.segments,s=n.slotMetrics.slots,o=Gd(a).levels[0],l=1,c=1,d=[];l<=s;){var p="_lvl_"+l,m=o.filter(function(E){return Yd(E,l)})[0]||{},g=m.event,f=m.left,N=m.right,x=m.span;if(!g){var S=this.getHiddenEventsForSlot(a,l);if(S.length>0){var y=l-c;y&&d.push(tn.renderSpan(s,y,p+"_gap")),d.push(tn.renderSpan(s,1,p,this.renderShowMore(a,l))),c=l=l+1;continue}l++;continue}var w=Math.max(0,f-c);if(this.canRenderSlotEvent(f,x)){var _=tn.renderEvent(this.props,g);w&&d.push(tn.renderSpan(s,w,p+"_gap")),d.push(tn.renderSpan(s,x,p,_)),c=l=N+1}else w&&d.push(tn.renderSpan(s,w,p+"_gap")),d.push(tn.renderSpan(s,1,p,this.renderShowMore(a,l))),c=l=l+1}return ue.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(n,a){var s=id(n,a),o=Gd(n).levels[0],l=o.filter(function(c){return Yd(c,a)}).map(function(c){return c.event});return s.filter(function(c){return!l.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(n,a){var s=this.props.segments;return K_(n,n+a).every(function(o){var l=id(s,o).length;return l===1})}},{key:"renderShowMore",value:function(n,a){var s=this,o=this.props,l=o.localizer,c=o.slotMetrics,d=o.components,p=c.getEventsForSlot(a),m=id(n,a),g=m.length;if(d!=null&&d.showMore){var f=d.showMore,N=c.getDateForSlot(a-1);return g?ue.createElement(f,{localizer:l,slotDate:N,slot:a,count:g,events:p,remainingEvents:m}):!1}return g?ue.createElement("button",{type:"button",key:"sm_"+a,className:qt("rbc-button-link","rbc-show-more"),onClick:function(S){return s.showMore(a,S)}},l.messages.showMore(g,m,p)):!1}},{key:"showMore",value:function(n,a){a.preventDefault(),a.stopPropagation(),this.props.onShowMore(n,a.target)}}])}(ue.Component);dv.defaultProps=At({},tn.defaultProps);var IP=function(t){var r=t.children;return ue.createElement("div",{className:"rbc-row-content-scroll-container"},r)},RP=function(t,r){return t.left<=r&&t.right>=r},FP=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function hv(){return F0(function(e){for(var t=e.range,r=e.events,n=e.maxRows,a=e.minRows,s=e.accessors,o=e.localizer,l=uv({dateRange:t,localizer:o}),c=l.first,d=l.last,p=r.map(function(x){return OP(x,t,s,o)}),m=Gd(p,Math.max(n-1,1)),g=m.levels,f=m.extra,N=f.length>0?a-1:a;g.length<N;)g.push([]);return{first:c,last:d,levels:g,extra:f,range:t,slots:t.length,clone:function(S){var y=hv();return y(At(At({},e),S))},getDateForSlot:function(S){return t[S]},getSlotForDate:function(S){return t.find(function(y){return o.isSameDate(y,S)})},getEventsForSlot:function(S){return p.filter(function(y){return RP(y,S)}).map(function(y){return y.event})},continuesPrior:function(S){return o.continuesPrior(s.start(S),c)},continuesAfter:function(S){var y=s.start(S),w=s.end(S);return o.continuesAfter(y,w,d)}}},FP)}var Oo=function(e){function t(){var r;er(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=wr(this,t,[].concat(a)),r.handleSelectSlot=function(o){var l=r.props,c=l.range,d=l.onSelectSlot;d(c.slice(o.start,o.end+1),o)},r.handleShowMore=function(o,l){var c=r.props,d=c.range,p=c.onShowMore,m=r.slotMetrics(r.props),g=R5(r.containerRef.current,".rbc-row-bg")[0],f;g&&(f=g.children[o-1]);var N=m.getEventsForSlot(o);p(N,d[o-1],f,o,l)},r.getContainer=function(){var o=r.props.container;return o?o():r.containerRef.current},r.renderHeadingCell=function(o,l){var c=r.props,d=c.renderHeader,p=c.getNow,m=c.localizer;return d({date:o,key:"header_".concat(l),className:qt("rbc-date-cell",m.isSameDate(o,p())&&"rbc-now")})},r.renderDummy=function(){var o=r.props,l=o.className,c=o.range,d=o.renderHeader,p=o.showAllEvents;return ue.createElement("div",{className:l,ref:r.containerRef},ue.createElement("div",{className:qt("rbc-row-content",p&&"rbc-row-content-scrollable")},d&&ue.createElement("div",{className:"rbc-row",ref:r.headingRowRef},c.map(r.renderHeadingCell)),ue.createElement("div",{className:"rbc-row",ref:r.eventRowRef},ue.createElement("div",{className:"rbc-row-segment"},ue.createElement("div",{className:"rbc-event"},ue.createElement("div",{className:"rbc-event-content"}," "))))))},r.containerRef=W.createRef(),r.headingRowRef=W.createRef(),r.eventRowRef=W.createRef(),r.slotMetrics=hv(),r}return Nr(t,e),tr(t,[{key:"getRowLimit",value:function(){var n,a=nd(this.eventRowRef.current),s=(n=this.headingRowRef)!==null&&n!==void 0&&n.current?nd(this.headingRowRef.current):0,o=nd(this.containerRef.current)-s;return Math.max(Math.floor(o/a),1)}},{key:"render",value:function(){var n=this.props,a=n.date,s=n.rtl,o=n.range,l=n.className,c=n.selected,d=n.selectable,p=n.renderForMeasure,m=n.accessors,g=n.getters,f=n.components,N=n.getNow,x=n.renderHeader,S=n.onSelect,y=n.localizer,w=n.onSelectStart,_=n.onSelectEnd,E=n.onDoubleClick,L=n.onKeyPress,B=n.resourceId,T=n.longPressThreshold,C=n.isAllDay,$=n.resizable,H=n.showAllEvents;if(p)return this.renderDummy();var A=this.slotMetrics(this.props),O=A.levels,F=A.extra,U=H?IP:$n,te=f.weekWrapper,re={selected:c,accessors:m,getters:g,localizer:y,components:f,onSelect:S,onDoubleClick:E,onKeyPress:L,resourceId:B,slotMetrics:A,resizable:$};return ue.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},ue.createElement(kP,{localizer:y,date:a,getNow:N,rtl:s,range:o,selectable:d,container:this.getContainer,getters:g,onSelectStart:w,onSelectEnd:_,onSelectSlot:this.handleSelectSlot,components:f,longPressThreshold:T,resourceId:B}),ue.createElement("div",{className:qt("rbc-row-content",H&&"rbc-row-content-scrollable"),role:"row"},x&&ue.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),ue.createElement(U,null,ue.createElement(te,Object.assign({isAllDay:C},re,{rtl:this.props.rtl}),O.map(function(Z,Q){return ue.createElement(cv,Object.assign({key:Q,segments:Z},re))}),!!F.length&&ue.createElement(dv,Object.assign({segments:F,onShowMore:this.handleShowMore},re))))))}}])}(ue.Component);Oo.defaultProps={minRows:0,maxRows:1/0};var Wh=function(t){var r=t.label;return ue.createElement("span",{role:"columnheader","aria-sort":"none"},r)},$P=function(t){var r=t.label,n=t.drilldownView,a=t.onDrillDown;return n?ue.createElement("button",{type:"button",className:"rbc-button-link",onClick:a},r):ue.createElement("span",null,r)},BP=["date","className"],qP=function(t,r,n,a,s){return t.filter(function(o){return ko(o,r,n,a,s)})},qc=function(e){function t(){var r;er(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=wr(this,t,[].concat(a)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(o,l){var c=r.props,d=c.events,p=c.components,m=c.selectable,g=c.getNow,f=c.selected,N=c.date,x=c.localizer,S=c.longPressThreshold,y=c.accessors,w=c.getters,_=c.showAllEvents,E=r.state,L=E.needLimitMeasure,B=E.rowLimit,T=qP(Ql(d),o[0],o[o.length-1],y,x),C=MP(T,y,x);return ue.createElement(Oo,{key:l,ref:l===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:g,date:N,range:o,events:C,maxRows:_?1/0:B,selected:f,selectable:m,components:p,accessors:y,getters:w,localizer:x,renderHeader:r.readerDateHeading,renderForMeasure:L,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:S,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:_})},r.readerDateHeading=function(o){var l=o.date,c=o.className,d=Wn(o,BP),p=r.props,m=p.date,g=p.getDrilldownView,f=p.localizer,N=f.neq(m,l,"month"),x=f.isSameDate(l,m),S=g(l),y=f.format(l,"dateFormat"),w=r.props.components.dateHeader||$P;return ue.createElement("div",Object.assign({},d,{className:qt(c,N&&"rbc-off-range",x&&"rbc-current"),role:"cell"}),ue.createElement(w,{label:y,date:l,drilldownView:S,isOffRange:N,onDrillDown:function(E){return r.handleHeadingClick(l,S,E)}}))},r.handleSelectSlot=function(o,l){r._pendingSelection=r._pendingSelection.concat(o),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(l)})},r.handleHeadingClick=function(o,l,c){c.preventDefault(),r.clearSelection(),Dt(r.props.onDrillDown,[o,l])},r.handleSelectEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onSelectEvent,l)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onDoubleClickEvent,l)},r.handleKeyPressEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onKeyPressEvent,l)},r.handleShowMore=function(o,l,c,d,p){var m=r.props,g=m.popup,f=m.onDrillDown,N=m.onShowMore,x=m.getDrilldownView,S=m.doShowMoreDrillDown;if(r.clearSelection(),g){var y=h0(c,r.containerRef.current);r.setState({overlay:{date:l,events:o,position:y,target:p}})}else S&&Dt(f,[l,x(l)||Ar.DAY]);Dt(N,[o,l,d])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=W.createRef(),r.slotRowRef=W.createRef(),r._bgRows=[],r._pendingSelection=[],r}return Nr(t,e),tr(t,[{key:"componentDidMount",value:function(){var n=this,a;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){a||f0(function(){a=!1,n.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var n=this.props,a=n.date,s=n.localizer,o=n.className,l=s.visibleDays(a,s),c=w5(l,7);return this._weekCount=c.length,ue.createElement("div",{className:qt("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},ue.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(n){var a=this.props,s=a.localizer,o=a.components,l=n[0],c=n[n.length-1],d=o.header||Wh;return s.range(l,c,"day").map(function(p,m){return ue.createElement("div",{key:"header_"+m,className:"rbc-header"},ue.createElement(d,{date:p,localizer:s,label:s.format(p,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var n,a,s=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,p=l.components,m=l.getters,g=l.selected,f=l.popupOffset,N=l.handleDragStart,x=function(){return s.setState({overlay:null})};return ue.createElement(Uh,{overlay:o,accessors:c,localizer:d,components:p,getters:m,selected:g,popupOffset:f,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:N,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:x})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(n){var a=this._pendingSelection.slice();this._pendingSelection=[],a.sort(function(l,c){return+l-+c});var s=new Date(a[0]),o=new Date(a[a.length-1]);o.setDate(a[a.length-1].getDate()+1),Dt(this.props.onSelectSlot,{slots:a,start:s,end:o,action:n.action,bounds:n.bounds,box:n.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(n,a){var s=n.date,o=n.localizer;return{date:s,needLimitMeasure:o.neq(s,a.date,"month")}}}])}(ue.Component);qc.range=function(e,t){var r=t.localizer,n=r.firstVisibleDay(e,r),a=r.lastVisibleDay(e,r);return{start:n,end:a}};qc.navigate=function(e,t,r){var n=r.localizer;switch(t){case Ir.PREVIOUS:return n.add(e,-1,"month");case Ir.NEXT:return n.add(e,1,"month");default:return e}};qc.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var Pm=function(t){var r=t.min,n=t.max,a=t.step,s=t.slots,o=t.localizer;return"".concat(+o.startOf(r,"minutes"))+"".concat(+o.startOf(n,"minutes"))+"".concat(a,"-").concat(s)};function Hh(e){for(var t=e.min,r=e.max,n=e.step,a=e.timeslots,s=e.localizer,o=Pm({step:n,localizer:s}),l=1+s.getTotalMin(t,r),c=s.getMinutesFromMidnight(t),d=Math.ceil((l-1)/(n*a)),p=d*a,m=new Array(d),g=new Array(p),f=0;f<d;f++){m[f]=new Array(a);for(var N=0;N<a;N++){var x=f*a+N,S=x*n;g[x]=m[f][N]=s.getSlotDate(t,c,S)}}var y=g.length*n;g.push(s.getSlotDate(t,c,y));function w(_){var E=s.diff(t,_,"minutes")+s.getDstOffset(t,_);return Math.min(E,l)}return{groups:m,update:function(E){return Pm(E)!==o?Hh(E):this},dateIsInGroup:function(E,L){var B=m[L+1];return s.inRange(E,m[L][0],B?B[0]:r,"minutes")},nextSlot:function(E){var L=g[Math.min(g.findIndex(function(B){return B===E||s.eq(B,E)})+1,g.length-1)];return s.eq(L,E)&&(L=s.add(E,n,"minutes")),L},closestSlotToPosition:function(E){var L=Math.min(g.length-1,Math.max(0,Math.floor(E*p)));return g[L]},closestSlotFromPoint:function(E,L){var B=Math.abs(L.top-L.bottom);return this.closestSlotToPosition((E.y-L.top)/B)},closestSlotFromDate:function(E){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(s.lt(E,t,"minutes"))return g[0];if(s.gt(E,r,"minutes"))return g[g.length-1];var B=s.diff(t,E,"minutes");return g[(B-B%n)/n+L]},startsBeforeDay:function(E){return s.lt(E,t,"day")},startsAfterDay:function(E){return s.gt(E,r,"day")},startsBefore:function(E){return s.lt(s.merge(t,E),t,"minutes")},startsAfter:function(E){return s.gt(s.merge(r,E),r,"minutes")},getRange:function(E,L,B,T){B||(E=s.min(r,s.max(t,E))),T||(L=s.min(r,s.max(t,L)));var C=w(E),$=w(L),H=$>n*p&&!s.eq(r,L)?(C-n)/(n*p)*100:C/(n*p)*100;return{top:H,height:$/(n*p)*100-H,start:w(E),startDate:E,end:w(L),endDate:L}},getCurrentTimePosition:function(E){var L=w(E),B=L/(n*p)*100;return B}}}var zP=function(){function e(t,r){var n=r.accessors,a=r.slotMetrics;er(this,e);var s=a.getRange(n.start(t),n.end(t)),o=s.start,l=s.startDate,c=s.end,d=s.endDate,p=s.top,m=s.height;this.start=o,this.end=c,this.startMs=+l,this.endMs=+d,this.top=p,this.height=m,this.data=t}return tr(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(a,s){return Math.max(a,s.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var n=100-this.container._width;return n/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,n=Math.min(100,this._width*1.7);if(this.rows)return n;if(this.leaves)return this.leaves.length>0?n:r;var a=this.row.leaves,s=a.indexOf(this);return s===a.length-1?r:n}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,n=r.leaves,a=r.xOffset,s=r._width,o=n.indexOf(this)+1;return a+o*s}}])}();function UP(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function WP(e){for(var t=m8(e,["startMs",function(l){return-l.endMs}]),r=[];t.length>0;){var n=t.shift();r.push(n);for(var a=0;a<t.length;a++){var s=t[a];if(!(n.endMs>s.startMs)){if(a>0){var o=t.splice(a,1)[0];r.push(o)}break}}}return r}function fv(e){for(var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,s=t.map(function(p){return new zP(p,{slotMetrics:n,accessors:a})}),o=WP(s),l=[],c=function(){var m=o[d],g=l.find(function(x){return x.end>m.start||Math.abs(m.start-x.start)<r});if(!g)return m.rows=[],l.push(m),1;m.container=g;for(var f=null,N=g.rows.length-1;!f&&N>=0;N--)UP(g.rows[N],m,r)&&(f=g.rows[N]);f?(f.leaves.push(m),m.row=f):(m.leaves=[],g.rows.push(m))},d=0;d<o.length;d++)c();return o.map(function(p){return{event:p.data,style:{top:p.top,height:p.height,width:p.width,xOffset:Math.max(0,p.xOffset)}}})}function pv(e,t,r){for(var n=0;n<e.friends.length;++n)if(!(r.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,r.push(e.friends[n]);var a=pv(e.friends[n],t,r);t=t>a?t:a}return t}function HP(e){var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,s=fv({events:t,minimumStartDifference:r,slotMetrics:n,accessors:a});s.sort(function(te,re){return te=te.style,re=re.style,te.top!==re.top?te.top>re.top?1:-1:te.height!==re.height?te.top+te.height<re.top+re.height?1:-1:0});for(var o=0;o<s.length;++o)s[o].friends=[],delete s[o].style.left,delete s[o].style.left,delete s[o].idx,delete s[o].size;for(var l=0;l<s.length-1;++l)for(var c=s[l],d=c.style.top,p=c.style.top+c.style.height,m=l+1;m<s.length;++m){var g=s[m],f=g.style.top,N=g.style.top+g.style.height;(f>=d&&N<=p||N>d&&N<=p||f>=d&&f<p)&&(c.friends.push(g),g.friends.push(c))}for(var x=0;x<s.length;++x){for(var S=s[x],y=[],w=0;w<100;++w)y.push(1);for(var _=0;_<S.friends.length;++_)S.friends[_].idx!==void 0&&(y[S.friends[_].idx]=0);S.idx=y.indexOf(1)}for(var E=0;E<s.length;++E){var L=0;if(!s[E].size){var B=[],T=pv(s[E],0,B);L=100/(T+1),s[E].size=L;for(var C=0;C<B.length;++C)B[C].size=L}}for(var $=0;$<s.length;++$){var H=s[$];H.style.left=H.idx*H.size;for(var A=0,O=0;O<H.friends.length;++O){var F=H.friends[O].idx;A=A>F?A:F}A<=H.idx&&(H.size=100-H.idx*H.size);var U=H.idx===0?0:3;H.style.width="calc(".concat(H.size,"% - ").concat(U,"px)"),H.style.height="calc(".concat(H.style.height,"% - 2px)"),H.style.xOffset="calc(".concat(H.style.left,"% + ").concat(U,"px)")}return s}var Dm={overlap:fv,"no-overlap":HP};function GP(e){return!!(e&&e.constructor&&e.call&&e.apply)}function VP(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in Dm&&(r=Dm[t]),GP(r)?r.apply(this,arguments):[]}var mv=function(e){function t(){return er(this,t),wr(this,t,arguments)}return Nr(t,e),tr(t,[{key:"render",value:function(){var n=this.props,a=n.renderSlot,s=n.resource,o=n.group,l=n.getters,c=n.components,d=c===void 0?{}:c,p=d.timeSlotWrapper,m=p===void 0?$n:p,g=l?l.slotGroupProp(o):{};return ue.createElement("div",Object.assign({className:"rbc-timeslot-group"},g),o.map(function(f,N){var x=l?l.slotProp(f,s):{};return ue.createElement(m,{key:N,value:f,resource:s},ue.createElement("div",Object.assign({},x,{className:qt("rbc-time-slot",x.className)}),a&&a(f,N)))}))}}])}(W.Component);function Hl(e){return typeof e=="string"?e:e+"%"}function YP(e){var t=e.style,r=e.className,n=e.event,a=e.accessors,s=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,p=e.getters,m=e.onClick,g=e.onDoubleClick,f=e.isBackgroundEvent,N=e.onKeyPress,x=e.components,S=x.event,y=x.eventWrapper,w=a.title(n),_=a.tooltip(n),E=a.end(n),L=a.start(n),B=p.eventProp(n,L,E,o),T=[ue.createElement("div",{key:"1",className:"rbc-event-label"},l),ue.createElement("div",{key:"2",className:"rbc-event-content"},S?ue.createElement(S,{event:n,title:w}):w)],C=t.height,$=t.top,H=t.width,A=t.xOffset,O=At(At({},B.style),{},as({top:Hl($),height:Hl(C),width:Hl(H)},s?"right":"left",Hl(A)));return ue.createElement(y,Object.assign({type:"time"},e),ue.createElement("div",{role:"button",tabIndex:0,onClick:m,onDoubleClick:g,style:O,onKeyDown:N,title:_?(typeof l=="string"?l+": ":"")+_:void 0,className:qt(f?"rbc-background-event":"rbc-event",r,B.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},T))}var KP=function(t){var r=t.children,n=t.className,a=t.style,s=t.innerRef;return ue.createElement("div",{className:n,style:a,ref:s},r)},XP=ue.forwardRef(function(e,t){return ue.createElement(KP,Object.assign({},e,{innerRef:t}))}),JP=["dayProp"],ZP=["eventContainerWrapper","timeIndicatorWrapper"],gv=function(e){function t(){var r;er(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=wr(this,t,[].concat(a)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(o){var l=o.events,c=o.isBackgroundEvent,d=r.props,p=d.rtl,m=d.selected,g=d.accessors,f=d.localizer,N=d.getters,x=d.components,S=d.step,y=d.timeslots,w=d.dayLayoutAlgorithm,_=d.resizable,E=r,L=E.slotMetrics,B=f.messages,T=VP({events:l,accessors:g,slotMetrics:L,minimumStartDifference:Math.ceil(S*y/2),dayLayoutAlgorithm:w});return T.map(function(C,$){var H,A=C.event,O=C.style,F=g.end(A),U=g.start(A),te=(H=g.eventId(A))!==null&&H!==void 0?H:"evt_"+$,re="eventTimeRangeFormat",Z,Q=L.startsBeforeDay(U),Y=L.startsAfterDay(F);Q?re="eventTimeRangeEndFormat":Y&&(re="eventTimeRangeStartFormat"),Q&&Y?Z=B.allDay:Z=f.format({start:U,end:F},re);var X=Q||L.startsBefore(U),ce=Y||L.startsAfter(F);return ue.createElement(YP,{style:O,event:A,label:Z,key:te,getters:N,rtl:p,components:x,continuesPrior:X,continuesAfter:ce,accessors:g,resource:r.props.resource,selected:Bc(A,m),onClick:function(q){return r._select(At(At(At({},A),r.props.resource&&{sourceResource:r.props.resource}),c&&{isBackgroundEvent:!0}),q)},onDoubleClick:function(q){return r._doubleClick(A,q)},isBackgroundEvent:c,onKeyPress:function(q){return r._keyPress(A,q)},resizable:_})})},r._selectable=function(){var o=r.containerRef.current,l=r.props,c=l.longPressThreshold,d=l.localizer,p=r._selector=new lv(function(){return o},{longPressThreshold:c}),m=function(x){var S=r.props.onSelecting,y=r.state||{},w=g(x),_=w.startDate,E=w.endDate;S&&(d.eq(y.startDate,_,"minutes")&&d.eq(y.endDate,E,"minutes")||S({start:_,end:E,resourceId:r.props.resource})===!1)||(r.state.start!==w.start||r.state.end!==w.end||r.state.selecting!==w.selecting)&&r.setState(w)},g=function(x){var S=r.slotMetrics.closestSlotFromPoint(x,vs(o));r.state.selecting||(r._initialSlot=S);var y=r._initialSlot;d.lte(y,S)?S=r.slotMetrics.nextSlot(S):d.gt(y,S)&&(y=r.slotMetrics.nextSlot(y));var w=r.slotMetrics.getRange(d.min(y,S),d.max(y,S));return At(At({},w),{},{selecting:!0,top:"".concat(w.top,"%"),height:"".concat(w.height,"%")})},f=function(x,S){if(!vc(r.containerRef.current,x)){var y=g(x),w=y.startDate,_=y.endDate;r._selectSlot({startDate:w,endDate:_,action:S,box:x})}r.setState({selecting:!1})};p.on("selecting",m),p.on("selectStart",m),p.on("beforeSelect",function(N){if(r.props.selectable==="ignoreEvents")return!vc(r.containerRef.current,N)}),p.on("click",function(N){return f(N,"click")}),p.on("doubleClick",function(N){return f(N,"doubleClick")}),p.on("select",function(N){r.state.selecting&&(r._selectSlot(At(At({},r.state),{},{action:"select",bounds:N})),r.setState({selecting:!1}))}),p.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(o){for(var l=o.startDate,c=o.endDate,d=o.action,p=o.bounds,m=o.box,g=l,f=[];r.props.localizer.lte(g,c);)f.push(g),g=new Date(+g+r.props.step*60*1e3);Dt(r.props.onSelectSlot,{slots:f,start:l,end:c,resourceId:r.props.resource,action:d,bounds:p,box:m})},r._select=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onSelectEvent,l)},r._doubleClick=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onDoubleClickEvent,l)},r._keyPress=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onKeyPressEvent,l)},r.slotMetrics=Hh(r.props),r.containerRef=W.createRef(),r}return Nr(t,e),tr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(n,a){this.props.selectable&&!n.selectable&&this._selectable(),!this.props.selectable&&n.selectable&&this._teardownSelectable();var s=this.props,o=s.getNow,l=s.isNow,c=s.localizer,d=s.date,p=s.min,m=s.max,g=c.neq(n.getNow(),o(),"minutes");if(n.isNow!==l||g){if(this.clearTimeIndicatorInterval(),l){var f=!g&&c.eq(n.date,d,"minutes")&&a.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(f)}}else l&&(c.neq(n.min,p,"minutes")||c.neq(n.max,m,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var n=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!a&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){n.intervalTriggered=!0,n.positionTimeIndicator(),n.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var n=this.props,a=n.min,s=n.max,o=n.getNow,l=o();if(l>=a&&l<=s){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var n=this.props,a=n.date,s=n.max,o=n.rtl,l=n.isNow,c=n.resource,d=n.accessors,p=n.localizer,m=n.getters,g=m.dayProp,f=Wn(m,JP),N=n.components,x=N.eventContainerWrapper,S=N.timeIndicatorWrapper,y=Wn(N,ZP);this.slotMetrics=this.slotMetrics.update(this.props);var w=this.slotMetrics,_=this.state,E=_.selecting,L=_.top,B=_.height,T=_.startDate,C=_.endDate,$={start:T,end:C},H=g(s,c),A=H.className,O=H.style,F={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},U=y.dayColumnWrapper||XP;return ue.createElement(U,{ref:this.containerRef,date:a,style:O,className:qt(A,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",E&&"rbc-slot-selecting"),slotMetrics:w,resource:c},w.groups.map(function(te,re){return ue.createElement(mv,{key:re,group:te,resource:c,getters:f,components:y})}),ue.createElement(x,{localizer:p,resource:c,accessors:d,getters:f,components:y,slotMetrics:w},ue.createElement("div",{className:qt("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),E&&ue.createElement("div",{className:"rbc-slot-selection",style:{top:L,height:B}},ue.createElement("span",null,p.format($,"selectRangeFormat"))),l&&this.intervalTriggered&&ue.createElement(S,F,ue.createElement("div",F)))}}])}(ue.Component);gv.defaultProps={dragThroughEvents:!0,timeslots:2};var vv=function(t){var r=t.label;return ue.createElement(ue.Fragment,null,r)},QP=function(e){function t(){var r;er(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=wr(this,t,[].concat(a)),r.handleHeaderClick=function(o,l,c){c.preventDefault(),Dt(r.props.onDrillDown,[o,l])},r.renderRow=function(o){var l=r.props,c=l.events,d=l.rtl,p=l.selectable,m=l.getNow,g=l.range,f=l.getters,N=l.localizer,x=l.accessors,S=l.components,y=l.resizable,w=x.resourceId(o),_=o?c.filter(function(E){return x.resource(E)===w}):c;return ue.createElement(Oo,{isAllDay:!0,rtl:d,getNow:m,minRows:2,maxRows:r.props.allDayMaxRows+1,range:g,events:_,resourceId:w,className:"rbc-allday-cell",selectable:p,selected:r.props.selected,components:S,accessors:x,getters:f,localizer:N,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:y})},r}return Nr(t,e),tr(t,[{key:"renderHeaderCells",value:function(n){var a=this,s=this.props,o=s.localizer,l=s.getDrilldownView,c=s.getNow,d=s.getters.dayProp,p=s.components.header,m=p===void 0?Wh:p,g=c();return n.map(function(f,N){var x=l(f),S=o.format(f,"dayFormat"),y=d(f),w=y.className,_=y.style,E=ue.createElement(m,{date:f,label:S,localizer:o});return ue.createElement("div",{key:N,style:_,className:qt("rbc-header",w,o.isSameDate(f,g)&&"rbc-today")},x?ue.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(B){return a.handleHeaderClick(f,x,B)}},E):ue.createElement("span",null,E))})}},{key:"render",value:function(){var n=this,a=this.props,s=a.width,o=a.rtl,l=a.resources,c=a.range,d=a.events,p=a.getNow,m=a.accessors,g=a.selectable,f=a.components,N=a.getters,x=a.scrollRef,S=a.localizer,y=a.isOverflowing,w=a.components,_=w.timeGutterHeader,E=w.resourceHeader,L=E===void 0?vv:E,B=a.resizable,T={};y&&(T[o?"marginLeft":"marginRight"]="".concat(jh()-1,"px"));var C=l.groupEvents(d);return ue.createElement("div",{style:T,ref:x,className:qt("rbc-time-header",y&&"rbc-overflowing")},ue.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},_&&ue.createElement(_,null)),l.map(function($,H){var A=us($,2),O=A[0],F=A[1];return ue.createElement("div",{className:"rbc-time-header-content",key:O||H},F&&ue.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(H)},ue.createElement("div",{className:"rbc-header"},ue.createElement(L,{index:H,label:m.resourceTitle(F),resource:F}))),ue.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},n.renderHeaderCells(c)),ue.createElement(Oo,{isAllDay:!0,rtl:o,getNow:p,minRows:2,maxRows:n.props.allDayMaxRows+1,range:c,events:C.get(O)||[],resourceId:F&&O,className:"rbc-allday-cell",selectable:g,selected:n.props.selected,components:f,accessors:m,getters:N,localizer:S,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:B}))}))}}])}(ue.Component),eD=function(e){function t(){var r;er(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=wr(this,t,[].concat(a)),r.handleHeaderClick=function(o,l,c){c.preventDefault(),Dt(r.props.onDrillDown,[o,l])},r}return Nr(t,e),tr(t,[{key:"renderHeaderCells",value:function(n){var a=this,s=this.props,o=s.localizer,l=s.getDrilldownView,c=s.getNow,d=s.getters.dayProp,p=s.components,m=p.header,g=m===void 0?Wh:m,f=p.resourceHeader,N=f===void 0?vv:f,x=s.resources,S=s.accessors,y=s.events,w=s.rtl,_=s.selectable,E=s.components,L=s.getters,B=s.resizable,T=c(),C=x.groupEvents(y);return n.map(function($,H){var A=l($),O=o.format($,"dayFormat"),F=d($),U=F.className,te=F.style,re=ue.createElement(g,{date:$,label:O,localizer:o});return ue.createElement("div",{key:H,className:"rbc-time-header-content rbc-resource-grouping"},ue.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(n.length<=1?" rbc-time-header-cell-single-day":"")},ue.createElement("div",{style:te,className:qt("rbc-header",U,o.isSameDate($,T)&&"rbc-today")},A?ue.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(Q){return a.handleHeaderClick($,A,Q)}},re):ue.createElement("span",null,re))),ue.createElement("div",{className:"rbc-row"},x.map(function(Z,Q){var Y=us(Z,2),X=Y[0],ce=Y[1];return ue.createElement("div",{key:"resource_".concat(X,"_").concat(Q),className:qt("rbc-header",U,o.isSameDate($,T)&&"rbc-today")},ue.createElement(N,{index:Q,label:S.resourceTitle(ce),resource:ce}))})),ue.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},x.map(function(Z,Q){var Y=us(Z,2),X=Y[0],ce=Y[1],P=(C.get(X)||[]).filter(function(q){return o.isSameDate(q.start,$)||o.isSameDate(q.end,$)});return ue.createElement(Oo,{key:"resource_".concat(X,"_").concat(Q),isAllDay:!0,rtl:w,getNow:c,minRows:2,maxRows:a.props.allDayMaxRows+1,range:[$],events:P,resourceId:ce&&X,className:"rbc-allday-cell",selectable:_,selected:a.props.selected,components:E,accessors:S,getters:L,localizer:o,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:B})})))})}},{key:"render",value:function(){var n=this.props,a=n.width,s=n.rtl,o=n.range,l=n.scrollRef,c=n.isOverflowing,d=n.components.timeGutterHeader,p={};return c&&(p[s?"marginLeft":"marginRight"]="".concat(jh()-1,"px")),ue.createElement("div",{style:p,ref:l,className:qt("rbc-time-header",c&&"rbc-overflowing")},ue.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},d&&ue.createElement(d,null)),this.renderHeaderCells(o))}}])}(ue.Component);function tD(e){var t=e.min,r=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(r)?{start:n.add(t,-1,"day"),end:n.add(r,-1,"day")}:{start:t,end:r}}var rD=function(t){var r=t.min,n=t.max,a=t.timeslots,s=t.step,o=t.localizer,l=t.getNow,c=t.resource,d=t.components,p=t.getters,m=t.gutterRef,g=d.timeGutterWrapper,f=W.useMemo(function(){return tD({min:r,max:n,localizer:o})},[r==null?void 0:r.toISOString(),n==null?void 0:n.toISOString(),o]),N=f.start,x=f.end,S=W.useState(Hh({min:N,max:x,timeslots:a,step:s,localizer:o})),y=us(S,2),w=y[0],_=y[1];W.useEffect(function(){w&&_(w.update({min:N,max:x,timeslots:a,step:s,localizer:o}))},[N==null?void 0:N.toISOString(),x==null?void 0:x.toISOString(),a,s]);var E=W.useCallback(function(L,B){if(B)return null;var T=w.dateIsInGroup(l(),B);return ue.createElement("span",{className:qt("rbc-label",T&&"rbc-now")},o.format(L,"timeGutterFormat"))},[w,o,l]);return ue.createElement(g,{slotMetrics:w},ue.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:m},w.groups.map(function(L,B){return ue.createElement(mv,{key:B,group:L,resource:c,components:d,renderSlot:E,getters:p})})))},nD=ue.forwardRef(function(e,t){return ue.createElement(rD,Object.assign({gutterRef:t},e))}),od={};function aD(e,t){return{map:function(n){return e?e.map(function(a,s){return n([t.resourceId(a),a],s)}):[n([od,null],0)]},groupEvents:function(n){var a=new Map;return e?(n.forEach(function(s){var o=t.resource(s)||od;if(Array.isArray(o))o.forEach(function(c){var d=a.get(c)||[];d.push(s),a.set(c,d)});else{var l=a.get(o)||[];l.push(s),a.set(o,l)}}),a):(a.set(od,n),a)}}}var _i=function(e){function t(r){var n;return er(this,t),n=wr(this,t,[r]),n.handleScroll=function(a){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=a.target.scrollLeft)},n.handleResize=function(){vp(n.rafHandle),n.rafHandle=f0(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];Dt(n.props.onKeyPressEvent,s)},n.handleSelectEvent=function(){n.clearSelection();for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];Dt(n.props.onSelectEvent,s)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];Dt(n.props.onDoubleClickEvent,s)},n.handleShowMore=function(a,s,o,l,c){var d=n.props,p=d.popup,m=d.onDrillDown,g=d.onShowMore,f=d.getDrilldownView,N=d.doShowMoreDrillDown;if(n.clearSelection(),p){var x=h0(o,n.containerRef.current);n.setState({overlay:{date:s,events:a,position:At(At({},x),{},{width:"200px"}),target:c}})}else N&&Dt(m,[s,f(s)||Ar.DAY]);Dt(g,[a,s,l])},n.handleSelectAllDaySlot=function(a,s){var o=n.props.onSelectSlot,l=new Date(a[0]),c=new Date(a[a.length-1]);c.setDate(a[a.length-1].getDate()+1),Dt(o,{slots:a,start:l,end:c,action:s.action,resourceId:s.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var a=n.contentRef.current;if(a!=null&&a.scrollHeight){var s=a.scrollHeight>a.clientHeight;n.state.isOverflowing!==s&&(n._updatingOverflow=!0,n.setState({isOverflowing:s},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=F0(function(a,s){return aD(a,s)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=ue.createRef(),n.contentRef=ue.createRef(),n.containerRef=ue.createRef(),n._scrollRatio=null,n.gutterRef=W.createRef(),n}return Nr(t,e),tr(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),vp(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(n,a,s,o,l,c,d,p,m,g){var f=this.props,N=f.min,x=f.max,S=(o.get(a)||[]).filter(function(w){return c.inRange(n,d.start(w),d.end(w),"day")}),y=(l.get(a)||[]).filter(function(w){return c.inRange(n,d.start(w),d.end(w),"day")});return ue.createElement(gv,Object.assign({},this.props,{localizer:c,min:c.merge(n,N),max:c.merge(n,x),resource:s&&a,components:p,isNow:c.isSameDate(n,g),key:"".concat(a,"-").concat(n),date:n,events:S,backgroundEvents:y,dayLayoutAlgorithm:m}))}},{key:"renderResourcesFirst",value:function(n,a,s,o,l,c,d,p,m){var g=this;return a.map(function(f){var N=us(f,2),x=N[0],S=N[1];return n.map(function(y){return g.renderDayColumn(y,x,S,s,o,l,c,p,m,d)})})}},{key:"renderRangeFirst",value:function(n,a,s,o,l,c,d,p,m){var g=this;return n.map(function(f){return ue.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:f},a.map(function(N){var x=us(N,2),S=x[0],y=x[1];return ue.createElement("div",{style:{flex:1},key:c.resourceId(y)},g.renderDayColumn(f,S,y,s,o,l,c,p,m,d))}))})}},{key:"renderEvents",value:function(n,a,s,o){var l=this.props,c=l.accessors,d=l.localizer,p=l.resourceGroupingLayout,m=l.components,g=l.dayLayoutAlgorithm,f=this.memoizedResources(this.props.resources,c),N=f.groupEvents(a),x=f.groupEvents(s);return p?this.renderRangeFirst(n,f,N,x,d,c,o,m,g):this.renderResourcesFirst(n,f,N,x,d,c,o,m,g)}},{key:"render",value:function(){var n,a=this.props,s=a.events,o=a.backgroundEvents,l=a.range,c=a.width,d=a.rtl,p=a.selected,m=a.getNow,g=a.resources,f=a.components,N=a.accessors,x=a.getters,S=a.localizer,y=a.min,w=a.max,_=a.showMultiDayTimes,E=a.longPressThreshold,L=a.resizable,B=a.resourceGroupingLayout;c=c||this.state.gutterWidth;var T=l[0],C=l[l.length-1];this.slots=l.length;var $=[],H=[],A=[];s.forEach(function(F){if(ko(F,T,C,N,S)){var U=N.start(F),te=N.end(F);N.allDay(F)||S.startAndEndAreDateOnly(U,te)||!_&&!S.isSameDate(U,te)?$.push(F):H.push(F)}}),o.forEach(function(F){ko(F,T,C,N,S)&&A.push(F)}),$.sort(function(F,U){return Vd(F,U,N,S)});var O={range:l,events:$,width:c,rtl:d,getNow:m,localizer:S,selected:p,allDayMaxRows:this.props.showAllEvents?1/0:(n=this.props.allDayMaxRows)!==null&&n!==void 0?n:1/0,resources:this.memoizedResources(g,N),selectable:this.props.selectable,accessors:N,getters:x,components:f,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:E,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:L};return ue.createElement("div",{className:qt("rbc-time-view",g&&"rbc-time-view-resources"),ref:this.containerRef},g&&g.length>1&&B?ue.createElement(eD,O):ue.createElement(QP,O),this.props.popup&&this.renderOverlay(),ue.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},ue.createElement(nD,{date:T,ref:this.gutterRef,localizer:S,min:S.merge(T,y),max:S.merge(T,w),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:f,className:"rbc-time-gutter",getters:x}),this.renderEvents(l,H,A,m())))}},{key:"renderOverlay",value:function(){var n,a,s=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,p=l.components,m=l.getters,g=l.selected,f=l.popupOffset,N=l.handleDragStart,x=function(){return s.setState({overlay:null})};return ue.createElement(Uh,{overlay:o,accessors:c,localizer:d,components:p,getters:m,selected:g,popupOffset:f,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:N,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:x})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var n=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var a,s=(a=n.gutterRef)!==null&&a!==void 0&&a.current?Wd(n.gutterRef.current):void 0;s&&n.state.gutterWidth!==s&&n.setState({gutterWidth:s})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var n=this.contentRef.current;n.scrollTop=n.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,a=n.min,s=n.max,o=n.scrollToTime,l=n.localizer,c=l.diff(l.merge(o,a),o,"milliseconds"),d=l.diff(a,s,"milliseconds");this._scrollRatio=c/d}}])}(W.Component);_i.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var sD=["date","localizer","min","max","scrollToTime","enableAutoScroll"],zc=function(e){function t(){return er(this,t),wr(this,t,arguments)}return Nr(t,e),tr(t,[{key:"render",value:function(){var n=this.props,a=n.date,s=n.localizer,o=n.min,l=o===void 0?s.startOf(new Date,"day"):o,c=n.max,d=c===void 0?s.endOf(new Date,"day"):c,p=n.scrollToTime,m=p===void 0?s.startOf(new Date,"day"):p,g=n.enableAutoScroll,f=g===void 0?!0:g,N=Wn(n,sD),x=t.range(a,{localizer:s});return ue.createElement(_i,Object.assign({},N,{range:x,eventOffset:10,localizer:s,min:l,max:d,scrollToTime:m,enableAutoScroll:f}))}}])}(ue.Component);zc.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};zc.navigate=function(e,t,r){var n=r.localizer;switch(t){case Ir.PREVIOUS:return n.add(e,-1,"day");case Ir.NEXT:return n.add(e,1,"day");default:return e}};zc.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var iD=["date","localizer","min","max","scrollToTime","enableAutoScroll"],ka=function(e){function t(){return er(this,t),wr(this,t,arguments)}return Nr(t,e),tr(t,[{key:"render",value:function(){var n=this.props,a=n.date,s=n.localizer,o=n.min,l=o===void 0?s.startOf(new Date,"day"):o,c=n.max,d=c===void 0?s.endOf(new Date,"day"):c,p=n.scrollToTime,m=p===void 0?s.startOf(new Date,"day"):p,g=n.enableAutoScroll,f=g===void 0?!0:g,N=Wn(n,iD),x=t.range(a,this.props);return ue.createElement(_i,Object.assign({},N,{range:x,eventOffset:15,localizer:s,min:l,max:d,scrollToTime:m,enableAutoScroll:f}))}}])}(ue.Component);ka.defaultProps=_i.defaultProps;ka.navigate=function(e,t,r){var n=r.localizer;switch(t){case Ir.PREVIOUS:return n.add(e,-1,"week");case Ir.NEXT:return n.add(e,1,"week");default:return e}};ka.range=function(e,t){var r=t.localizer,n=r.startOfWeek(),a=r.startOf(e,"week",n),s=r.endOf(e,"week",n);return r.range(a,s)};ka.title=function(e,t){var r=t.localizer,n=ka.range(e,{localizer:r}),a=H0(n),s=a[0],o=a.slice(1);return r.format({start:s,end:o.pop()},"dayRangeHeaderFormat")};var oD=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Gh(e,t){return ka.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var Wo=function(e){function t(){return er(this,t),wr(this,t,arguments)}return Nr(t,e),tr(t,[{key:"render",value:function(){var n=this.props,a=n.date,s=n.localizer,o=n.min,l=o===void 0?s.startOf(new Date,"day"):o,c=n.max,d=c===void 0?s.endOf(new Date,"day"):c,p=n.scrollToTime,m=p===void 0?s.startOf(new Date,"day"):p,g=n.enableAutoScroll,f=g===void 0?!0:g,N=Wn(n,oD),x=Gh(a,this.props);return ue.createElement(_i,Object.assign({},N,{range:x,eventOffset:15,localizer:s,min:l,max:d,scrollToTime:m,enableAutoScroll:f}))}}])}(ue.Component);Wo.defaultProps=_i.defaultProps;Wo.range=Gh;Wo.navigate=ka.navigate;Wo.title=function(e,t){var r=t.localizer,n=Gh(e,{localizer:r}),a=H0(n),s=a[0],o=a.slice(1);return r.format({start:s,end:o.pop()},"dayRangeHeaderFormat")};var Uc=30;function Wc(e){var t=e.accessors,r=e.components,n=e.date,a=e.events,s=e.getters,o=e.length,l=o===void 0?Uc:o,c=e.localizer,d=e.onDoubleClickEvent,p=e.onSelectEvent,m=e.selected,g=W.useRef(null),f=W.useRef(null),N=W.useRef(null),x=W.useRef(null),S=W.useRef(null);W.useEffect(function(){_()});var y=function(C,$,H){var A=r.event,O=r.date;return $=$.filter(function(F){return ko(F,c.startOf(C,"day"),c.endOf(C,"day"),t,c)}),$.map(function(F,U){var te=t.title(F),re=t.end(F),Z=t.start(F),Q=s.eventProp(F,Z,re,Bc(F,m)),Y=U===0&&c.format(C,"agendaDateFormat"),X=U===0?ue.createElement("td",{rowSpan:$.length,className:"rbc-agenda-date-cell"},O?ue.createElement(O,{day:C,label:Y}):Y):!1;return ue.createElement("tr",{key:H+"_"+U,className:Q.className,style:Q.style},X,ue.createElement("td",{className:"rbc-agenda-time-cell"},w(C,F)),ue.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(P){return p&&p(F,P)},onDoubleClick:function(P){return d&&d(F,P)}},A?ue.createElement(A,{event:F,title:te}):te))},[])},w=function(C,$){var H="",A=r.time,O=c.messages.allDay,F=t.end($),U=t.start($);return t.allDay($)||(c.eq(U,F)?O=c.format(U,"agendaTimeFormat"):c.isSameDate(U,F)?O=c.format({start:U,end:F},"agendaTimeRangeFormat"):c.isSameDate(C,U)?O=c.format(U,"agendaTimeFormat"):c.isSameDate(C,F)&&(O=c.format(F,"agendaTimeFormat"))),c.gt(C,U,"day")&&(H="rbc-continues-prior"),c.lt(C,F,"day")&&(H+=" rbc-continues-after"),ue.createElement("span",{className:H.trim()},A?ue.createElement(A,{event:$,day:C,label:O}):O)},_=function(){if(S.current){var C=g.current,$=S.current.firstChild;if($){var H=x.current.scrollHeight>x.current.clientHeight,A=[],O=A;A=[Wd($.children[0]),Wd($.children[1])],(O[0]!==A[0]||O[1]!==A[1])&&(f.current.style.width=A[0]+"px",N.current.style.width=A[1]+"px"),H?(lw(C,"rbc-header-overflowing"),C.style.marginRight=jh()+"px"):cw(C,"rbc-header-overflowing")}}},E=c.messages,L=c.add(n,l,"day"),B=c.range(n,L,"day");return a=a.filter(function(T){return ko(T,c.startOf(n,"day"),c.endOf(L,"day"),t,c)}),a.sort(function(T,C){return+t.start(T)-+t.start(C)}),ue.createElement("div",{className:"rbc-agenda-view"},a.length!==0?ue.createElement(ue.Fragment,null,ue.createElement("table",{ref:g,className:"rbc-agenda-table"},ue.createElement("thead",null,ue.createElement("tr",null,ue.createElement("th",{className:"rbc-header",ref:f},E.date),ue.createElement("th",{className:"rbc-header",ref:N},E.time),ue.createElement("th",{className:"rbc-header"},E.event)))),ue.createElement("div",{className:"rbc-agenda-content",ref:x},ue.createElement("table",{className:"rbc-agenda-table"},ue.createElement("tbody",{ref:S},B.map(function(T,C){return y(T,a,C)}))))):ue.createElement("span",{className:"rbc-agenda-empty"},E.noEventsInRange))}Wc.range=function(e,t){var r=t.length,n=r===void 0?Uc:r,a=t.localizer,s=a.add(e,n,"day");return{start:e,end:s}};Wc.navigate=function(e,t,r){var n=r.length,a=n===void 0?Uc:n,s=r.localizer;switch(t){case Ir.PREVIOUS:return s.add(e,-a,"day");case Ir.NEXT:return s.add(e,a,"day");default:return e}};Wc.title=function(e,t){var r=t.length,n=r===void 0?Uc:r,a=t.localizer,s=a.add(e,n,"day");return a.format({start:e,end:s},"agendaHeaderFormat")};var rc=as(as(as(as(as({},Ar.MONTH,qc),Ar.WEEK,ka),Ar.WORK_WEEK,Wo),Ar.DAY,zc),Ar.AGENDA,Wc),lD=["action","date","today"];function cD(e,t){var r=t.action,n=t.date,a=t.today,s=Wn(t,lD);switch(e=typeof e=="string"?rc[e]:e,r){case Ir.TODAY:n=a||new Date;break;case Ir.DATE:break;default:yo(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,r,s)}return n}function uD(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&dt(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var oa=function(t){return function(r){return uD(r,t)}},dD=["view","date","getNow","onNavigate"],hD=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function bv(e){if(Array.isArray(e))return e;for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var a=us(n[r],2),s=a[0],o=a[1];o&&t.push(s)}return t}function fD(e,t){var r=t.views,n=bv(r);return n.indexOf(e)!==-1}var xv=function(e){function t(){var r;er(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=wr(this,t,[].concat(a)),r.getViews=function(){var o=r.props.views;return Array.isArray(o)?U7(o,function(l,c){return l[c]=rc[c]},{}):dt(o)==="object"?U8(o,function(l,c){return l===!0?rc[c]:l}):rc},r.getView=function(){var o=r.getViews();return o[r.props.view]},r.getDrilldownView=function(o){var l=r.props,c=l.view,d=l.drilldownView,p=l.getDrilldownView;return p?p(o,c,Object.keys(r.getViews())):d},r.handleRangeChange=function(o,l,c){var d=r.props,p=d.onRangeChange,m=d.localizer;p&&l.range&&p(l.range(o,{localizer:m}),c)},r.handleNavigate=function(o,l){var c=r.props,d=c.view,p=c.date,m=c.getNow,g=c.onNavigate,f=Wn(c,dD),N=r.getView(),x=m();p=cD(N,At(At({},f),{},{action:o,date:l||p||x,today:x})),g(p,d,o),r.handleRangeChange(p,N)},r.handleViewChange=function(o){o!==r.props.view&&fD(o,r.props)&&r.props.onView(o);var l=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),l[o],o)},r.handleSelectEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onSelectEvent,l)},r.handleDoubleClickEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onDoubleClickEvent,l)},r.handleKeyPressEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onKeyPressEvent,l)},r.handleSelectSlot=function(o){Dt(r.props.onSelectSlot,o)},r.handleDrillDown=function(o,l){var c=r.props.onDrillDown;if(c){c(o,l,r.drilldownView);return}l&&r.handleViewChange(l),r.handleNavigate(Ir.DATE,o)},r.state={context:t.getContext(r.props)},r}return Nr(t,e),tr(t,[{key:"render",value:function(){var n=this.props,a=n.view,s=n.toolbar,o=n.events,l=n.backgroundEvents,c=n.resourceGroupingLayout,d=n.style,p=n.className,m=n.elementProps,g=n.date,f=n.getNow,N=n.length,x=n.showMultiDayTimes,S=n.onShowMore,y=n.doShowMoreDrillDown;n.components,n.formats,n.messages,n.culture;var w=Wn(n,hD);g=g||f();var _=this.getView(),E=this.state.context,L=E.accessors,B=E.components,T=E.getters,C=E.localizer,$=E.viewNames,H=B.toolbar||gP,A=_.title(g,{localizer:C,length:N});return ue.createElement("div",Object.assign({},m,{className:qt(p,"rbc-calendar",w.rtl&&"rbc-rtl"),style:d}),s&&ue.createElement(H,{date:g,view:a,views:$,label:A,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:C}),ue.createElement(_,Object.assign({},w,{events:o,backgroundEvents:l,date:g,getNow:f,length:N,localizer:C,getters:T,components:B,accessors:L,showMultiDayTimes:x,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:S,doShowMoreDrillDown:y,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(n){return{context:t.getContext(n)}}},{key:"getContext",value:function(n){var a=n.startAccessor,s=n.endAccessor,o=n.allDayAccessor,l=n.tooltipAccessor,c=n.titleAccessor,d=n.resourceAccessor,p=n.resourceIdAccessor,m=n.resourceTitleAccessor,g=n.eventIdAccessor,f=n.eventPropGetter,N=n.backgroundEventPropGetter,x=n.slotPropGetter,S=n.slotGroupPropGetter,y=n.dayPropGetter,w=n.view,_=n.views,E=n.localizer,L=n.culture,B=n.messages,T=B===void 0?{}:B,C=n.components,$=C===void 0?{}:C,H=n.formats,A=H===void 0?{}:H,O=bv(_),F=bP(T);return{viewNames:O,localizer:mP(E,L,A,F),getters:{eventProp:function(){return f&&f.apply(void 0,arguments)||{}},backgroundEventProp:function(){return N&&N.apply(void 0,arguments)||{}},slotProp:function(){return x&&x.apply(void 0,arguments)||{}},slotGroupProp:function(){return S&&S.apply(void 0,arguments)||{}},dayProp:function(){return y&&y.apply(void 0,arguments)||{}}},components:I8($[w]||{},P7($,O),{eventWrapper:$n,backgroundEventWrapper:$n,eventContainerWrapper:$n,dateCellWrapper:$n,weekWrapper:$n,timeSlotWrapper:$n,timeGutterWrapper:$n,timeIndicatorWrapper:$n}),accessors:{start:oa(a),end:oa(s),allDay:oa(o),tooltip:oa(l),title:oa(c),resource:oa(d),resourceId:oa(p),resourceTitle:oa(m),eventId:oa(g)}}}}])}(ue.Component);xv.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Ar.MONTH,views:[Ar.MONTH,Ar.WEEK,Ar.DAY,Ar.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Ar.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var pD=Kg(xv,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),mD=function(t,r,n){var a=t.start,s=t.end;return"".concat(n.format(a,"P",r)," – ").concat(n.format(s,"P",r))},ld=function(t,r,n){var a=t.start,s=t.end;return"".concat(n.format(a,"p",r)," – ").concat(n.format(s,"p",r))},gD=function(t,r,n){var a=t.start;return"".concat(n.format(a,"h:mma",r)," – ")},vD=function(t,r,n){var a=t.end;return" – ".concat(n.format(a,"h:mma",r))},bD=function(t,r,n){var a=t.start,s=t.end;return"".concat(n.format(a,"MMMM dd",r)," – ").concat(n.format(s,mi(a,s,"month")?"dd":"MMMM dd",r))},xD={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:ld,eventTimeRangeFormat:ld,eventTimeRangeStartFormat:gD,eventTimeRangeEndFormat:vD,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:bD,agendaHeaderFormat:mD,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:ld},yD=function(t){var r=t.startOfWeek,n=t.getDay,a=t.format,s=t.locales;return new pP({formats:xD,firstOfWeek:function(l){return n(r(new Date,{locale:s[l]}))},format:function(l,c,d){return a(new Date(l),c,{locale:s[d]})}})};const wD={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ND=(e,t,r)=>{let n;const a=wD[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function cd(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const jD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},SD={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_D={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},AD={date:cd({formats:jD,defaultWidth:"full"}),time:cd({formats:SD,defaultWidth:"full"}),dateTime:cd({formats:_D,defaultWidth:"full"})},CD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ED=(e,t,r,n)=>CD[e];function co(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const LD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},PD={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},DD={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},kD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},OD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},TD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},MD=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ID={ordinalNumber:MD,era:co({values:LD,defaultWidth:"wide"}),quarter:co({values:PD,defaultWidth:"wide",argumentCallback:e=>e-1}),month:co({values:DD,defaultWidth:"wide"}),day:co({values:kD,defaultWidth:"wide"}),dayPeriod:co({values:OD,defaultWidth:"wide",formattingValues:TD,defaultFormattingWidth:"wide"})};function uo(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?FD(l,m=>m.test(o)):RD(l,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const p=t.slice(o.length);return{value:d,rest:p}}}function RD(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function FD(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function $D(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const BD=/^(\d+)(th|st|nd|rd)?/i,qD=/\d+/i,zD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},UD={any:[/^b/i,/^(a|c)/i]},WD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},HD={any:[/1/i,/2/i,/3/i,/4/i]},GD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},YD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},KD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},XD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},JD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZD={ordinalNumber:$D({matchPattern:BD,parsePattern:qD,valueCallback:e=>parseInt(e,10)}),era:uo({matchPatterns:zD,defaultMatchWidth:"wide",parsePatterns:UD,defaultParseWidth:"any"}),quarter:uo({matchPatterns:WD,defaultMatchWidth:"wide",parsePatterns:HD,defaultParseWidth:"any",valueCallback:e=>e+1}),month:uo({matchPatterns:GD,defaultMatchWidth:"wide",parsePatterns:VD,defaultParseWidth:"any"}),day:uo({matchPatterns:YD,defaultMatchWidth:"wide",parsePatterns:KD,defaultParseWidth:"any"}),dayPeriod:uo({matchPatterns:XD,defaultMatchWidth:"any",parsePatterns:JD,defaultParseWidth:"any"})},yv={code:"en-US",formatDistance:ND,formatLong:AD,formatRelative:ED,localize:ID,match:ZD,options:{weekStartsOn:0,firstWeekContainsDate:1}};let QD={};function Hc(){return QD}const wv=6048e5,ek=864e5,km=Symbol.for("constructDateFrom");function Oa(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&km in e?e[km](t):e instanceof Date?new e.constructor(t):new Date(t)}function ln(e,t){return Oa(t||e,e)}function Om(e){const t=ln(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function tk(e,...t){const r=Oa.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function Tm(e,t){const r=ln(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function rk(e,t,r){const[n,a]=tk(r==null?void 0:r.in,e,t),s=Tm(n),o=Tm(a),l=+s-Om(s),c=+o-Om(o);return Math.round((l-c)/ek)}function nk(e,t){const r=ln(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function ak(e,t){const r=ln(e,t==null?void 0:t.in);return rk(r,nk(r))+1}function pi(e,t){var l,c,d,p;const r=Hc(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((p=(d=r.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??0,a=ln(e,t==null?void 0:t.in),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function bc(e,t){return pi(e,{...t,weekStartsOn:1})}function Nv(e,t){const r=ln(e,t==null?void 0:t.in),n=r.getFullYear(),a=Oa(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=bc(a),o=Oa(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=bc(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function sk(e,t){const r=Nv(e,t),n=Oa(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),bc(n)}function ik(e,t){const r=ln(e,t==null?void 0:t.in),n=+bc(r)-+sk(r);return Math.round(n/wv)+1}function jv(e,t){var p,m,g,f;const r=ln(e,t==null?void 0:t.in),n=r.getFullYear(),a=Hc(),s=(t==null?void 0:t.firstWeekContainsDate)??((m=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(g=a.locale)==null?void 0:g.options)==null?void 0:f.firstWeekContainsDate)??1,o=Oa((t==null?void 0:t.in)||e,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=pi(o,t),c=Oa((t==null?void 0:t.in)||e,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const d=pi(c,t);return+r>=+l?n+1:+r>=+d?n:n-1}function ok(e,t){var l,c,d,p;const r=Hc(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(d=r.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??1,a=jv(e,t),s=Oa((t==null?void 0:t.in)||e,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),pi(s,t)}function lk(e,t){const r=ln(e,t==null?void 0:t.in),n=+pi(r,t)-+ok(r,t);return Math.round(n/wv)+1}function wt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Ca={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return wt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):wt(r+1,2)},d(e,t){return wt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return wt(e.getHours()%12||12,t.length)},H(e,t){return wt(e.getHours(),t.length)},m(e,t){return wt(e.getMinutes(),t.length)},s(e,t){return wt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return wt(a,t.length)}},Zs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Mm={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Ca.y(e,t)},Y:function(e,t,r,n){const a=jv(e,n),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return wt(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):wt(s,t.length)},R:function(e,t){const r=Nv(e);return wt(r,t.length)},u:function(e,t){const r=e.getFullYear();return wt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return wt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return wt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Ca.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return wt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=lk(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):wt(a,t.length)},I:function(e,t,r){const n=ik(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):wt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Ca.d(e,t)},D:function(e,t,r){const n=ak(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):wt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return wt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return wt(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return wt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Zs.noon:n===0?a=Zs.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Zs.evening:n>=12?a=Zs.afternoon:n>=4?a=Zs.morning:a=Zs.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ca.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ca.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):wt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):wt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ca.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ca.s(e,t)},S:function(e,t){return Ca.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Rm(n);case"XXXX":case"XX":return rs(n);case"XXXXX":case"XXX":default:return rs(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Rm(n);case"xxxx":case"xx":return rs(n);case"xxxxx":case"xxx":default:return rs(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Im(n,":");case"OOOO":default:return"GMT"+rs(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Im(n,":");case"zzzz":default:return"GMT"+rs(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return wt(n,t.length)},T:function(e,t,r){return wt(+e,t.length)}};function Im(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+t+wt(s,2)}function Rm(e,t){return e%60===0?(e>0?"-":"+")+wt(Math.abs(e)/60,2):rs(e,t)}function rs(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=wt(Math.trunc(n/60),2),s=wt(n%60,2);return r+a+t+s}const Fm=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Sv=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ck=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return Fm(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Fm(n,t)).replace("{{time}}",Sv(a,t))},uk={p:Sv,P:ck},dk=/^D+$/,hk=/^Y+$/,fk=["D","DD","YY","YYYY"];function pk(e){return dk.test(e)}function mk(e){return hk.test(e)}function gk(e,t,r){const n=vk(e,t,r);if(console.warn(n),fk.includes(e))throw new RangeError(n)}function vk(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function bk(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function xk(e){return!(!bk(e)&&typeof e!="number"||isNaN(+ln(e)))}const yk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wk=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Nk=/^'([^]*?)'?$/,jk=/''/g,Sk=/[a-zA-Z]/;function _k(e,t,r){var p,m,g,f,N,x,S,y;const n=Hc(),a=(r==null?void 0:r.locale)??n.locale??yv,s=(r==null?void 0:r.firstWeekContainsDate)??((m=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(g=n.locale)==null?void 0:g.options)==null?void 0:f.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((x=(N=r==null?void 0:r.locale)==null?void 0:N.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((y=(S=n.locale)==null?void 0:S.options)==null?void 0:y.weekStartsOn)??0,l=ln(e,r==null?void 0:r.in);if(!xk(l))throw new RangeError("Invalid time value");let c=t.match(wk).map(w=>{const _=w[0];if(_==="p"||_==="P"){const E=uk[_];return E(w,a.formatLong)}return w}).join("").match(yk).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const _=w[0];if(_==="'")return{isToken:!1,value:Ak(w)};if(Mm[_])return{isToken:!0,value:w};if(_.match(Sk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(w=>{if(!w.isToken)return w.value;const _=w.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&mk(_)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&pk(_))&&gk(_,t,String(e));const E=Mm[_[0]];return E(l,_,a.localize,d)}).join("")}function Ak(e){const t=e.match(Nk);return t?t[1].replace(jk,"'"):e}function Ck(e,t){return ln(e,t==null?void 0:t.in).getDay()}const Ek={"en-US":yv},Lk=yD({format:_k,startOfWeek:pi,getDay:Ck,locales:Ek});function Pk(){const[e,t]=W.useState([]);return W.useEffect(()=>{async function r(){var c,d;const{data:{user:n},error:a}=await ze.auth.getUser();if(a||!n){console.error("User error:",a);return}const s=((c=n==null?void 0:n.user_metadata)==null?void 0:c.org_id)||((d=n==null?void 0:n.app_metadata)==null?void 0:d.org_id);if(!s){console.error("Missing org_id in user metadata.");return}const{data:o,error:l}=await ze.from("events").select("*").eq("org_id",s);if(l)console.error("Error loading events:",l);else{const p=o.map(m=>({id:m.id,title:m.title,start:new Date(m.event_date),end:new Date(m.event_date)}));t(p)}}r()},[]),i.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Event Calendar"}),i.jsx(pD,{localizer:Lk,events:e,startAccessor:"start",endAccessor:"end",style:{height:600}})]})}function Dk(){const[e,t]=W.useState([]),[r,n]=W.useState("");return W.useEffect(()=>{async function a(){const{data:{session:s},error:o}=await ze.auth.getSession();if(o||!(s!=null&&s.access_token)){n("Authentication error. Please log in again.");return}try{const l=await fetch("/api/fundraisers",{headers:{Authorization:`Bearer ${s.access_token}`}}),c=await l.json();l.ok?t(c):n(c.error||"Failed to load fundraisers.")}catch(l){console.error(l),n("Error connecting to the server.")}}a()},[]),i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"PTO Fundraisers"}),i.jsx(Cr,{to:"/fundraisers/create",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ New Fundraiser"})]}),r&&i.jsx("p",{className:"text-red-600",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No fundraisers found."}),i.jsx("ul",{className:"space-y-4",children:e.map(a=>i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsx("h2",{className:"text-xl font-semibold",children:a.title}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Goal: $",a.goal_amount," • Deadline: ",a.deadline]}),i.jsx("p",{className:"mt-2",children:a.description}),a.share_public&&i.jsx("span",{className:"text-xs inline-block mt-2 px-2 py-1 bg-green-100 text-green-800 rounded",children:"Shared to Library"})]},a.id))})]})}function kk(){const e=Hn(),[t,r]=W.useState({title:"",description:"",goal_amount:"",deadline:"",share_public:!1}),[n,a]=W.useState(""),[s,o]=W.useState(""),l=d=>{const{name:p,value:m,type:g,checked:f}=d.target;r(N=>({...N,[p]:g==="checkbox"?f:m}))},c=async d=>{d.preventDefault(),a(""),o("");const{data:{session:p}}=await ze.auth.getSession();if(!(p!=null&&p.access_token)){a("Authentication required.");return}try{const m=await fetch("/api/fundraisers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify(t)}),g=await m.json();m.ok?(o("Fundraiser created!"),setTimeout(()=>e("/fundraisers"),1500)):a(g.error||"Submission failed.")}catch(m){console.error("Create fundraiser error:",m),a("Server error. Try again.")}};return i.jsxs("div",{className:"max-w-xl mx-auto p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Create New Fundraiser"}),i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsx("input",{name:"title",value:t.title,onChange:l,placeholder:"Title",className:"w-full border p-2",required:!0}),i.jsx("textarea",{name:"description",value:t.description,onChange:l,placeholder:"Description",className:"w-full border p-2"}),i.jsx("input",{name:"goal_amount",value:t.goal_amount,onChange:l,type:"number",placeholder:"Goal Amount",className:"w-full border p-2",required:!0}),i.jsx("input",{name:"deadline",value:t.deadline,onChange:l,type:"date",className:"w-full border p-2",required:!0}),i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",name:"share_public",checked:t.share_public,onChange:l}),i.jsx("span",{children:"Share this fundraiser to the public library"})]}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:"Create Fundraiser"}),s&&i.jsx("p",{className:"text-green-600",children:s}),n&&i.jsx("p",{className:"text-red-600",children:n})]})]})}function Ok(){const[e,t]=W.useState([]),[r,n]=W.useState("");W.useEffect(()=>{async function l(){const{data:{session:c}}=await ze.auth.getSession();if(!(c!=null&&c.access_token)){n("Authentication required.");return}try{const d=await fetch("/api/budgets",{headers:{Authorization:`Bearer ${c.access_token}`}}),p=await d.json();d.ok?t(p):n(p.error||"Failed to load transactions.")}catch(d){console.error("Budget fetch error:",d),n("Error connecting to the server.")}}l()},[]);const a=e.filter(l=>l.type==="income").reduce((l,c)=>l+parseFloat(c.amount||0),0),s=e.filter(l=>l.type==="expense").reduce((l,c)=>l+parseFloat(c.amount||0),0),o=a-s;return i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"PTO Budget Overview"}),i.jsx(Cr,{to:"/budget/create",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ Add Entry"})]}),i.jsxs("div",{className:"mb-6 p-4 border rounded bg-gray-100",children:[i.jsxs("p",{className:"text-lg font-semibold",children:["Current Balance: $",o.toFixed(2)]}),i.jsxs("p",{className:"text-sm text-green-700",children:["Total Income: $",a.toFixed(2)]}),i.jsxs("p",{className:"text-sm text-red-700",children:["Total Expenses: $",s.toFixed(2)]})]}),r&&i.jsx("p",{className:"text-red-600",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No budget entries found."}),i.jsx("ul",{className:"space-y-4",children:e.map(l=>i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold",children:l.label}),i.jsxs("span",{className:l.type==="income"?"text-green-600":"text-red-600",children:[l.type==="income"?"+":"-","$",parseFloat(l.amount).toFixed(2)]})]}),i.jsx("p",{className:"text-sm text-gray-500",children:l.category||"Uncategorized"}),l.related_event_id&&i.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Event ID: ",l.related_event_id]})]},l.id))})]})}const Tk=()=>{const[e,t]=W.useState("overview"),[r,n]=W.useState("manual"),[a,s]=W.useState("current"),o={totalBudget:45e3,totalSpent:28500,totalRemaining:16500,projectedIncome:52e3,categories:[{id:1,name:"Events & Programs",budgeted:15e3,spent:8500,remaining:6500,percentage:57,trend:"up",createdBy:"stella",subcategories:[{name:"Fall Festival",budgeted:5e3,spent:3200},{name:"Science Night",budgeted:3e3,spent:1800},{name:"Book Fair",budgeted:4e3,spent:2500},{name:"Art Show",budgeted:3e3,spent:1e3}]},{id:2,name:"Educational Support",budgeted:12e3,spent:7200,remaining:4800,percentage:60,trend:"stable",createdBy:"manual",subcategories:[{name:"Classroom Supplies",budgeted:6e3,spent:4200},{name:"Technology",budgeted:4e3,spent:2e3},{name:"Library Books",budgeted:2e3,spent:1e3}]},{id:3,name:"Communications",budgeted:3e3,spent:1800,remaining:1200,percentage:60,trend:"down",createdBy:"stella",subcategories:[{name:"Website & Digital",budgeted:1500,spent:800},{name:"Print Materials",budgeted:1e3,spent:700},{name:"Social Media",budgeted:500,spent:300}]},{id:4,name:"Administrative",budgeted:5e3,spent:3200,remaining:1800,percentage:64,trend:"up",createdBy:"manual",subcategories:[{name:"Insurance",budgeted:2e3,spent:2e3},{name:"Banking & Fees",budgeted:1e3,spent:600},{name:"Office Supplies",budgeted:2e3,spent:600}]}],recentTransactions:[{id:1,date:"2024-10-15",description:"Fall Festival Decorations",category:"Events & Programs",amount:-450,type:"expense",createdBy:"stella"},{id:2,date:"2024-10-14",description:"Book Fair Revenue",category:"Events & Programs",amount:2800,type:"income",createdBy:"manual"},{id:3,date:"2024-10-12",description:"Classroom Technology",category:"Educational Support",amount:-1200,type:"expense",createdBy:"manual"}]},l=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(bd,{className:"w-6 h-6 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-gray-900",children:"Total Budget"})]})}),i.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:["$",o.totalBudget.toLocaleString()]}),i.jsx("div",{className:"text-sm text-gray-600",children:"For current fiscal year"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(F1,{className:"w-6 h-6 text-red-600"}),i.jsx("h3",{className:"font-semibold text-gray-900",children:"Total Spent"})]})}),i.jsxs("div",{className:"text-3xl font-bold text-red-600 mb-2",children:["$",o.totalSpent.toLocaleString()]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[Math.round(o.totalSpent/o.totalBudget*100),"% of budget used"]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx($1,{className:"w-6 h-6 text-green-600"}),i.jsx("h3",{className:"font-semibold text-gray-900",children:"Remaining"})]})}),i.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:["$",o.totalRemaining.toLocaleString()]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Available for spending"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ug,{className:"w-6 h-6 text-purple-600"}),i.jsx("h3",{className:"font-semibold text-gray-900",children:"Projected Income"})]})}),i.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:["$",o.projectedIncome.toLocaleString()]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Expected total revenue"})]})]}),c=()=>i.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(cr,{className:"w-6 h-6 text-purple-600"}),i.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Stella's Budget Insights"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Budget Health"}),i.jsx("div",{className:"text-lg font-semibold text-green-700",children:"Excellent"}),i.jsx("div",{className:"text-xs text-purple-700",children:"On track for surplus"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Biggest Opportunity"}),i.jsx("div",{className:"text-lg font-semibold text-purple-900",children:"Fall Festival"}),i.jsx("div",{className:"text-xs text-purple-700",children:"Could generate $2K more"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Cost Savings"}),i.jsx("div",{className:"text-lg font-semibold text-purple-900",children:"$1,200 Found"}),i.jsx("div",{className:"text-xs text-purple-700",children:"In administrative costs"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-900 font-medium mb-2",children:"💡 Stella's Recommendation"}),i.jsx("div",{className:"text-sm text-purple-800",children:'"Your Events & Programs category is performing well! Consider reallocating $1,000 from Administrative to Educational Support to maximize impact on students. I can create a reallocation plan for you."'}),i.jsx("button",{className:"mt-3 px-4 py-2 bg-purple-600 text-white rounded-lg text-sm hover:bg-purple-700 transition-colors",children:"Let Stella Create Reallocation Plan"})]})]}),d=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Budget Categories"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Manual Entry"}),i.jsx("button",{className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Ask Stella"})]})]}),i.jsx("div",{className:"space-y-6",children:o.categories.map(g=>{const f=g.spent/g.budgeted*100,N=f>100;return i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:g.name}),g.createdBy==="stella"&&i.jsx(cr,{className:"w-4 h-4 text-purple-500",title:"Optimized by Stella"}),i.jsxs("div",{className:`flex items-center space-x-1 text-sm ${g.trend==="up"?"text-green-600":g.trend==="down"?"text-red-600":"text-gray-600"}`,children:[g.trend==="up"&&i.jsx(Pf,{className:"w-4 h-4"}),g.trend==="down"&&i.jsx(Df,{className:"w-4 h-4"}),i.jsx("span",{className:"capitalize",children:g.trend})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",g.spent.toLocaleString()," / $",g.budgeted.toLocaleString()]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["$",g.remaining.toLocaleString()," remaining"]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600",children:"Progress"}),i.jsxs("span",{className:`font-medium ${N?"text-red-600":"text-gray-900"}`,children:[Math.round(f),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:i.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${N?"bg-red-500":"bg-blue-600"}`,style:{width:`${Math.min(f,100)}%`}})})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:g.subcategories.map((x,S)=>i.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name}),i.jsxs("div",{className:"text-xs text-gray-600",children:["$",x.spent.toLocaleString()," / $",x.budgeted.toLocaleString()]})]},S))}),i.jsxs("div",{className:"flex space-x-2 mt-4",children:[i.jsxs("button",{className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[i.jsx(bo,{className:"w-4 h-4 mr-2"}),"View Details"]}),i.jsxs("button",{className:"flex items-center px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:[i.jsx(ac,{className:"w-4 h-4 mr-2"}),"Edit"]}),g.createdBy==="manual"&&i.jsxs("button",{className:"flex items-center px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[i.jsx(cr,{className:"w-4 h-4 mr-2"}),"Ask Stella to Optimize"]})]})]},g.id)})})]}),p=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create New Budget Item"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(B1,{className:"w-8 h-8 text-gray-600"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:"Manual Entry"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Full control over details"})]})]}),i.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 mb-4",children:[i.jsx("li",{children:"• Custom categories"}),i.jsx("li",{children:"• Detailed line items"}),i.jsx("li",{children:"• Manual calculations"})]}),i.jsx("button",{className:"w-full py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Create Manually"})]}),i.jsxs("div",{className:"border-2 border-blue-200 rounded-lg p-6 hover:border-blue-400 transition-colors bg-blue-50",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(cr,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-blue-900",children:"Stella Assisted"}),i.jsx("p",{className:"text-sm text-blue-700",children:"Smart suggestions & validation"})]})]}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-2 mb-4",children:[i.jsx("li",{children:"• Budget recommendations"}),i.jsx("li",{children:"• Historical comparisons"}),i.jsx("li",{children:"• Optimization suggestions"})]}),i.jsx("button",{className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Get Stella's Help"})]}),i.jsxs("div",{className:"border-2 border-purple-200 rounded-lg p-6 hover:border-purple-400 transition-colors bg-purple-50",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(cr,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-purple-900",children:"Stella Auto-Generate"}),i.jsx("p",{className:"text-sm text-purple-700",children:"Complete budget creation"})]})]}),i.jsxs("ul",{className:"text-sm text-purple-700 space-y-2 mb-4",children:[i.jsx("li",{children:"• AI-powered allocations"}),i.jsx("li",{children:"• Predictive modeling"}),i.jsx("li",{children:"• Optimization algorithms"})]}),i.jsx("button",{className:"w-full py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Let Stella Generate"})]})]})]}),m=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Recent Transactions"}),i.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(dg,{className:"w-4 h-4 mr-2"}),"Export"]})]}),i.jsx("div",{className:"space-y-4",children:o.recentTransactions.map(g=>i.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${g.type==="income"?"bg-green-100":"bg-red-100"}`,children:g.type==="income"?i.jsx(Pf,{className:"w-5 h-5 text-green-600"}):i.jsx(Df,{className:"w-5 h-5 text-red-600"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:g.description}),g.createdBy==="stella"&&i.jsx(cr,{className:"w-4 h-4 text-purple-500",title:"Processed by Stella"})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[g.category," • ",new Date(g.date).toLocaleDateString()]})]})]}),i.jsxs("div",{className:`text-lg font-semibold ${g.type==="income"?"text-green-600":"text-red-600"}`,children:[g.type==="income"?"+":"","$",Math.abs(g.amount).toLocaleString()]})]},g.id))})]});return i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Budget Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"Manage your PTO finances with Stella's intelligent insights"})]}),i.jsx("div",{className:"flex items-center space-x-3",children:i.jsxs("select",{value:a,onChange:g=>s(g.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"current",children:"Current Year"}),i.jsx("option",{value:"previous",children:"Previous Year"}),i.jsx("option",{value:"quarter",children:"This Quarter"})]})})]}),i.jsx(l,{}),i.jsx(c,{}),i.jsx(p,{}),i.jsx(d,{}),i.jsx(m,{})]})})};function Mk(){const[e,t]=W.useState({label:"",amount:"",category:"",type:"expense",related_event_id:""}),[r,n]=W.useState(""),[a,s]=W.useState(""),o=c=>{const{name:d,value:p}=c.target;t(m=>({...m,[d]:p}))},l=async c=>{c.preventDefault(),s(""),n("");const{data:{session:d}}=await ze.auth.getSession();if(!(d!=null&&d.access_token)){s("Authentication required.");return}try{const p=await fetch("/api/budgets",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.access_token}`},body:JSON.stringify(e)}),m=await p.json();p.ok?(n("Budget entry added successfully!"),t({label:"",amount:"",category:"",type:"expense",related_event_id:""})):s(m.error||"Submission failed.")}catch(p){console.error("Budget entry error:",p),s("Server error. Please try again.")}};return i.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add Budget Entry"}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsx("input",{name:"label",value:e.label,onChange:o,placeholder:"Label",className:"w-full border p-2",required:!0}),i.jsx("input",{type:"number",name:"amount",value:e.amount,onChange:o,placeholder:"Amount",className:"w-full border p-2",required:!0}),i.jsx("input",{name:"category",value:e.category,onChange:o,placeholder:"Category (e.g., supplies, venue)",className:"w-full border p-2"}),i.jsxs("select",{name:"type",value:e.type,onChange:o,className:"w-full border p-2",children:[i.jsx("option",{value:"expense",children:"Expense"}),i.jsx("option",{value:"income",children:"Income"})]}),i.jsx("input",{name:"related_event_id",value:e.related_event_id,onChange:o,placeholder:"Related Event ID (optional)",className:"w-full border p-2"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:"Save Entry"}),r&&i.jsx("p",{className:"text-green-600",children:r}),a&&i.jsx("p",{className:"text-red-600",children:a})]})]})}function Ik({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const Rk=W.forwardRef(Ik);function Fk({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"}))}const $m=W.forwardRef(Fk);function $k({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Kd=W.forwardRef($k);function Bk({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const qk=W.forwardRef(Bk);function zk({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Uk=W.forwardRef(zk);function Wk({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Hk=W.forwardRef(Wk);function Gk({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const Vk=W.forwardRef(Gk);function Yk({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Kk=W.forwardRef(Yk);function Xk({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const Jk=W.forwardRef(Xk);function Zk({title:e,titleId:t,...r},n){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Qk=W.forwardRef(Zk),jn=xr.create({baseURL:"https://pto-connect-backend.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});jn.interceptors.request.use(async e=>{try{const{data:{session:t}}=await ze.auth.getSession();t!=null&&t.access_token&&(e.headers.Authorization=`Bearer ${t.access_token}`)}catch(t){console.error("Error getting session:",t)}return e},e=>Promise.reject(e));jn.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(window.location.href="/login"),Promise.reject(e)});const Vh={startReconciliation:async e=>{try{return(await jn.post("/api/reconciliation/start",e)).data}catch(t){return console.error("Error starting reconciliation:",t),{success:!1,error:t.message}}},getReconciliations:async()=>{try{return(await jn.get("/api/reconciliation")).data}catch(e){return console.error("Error fetching reconciliations:",e),{success:!1,error:e.message}}},uploadStatement:async(e,t)=>{try{const r=new FormData;return r.append("statement",t),(await jn.post(`/api/reconciliation/${e}/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){return console.error("Error uploading statement:",r),{success:!1,error:r.message}}},getTransactions:async e=>{try{return(await jn.get(`/api/reconciliation/${e}/transactions`)).data}catch(t){return console.error("Error fetching transactions:",t),{success:!1,error:t.message}}},matchTransaction:async(e,t)=>{try{return(await jn.post(`/api/reconciliation/${e}/match`,t)).data}catch(r){return console.error("Error matching transaction:",r),{success:!1,error:r.message}}},completeReconciliation:async e=>{try{return(await jn.post(`/api/reconciliation/${e}/complete`)).data}catch(t){return console.error("Error completing reconciliation:",t),{success:!1,error:t.message}}},generateReport:async e=>{try{return(await jn.get(`/api/reconciliation/${e}/report`)).data}catch(t){return console.error("Error generating report:",t),{success:!1,error:t.message}}}};var eO={exports:{}};(function(e){var t=function(r){var n=Object.prototype,a=n.hasOwnProperty,s=Object.defineProperty||function(Y,X,ce){Y[X]=ce.value},o,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",d=l.asyncIterator||"@@asyncIterator",p=l.toStringTag||"@@toStringTag";function m(Y,X,ce){return Object.defineProperty(Y,X,{value:ce,enumerable:!0,configurable:!0,writable:!0}),Y[X]}try{m({},"")}catch{m=function(X,ce,P){return X[ce]=P}}function g(Y,X,ce,P){var q=X&&X.prototype instanceof _?X:_,V=Object.create(q.prototype),ee=new re(P||[]);return s(V,"_invoke",{value:O(Y,ce,ee)}),V}r.wrap=g;function f(Y,X,ce){try{return{type:"normal",arg:Y.call(X,ce)}}catch(P){return{type:"throw",arg:P}}}var N="suspendedStart",x="suspendedYield",S="executing",y="completed",w={};function _(){}function E(){}function L(){}var B={};m(B,c,function(){return this});var T=Object.getPrototypeOf,C=T&&T(T(Z([])));C&&C!==n&&a.call(C,c)&&(B=C);var $=L.prototype=_.prototype=Object.create(B);E.prototype=L,s($,"constructor",{value:L,configurable:!0}),s(L,"constructor",{value:E,configurable:!0}),E.displayName=m(L,p,"GeneratorFunction");function H(Y){["next","throw","return"].forEach(function(X){m(Y,X,function(ce){return this._invoke(X,ce)})})}r.isGeneratorFunction=function(Y){var X=typeof Y=="function"&&Y.constructor;return X?X===E||(X.displayName||X.name)==="GeneratorFunction":!1},r.mark=function(Y){return Object.setPrototypeOf?Object.setPrototypeOf(Y,L):(Y.__proto__=L,m(Y,p,"GeneratorFunction")),Y.prototype=Object.create($),Y},r.awrap=function(Y){return{__await:Y}};function A(Y,X){function ce(V,ee,se,de){var fe=f(Y[V],Y,ee);if(fe.type==="throw")de(fe.arg);else{var ge=fe.arg,Ae=ge.value;return Ae&&typeof Ae=="object"&&a.call(Ae,"__await")?X.resolve(Ae.__await).then(function(Se){ce("next",Se,se,de)},function(Se){ce("throw",Se,se,de)}):X.resolve(Ae).then(function(Se){ge.value=Se,se(ge)},function(Se){return ce("throw",Se,se,de)})}}var P;function q(V,ee){function se(){return new X(function(de,fe){ce(V,ee,de,fe)})}return P=P?P.then(se,se):se()}s(this,"_invoke",{value:q})}H(A.prototype),m(A.prototype,d,function(){return this}),r.AsyncIterator=A,r.async=function(Y,X,ce,P,q){q===void 0&&(q=Promise);var V=new A(g(Y,X,ce,P),q);return r.isGeneratorFunction(X)?V:V.next().then(function(ee){return ee.done?ee.value:V.next()})};function O(Y,X,ce){var P=N;return function(V,ee){if(P===S)throw new Error("Generator is already running");if(P===y){if(V==="throw")throw ee;return Q()}for(ce.method=V,ce.arg=ee;;){var se=ce.delegate;if(se){var de=F(se,ce);if(de){if(de===w)continue;return de}}if(ce.method==="next")ce.sent=ce._sent=ce.arg;else if(ce.method==="throw"){if(P===N)throw P=y,ce.arg;ce.dispatchException(ce.arg)}else ce.method==="return"&&ce.abrupt("return",ce.arg);P=S;var fe=f(Y,X,ce);if(fe.type==="normal"){if(P=ce.done?y:x,fe.arg===w)continue;return{value:fe.arg,done:ce.done}}else fe.type==="throw"&&(P=y,ce.method="throw",ce.arg=fe.arg)}}}function F(Y,X){var ce=X.method,P=Y.iterator[ce];if(P===o)return X.delegate=null,ce==="throw"&&Y.iterator.return&&(X.method="return",X.arg=o,F(Y,X),X.method==="throw")||ce!=="return"&&(X.method="throw",X.arg=new TypeError("The iterator does not provide a '"+ce+"' method")),w;var q=f(P,Y.iterator,X.arg);if(q.type==="throw")return X.method="throw",X.arg=q.arg,X.delegate=null,w;var V=q.arg;if(!V)return X.method="throw",X.arg=new TypeError("iterator result is not an object"),X.delegate=null,w;if(V.done)X[Y.resultName]=V.value,X.next=Y.nextLoc,X.method!=="return"&&(X.method="next",X.arg=o);else return V;return X.delegate=null,w}H($),m($,p,"Generator"),m($,c,function(){return this}),m($,"toString",function(){return"[object Generator]"});function U(Y){var X={tryLoc:Y[0]};1 in Y&&(X.catchLoc=Y[1]),2 in Y&&(X.finallyLoc=Y[2],X.afterLoc=Y[3]),this.tryEntries.push(X)}function te(Y){var X=Y.completion||{};X.type="normal",delete X.arg,Y.completion=X}function re(Y){this.tryEntries=[{tryLoc:"root"}],Y.forEach(U,this),this.reset(!0)}r.keys=function(Y){var X=Object(Y),ce=[];for(var P in X)ce.push(P);return ce.reverse(),function q(){for(;ce.length;){var V=ce.pop();if(V in X)return q.value=V,q.done=!1,q}return q.done=!0,q}};function Z(Y){if(Y){var X=Y[c];if(X)return X.call(Y);if(typeof Y.next=="function")return Y;if(!isNaN(Y.length)){var ce=-1,P=function q(){for(;++ce<Y.length;)if(a.call(Y,ce))return q.value=Y[ce],q.done=!1,q;return q.value=o,q.done=!0,q};return P.next=P}}return{next:Q}}r.values=Z;function Q(){return{value:o,done:!0}}return re.prototype={constructor:re,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(te),!Y)for(var X in this)X.charAt(0)==="t"&&a.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=o)},stop:function(){this.done=!0;var Y=this.tryEntries[0],X=Y.completion;if(X.type==="throw")throw X.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var X=this;function ce(de,fe){return V.type="throw",V.arg=Y,X.next=de,fe&&(X.method="next",X.arg=o),!!fe}for(var P=this.tryEntries.length-1;P>=0;--P){var q=this.tryEntries[P],V=q.completion;if(q.tryLoc==="root")return ce("end");if(q.tryLoc<=this.prev){var ee=a.call(q,"catchLoc"),se=a.call(q,"finallyLoc");if(ee&&se){if(this.prev<q.catchLoc)return ce(q.catchLoc,!0);if(this.prev<q.finallyLoc)return ce(q.finallyLoc)}else if(ee){if(this.prev<q.catchLoc)return ce(q.catchLoc,!0)}else if(se){if(this.prev<q.finallyLoc)return ce(q.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Y,X){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var P=this.tryEntries[ce];if(P.tryLoc<=this.prev&&a.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var q=P;break}}q&&(Y==="break"||Y==="continue")&&q.tryLoc<=X&&X<=q.finallyLoc&&(q=null);var V=q?q.completion:{};return V.type=Y,V.arg=X,q?(this.method="next",this.next=q.finallyLoc,w):this.complete(V)},complete:function(Y,X){if(Y.type==="throw")throw Y.arg;return Y.type==="break"||Y.type==="continue"?this.next=Y.arg:Y.type==="return"?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):Y.type==="normal"&&X&&(this.next=X),w},finish:function(Y){for(var X=this.tryEntries.length-1;X>=0;--X){var ce=this.tryEntries[X];if(ce.finallyLoc===Y)return this.complete(ce.completion,ce.afterLoc),te(ce),w}},catch:function(Y){for(var X=this.tryEntries.length-1;X>=0;--X){var ce=this.tryEntries[X];if(ce.tryLoc===Y){var P=ce.completion;if(P.type==="throw"){var q=P.arg;te(ce)}return q}}throw new Error("illegal catch attempt")},delegateYield:function(Y,X,ce){return this.delegate={iterator:Z(Y),resultName:X,nextLoc:ce},this.method==="next"&&(this.arg=o),w}},r}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(eO);var Yh=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`;const tO=Yh;let Bm=0;var _v=({id:e,action:t,payload:r={}})=>{let n=e;return typeof n>"u"&&(n=tO("Job",Bm),Bm+=1),{id:n,action:t,payload:r}},Ai={};let Kh=!1;Ai.logging=Kh;Ai.setLogging=e=>{Kh=e};Ai.log=(...e)=>Kh?console.log.apply(void 0,e):null;const rO=_v,{log:Gl}=Ai,nO=Yh;let qm=0;var aO=()=>{const e=nO("Scheduler",qm),t={},r={};let n=[];qm+=1;const a=()=>n.length,s=()=>Object.keys(t).length,o=()=>{if(n.length!==0){const m=Object.keys(t);for(let g=0;g<m.length;g+=1)if(typeof r[m[g]]>"u"){n[0](t[m[g]]);break}}},l=(m,g)=>new Promise((f,N)=>{const x=rO({action:m,payload:g});n.push(async S=>{n.shift(),r[S.id]=x;try{f(await S[m].apply(void 0,[...g,x.id]))}catch(y){N(y)}finally{delete r[S.id],o()}}),Gl(`[${e}]: Add ${x.id} to JobQueue`),Gl(`[${e}]: JobQueue length=${n.length}`),o()});return{addWorker:m=>(t[m.id]=m,Gl(`[${e}]: Add ${m.id}`),Gl(`[${e}]: Number of workers=${s()}`),o(),m.id),addJob:async(m,...g)=>{if(s()===0)throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return l(m,g)},terminate:async()=>{Object.keys(t).forEach(async m=>{await t[m].terminate()}),n=[]},getQueueLen:a,getNumWorkers:s}};function sO(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var iO=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof sO=="function"&&(t.type="node"),typeof e>"u"?t:t[e]};const oO=iO("type")==="browser",lO=oO?e=>new URL(e,window.location.href).href:e=>e;var cO=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach(r=>{e[r]&&(t[r]=lO(t[r]))}),t},Av={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const uO="6.0.1",dO={version:uO};var hO={workerBlobURL:!0,logger:()=>{}};const fO=dO.version,pO=hO;var mO={...pO,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${fO}/dist/worker.min.js`},gO=({workerPath:e,workerBlobURL:t})=>{let r;if(Blob&&URL&&t){const n=new Blob([`importScripts("${e}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(n))}else r=new Worker(e);return r},vO=e=>{e.terminate()},bO=(e,t)=>{e.onmessage=({data:r})=>{t(r)}},xO=async(e,t)=>{e.postMessage(t)};const ud=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=({target:{error:{code:a}}})=>{r(Error(`File could not be read! Code=${a}`))},n.readAsArrayBuffer(e)}),Xd=async e=>{let t=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(t=await Xd(e.src)),e.tagName==="VIDEO"&&(t=await Xd(e.poster)),e.tagName==="CANVAS"&&await new Promise(r=>{e.toBlob(async n=>{t=await ud(n),r()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const r=await e.convertToBlob();t=await ud(r)}else(e instanceof File||e instanceof Blob)&&(t=await ud(e));return new Uint8Array(t)};var yO=Xd;const wO=mO,NO=gO,jO=vO,SO=bO,_O=xO,AO=yO;var CO={defaultOptions:wO,spawnWorker:NO,terminateWorker:jO,onMessage:SO,send:_O,loadImage:AO};const EO=cO,Rn=_v,{log:zm}=Ai,LO=Yh,Qa=Av,{defaultOptions:PO,spawnWorker:DO,terminateWorker:kO,onMessage:OO,loadImage:Um,send:TO}=CO;let Wm=0;var Cv=async(e="eng",t=Qa.LSTM_ONLY,r={},n={})=>{const a=LO("Worker",Wm),{logger:s,errorHandler:o,...l}=EO({...PO,...r}),c={},d=typeof e=="string"?e.split("+"):e;let p=t,m=n;const g=[Qa.DEFAULT,Qa.LSTM_ONLY].includes(t)&&!l.legacyCore;let f,N;const x=new Promise((Z,Q)=>{N=Z,f=Q}),S=Z=>{f(Z.message)};let y=DO(l);y.onerror=S,Wm+=1;const w=({id:Z,action:Q,payload:Y})=>new Promise((X,ce)=>{zm(`[${a}]: Start ${Z}, action=${Q}`);const P=`${Q}-${Z}`;c[P]={resolve:X,reject:ce},TO(y,{workerId:a,jobId:Z,action:Q,payload:Y})}),_=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),E=Z=>w(Rn({id:Z,action:"load",payload:{options:{lstmOnly:g,corePath:l.corePath,logging:l.logging}}})),L=(Z,Q,Y)=>w(Rn({id:Y,action:"FS",payload:{method:"writeFile",args:[Z,Q]}})),B=(Z,Q)=>w(Rn({id:Q,action:"FS",payload:{method:"readFile",args:[Z,{encoding:"utf8"}]}})),T=(Z,Q)=>w(Rn({id:Q,action:"FS",payload:{method:"unlink",args:[Z]}})),C=(Z,Q,Y)=>w(Rn({id:Y,action:"FS",payload:{method:Z,args:Q}})),$=(Z,Q)=>w(Rn({id:Q,action:"loadLanguage",payload:{langs:Z,options:{langPath:l.langPath,dataPath:l.dataPath,cachePath:l.cachePath,cacheMethod:l.cacheMethod,gzip:l.gzip,lstmOnly:[Qa.DEFAULT,Qa.LSTM_ONLY].includes(p)&&!l.legacyLang}}})),H=(Z,Q,Y,X)=>w(Rn({id:X,action:"initialize",payload:{langs:Z,oem:Q,config:Y}})),A=(Z="eng",Q,Y,X)=>{if(g&&[Qa.TESSERACT_ONLY,Qa.TESSERACT_LSTM_COMBINED].includes(Q))throw Error("Legacy model requested but code missing.");const ce=Q||p;p=ce;const P=Y||m;m=P;const V=(typeof Z=="string"?Z.split("+"):Z).filter(ee=>!d.includes(ee));return d.push(...V),V.length>0?$(V,X).then(()=>H(Z,ce,P,X)):H(Z,ce,P,X)},O=(Z={},Q)=>w(Rn({id:Q,action:"setParameters",payload:{params:Z}})),F=async(Z,Q={},Y={text:!0},X)=>w(Rn({id:X,action:"recognize",payload:{image:await Um(Z),options:Q,output:Y}})),U=async(Z,Q)=>{if(g)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return w(Rn({id:Q,action:"detect",payload:{image:await Um(Z)}}))},te=async()=>(y!==null&&(kO(y),y=null),Promise.resolve());OO(y,({workerId:Z,jobId:Q,status:Y,action:X,data:ce})=>{const P=`${X}-${Q}`;if(Y==="resolve")zm(`[${Z}]: Complete ${Q}`),c[P].resolve({jobId:Q,data:ce}),delete c[P];else if(Y==="reject")if(c[P].reject(ce),delete c[P],X==="load"&&f(ce),o)o(ce);else throw Error(ce);else Y==="progress"&&s({...ce,userJobId:Q})});const re={id:a,worker:y,load:_,writeText:L,readText:B,removeFile:T,FS:C,reinitialize:A,setParameters:O,recognize:F,detect:U,terminate:te};return E().then(()=>$(e)).then(()=>H(e,t,n)).then(()=>N(re)).catch(()=>{}),x};const Ev=Cv,MO=async(e,t,r)=>{const n=await Ev(t,1,r);return n.recognize(e).finally(async()=>{await n.terminate()})},IO=async(e,t)=>{const r=await Ev("osd",0,t);return r.detect(e).finally(async()=>{await r.terminate()})};var RO={recognize:MO,detect:IO},FO={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},$O={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const BO=aO,qO=Cv,zO=RO,UO=FO,WO=Av,HO=$O,{setLogging:GO}=Ai;var VO={languages:UO,OEM:WO,PSM:HO,createScheduler:BO,createWorker:qO,setLogging:GO,...zO};const YO=Rr(VO);class KO{constructor(){this.worker=null,this.isInitialized=!1}async initialize(){if(!this.isInitialized)try{this.worker=await YO.createWorker("eng"),this.isInitialized=!0,console.log("OCR Worker initialized successfully")}catch(t){throw console.error("Failed to initialize OCR worker:",t),new Error("OCR initialization failed")}}async processImage(t,r=null){this.isInitialized||await this.initialize();try{const n=await this.worker.recognize(t,{logger:r?a=>{a.status==="recognizing text"&&r(Math.round(a.progress*100))}:void 0});return{success:!0,text:n.data.text,confidence:n.data.confidence,words:n.data.words,lines:n.data.lines}}catch(n){return console.error("OCR processing failed:",n),{success:!1,error:n.message}}}async processBankStatement(t,r=null){const n=await this.processImage(t,r);if(!n.success)return n;const a=this.parseTransactions(n.text);return{success:!0,rawText:n.text,confidence:n.confidence,transactions:a,metadata:{totalTransactions:a.length,processingDate:new Date().toISOString()}}}parseTransactions(t){const r=[],n=t.split(`
`).filter(s=>s.trim().length>0),a={date:/(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/,amount:/[\$\-]?(\d{1,3}(?:,\d{3})*\.?\d{0,2})/,debitCredit:/(DEBIT|CREDIT|DR|CR|WITHDRAWAL|DEPOSIT)/i};for(let s=0;s<n.length;s++){const o=n[s].trim();if(this.isHeaderLine(o)||o.length<10)continue;const l=o.match(a.date),c=o.match(new RegExp(a.amount.source,"g"));if(l&&c){const d=c.map(p=>{const m=p.replace(/[\$,]/g,"");return parseFloat(m)}).filter(p=>!isNaN(p)&&p>0);if(d.length>0){const p=Math.max(...d);let m=o.replace(a.date,"").replace(new RegExp(a.amount.source,"g"),"").replace(a.debitCredit,"").trim().replace(/\s+/g," ");m=this.cleanDescription(m),m.length>3&&r.push({id:`ocr_${Date.now()}_${s}`,date:this.parseDate(l[1]),description:m,amount:p,type:this.determineTransactionType(o),rawLine:o,confidence:this.calculateLineConfidence(o)})}}}return r.sort((s,o)=>new Date(o.date)-new Date(s.date))}isHeaderLine(t){const r=["STATEMENT","ACCOUNT","BALANCE","DATE","DESCRIPTION","AMOUNT","TRANSACTION","BEGINNING","ENDING","TOTAL","PAGE","BANK","CREDIT UNION"],n=t.toUpperCase();return r.some(a=>n.includes(a))&&!t.match(/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/)}cleanDescription(t){return t.replace(/\b(POS|ATM|ACH|CHK|DEP|WD|TFR|FEE)\b/gi,"").replace(/\b\d{4,}\b/g,"").replace(/[#*]+/g,"").replace(/\s+/g," ").trim()}parseDate(t){const r=[/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/,/(\d{1,2})-(\d{1,2})-(\d{2,4})/];for(const n of r){const a=t.match(n);if(a){let[,s,o,l]=a;return l.length===2&&(l=parseInt(l)>50?`19${l}`:`20${l}`),`${l}-${s.padStart(2,"0")}-${o.padStart(2,"0")}`}}return t}determineTransactionType(t){const r=t.toUpperCase();return r.includes("DEBIT")||r.includes("WITHDRAWAL")||r.includes("DR")||r.includes("WD")?"debit":r.includes("CREDIT")||r.includes("DEPOSIT")||r.includes("CR")||r.includes("DEP")?"credit":"debit"}calculateLineConfidence(t){let r=.5;return t.match(/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/)&&(r+=.2),t.match(/\$?\d+\.\d{2}/)&&(r+=.2),t.length>20&&t.length<100&&(r+=.1),Math.min(r,1)}async terminate(){this.worker&&(await this.worker.terminate(),this.worker=null,this.isInitialized=!1)}validateTransactions(t){return t.filter(r=>r.date&&r.description&&r.description.length>2&&r.amount&&r.amount>0&&!isNaN(r.amount))}suggestCorrections(t){return t.map(r=>{const n=[];return r.description.includes("0")&&r.description.includes("O")&&n.push("Check if O should be 0 or vice versa"),r.description.includes("1")&&r.description.includes("l")&&n.push("Check if l should be 1 or vice versa"),r.amount>1e4&&n.push("Verify large amount - possible OCR error"),{...r,suggestions:n}})}}const dd=new KO,XO=({onUpload:e})=>{const[t,r]=W.useState(null),[n,a]=W.useState(!1),[s,o]=W.useState(0),[l,c]=W.useState(null),[d,p]=W.useState(!1),[m,g]=W.useState(!1),f=L=>{L.preventDefault(),L.stopPropagation(),L.type==="dragenter"||L.type==="dragover"?g(!0):L.type==="dragleave"&&g(!1)},N=L=>{L.preventDefault(),L.stopPropagation(),g(!1),L.dataTransfer.files&&L.dataTransfer.files[0]&&S(L.dataTransfer.files[0])},x=L=>{L.target.files&&L.target.files[0]&&S(L.target.files[0])},S=L=>{if(!["image/jpeg","image/png","image/jpg","application/pdf"].includes(L.type)){alert("Please upload a valid image (JPG, PNG) or PDF file.");return}if(L.size>10*1024*1024){alert("File size must be less than 10MB.");return}r(L),c(null),o(0)},y=async()=>{if(t){a(!0),o(0);try{if(t.type==="application/pdf"){alert("PDF processing will be implemented in the next update. Please use an image file for now."),a(!1);return}const L=await dd.processBankStatement(t,B=>{o(B)});if(L.success){const B=dd.validateTransactions(L.transactions),T=dd.suggestCorrections(B);c({...L,transactions:T})}else alert(`OCR processing failed: ${L.error}`)}catch(L){console.error("OCR processing error:",L),alert("Failed to process the bank statement. Please try again.")}finally{a(!1),o(0)}}},w=()=>{l&&l.transactions.length>0&&e({file:t,ocrResult:l,transactions:l.transactions})},_=(L,B,T)=>{const C=[...l.transactions];C[L]={...C[L],[B]:B==="amount"?parseFloat(T)||0:T},c({...l,transactions:C})},E=L=>{const B=l.transactions.filter((T,C)=>C!==L);c({...l,transactions:B})};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Bank Statement"}),i.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${m?"border-blue-400 bg-blue-50":"border-gray-300"} ${n?"opacity-50 pointer-events-none":""}`,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:N,children:[i.jsx(Rk,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h4",{className:"mt-2 text-sm font-medium text-gray-900",children:n?"Processing...":"Upload your bank statement"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Drag and drop or click to select. Supports JPG, PNG, and PDF files up to 10MB."}),i.jsxs("div",{className:"mt-6",children:[i.jsx("input",{type:"file",id:"file-upload",className:"sr-only",onChange:x,accept:".pdf,.png,.jpg,.jpeg",disabled:n}),i.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Select a file"})]}),t&&i.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:"Selected:"})," ",t.name," (",(t.size/1024/1024).toFixed(2)," MB)"]})}),n&&i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),i.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Processing: ",s,"%"]})]})]}),t&&!l&&!n&&i.jsx("div",{className:"text-center",children:i.jsxs("button",{onClick:y,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:[i.jsx(Hk,{className:"h-5 w-5 mr-2"}),"Extract Transactions with OCR"]})}),l&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Kd,{className:"h-5 w-5 text-green-400 mr-2"}),i.jsx("h4",{className:"text-sm font-medium text-green-800",children:"OCR Processing Complete"})]}),i.jsxs("p",{className:"mt-1 text-sm text-green-700",children:["Extracted ",l.transactions.length," transactions with ",Math.round(l.confidence),"% confidence."]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Review Extracted Transactions"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Please review and edit the transactions below before proceeding."})]}),i.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:l.transactions.map((L,B)=>i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),i.jsx("input",{type:"date",value:L.date,onChange:T=>_(B,"date",T.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("input",{type:"text",value:L.description,onChange:T=>_(B,"description",T.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),i.jsxs("div",{className:"flex items-end space-x-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount"}),i.jsx("input",{type:"number",step:"0.01",value:L.amount,onChange:T=>_(B,"amount",T.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),i.jsx("button",{onClick:()=>E(B),className:"px-2 py-1 text-red-600 hover:text-red-800 text-sm",title:"Remove transaction",children:"✕"})]})]}),L.suggestions&&L.suggestions.length>0&&i.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Uk,{className:"h-4 w-4 text-yellow-400 mr-1 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-medium text-yellow-800",children:"Suggestions:"}),i.jsx("ul",{className:"text-xs text-yellow-700 list-disc list-inside",children:L.suggestions.map((T,C)=>i.jsx("li",{children:T},C))})]})]})}),i.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500",children:[i.jsxs("span",{children:["Confidence: ",Math.round(L.confidence*100),"%"]}),i.jsx("div",{className:"ml-2 flex-1 bg-gray-200 rounded-full h-1",children:i.jsx("div",{className:"bg-blue-600 h-1 rounded-full",style:{width:`${L.confidence*100}%`}})})]})]},L.id))}),i.jsx("div",{className:"px-4 py-3 border-t border-gray-200 text-center",children:i.jsxs("button",{onClick:w,disabled:l.transactions.length===0,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 disabled:opacity-50",children:[i.jsx(Kd,{className:"h-5 w-5 mr-2"}),"Confirm ",l.transactions.length," Transactions"]})})]})]})]})};class JO{constructor(){this.matchingThreshold=.7,this.amountTolerance=.01}findMatches(t,r){const n=[];for(const a of t){const s=this.findPotentialMatches(a,r);s.length>0?(s.sort((o,l)=>l.confidence-o.confidence),n.push({bankTransaction:a,suggestions:s,bestMatch:s[0],autoMatch:s[0].confidence>=this.matchingThreshold})):n.push({bankTransaction:a,suggestions:[],bestMatch:null,autoMatch:!1})}return n}findPotentialMatches(t,r){const n=[];for(const a of r){if(a.is_matched)continue;const s=this.calculateMatchConfidence(t,a);s>.3&&n.push({expense:a,confidence:s,matchReasons:this.getMatchReasons(t,a,s)})}return n}calculateMatchConfidence(t,r){let n=0;const a={amount:.4,description:.3,date:.2,vendor:.1},s=this.calculateAmountScore(t.amount,r.amount);n+=s*a.amount;const o=this.calculateDescriptionScore(t.description,r.description||r.vendor);n+=o*a.description;const l=this.calculateDateScore(t.date,r.date);if(n+=l*a.date,r.vendor){const c=this.calculateDescriptionScore(t.description,r.vendor);n+=c*a.vendor}return Math.min(n,1)}calculateAmountScore(t,r){const n=Math.abs(t-r);if(n<=this.amountTolerance)return 1;const a=n/Math.max(t,r);return a<=.01?.9:a<=.05?.7:a<=.1?.5:a<=.2?.3:0}calculateDescriptionScore(t,r){if(!t||!r)return 0;const n=this.normalizeDescription(t),a=this.normalizeDescription(r);if(n===a)return 1;if(n.includes(a)||a.includes(n))return .8;const s=this.levenshteinDistance(n,a),o=Math.max(n.length,a.length),l=1-s/o,c=this.checkVendorPatterns(t,r);return Math.min(l+c,1)}calculateDateScore(t,r){const n=new Date(t),a=new Date(r),s=Math.abs((n-a)/(1e3*60*60*24));return s===0?1:s<=1?.9:s<=3?.7:s<=7?.5:s<=14?.3:0}normalizeDescription(t){return t.toLowerCase().replace(/[^\w\s]/g,"").replace(/\b(pos|atm|ach|chk|dep|wd|tfr|fee|debit|credit)\b/g,"").replace(/\b\d+\b/g,"").replace(/\s+/g," ").trim()}checkVendorPatterns(t,r){const n=["walmart","target","amazon","costco","home depot","lowes","starbucks","mcdonalds","subway","pizza","gas","shell","exxon","bp","chevron","office depot","staples"],a=t.toLowerCase(),s=r.toLowerCase();for(const o of n)if(a.includes(o)&&s.includes(o))return .2;return 0}levenshteinDistance(t,r){const n=[];for(let a=0;a<=r.length;a++)n[a]=[a];for(let a=0;a<=t.length;a++)n[0][a]=a;for(let a=1;a<=r.length;a++)for(let s=1;s<=t.length;s++)r.charAt(a-1)===t.charAt(s-1)?n[a][s]=n[a-1][s-1]:n[a][s]=Math.min(n[a-1][s-1]+1,n[a][s-1]+1,n[a-1][s]+1);return n[r.length][t.length]}getMatchReasons(t,r,n){const a=[],s=Math.abs(t.amount-r.amount);s<=this.amountTolerance?a.push("Exact amount match"):s/r.amount<=.05&&a.push("Very close amount match");const o=Math.abs((new Date(t.date)-new Date(r.date))/(1e3*60*60*24));o===0?a.push("Same date"):o<=3&&a.push(`${Math.round(o)} day(s) apart`);const l=this.calculateDescriptionScore(t.description,r.description||r.vendor);return l>.8?a.push("Strong description match"):l>.5&&a.push("Partial description match"),r.vendor&&this.calculateDescriptionScore(t.description,r.vendor)>.6&&a.push("Vendor name match"),a}performAutoMatching(t){const r=[];for(const n of t)n.autoMatch&&n.bestMatch&&r.push({bankTransaction:n.bankTransaction,expense:n.bestMatch.expense,confidence:n.bestMatch.confidence,reasons:n.bestMatch.matchReasons});return r}updateParameters(t){t.matchingThreshold!==void 0&&(this.matchingThreshold=t.matchingThreshold),t.amountTolerance!==void 0&&(this.amountTolerance=t.amountTolerance)}}const Hm=new JO,ZO=({reconciliationId:e,bankTransactions:t=[],systemExpenses:r=[]})=>{const[n,a]=W.useState([]),[s,o]=W.useState(null),[l,c]=W.useState(null),[d,p]=W.useState(!1),[m,g]=W.useState(!0),[f,N]=W.useState({total:0,matched:0,autoMatched:0,unmatched:0});W.useEffect(()=>{t.length>0&&r.length>0&&x()},[t,r]);const x=()=>{p(!0);try{const E=Hm.findMatches(t,r);a(E);const L={total:t.length,matched:E.filter(B=>B.bestMatch).length,autoMatched:E.filter(B=>B.autoMatch).length,unmatched:E.filter(B=>!B.bestMatch).length};if(N(L),m){const B=Hm.performAutoMatching(E);console.log(`Auto-matched ${B.length} transactions`)}}catch(E){console.error("Matching failed:",E)}finally{p(!1)}},S=async(E,L)=>{try{if((await Vh.matchTransaction(e,{bankTransactionId:E.id,expenseId:L.id})).success){const T=n.map(C=>C.bankTransaction.id===E.id?{...C,isMatched:!0,matchedExpense:L}:C);a(T),o(null),c(null)}}catch(B){console.error("Failed to match transaction:",B),alert("Failed to match transaction. Please try again.")}},y=async E=>{E.bestMatch&&await S(E.bankTransaction,E.bestMatch.expense)},w=E=>E>=.8?"text-green-600 bg-green-100":E>=.6?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",_=E=>E>=.8?"High":E>=.6?"Medium":"Low";return d?i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("span",{className:"ml-2",children:"Analyzing transactions..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Smart Transaction Matching"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:m,onChange:E=>g(E.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Auto-match high confidence"})]}),i.jsx("button",{onClick:x,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Re-analyze"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.total}),i.jsx("div",{className:"text-sm text-blue-800",children:"Total Transactions"})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.matched}),i.jsx("div",{className:"text-sm text-green-800",children:"Potential Matches"})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f.autoMatched}),i.jsx("div",{className:"text-sm text-purple-800",children:"Auto-Matched"})]}),i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:f.unmatched}),i.jsx("div",{className:"text-sm text-red-800",children:"Unmatched"})]})]}),i.jsx("div",{className:"space-y-4",children:n.map((E,L)=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"font-medium text-gray-900",children:E.bankTransaction.description}),i.jsxs("div",{className:"font-bold text-lg",children:["$",E.bankTransaction.amount.toFixed(2)]}),i.jsx("div",{className:"text-sm text-gray-500",children:E.bankTransaction.date})]})}),E.isMatched&&i.jsxs("div",{className:"flex items-center text-green-600",children:[i.jsx(Kd,{className:"h-5 w-5 mr-1"}),i.jsx("span",{className:"text-sm font-medium",children:"Matched"})]})]}),E.suggestions.length>0&&!E.isMatched&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[i.jsx(Vk,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:"Suggested matches:"})]}),E.suggestions.slice(0,3).map((B,T)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border hover:bg-gray-100 cursor-pointer",onClick:()=>y({...E,bestMatch:B}),children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"font-medium",children:B.expense.vendor||B.expense.description}),i.jsxs("div",{className:"font-bold",children:["$",B.expense.amount.toFixed(2)]}),i.jsx("div",{className:"text-sm text-gray-500",children:B.expense.date})]}),i.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:B.matchReasons.map((C,$)=>i.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:C},$))})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded ${w(B.confidence)}`,children:[_(B.confidence)," (",Math.round(B.confidence*100),"%)"]}),i.jsx("button",{className:"p-1 text-green-600 hover:text-green-800",children:i.jsx($m,{className:"h-4 w-4"})})]})]},B.expense.id)),E.suggestions.length>3&&i.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["+",E.suggestions.length-3," more potential matches"]})]}),E.suggestions.length===0&&!E.isMatched&&i.jsxs("div",{className:"flex items-center justify-center p-4 bg-red-50 rounded border border-red-200",children:[i.jsx(Qk,{className:"h-5 w-5 text-red-500 mr-2"}),i.jsx("span",{className:"text-red-700",children:"No potential matches found"}),i.jsx("button",{className:"ml-4 px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Create New Expense"})]})]},E.bankTransaction.id))}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Manual Matching"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Unmatched Bank Transactions"}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.filter(E=>!E.isMatched).map(E=>i.jsxs("div",{onClick:()=>o(E.bankTransaction),className:`p-3 rounded border cursor-pointer ${(s==null?void 0:s.id)===E.bankTransaction.id?"bg-blue-100 border-blue-400":"bg-white hover:bg-gray-50"}`,children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:E.bankTransaction.description}),i.jsxs("span",{className:"font-bold",children:["$",E.bankTransaction.amount.toFixed(2)]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:E.bankTransaction.date})]},E.bankTransaction.id))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Unmatched System Expenses"}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.filter(E=>!E.is_matched).map(E=>i.jsxs("div",{onClick:()=>c(E),className:`p-3 rounded border cursor-pointer ${(l==null?void 0:l.id)===E.id?"bg-green-100 border-green-400":"bg-white hover:bg-gray-50"}`,children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:E.vendor||E.description}),i.jsxs("span",{className:"font-bold",children:["$",E.amount.toFixed(2)]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:E.date})]},E.id))})]})]}),s&&l&&i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("button",{onClick:()=>S(s,l),className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700",children:[i.jsx($m,{className:"h-5 w-5 mr-2"}),"Match Selected Transactions"]})})]})]})},Lv=({reconciliation:e})=>{const t={period:"October 2024"};return i.jsxs("div",{className:"bg-white shadow-sm rounded-lg border p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Reconciliation Report"}),i.jsxs("p",{className:"text-sm text-gray-500",children:["For ",t.period]})]}),i.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[i.jsx(Jk,{className:"h-4 w-4 mr-2"}),"Print"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"}),i.jsx("div",{children:i.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Unmatched Items"})})]})},Pv=({onComplete:e,onCancel:t})=>{const[r,n]=W.useState(1),[a,s]=W.useState({id:null,month:new Date().getMonth()+1,year:new Date().getFullYear(),bankStatement:null}),[o,l]=W.useState(!1),c=[{id:1,name:"Setup",description:"Select period"},{id:2,name:"Upload Statement",description:"Provide bank statement"},{id:3,name:"Review & Match",description:"Match transactions"},{id:4,name:"Finalize",description:"Review and complete"}],d=(N,x)=>{s(S=>({...S,[N]:x}))},p=N=>{s(x=>({...x,bankStatement:N})),m()},m=async()=>{if(r===1){l(!0);try{const N=await Vh.startReconciliation(a.month,a.year);N.success&&(s(x=>({...x,id:N.data.id})),n(r+1))}catch(N){console.error("Failed to start reconciliation:",N)}finally{l(!1)}}else r<c.length&&n(r+1)},g=()=>{r>1&&n(r-1)},f=()=>{switch(r){case 1:return i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Select Reconciliation Period"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),i.jsx("select",{value:a.month,onChange:N=>d("month",parseInt(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Array.from({length:12},(N,x)=>i.jsx("option",{value:x+1,children:new Date(0,x).toLocaleString("default",{month:"long"})},x+1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),i.jsx("input",{type:"number",value:a.year,onChange:N=>d("year",parseInt(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]});case 2:return i.jsx(XO,{onUpload:p});case 3:return i.jsx(ZO,{reconciliationId:a.id});case 4:return i.jsx(Lv,{reconciliation:a});default:return i.jsxs("div",{children:["Step ",r]})}};return i.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:i.jsxs("div",{className:"relative top-10 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 shadow-lg rounded-md bg-white",children:[i.jsx("div",{className:"mb-8"}),i.jsx("div",{className:"p-6 mb-6",children:f()}),i.jsxs("div",{className:"flex justify-between px-6 pb-4",children:[i.jsx("button",{onClick:g,disabled:r===1,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md",children:"Previous"}),r<c.length?i.jsx("button",{onClick:m,disabled:o||r===2&&!a.bankStatement,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600",children:o?"Starting...":"Next"}):i.jsx("button",{onClick:()=>e(a),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600",children:"Finish"})]}),i.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:"Close"})]})})},QO=()=>{Ta();const[e,t]=W.useState([]),[r,n]=W.useState(!0),[a,s]=W.useState(!1);W.useEffect(()=>{o()},[]);const o=async()=>{n(!0);try{const c=await Vh.getReconciliations();c.success&&t(c.data)}catch(c){console.error("Failed to load reconciliations:",c)}finally{n(!1)}},l=c=>{console.log("Starting new reconciliation..."),s(!1),o()};return i.jsxs("div",{className:"space-y-6",children:[a&&i.jsx(Pv,{onComplete:l,onCancel:()=>s(!1)}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Monthly Reconciliations"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Keep your budget accurate by reconciling with your bank statements."})]}),i.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[i.jsx(Kk,{className:"h-5 w-5 mr-2"}),"New Reconciliation"]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"History"})}),r?i.jsx("div",{className:"text-center py-12",children:"Loading..."}):e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(qk,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-sm text-gray-500",children:"No reconciliations started yet."}),i.jsx("button",{onClick:()=>s(!0),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200",children:"Start Your First Reconciliation"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Period"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created At"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(c=>i.jsxs("tr",{children:[i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[new Date(c.year,c.month-1).toLocaleString("default",{month:"long"})," ",c.year]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.status}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(c.created_at).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:c.status==="in_progress"?"Continue":"View"})})]},c.id))})]})})]})]})},eT=[{id:1,subject:"Back-to-School Picnic",type:"event",status:"draft",updated_at:"2025-06-01"},{id:2,subject:"Fundraiser Reminder",type:"fundraiser",status:"draft",updated_at:"2025-06-02"}],tT={draft:"bg-gray-200 text-gray-800",scheduled:"bg-yellow-100 text-yellow-800",sent:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"};function rT(){const[e,t]=W.useState("drafts"),r=n=>n.length===0?i.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"No communications found."}):i.jsx("ul",{className:"space-y-3 mt-4",children:n.map(a=>i.jsxs("li",{className:"p-4 bg-white border rounded shadow flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:a.subject}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Type: ",a.type," • Last updated: ",a.updated_at]})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded ${tT[a.status]}`,children:a.status})]},a.id))});return i.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Communications"}),i.jsx(Cr,{to:"/communications/create",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"+ New"})]}),i.jsxs(sa.Tabs,{value:e,onChange:n=>t(n),children:[i.jsxs(sa.TabsHeader,{children:[i.jsx(sa.Tab,{value:"drafts",children:"Drafts"}),i.jsx(sa.Tab,{value:"scheduled",children:"Scheduled"}),i.jsx(sa.Tab,{value:"sent",children:"Sent"})]}),i.jsxs(sa.TabsBody,{children:[i.jsx(sa.TabPanel,{value:"drafts",children:r(eT)}),i.jsx(sa.TabPanel,{value:"scheduled",children:r([])}),i.jsx(sa.TabPanel,{value:"sent",children:r([])})]})]})]})}const nT=()=>{const[e,t]=W.useState("grid"),[r,n]=W.useState("manual"),[a,s]=W.useState(""),[o,l]=W.useState("all"),c=[{id:1,title:"Fall Festival Announcement",type:"email",status:"sent",audience:"All Families",sentDate:"2024-10-01",openRate:78,clickRate:12,createdBy:"stella",description:"Exciting announcement about our upcoming Fall Festival"},{id:2,title:"Volunteer Recruitment Drive",type:"social",status:"scheduled",audience:"Facebook & Instagram",scheduledDate:"2024-10-05",engagement:0,createdBy:"manual",description:"Call for volunteers for upcoming events"},{id:3,title:"Book Fair Reminder",type:"sms",status:"draft",audience:"Parent Contacts",deliveryRate:0,createdBy:"stella",description:"Reminder about the upcoming book fair"},{id:4,title:"Monthly Newsletter",type:"newsletter",status:"in_progress",audience:"All Subscribers",progress:65,createdBy:"manual",description:"October newsletter with updates and events"}],d=x=>{const S={draft:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",scheduled:"bg-yellow-100 text-yellow-800",sent:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"};return S[x]||S.draft},p=x=>({email:Ml,sms:Of,social:kf,newsletter:ss})[x]||Ml,m=({communication:x})=>{const S=p(x.type);return i.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx(S,{className:"w-5 h-5 text-blue-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.title}),x.createdBy==="stella"&&i.jsx(cr,{className:"w-4 h-4 text-purple-500",title:"Created by Stella"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:x.description}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(is,{className:"w-4 h-4"}),i.jsx("span",{children:x.audience})]}),x.sentDate&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ss,{className:"w-4 h-4"}),i.jsx("span",{children:new Date(x.sentDate).toLocaleDateString()})]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d(x.status)}`,children:x.status.replace("_"," ").charAt(0).toUpperCase()+x.status.replace("_"," ").slice(1)})]}),x.status==="sent"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[i.jsx("div",{className:"text-sm text-green-600",children:"Open Rate"}),i.jsxs("div",{className:"text-lg font-semibold text-green-700",children:[x.openRate,"%"]})]}),i.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[i.jsx("div",{className:"text-sm text-blue-600",children:"Click Rate"}),i.jsxs("div",{className:"text-lg font-semibold text-blue-700",children:[x.clickRate,"%"]})]})]}),x.status==="in_progress"&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600",children:"Progress"}),i.jsxs("span",{className:"font-medium text-gray-900",children:[x.progress,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${x.progress}%`}})})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(bo,{className:"w-4 h-4 mr-2"}),"View"]}),i.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ac,{className:"w-4 h-4 mr-2"}),"Edit"]}),x.status==="draft"&&i.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[i.jsx(z1,{className:"w-4 h-4 mr-2"}),"Send"]})]})]})})},g=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create New Communication"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Ml,{className:"w-8 h-8 text-blue-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Email Campaign"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Reach all families"})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsx("button",{className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Manual Creation"}),i.jsx("button",{className:"w-full py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Let Stella Help"}),i.jsx("button",{className:"w-full py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Stella Auto-Generate"})]})]}),i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-green-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(kf,{className:"w-8 h-8 text-green-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Social Media"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Facebook & Instagram"})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsx("button",{className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Manual Creation"}),i.jsx("button",{className:"w-full py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Let Stella Help"}),i.jsx("button",{className:"w-full py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Stella Auto-Generate"})]})]}),i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-yellow-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Of,{className:"w-8 h-8 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"SMS Campaign"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Direct text messages"})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsx("button",{className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Manual Creation"}),i.jsx("button",{className:"w-full py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Let Stella Help"}),i.jsx("button",{className:"w-full py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Stella Auto-Generate"})]})]}),i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 hover:border-purple-300 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(ss,{className:"w-8 h-8 text-purple-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Newsletter"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Monthly updates"})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsx("button",{className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Manual Creation"}),i.jsx("button",{className:"w-full py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Let Stella Help"}),i.jsx("button",{className:"w-full py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Stella Auto-Generate"})]})]})]})]}),f=()=>i.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(cr,{className:"w-6 h-6 text-purple-600"}),i.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Stella's Communication Insights"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Best Send Time"}),i.jsx("div",{className:"text-lg font-semibold text-purple-900",children:"Tuesday 10 AM"}),i.jsx("div",{className:"text-xs text-purple-700",children:"Based on your audience engagement"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Top Performing Subject"}),i.jsx("div",{className:"text-lg font-semibold text-purple-900",children:"Event Announcements"}),i.jsx("div",{className:"text-xs text-purple-700",children:"85% average open rate"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Stella's Suggestion"}),i.jsx("div",{className:"text-lg font-semibold text-purple-900",children:"Add Volunteer Call"}),i.jsx("div",{className:"text-xs text-purple-700",children:"Include in next newsletter"})]})]}),i.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg",children:[i.jsx("div",{className:"text-sm text-purple-900 font-medium mb-2",children:"💡 Stella's Tip of the Day"}),i.jsx("div",{className:"text-sm text-purple-800",children:'"Your Fall Festival emails get 23% higher engagement when sent on weekday mornings. Want me to schedule your next announcement for optimal timing?"'})]})]}),N=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("button",{className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[i.jsx(cr,{className:"w-6 h-6 text-purple-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium",children:"Ask Stella"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Get content ideas"})]}),i.jsxs("button",{className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition-colors",children:[i.jsx(q1,{className:"w-6 h-6 text-green-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium",children:"Analytics"}),i.jsx("span",{className:"text-xs text-gray-500",children:"View performance"})]}),i.jsxs("button",{className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:border-yellow-300 hover:bg-yellow-50 transition-colors",children:[i.jsx(hg,{className:"w-6 h-6 text-yellow-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium",children:"Schedule"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Plan campaigns"})]}),i.jsxs("button",{className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[i.jsx(is,{className:"w-6 h-6 text-blue-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium",children:"Audiences"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Manage lists"})]})]})]});return i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Communications Dashboard"}),i.jsx("p",{className:"text-gray-600",children:"Manage all your PTO communications with Stella's help or manual control"})]}),i.jsx("div",{className:"flex items-center space-x-3",children:i.jsx("button",{onClick:()=>t(e==="grid"?"list":"grid"),className:"p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:e==="grid"?i.jsx(og,{className:"w-5 h-5"}):i.jsx(lg,{className:"w-5 h-5"})})})]}),i.jsx(f,{}),i.jsx(N,{}),i.jsx(g,{}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(cg,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search communications...",value:a,onChange:x=>s(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("select",{value:o,onChange:x=>l(x.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Types"}),i.jsx("option",{value:"email",children:"Email"}),i.jsx("option",{value:"sms",children:"SMS"}),i.jsx("option",{value:"social",children:"Social Media"}),i.jsx("option",{value:"newsletter",children:"Newsletter"})]})]})}),i.jsx("div",{className:e==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:c.map(x=>i.jsx(m,{communication:x},x.id))}),c.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ml,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No communications found"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first communication"}),i.jsx("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Communication"})]})]})})};function aT(){const[e,t]=W.useState({subject:"",body:"",send_as:"email"}),[r,n]=W.useState(""),[a,s]=W.useState(""),o=c=>{const{name:d,value:p}=c.target;t(m=>({...m,[d]:p}))},l=async c=>{c.preventDefault(),s(""),n("");const{data:{session:d}}=await ze.auth.getSession();if(!(d!=null&&d.access_token)){s("Authentication required.");return}try{const p=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.access_token}`},body:JSON.stringify(e)}),m=await p.json();p.ok?(n("Message created successfully!"),t({subject:"",body:"",send_as:"email"})):s(m.error||"Failed to send message.")}catch(p){console.error("Submit error:",p),s("Server error. Please try again.")}};return i.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Create Message"}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsx("input",{name:"subject",value:e.subject,onChange:o,placeholder:"Subject",className:"w-full border p-2",required:!0}),i.jsx("textarea",{name:"body",value:e.body,onChange:o,placeholder:"Message Body",className:"w-full border p-2",required:!0}),i.jsxs("select",{name:"send_as",value:e.send_as,onChange:o,className:"w-full border p-2",children:[i.jsx("option",{value:"email",children:"Email"}),i.jsx("option",{value:"sms",children:"SMS"}),i.jsx("option",{value:"in_app",children:"In-App"})]}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:"Send Message"}),r&&i.jsx("p",{className:"text-green-600",children:r}),a&&i.jsx("p",{className:"text-red-600",children:a})]})]})}var Dv={exports:{}},xc={};Object.defineProperty(xc,"__esModule",{value:!0});var ho,la=W,hd=(ho=la)&&typeof ho=="object"&&"default"in ho?ho.default:ho;function Jd(){return(Jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var kv=[],Ov=!1,Gm=function(){if(Ov)for(var e;e=kv.shift();)e()},Zd=typeof window>"u"?{__unlayer_lastEditorId:0}:window;Zd.__unlayer_lastEditorId=Zd.__unlayer_lastEditorId||0;var Vm=hd.forwardRef(function(e,t){var r,n,a,s,o,l,c,d,p,m=e.onLoad,g=e.onReady,f=e.scriptUrl,N=e.minHeight,x=N===void 0?500:N,S=e.style,y=S===void 0?{}:S,w=la.useState(null),_=w[0],E=w[1],L=la.useState(!1),B=L[0],T=L[1],C=la.useMemo(function(){return e.editorId||"editor-"+ ++Zd.__unlayer_lastEditorId},[e.editorId]),$=Jd({},e.options||{},{appearance:(r=e.appearance)!=null?r:(n=e.options)==null?void 0:n.appearance,displayMode:(e==null?void 0:e.displayMode)||((a=e.options)==null?void 0:a.displayMode)||"email",locale:(s=e.locale)!=null?s:(o=e.options)==null?void 0:o.locale,projectId:(l=e.projectId)!=null?l:(c=e.options)==null?void 0:c.projectId,tools:(d=e.tools)!=null?d:(p=e.options)==null?void 0:p.tools,id:C,source:{name:"react-email-editor",version:"1.7.11"}});la.useImperativeHandle(t,function(){return{editor:_}},[_]),la.useEffect(function(){return function(){_==null||_.destroy()}},[]),la.useEffect(function(){T(!1),function(A,O){if(O===void 0&&(O="https://editor.unlayer.com/embed.js?2"),kv.push(function(){return T(!0)}),function(U){var te=document.querySelectorAll("script"),re=!1;return te.forEach(function(Z){Z.src.includes(U)&&(re=!0)}),re}(O))Gm();else{var F=document.createElement("script");F.setAttribute("src",O),F.onload=function(){Ov=!0,Gm()},document.head.appendChild(F)}}(0,f)},[f]),la.useEffect(function(){B&&(_==null||_.destroy(),E(unlayer.createEditor($)))},[JSON.stringify($),B]);var H=Object.keys(e).filter(function(A){return/^on/.test(A)});return la.useEffect(function(){_&&(m==null||m(_),H.forEach(function(A){/^on/.test(A)&&A!=="onLoad"&&A!=="onReady"&&typeof e[A]=="function"&&_.addEventListener(A,e[A])}),g&&_.addEventListener("editor:ready",function(){g(_)}))},[_,Object.keys(H).join(",")]),hd.createElement("div",{style:{flex:1,display:"flex",minHeight:x}},hd.createElement("div",{id:C,style:Jd({},y,{flex:1})}))});xc.EmailEditor=Vm,xc.default=Vm;Dv.exports=xc;var sT=Dv.exports;const iT=Rr(sT);function oT(){const e=W.useRef(null),[t,r]=W.useState("Loading..."),[n,a]=W.useState(null),[s,o]=W.useState(null),[l,c]=W.useState(null);W.useEffect(()=>{async function m(){var x,S,y;const{data:{session:g},error:f}=await ze.auth.getSession();if(!(g!=null&&g.access_token)){r("Error: Not authenticated.");return}const N=((x=g.user.user_metadata)==null?void 0:x.org_id)||((S=g.user.app_metadata)==null?void 0:S.org_id);o(N),c(g.access_token);try{const _=(await xr.get("/api/communications/email-drafts",{headers:{Authorization:`Bearer ${g.access_token}`}})).data.find(E=>E.org_id===N);_?(a(_.id),r("Loaded existing draft"),(y=e.current)==null||y.editor.loadDesign(JSON.parse(_.design_json))):r("No draft found")}catch(w){console.error(w),r("Error loading draft")}}m()},[]);const d=()=>{var m;!l||!s||(m=e.current)==null||m.editor.saveDesign(async g=>{const f={org_id:s,design_json:JSON.stringify(g),last_saved_at:new Date().toISOString()};try{if(n)await xr.put(`/api/communications/email-drafts/${n}`,f,{headers:{Authorization:`Bearer ${l}`}}),r("Draft updated");else{const N=await xr.post("/api/communications/email-drafts",f,{headers:{Authorization:`Bearer ${l}`}});a(N.data.id),r("Draft saved")}}catch(N){console.error(N),r("Save failed")}})},p=()=>{var m;(m=e.current)==null||m.editor.exportHtml(g=>{console.log("Exported HTML:",g.html),r("Exported to console")})};return i.jsxs("div",{className:"px-6 py-8 max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Email Designer"}),i.jsx("p",{className:"text-sm text-gray-500",children:t})]}),i.jsxs("div",{className:"space-x-2",children:[i.jsx("button",{onClick:d,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 text-sm",children:"Save Draft"}),i.jsx("button",{onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm",children:"Export HTML"})]})]}),i.jsx("div",{className:"border rounded shadow overflow-hidden h-[700px]",children:i.jsx(iT,{ref:e})})]})}function lT(){return i.jsx("div",{className:"p-4",children:i.jsx("h1",{className:"text-xl font-bold",children:"SMS Composer (Coming Soon)"})})}function cT(){return i.jsx("div",{className:"p-4",children:i.jsx("h1",{className:"text-xl font-bold",children:"Social Post Composer (Coming Soon)"})})}function uT(){return i.jsx("div",{className:"p-4",children:i.jsx("h1",{className:"text-xl font-bold",children:"AI Content Assistant (Coming Soon)"})})}function dT(){const[e,t]=W.useState([]),[r,n]=W.useState("");W.useEffect(()=>{async function s(){const{data:{session:o}}=await ze.auth.getSession(),l=o==null?void 0:o.access_token;if(!l)return n("Not authenticated.");try{const c=await xr.get("/api/documents",{headers:{Authorization:`Bearer ${l}`}});t(c.data)}catch(c){n("Failed to load documents."),console.error(c)}}s()},[]);const a=s=>{const{data:o}=ze.storage.from("documents").getPublicUrl(s);return o==null?void 0:o.publicUrl};return i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"PTO Documents"}),i.jsx(Cr,{to:"/documents/upload",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ Upload Document"})]}),r&&i.jsx("p",{className:"text-red-600",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No documents found."}),i.jsx("ul",{className:"space-y-4",children:e.map(s=>i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsx("h2",{className:"text-lg font-semibold",children:s.title}),i.jsx("a",{href:a(s.file_path),target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 underline text-sm",children:"View / Download"})]},s.id))})]})}function hT(){const[e,t]=W.useState(""),[r,n]=W.useState(null),[a,s]=W.useState(""),[o,l]=W.useState(""),c=async d=>{if(d.preventDefault(),!r||!e)return l("Title and file are required.");const{data:{session:p}}=await ze.auth.getSession(),m=p==null?void 0:p.access_token;if(!m)return l("User not authenticated.");const g=new FormData;g.append("title",e),g.append("file",r);try{await xr.post("/api/documents",g,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"multipart/form-data"}}),s("Document uploaded successfully."),t(""),n(null)}catch(f){l("Upload failed. Check console."),console.error(f)}};return i.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Upload Document"}),i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsx("input",{type:"text",placeholder:"Document Title",value:e,onChange:d=>t(d.target.value),className:"w-full border p-2",required:!0}),i.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg",onChange:d=>n(d.target.files[0]),className:"w-full border p-2",required:!0}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Upload"}),a&&i.jsx("p",{className:"text-green-600",children:a}),o&&i.jsx("p",{className:"text-red-600",children:o})]})]})}function fT(){const[e,t]=W.useState([]),[r,n]=W.useState("");return W.useEffect(()=>{async function a(){const{data:{session:s}}=await ze.auth.getSession(),o=s==null?void 0:s.access_token;if(!o){n("Not authenticated.");return}try{const l=await xr.get("/api/shared-library",{headers:{Authorization:`Bearer ${o}`}});t(l.data)}catch(l){console.error(l),n("Failed to load shared library items.")}}a()},[]),i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Shared PTO Library"}),r&&i.jsx("p",{className:"text-red-600",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No shared events or fundraisers yet."}),i.jsx("ul",{className:"space-y-4",children:e.map(a=>{var s;return i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsx("h2",{className:"text-xl font-semibold",children:a.title}),i.jsx("p",{className:"text-sm text-gray-500",children:a.description}),i.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Type: ",((s=a.type)==null?void 0:s.toUpperCase())||"N/A"," • Shared by another PTO"]})]},a.id)})})]})}function pT(){const[e,t]=W.useState({type:"",season:"",audience:"",theme:"",goal:""}),[r,n]=W.useState([]),[a,s]=W.useState(!1),[o,l]=W.useState(null),c=p=>{const{name:m,value:g}=p.target;t(f=>({...f,[m]:g}))},d=async()=>{s(!0),l(null),n([]);const{data:{session:p},error:m}=await ze.auth.getSession();if(m||!(p!=null&&p.access_token)){l("Authentication required."),s(!1);return}try{const f=await(await fetch("/api/ai/generate-event",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify(e)})).json();if(f.result){const N=f.result.split(/\n?\d+\.\s/).filter(Boolean).map(x=>x.trim().replace(/^\*\*/,"").replace(/\*\*$/,""));n(N)}else l("No ideas returned.")}catch(g){console.error(g),l("Error contacting the backend")}finally{s(!1)}};return i.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"AI Event Idea Generator"}),i.jsxs("div",{className:"grid gap-4 mb-4",children:[i.jsx("input",{name:"type",value:e.type,onChange:c,placeholder:"Event Type (e.g. Family Night)",className:"w-full border p-2 rounded"}),i.jsx("input",{name:"season",value:e.season,onChange:c,placeholder:"Season or Month (e.g. Spring, October)",className:"w-full border p-2 rounded"}),i.jsx("input",{name:"audience",value:e.audience,onChange:c,placeholder:"Audience (e.g. students, families)",className:"w-full border p-2 rounded"}),i.jsx("input",{name:"theme",value:e.theme,onChange:c,placeholder:"Theme (e.g. carnival, STEM)",className:"w-full border p-2 rounded"}),i.jsx("input",{name:"goal",value:e.goal,onChange:c,placeholder:"Goal (e.g. raise funds, build community)",className:"w-full border p-2 rounded"})]}),i.jsx("button",{onClick:d,disabled:a,className:"bg-blue-600 text-white px-4 py-2 rounded",children:a?"Generating...":"Generate Ideas"}),o&&i.jsx("p",{className:"text-red-500 mt-4",children:o}),r.length>0&&i.jsx("ul",{className:"mt-6 space-y-2",children:r.map((p,m)=>i.jsx("li",{className:"border p-3 rounded bg-gray-50",children:p},m))})]})}const mT=()=>{const[e,t]=W.useState(""),[r,n]=W.useState(!1),[a,s]=W.useState(null),[o,l]=W.useState(null),[c,d]=W.useState("draft"),p=["Fall Festival","Spring Carnival","Book Fair","Science Night","Art Show","Movie Night","Bingo Night","Talent Show","Holiday Bazaar","Teacher Appreciation Week","Fundraising Gala","Family Fun Run","Outdoor Movie Night","Game Night"],m=async x=>{n(!0),setTimeout(()=>{const S=g(x);s(S),n(!1)},3e3)},g=x=>{const S={"Fall Festival":{eventDetails:{name:"Fall Festival 2024",description:"A community celebration featuring games, food, and family fun",duration:"4 hours",expectedAttendance:300,complexity:"High",season:"Fall"},timeline:{totalWeeks:8,phases:[{name:"Planning",weeks:3,color:"#3b82f6"},{name:"Promotion",weeks:3,color:"#10b981"},{name:"Execution",weeks:2,color:"#f59e0b"}]},projectManagement:{tasks:[{id:1,task:"Secure venue booking",assignee:"Event Coordinator",deadline:"Week 1",priority:"High",status:"pending",dependencies:[]},{id:2,task:"Contact food vendors",assignee:"Event Coordinator",deadline:"Week 2",priority:"High",status:"pending",dependencies:[1]},{id:3,task:"Design promotional materials",assignee:"Communications Lead",deadline:"Week 4",priority:"Medium",status:"pending",dependencies:[]},{id:4,task:"Launch volunteer recruitment",assignee:"Volunteer Manager",deadline:"Week 5",priority:"High",status:"pending",dependencies:[3]},{id:5,task:"Setup event logistics",assignee:"Setup Crew",deadline:"Week 8",priority:"Critical",status:"pending",dependencies:[1,2,4]}],milestones:[{name:"Venue Confirmed",week:1},{name:"Vendors Booked",week:3},{name:"Promotion Launch",week:4},{name:"Volunteers Recruited",week:6},{name:"Event Day",week:8}]},budget:{totalBudget:3e3,expenses:[{category:"Venue",amount:500,description:"Gymnasium rental"},{category:"Entertainment",amount:800,description:"DJ and activities"},{category:"Food & Beverages",amount:1200,description:"Concessions"},{category:"Decorations",amount:300,description:"Fall themed decor"},{category:"Supplies",amount:200,description:"Tables, chairs, misc"}],revenue:[{source:"Ticket Sales",projected:1500,description:"$5 per family"},{source:"Food Sales",projected:2e3,description:"Concession profits"},{source:"Game Tickets",projected:800,description:"Activity tickets"},{source:"Sponsorships",projected:500,description:"Local businesses"}],netProjection:1800},communications:{campaigns:[{name:"Save the Date",type:"email",sendDate:"6 weeks before",audience:"all_families",template:"fall_festival_save_date",status:"scheduled"},{name:"Volunteer Recruitment",type:"email",sendDate:"4 weeks before",audience:"active_volunteers",template:"volunteer_call_to_action",status:"scheduled"},{name:"Final Details",type:"email",sendDate:"1 week before",audience:"all_families",template:"event_final_details",status:"scheduled"}],socialMedia:[{platform:"Facebook",posts:8,schedule:"Weekly leading up to event",content:"Fall Festival countdown posts"},{platform:"Instagram",posts:12,schedule:"Bi-weekly with stories",content:"Behind-the-scenes preparation"}],printMaterials:[{type:"Flyer",quantity:500,distribution:"Backpack mail",design:"Fall themed with event details"},{type:"Poster",quantity:20,distribution:"School hallways",design:"Eye-catching fall festival poster"}]},volunteers:{roles:[{role:"Setup Crew",needed:8,timeCommitment:"2 hours before event",skills:"Physical setup, organization"},{role:"Game Coordinators",needed:6,timeCommitment:"During event",skills:"Working with children, enthusiasm"},{role:"Food Service",needed:10,timeCommitment:"During event",skills:"Food handling, customer service"},{role:"Cleanup Crew",needed:6,timeCommitment:"2 hours after event",skills:"Organization, teamwork"}],totalNeeded:30,currentSignups:0},resources:{venue:{name:"School Gymnasium",capacity:400,amenities:["Tables","Chairs","Sound System","Kitchen Access"]},equipment:["Sound system for announcements","Tables for games and food","Chairs for seating areas","Extension cords and power strips","Trash bins and recycling"],supplies:["Fall decorations (leaves, pumpkins)","Game materials and prizes","Food service supplies","Signage and banners","First aid kit"]}}};return S[x]||S["Fall Festival"]},f=({workflow:x})=>i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:x.eventDetails.name}),i.jsx("p",{className:"text-gray-600",children:x.eventDetails.description})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Progress"}),i.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[15,"%"]})]}),i.jsx("div",{className:"w-16 h-16 relative",children:i.jsxs("svg",{className:"w-16 h-16 transform -rotate-90",viewBox:"0 0 36 36",children:[i.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),i.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeDasharray:"15, 100"})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ss,{className:"w-5 h-5 text-blue-600"}),i.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Timeline"})]}),i.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[x.timeline.totalWeeks," weeks"]})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(bd,{className:"w-5 h-5 text-green-600"}),i.jsx("span",{className:"text-sm font-medium text-green-900",children:"Net Profit"})]}),i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",x.budget.netProjection]})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(is,{className:"w-5 h-5 text-purple-600"}),i.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Volunteers"})]}),i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.volunteers.totalNeeded})]}),i.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Tf,{className:"w-5 h-5 text-orange-600"}),i.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Communications"})]}),i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:x.communications.campaigns.length})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Project Timeline"}),i.jsx("div",{className:"flex space-x-2",children:x.timeline.phases.map((y,w)=>i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"h-8 rounded-lg flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:y.color},children:[y.name," (",y.weeks,"w)"]})},w))})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("button",{onClick:()=>d("active"),className:"flex items-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[i.jsx(W1,{className:"w-5 h-5 mr-2"}),"Activate Workflow"]}),i.jsxs("button",{className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(H1,{className:"w-5 h-5 mr-2"}),"Customize"]}),i.jsxs("button",{className:"flex items-center px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(fg,{className:"w-5 h-5 mr-2"}),"Settings"]})]})]}),N=({workflow:x})=>{const S=[{title:"Project Management",icon:ug,color:"blue",data:x.projectManagement,description:`${x.projectManagement.tasks.length} tasks across ${x.timeline.totalWeeks} weeks`},{title:"Budget Planning",icon:bd,color:"green",data:x.budget,description:`$${x.budget.totalBudget} budget with $${x.budget.netProjection} projected profit`},{title:"Communications",icon:Tf,color:"purple",data:x.communications,description:`${x.communications.campaigns.length} email campaigns + social media`},{title:"Volunteer Management",icon:is,color:"orange",data:x.volunteers,description:`${x.volunteers.totalNeeded} volunteers needed across ${x.volunteers.roles.length} roles`}];return i.jsx("div",{className:"grid grid-cols-2 gap-6 mt-6",children:S.map((y,w)=>{const _=y.icon,E={blue:"bg-blue-50 border-blue-200 text-blue-900",green:"bg-green-50 border-green-200 text-green-900",purple:"bg-purple-50 border-purple-200 text-purple-900",orange:"bg-orange-50 border-orange-200 text-orange-900"};return i.jsxs("div",{className:`border-2 rounded-lg p-6 ${E[y.color]}`,children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(_,{className:"w-8 h-8"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:y.title}),i.jsx("p",{className:"text-sm opacity-75",children:y.description})]})]}),i.jsxs("div",{className:"space-y-2",children:[y.title==="Project Management"&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium mb-2",children:"Upcoming Tasks:"}),y.data.tasks.slice(0,3).map(L=>i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(pg,{className:"w-4 h-4"}),i.jsx("span",{children:L.task}),i.jsxs("span",{className:"text-xs opacity-75",children:["(",L.deadline,")"]})]},L.id))]}),y.title==="Budget Planning"&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium mb-2",children:"Budget Breakdown:"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{children:["Total Expenses: $",y.data.expenses.reduce((L,B)=>L+B.amount,0)]}),i.jsxs("div",{children:["Projected Revenue: $",y.data.revenue.reduce((L,B)=>L+B.projected,0)]}),i.jsxs("div",{className:"font-semibold",children:["Net Profit: $",y.data.netProjection]})]})]}),y.title==="Communications"&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium mb-2",children:"Scheduled Campaigns:"}),y.data.campaigns.map((L,B)=>i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(hg,{className:"w-4 h-4"}),i.jsx("span",{children:L.name}),i.jsxs("span",{className:"text-xs opacity-75",children:["(",L.sendDate,")"]})]},B))]}),y.title==="Volunteer Management"&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium mb-2",children:"Volunteer Roles:"}),y.data.roles.slice(0,3).map((L,B)=>i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(is,{className:"w-4 h-4"}),i.jsx("span",{children:L.role}),i.jsxs("span",{className:"text-xs opacity-75",children:["(",L.needed," needed)"]})]},B))]})]}),i.jsx("button",{className:"mt-4 w-full py-2 bg-white bg-opacity-50 rounded-lg text-sm font-medium hover:bg-opacity-75 transition-colors",children:"View Details"})]},w)})})};return i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(cr,{className:"w-8 h-8 text-purple-600"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Meet Stella - Your AI Event Assistant"})]}),i.jsx("p",{className:"text-lg text-gray-600",children:"Hi! I'm Stella, your PTO planning assistant. I can generate complete event workflows with integrated project management, budgeting, communications, and volunteer coordination - or help with just the parts you need!"})]}),a?i.jsxs("div",{children:[i.jsx(f,{workflow:a}),i.jsx(N,{workflow:a})]}):i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Let Stella Create Your Event Workflow"}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What type of event would you like Stella to help you create?"}),i.jsx("input",{type:"text",value:e,onChange:x=>t(x.target.value),placeholder:"e.g., Fall Festival, Book Fair, Science Night...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Popular Event Ideas:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:p.map((x,S)=>i.jsx("button",{onClick:()=>t(x),className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm hover:bg-purple-200 transition-colors",children:x},S))})]}),i.jsx("button",{onClick:()=>m(e),disabled:!e.trim()||r,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold text-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:r?i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(cr,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"Stella is creating your workflow..."})]}):i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(U1,{className:"w-5 h-5"}),i.jsx("span",{children:"Let Stella Generate Your Event Workflow"})]})}),r&&i.jsx("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-purple-900 font-medium mb-2",children:"Stella is creating your complete event workflow..."}),i.jsxs("div",{className:"text-sm text-purple-700",children:["✨ Stella is analyzing event requirements",i.jsx("br",{}),"📅 Creating your project timeline",i.jsx("br",{}),"💰 Generating budget projections",i.jsx("br",{}),"📧 Designing communication campaigns",i.jsx("br",{}),"👥 Planning volunteer coordination",i.jsx("br",{})]})]})})]})]})})},gT=()=>i.jsx(mT,{}),Tv=W.createContext({dragDropManager:void 0});function en(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ym=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Km=function(){return Math.random().toString(36).substring(7).split("").join(".")},Xm={INIT:"@@redux/INIT"+Km(),REPLACE:"@@redux/REPLACE"+Km()};function vT(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Mv(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(en(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(en(1));return r(Mv)(e,t)}if(typeof e!="function")throw new Error(en(2));var a=e,s=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function p(){if(c)throw new Error(en(3));return s}function m(x){if(typeof x!="function")throw new Error(en(4));if(c)throw new Error(en(5));var S=!0;return d(),l.push(x),function(){if(S){if(c)throw new Error(en(6));S=!1,d();var w=l.indexOf(x);l.splice(w,1),o=null}}}function g(x){if(!vT(x))throw new Error(en(7));if(typeof x.type>"u")throw new Error(en(8));if(c)throw new Error(en(9));try{c=!0,s=a(s,x)}finally{c=!1}for(var S=o=l,y=0;y<S.length;y++){var w=S[y];w()}return x}function f(x){if(typeof x!="function")throw new Error(en(10));a=x,g({type:Xm.REPLACE})}function N(){var x,S=m;return x={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(en(11));function _(){w.next&&w.next(p())}_();var E=S(_);return{unsubscribe:E}}},x[Ym]=function(){return this},x}return g({type:Xm.INIT}),n={dispatch:g,subscribe:m,getState:p,replaceReducer:f},n[Ym]=N,n}function it(e,t,...r){if(bT()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(t.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function bT(){return typeof process<"u"&&!0}function xT(e,t,r){return t.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,e)}function yT(e,t){return e.filter(r=>r!==t)}function Iv(e){return typeof e=="object"}function wT(e,t){const r=new Map,n=s=>{r.set(s,r.has(s)?r.get(s)+1:1)};e.forEach(n),t.forEach(n);const a=[];return r.forEach((s,o)=>{s===1&&a.push(o)}),a}function NT(e,t){return e.filter(r=>t.indexOf(r)>-1)}const Xh="dnd-core/INIT_COORDS",Gc="dnd-core/BEGIN_DRAG",Jh="dnd-core/PUBLISH_DRAG_SOURCE",Vc="dnd-core/HOVER",Yc="dnd-core/DROP",Kc="dnd-core/END_DRAG";function Jm(e,t){return{type:Xh,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const jT={type:Xh,payload:{clientOffset:null,sourceClientOffset:null}};function ST(e){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:s,getSourceClientOffset:o}=n,l=e.getMonitor(),c=e.getRegistry();e.dispatch(Jm(s)),_T(r,l,c);const d=ET(r,l);if(d==null){e.dispatch(jT);return}let p=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");AT(o),p=o(d)}e.dispatch(Jm(s,p));const g=c.getSource(d).beginDrag(l,d);if(g==null)return;CT(g),c.pinSource(d);const f=c.getSourceType(d);return{type:Gc,payload:{itemType:f,item:g,sourceId:d,clientOffset:s||null,sourceClientOffset:p||null,isSourcePublic:!!a}}}}function _T(e,t,r){it(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){it(r.getSource(n),"Expected sourceIds to be registered.")})}function AT(e){it(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function CT(e){it(Iv(e),"Item must be an object.")}function ET(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function LT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){LT(e,a,r[a])})}return e}function DT(e){return function(r={}){const n=e.getMonitor(),a=e.getRegistry();kT(n),MT(n).forEach((o,l)=>{const c=OT(o,l,a,n),d={type:Yc,payload:{dropResult:PT({},r,c)}};e.dispatch(d)})}}function kT(e){it(e.isDragging(),"Cannot call drop while not dragging."),it(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function OT(e,t,r,n){const a=r.getTarget(e);let s=a?a.drop(n,e):void 0;return TT(s),typeof s>"u"&&(s=t===0?{}:n.getDropResult()),s}function TT(e){it(typeof e>"u"||Iv(e),"Drop result must either be an object or undefined.")}function MT(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function IT(e){return function(){const r=e.getMonitor(),n=e.getRegistry();RT(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:Kc}}}function RT(e){it(e.isDragging(),"Cannot call endDrag while not dragging.")}function Qd(e,t){return t===null?e===null:Array.isArray(e)?e.some(r=>r===t):e===t}function FT(e){return function(r,{clientOffset:n}={}){$T(r);const a=r.slice(0),s=e.getMonitor(),o=e.getRegistry(),l=s.getItemType();return qT(a,o,l),BT(a,s,o),zT(a,s,o),{type:Vc,payload:{targetIds:a,clientOffset:n||null}}}}function $T(e){it(Array.isArray(e),"Expected targetIds to be an array.")}function BT(e,t,r){it(t.isDragging(),"Cannot call hover while not dragging."),it(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){const a=e[n];it(e.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const s=r.getTarget(a);it(s,"Expected targetIds to be registered.")}}function qT(e,t,r){for(let n=e.length-1;n>=0;n--){const a=e[n],s=t.getTargetType(a);Qd(s,r)||e.splice(n,1)}}function zT(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function UT(e){return function(){if(e.getMonitor().isDragging())return{type:Jh}}}function WT(e){return{beginDrag:ST(e),publishDragSource:UT(e),hover:FT(e),drop:DT(e),endDrag:IT(e)}}class HT{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:r}=this.store;function n(s){return(...o)=>{const l=s.apply(t,o);typeof l<"u"&&r(l)}}const a=WT(this);return Object.keys(a).reduce((s,o)=>{const l=a[o];return s[o]=n(l),s},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}}function GT(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Rv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function VT(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return!t||!r||!n?null:Rv(GT(t,n),r)}function YT(e){const{clientOffset:t,initialClientOffset:r}=e;return!t||!r?null:Rv(t,r)}const vo=[],Zh=[];vo.__IS_NONE__=!0;Zh.__IS_ALL__=!0;function KT(e,t){return e===vo?!1:e===Zh||typeof t>"u"?!0:NT(t,e).length>0}class XT{subscribeToStateChange(t,r={}){const{handlerIds:n}=r;it(typeof t=="function","listener must be a function."),it(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),l=o.stateId;try{l===a||l===a+1&&!KT(o.dirtyHandlerIds,n)||t()}finally{a=l}};return this.store.subscribe(s)}subscribeToOffsetChange(t){it(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const r=this.registry.getSource(t);return it(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const r=this.registry.getTarget(t);if(it(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),a=this.getItemType();return Qd(n,a)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const r=this.registry.getSource(t,!0);if(it(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),a=this.getItemType();return n!==a?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(t),s=this.getItemType();if(s&&!Qd(a,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const l=o.indexOf(t);return n?l===o.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return VT(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return YT(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}}const Zm=typeof global<"u"?global:self,Fv=Zm.MutationObserver||Zm.WebKitMutationObserver;function $v(e){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),e()}}}function JT(e){let t=1;const r=new Fv(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const ZT=typeof Fv=="function"?JT:$v;class QT{enqueueTask(t){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,a=t.length-this.index;n<a;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=ZT(this.flush),this.requestErrorThrow=$v(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class eM{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}}class tM{create(t){const r=this.freeTasks,n=r.length?r.pop():new eM(this.onError,a=>r[r.length]=a);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const Bv=new QT,rM=new tM(Bv.registerPendingError);function nM(e){Bv.enqueueTask(rM.create(e))}const Qh="dnd-core/ADD_SOURCE",ef="dnd-core/ADD_TARGET",tf="dnd-core/REMOVE_SOURCE",Xc="dnd-core/REMOVE_TARGET";function aM(e){return{type:Qh,payload:{sourceId:e}}}function sM(e){return{type:ef,payload:{targetId:e}}}function iM(e){return{type:tf,payload:{sourceId:e}}}function oM(e){return{type:Xc,payload:{targetId:e}}}function lM(e){it(typeof e.canDrag=="function","Expected canDrag to be a function."),it(typeof e.beginDrag=="function","Expected beginDrag to be a function."),it(typeof e.endDrag=="function","Expected endDrag to be a function.")}function cM(e){it(typeof e.canDrop=="function","Expected canDrop to be a function."),it(typeof e.hover=="function","Expected hover to be a function."),it(typeof e.drop=="function","Expected beginDrag to be a function.")}function eh(e,t){if(t&&Array.isArray(e)){e.forEach(r=>eh(r,!1));return}it(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var rn;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(rn||(rn={}));let uM=0;function dM(){return uM++}function hM(e){const t=dM().toString();switch(e){case rn.SOURCE:return`S${t}`;case rn.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function Qm(e){switch(e[0]){case"S":return rn.SOURCE;case"T":return rn.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function eg(e,t){const r=e.entries();let n=!1;do{const{done:a,value:[,s]}=r.next();if(s===t)return!0;n=!!a}while(!n);return!1}class fM{addSource(t,r){eh(t),lM(r);const n=this.addHandler(rn.SOURCE,t,r);return this.store.dispatch(aM(n)),n}addTarget(t,r){eh(t,!0),cM(r);const n=this.addHandler(rn.TARGET,t,r);return this.store.dispatch(sM(n)),n}containsHandler(t){return eg(this.dragSources,t)||eg(this.dropTargets,t)}getSource(t,r=!1){return it(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return it(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return it(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return it(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return Qm(t)===rn.SOURCE}isTargetId(t){return Qm(t)===rn.TARGET}removeSource(t){it(this.getSource(t),"Expected an existing source."),this.store.dispatch(iM(t)),nM(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){it(this.getTarget(t),"Expected an existing target."),this.store.dispatch(oM(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const r=this.getSource(t);it(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){it(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){const a=hM(t);return this.types.set(a,r),t===rn.SOURCE?this.dragSources.set(a,n):t===rn.TARGET&&this.dropTargets.set(a,n),a}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const pM=(e,t)=>e===t;function mM(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function gM(e,t,r=pM){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function vM(e=vo,t){switch(t.type){case Vc:break;case Qh:case ef:case Xc:case tf:return vo;case Gc:case Jh:case Kc:case Yc:default:return Zh}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,a=wT(r,n);if(!(a.length>0||!gM(r,n)))return vo;const o=n[n.length-1],l=r[r.length-1];return o!==l&&(o&&a.push(o),l&&a.push(l)),a}function bM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){bM(e,a,r[a])})}return e}const tg={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function yM(e=tg,t){const{payload:r}=t;switch(t.type){case Xh:case Gc:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Vc:return mM(e.clientOffset,r.clientOffset)?e:xM({},e,{clientOffset:r.clientOffset});case Kc:case Yc:return tg;default:return e}}function wM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){wM(e,a,r[a])})}return e}const NM={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function jM(e=NM,t){const{payload:r}=t;switch(t.type){case Gc:return Qs({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Jh:return Qs({},e,{isSourcePublic:!0});case Vc:return Qs({},e,{targetIds:r.targetIds});case Xc:return e.targetIds.indexOf(r.targetId)===-1?e:Qs({},e,{targetIds:yT(e.targetIds,r.targetId)});case Yc:return Qs({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case Kc:return Qs({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function SM(e=0,t){switch(t.type){case Qh:case ef:return e+1;case tf:case Xc:return e-1;default:return e}}function _M(e=0){return e+1}function AM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){AM(e,a,r[a])})}return e}function EM(e={},t){return{dirtyHandlerIds:vM(e.dirtyHandlerIds,{type:t.type,payload:CM({},t.payload,{prevTargetIds:xT(e,"dragOperation.targetIds",[])})}),dragOffset:yM(e.dragOffset,t),refCount:SM(e.refCount,t),dragOperation:jM(e.dragOperation,t),stateId:_M(e.stateId)}}function LM(e,t=void 0,r={},n=!1){const a=PM(n),s=new XT(a,new fM(a)),o=new HT(a,s),l=e(o,t,r);return o.receiveBackend(l),o}function PM(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Mv(EM,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function DM(e,t){if(e==null)return{};var r=kM(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kM(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}let rg=0;const nc=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var OM=W.memo(function(t){var{children:r}=t,n=DM(t,["children"]);const[a,s]=TM(n);return W.useEffect(()=>{if(s){const o=qv();return++rg,()=>{--rg===0&&(o[nc]=null)}}},[]),i.jsx(Tv.Provider,{value:a,children:r})});function TM(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=MM(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}function MM(e,t=qv(),r,n){const a=t;return a[nc]||(a[nc]={dragDropManager:LM(e,t,r,n)}),a[nc]}function qv(){return typeof global<"u"?global:window}var IM=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!==0;){var o=s[a];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r};const RM=Rr(IM),bs=typeof window<"u"?W.useLayoutEffect:W.useEffect;function FM(e,t,r){const[n,a]=W.useState(()=>t(e)),s=W.useCallback(()=>{const o=t(e);RM(n,o)||(a(o),r&&r())},[n,e,r]);return bs(s),[n,s]}function $M(e,t,r){const[n,a]=FM(e,t,r);return bs(function(){const o=e.getHandlerId();if(o!=null)return e.subscribeToStateChange(a,{handlerIds:[o]})},[e,a]),n}function zv(e,t,r){return $M(t,e||(()=>({})),()=>r.reconnect())}function Uv(e,t){const r=[];return typeof e!="function"&&r.push(e),W.useMemo(()=>typeof e=="function"?e():e,r)}function BM(e){return W.useMemo(()=>e.hooks.dragSource(),[e])}function qM(e){return W.useMemo(()=>e.hooks.dragPreview(),[e])}let fd=!1,pd=!1;class zM{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){it(!fd,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return fd=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{fd=!1}}isDragging(){if(!this.sourceId)return!1;it(!pd,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return pd=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{pd=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let md=!1;class UM{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;it(!md,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return md=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{md=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function WM(e,t,r){const n=r.getRegistry(),a=n.addTarget(e,t);return[a,()=>n.removeTarget(a)]}function HM(e,t,r){const n=r.getRegistry(),a=n.addSource(e,t);return[a,()=>n.removeSource(a)]}function th(e,t,r,n){let a;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;const l=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<s.length;c++){const d=s[c];if(!l(d))return!1;const p=e[d],m=t[d];if(a=void 0,a===!1||a===void 0&&p!==m)return!1}return!0}function rh(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function GM(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function VM(e){return(t=null,r=null)=>{if(!W.isValidElement(t)){const s=t;return e(s,r),s}const n=t;return GM(n),YM(n,r?s=>e(s,r):e)}}function Wv(e){const t={};return Object.keys(e).forEach(r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const a=VM(n);t[r]=()=>a}}),t}function ng(e,t){typeof e=="function"?e(t):e.current=t}function YM(e,t){const r=e.ref;return it(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?W.cloneElement(e,{ref:n=>{ng(r,n),ng(t,n)}}):W.cloneElement(e,{ref:t})}class KM{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){const r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!th(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!th(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=Wv({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,rh(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,rh(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class XM{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!th(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=Wv({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,rh(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function Ci(){const{dragDropManager:e}=W.useContext(Tv);return it(e!=null,"Expected drag drop context"),e}function JM(e,t){const r=Ci(),n=W.useMemo(()=>new KM(r.getBackend()),[r]);return bs(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),bs(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function ZM(){const e=Ci();return W.useMemo(()=>new zM(e),[e])}class QM{beginDrag(){const t=this.spec,r=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){const t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){const n=this.spec,a=this.monitor,{isDragging:s}=n;return s?s(a):r===t.getSourceId()}endDrag(){const t=this.spec,r=this.monitor,n=this.connector,{end:a}=t;a&&a(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}}function eI(e,t,r){const n=W.useMemo(()=>new QM(e,t,r),[t,r]);return W.useEffect(()=>{n.spec=e},[e]),n}function tI(e){return W.useMemo(()=>{const t=e.type;return it(t!=null,"spec.type must be defined"),t},[e])}function rI(e,t,r){const n=Ci(),a=eI(e,t,r),s=tI(e);bs(function(){if(s!=null){const[l,c]=HM(s,a,n);return t.receiveHandlerId(l),r.receiveHandlerId(l),c}},[n,t,r,a,s])}function nI(e,t){const r=Uv(e);it(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=ZM(),a=JM(r.options,r.previewOptions);return rI(r,n,a),[zv(r.collect,n,a),BM(a),qM(a)]}function aI(e){return W.useMemo(()=>e.hooks.dropTarget(),[e])}function sI(e){const t=Ci(),r=W.useMemo(()=>new XM(t.getBackend()),[t]);return bs(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}function iI(){const e=Ci();return W.useMemo(()=>new UM(e),[e])}function oI(e){const{accept:t}=e;return W.useMemo(()=>(it(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class lI{canDrop(){const t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){const t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){const t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}}function cI(e,t){const r=W.useMemo(()=>new lI(e,t),[t]);return W.useEffect(()=>{r.spec=e},[e]),r}function uI(e,t,r){const n=Ci(),a=cI(e,t),s=oI(e);bs(function(){const[l,c]=WM(s,a,n);return t.receiveHandlerId(l),r.receiveHandlerId(l),c},[n,t,a,r,s.map(o=>o.toString()).join("|")])}function dI(e,t){const r=Uv(e),n=iI(),a=sI(r.options);return uI(r,n,a),[zv(r.collect,n,a),aI(a)]}function Hv(e){let t=null;return()=>(t==null&&(t=e()),t)}function hI(e,t){return e.filter(r=>r!==t)}function fI(e,t){const r=new Set,n=s=>r.add(s);e.forEach(n),t.forEach(n);const a=[];return r.forEach(s=>a.push(s)),a}class pI{enter(t){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(t));return this.entered=fI(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){const r=this.entered.length;return this.entered=hI(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class mI{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const Gv="__NATIVE_FILE__",Vv="__NATIVE_URL__",Yv="__NATIVE_TEXT__",Kv="__NATIVE_HTML__",ag=Object.freeze(Object.defineProperty({__proto__:null,FILE:Gv,HTML:Kv,TEXT:Yv,URL:Vv},Symbol.toStringTag,{value:"Module"}));function gd(e,t,r){const n=t.reduce((a,s)=>a||e.getData(s),"");return n??r}const nh={[Gv]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Kv]:{exposeProperties:{html:(e,t)=>gd(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[Vv]:{exposeProperties:{urls:(e,t)=>gd(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Yv]:{exposeProperties:{text:(e,t)=>gd(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function gI(e,t){const r=nh[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new mI(r);return n.loadDataTransfer(t),n}function vd(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(nh).filter(r=>{const n=nh[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>t.indexOf(a)>-1):!1})[0]||null}const vI=Hv(()=>/firefox/i.test(navigator.userAgent)),Xv=Hv(()=>!!window.safari);class sg{interpolate(t){const{xs:r,ys:n,c1s:a,c2s:s,c3s:o}=this;let l=r.length-1;if(t===r[l])return n[l];let c=0,d=o.length-1,p;for(;c<=d;){p=Math.floor(.5*(c+d));const f=r[p];if(f<t)c=p+1;else if(f>t)d=p-1;else return n[p]}l=Math.max(0,d);const m=t-r[l],g=m*m;return n[l]+a[l]*m+s[l]*g+o[l]*m*g}constructor(t,r){const{length:n}=t,a=[];for(let f=0;f<n;f++)a.push(f);a.sort((f,N)=>t[f]<t[N]?-1:1);const s=[],o=[];let l,c;for(let f=0;f<n-1;f++)l=t[f+1]-t[f],c=r[f+1]-r[f],s.push(l),o.push(c/l);const d=[o[0]];for(let f=0;f<s.length-1;f++){const N=o[f],x=o[f+1];if(N*x<=0)d.push(0);else{l=s[f];const S=s[f+1],y=l+S;d.push(3*y/((y+S)/N+(y+l)/x))}}d.push(o[o.length-1]);const p=[],m=[];let g;for(let f=0;f<d.length-1;f++){g=o[f];const N=d[f],x=1/s[f],S=N+d[f+1]-g-g;p.push((g-N-S)*x),m.push(S*x*x)}this.xs=t,this.ys=r,this.c1s=d,this.c2s=p,this.c3s=m}}const bI=1;function Jv(e){const t=e.nodeType===bI?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function Vl(e){return{x:e.clientX,y:e.clientY}}function xI(e){var t;return e.nodeName==="IMG"&&(vI()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function yI(e,t,r,n){let a=e?t.width:r,s=e?t.height:n;return Xv()&&e&&(s/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:s}}function wI(e,t,r,n,a){const s=xI(t),l=Jv(s?e:t),c={x:r.x-l.x,y:r.y-l.y},{offsetWidth:d,offsetHeight:p}=e,{anchorX:m,anchorY:g}=n,{dragPreviewWidth:f,dragPreviewHeight:N}=yI(s,t,d,p),x=()=>{let B=new sg([0,.5,1],[c.y,c.y/p*N,c.y+N-p]).interpolate(g);return Xv()&&s&&(B+=(window.devicePixelRatio-1)*N),B},S=()=>new sg([0,.5,1],[c.x,c.x/d*f,c.x+f-d]).interpolate(m),{offsetX:y,offsetY:w}=a,_=y===0||y,E=w===0||w;return{x:_?y:S(),y:E?w:x()}}class NI{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}}function jI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ig(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){jI(e,a,r[a])})}return e}class SI{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);const a=o=>this.handleDragStart(o,t),s=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",s),r.setAttribute("draggable","false")}}connectDropTarget(t,r){const n=o=>this.handleDragEnter(o,t),a=o=>this.handleDragOver(o,t),s=o=>this.handleDrop(o,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",s),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",s)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return ig({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return ig({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(ag).some(r=>ag[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=gI(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const s=this.sourceNodes.get(a);return s&&Jv(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=Vl(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:l}=a,c=vd(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const p=this.monitor.getSourceId(),m=this.sourceNodes.get(p),g=this.sourcePreviewNodes.get(p)||m;if(g){const{anchorX:f,anchorY:N,offsetX:x,offsetY:S}=this.getCurrentSourcePreviewNodeOptions(),_=wI(m,g,o,{anchorX:f,anchorY:N},{offsetX:x,offsetY:S});l.setDragImage(g,_.x,_.y)}}try{l==null||l.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(l&&!l.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:l}=a,c=vd(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,s.length>0&&this.actions.hover(s,{clientOffset:Vl(a)}),s.some(l=>this.monitor.canDropOnTarget(l))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=Vl(a),this.scheduleHover(s),(s||[]).some(l=>this.monitor.canDropOnTarget(l))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;a.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}else vd(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:Vl(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const s=a.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(a.preventDefault(),s.dragDrop()))},this.options=new NI(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new pI(this.isNodeInDocument)}}const _I=function(t,r,n){return new SI(t,r,n)},AI=()=>{const[e,t]=W.useState([]),[r,n]=W.useState(null),[a,s]=W.useState(100),[o,l]=W.useState("templates"),[c,d]=W.useState(!1),p=W.useRef(null),m=[{id:1,name:"Fall Festival Announcement",category:"Events",thumbnail:"/templates/fall-festival.jpg",elements:[{type:"header",content:"Fall Festival 2024",style:{fontSize:"32px",color:"#d97706",fontWeight:"bold"}},{type:"image",src:"/images/fall-leaves.jpg",style:{width:"100%",height:"200px"}},{type:"text",content:"Join us for a day of fun, food, and community!",style:{fontSize:"18px",color:"#374151"}}]},{id:2,name:"Fundraiser Progress",category:"Fundraising",thumbnail:"/templates/fundraiser.jpg",elements:[{type:"header",content:"Fundraiser Update",style:{fontSize:"28px",color:"#059669",fontWeight:"bold"}},{type:"progress-bar",value:75,goal:5e3,style:{backgroundColor:"#d1fae5"}},{type:"text",content:"We're 75% to our goal! Thank you for your support.",style:{fontSize:"16px"}}]},{id:3,name:"Volunteer Call",category:"Volunteers",thumbnail:"/templates/volunteer.jpg",elements:[{type:"header",content:"Volunteers Needed!",style:{fontSize:"30px",color:"#dc2626",fontWeight:"bold"}},{type:"button",content:"Sign Up Now",style:{backgroundColor:"#dc2626",color:"white",padding:"12px 24px"}},{type:"text",content:"Help make our events successful by volunteering your time.",style:{fontSize:"16px"}}]}],g=[{type:"text",icon:Mf,label:"Text",defaultContent:"Add your text here"},{type:"header",icon:Mf,label:"Header",defaultContent:"Header Text"},{type:"image",icon:$u,label:"Image",defaultSrc:"/placeholder-image.jpg"},{type:"button",icon:If,label:"Button",defaultContent:"Click Here"},{type:"divider",icon:G1,label:"Divider"},{type:"shape",icon:V1,label:"Shape"},{type:"link",icon:Y1,label:"Link",defaultContent:"Link Text"}],f={colors:["#1f2937","#374151","#6b7280","#d97706","#059669","#dc2626","#7c3aed"],fonts:["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins"]},N=({element:_})=>{const[{isDragging:E},L]=nI(()=>({type:"design-element",item:{type:_.type,element:_},collect:T=>({isDragging:T.isDragging()})})),B=_.icon;return i.jsx("div",{ref:L,className:`p-3 border border-gray-200 rounded-lg cursor-move hover:bg-gray-50 transition-colors ${E?"opacity-50":""}`,children:i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[i.jsx(B,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"text-sm text-gray-700",children:_.label})]})})},x=()=>{const[{isOver:_},E]=dI(()=>({accept:"design-element",drop:(L,B)=>{const T=B.getClientOffset(),C=p.current.getBoundingClientRect(),$={id:Date.now(),type:L.type,x:T.x-C.left,y:T.y-C.top,content:L.element.defaultContent||"",src:L.element.defaultSrc||"",style:{fontSize:"16px",color:"#374151",backgroundColor:"transparent",padding:"8px",borderRadius:"4px"}};t(H=>[...H,$])},collect:L=>({isOver:L.isOver()})}));return i.jsxs("div",{ref:L=>{E(L),p.current=L},className:`relative bg-white border-2 border-dashed border-gray-300 rounded-lg min-h-[600px] ${_?"border-blue-500 bg-blue-50":""}`,style:{transform:`scale(${a/100})`,transformOrigin:"top left"},children:[e.map(L=>i.jsx(S,{element:L,isSelected:(r==null?void 0:r.id)===L.id,onSelect:()=>n(L),onUpdate:B=>{t(T=>T.map(C=>C.id===L.id?B:C)),n(B)}},L.id)),e.length===0&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx($u,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"text-lg",children:"Drag elements here to start designing"}),i.jsx("p",{className:"text-sm",children:"Choose from templates or build from scratch"})]})})]})},S=({element:_,isSelected:E,onSelect:L,onUpdate:B})=>{const[T,C]=W.useState(!1),$=()=>{(_.type==="text"||_.type==="header"||_.type==="button")&&C(!0)},H=O=>{B({..._,content:O}),C(!1)},A=()=>{switch(_.type){case"text":return T?i.jsx("input",{type:"text",value:_.content,onChange:O=>H(O.target.value),onBlur:()=>C(!1),onKeyPress:O=>O.key==="Enter"&&C(!1),className:"w-full bg-transparent border-none outline-none",autoFocus:!0}):i.jsx("p",{style:_.style,children:_.content});case"header":return T?i.jsx("input",{type:"text",value:_.content,onChange:O=>H(O.target.value),onBlur:()=>C(!1),onKeyPress:O=>O.key==="Enter"&&C(!1),className:"w-full bg-transparent border-none outline-none text-2xl font-bold",autoFocus:!0}):i.jsx("h2",{style:{..._.style,fontSize:"24px",fontWeight:"bold"},children:_.content});case"image":return i.jsx("img",{src:_.src,alt:"Design element",style:_.style,className:"max-w-full h-auto"});case"button":return i.jsx("button",{style:{..._.style,backgroundColor:_.style.backgroundColor||"#3b82f6",color:_.style.color||"white",padding:"12px 24px",borderRadius:"6px",border:"none",cursor:"pointer"},children:T?i.jsx("input",{type:"text",value:_.content,onChange:O=>H(O.target.value),onBlur:()=>C(!1),className:"bg-transparent border-none outline-none text-white",autoFocus:!0}):_.content});case"divider":return i.jsx("hr",{style:{..._.style,border:"none",height:"2px",backgroundColor:_.style.backgroundColor||"#e5e7eb",margin:"16px 0"}});default:return i.jsx("div",{children:"Unknown element"})}};return i.jsxs("div",{className:`absolute cursor-pointer ${E?"ring-2 ring-blue-500":""}`,style:{left:_.x,top:_.y,minWidth:"100px",minHeight:"30px"},onClick:L,onDoubleClick:$,children:[A(),E&&i.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-move"})]})},y=()=>{const[_,E]=W.useState(""),[L,B]=W.useState(!1),T=async C=>{B(!0),setTimeout(()=>{const $={"email-subject":"Join Us for an Amazing Fall Festival!","email-body":`Dear PTO Community,

We're excited to invite you to our annual Fall Festival! Join us for a day filled with fun activities, delicious food, and community spirit.

Date: Saturday, October 15th
Time: 10 AM - 4 PM
Location: School Playground

We hope to see you there!`,"social-post":`🍂 Fall Festival Alert! 🍂

Join us for food, fun, and community spirit! October 15th, 10 AM - 4 PM at the school playground. Bring the whole family! #PTOFallFestival #CommunityFun`,"flyer-text":`FALL FESTIVAL 2024

Food • Games • Fun
October 15th | 10 AM - 4 PM
School Playground

Bring the whole family!`},H={id:Date.now(),type:"text",x:50,y:50,content:$[C]||"Generated content",style:{fontSize:"16px",color:"#374151",backgroundColor:"transparent",padding:"8px"}};t(A=>[...A,H]),B(!1)},2e3)};return i.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[i.jsx(cr,{className:"w-5 h-5 text-purple-600"}),i.jsx("h3",{className:"font-semibold text-purple-900",children:"Stella's Content Assistant"})]}),i.jsx("div",{className:"text-xs text-purple-700 mb-3",children:"Hi! I'm Stella. I can help create content for your designs, or you can create everything manually. Your choice!"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>T("email-subject"),disabled:L,className:"w-full p-2 text-left bg-white rounded border hover:bg-gray-50 disabled:opacity-50",children:"Let Stella Write Email Subject"}),i.jsx("button",{onClick:()=>T("email-body"),disabled:L,className:"w-full p-2 text-left bg-white rounded border hover:bg-gray-50 disabled:opacity-50",children:"Let Stella Write Email Content"}),i.jsx("button",{onClick:()=>T("social-post"),disabled:L,className:"w-full p-2 text-left bg-white rounded border hover:bg-gray-50 disabled:opacity-50",children:"Let Stella Create Social Post"}),i.jsx("button",{onClick:()=>T("flyer-text"),disabled:L,className:"w-full p-2 text-left bg-white rounded border hover:bg-gray-50 disabled:opacity-50",children:"Let Stella Write Flyer Content"})]}),L&&i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("div",{className:"inline-flex items-center space-x-2 text-purple-600",children:[i.jsx(cr,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Stella is writing content..."})]})})]})},w=()=>{if(!r)return i.jsxs("div",{className:"p-4 text-center text-gray-500",children:[i.jsx(If,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"Select an element to edit properties"})]});const _=E=>{const L={...r,style:{...r.style,...E}};t(B=>B.map(T=>T.id===r.id?L:T)),n(L)};return i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Element Properties"}),(r.type==="text"||r.type==="header"||r.type==="button")&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Font Size"}),i.jsx("input",{type:"range",min:"12",max:"48",value:parseInt(r.style.fontSize)||16,onChange:E=>_({fontSize:`${E.target.value}px`}),className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Text Color"}),i.jsx("input",{type:"color",value:r.style.color||"#374151",onChange:E=>_({color:E.target.value}),className:"w-full h-10 rounded border"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>_({fontWeight:r.style.fontWeight==="bold"?"normal":"bold"}),className:`p-2 rounded border ${r.style.fontWeight==="bold"?"bg-blue-100 border-blue-300":"bg-white border-gray-300"}`,children:i.jsx(e2,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>_({fontStyle:r.style.fontStyle==="italic"?"normal":"italic"}),className:`p-2 rounded border ${r.style.fontStyle==="italic"?"bg-blue-100 border-blue-300":"bg-white border-gray-300"}`,children:i.jsx(t2,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Background Color"}),i.jsx("input",{type:"color",value:r.style.backgroundColor||"#ffffff",onChange:E=>_({backgroundColor:E.target.value}),className:"w-full h-10 rounded border"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Padding"}),i.jsx("input",{type:"range",min:"0",max:"32",value:parseInt(r.style.padding)||8,onChange:E=>_({padding:`${E.target.value}px`}),className:"w-full"})]})]})};return i.jsx(OM,{backend:_I,children:i.jsxs("div",{className:"h-screen bg-gray-100 flex",children:[i.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[i.jsxs("div",{className:"flex border-b border-gray-200",children:[i.jsx("button",{onClick:()=>l("templates"),className:`flex-1 py-3 px-4 text-sm font-medium ${o==="templates"?"bg-blue-50 text-blue-700 border-b-2 border-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Templates"}),i.jsx("button",{onClick:()=>l("elements"),className:`flex-1 py-3 px-4 text-sm font-medium ${o==="elements"?"bg-blue-50 text-blue-700 border-b-2 border-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Elements"}),i.jsx("button",{onClick:()=>l("brand"),className:`flex-1 py-3 px-4 text-sm font-medium ${o==="brand"?"bg-blue-50 text-blue-700 border-b-2 border-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Brand"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[o==="templates"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Email Templates"}),i.jsx("div",{className:"grid grid-cols-1 gap-3",children:m.map(_=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 cursor-pointer hover:border-blue-300 hover:bg-blue-50 transition-colors",onClick:()=>t(_.elements.map((E,L)=>({...E,id:Date.now()+L,x:50,y:50+L*100}))),children:[i.jsx("div",{className:"aspect-video bg-gray-100 rounded mb-2 flex items-center justify-center",children:i.jsx($u,{className:"w-8 h-8 text-gray-400"})}),i.jsx("h4",{className:"font-medium text-sm",children:_.name}),i.jsx("p",{className:"text-xs text-gray-500",children:_.category})]},_.id))})]}),o==="elements"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Design Elements"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(_=>i.jsx(N,{element:_},_.type))})]}),o==="brand"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Brand Assets"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm mb-2",children:"Colors"}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:f.colors.map(_=>i.jsx("div",{className:"w-8 h-8 rounded cursor-pointer border border-gray-200",style:{backgroundColor:_},onClick:()=>r&&updateElementStyle({color:_})},_))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm mb-2",children:"Fonts"}),i.jsx("div",{className:"space-y-1",children:f.fonts.map(_=>i.jsx("button",{className:"w-full text-left p-2 text-sm hover:bg-gray-50 rounded",style:{fontFamily:_},onClick:()=>r&&updateElementStyle({fontFamily:_}),children:_},_))})]})]})]}),i.jsx("div",{className:"border-t border-gray-200 p-4",children:i.jsx(y,{})})]}),i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Design Studio"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-2 hover:bg-gray-100 rounded",children:i.jsx(K1,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 hover:bg-gray-100 rounded",children:i.jsx(X1,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>s(Math.max(50,a-25)),className:"p-2 hover:bg-gray-100 rounded",children:i.jsx(J1,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm font-medium",children:[a,"%"]}),i.jsx("button",{onClick:()=>s(Math.min(200,a+25)),className:"p-2 hover:bg-gray-100 rounded",children:i.jsx(Z1,{className:"w-4 h-4"})})]}),i.jsxs("button",{className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:[i.jsx(Q1,{className:"w-4 h-4 mr-2"}),"Save"]}),i.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[i.jsx(bo,{className:"w-4 h-4 mr-2"}),"Preview"]}),i.jsxs("button",{className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[i.jsx(dg,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),i.jsx("div",{className:"flex-1 p-6 overflow-auto",children:i.jsx(x,{})})]}),i.jsxs("div",{className:"w-80 bg-white border-l border-gray-200",children:[i.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:i.jsx("h2",{className:"font-semibold text-gray-900",children:"Properties"})}),i.jsx(w,{})]})]})})},CI=()=>i.jsx(AI,{});function EI(){const[e,t]=W.useState([]),[r,n]=W.useState("");return W.useEffect(()=>{async function a(){const{data:{session:s}}=await ze.auth.getSession();if(!(s!=null&&s.access_token)){n("Authentication required.");return}try{const o=await fetch("/api/teacher-requests",{headers:{Authorization:`Bearer ${s.access_token}`}}),l=await o.json();o.ok?t(l):n(l.error||"Failed to load teacher requests.")}catch(o){console.error("Fetch error:",o),n("Error connecting to server.")}}a()},[]),i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Teacher Requests"}),i.jsx(Cr,{to:"/teacher-requests/create",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ New Request"})]}),r&&i.jsx("p",{className:"text-red-600",children:r}),e.length===0&&!r&&i.jsx("p",{children:"No teacher requests found."}),i.jsx("ul",{className:"space-y-4",children:e.map(a=>i.jsxs("li",{className:"border p-4 rounded shadow-sm bg-white",children:[i.jsx("h2",{className:"text-xl font-semibold",children:a.title}),i.jsxs("p",{className:"text-sm text-gray-500",children:["By ",a.teacher_name," (",a.grade_or_subject,")"]}),i.jsx("p",{className:"mt-2",children:a.description}),a.amount_requested&&i.jsxs("p",{className:"mt-2 text-blue-800 font-semibold",children:["Requested: $",parseFloat(a.amount_requested).toFixed(2)]})]},a.id))})]})}function LI(){const[e,t]=W.useState({title:"",description:"",amount_requested:"",teacher_name:"",grade_or_subject:""}),[r,n]=W.useState(""),[a,s]=W.useState(""),o=c=>{const{name:d,value:p}=c.target;t(m=>({...m,[d]:p}))},l=async c=>{c.preventDefault();const{data:{session:d}}=await ze.auth.getSession();if(!(d!=null&&d.access_token)){s("You must be logged in to submit a request.");return}try{const p=await fetch("/api/teacher-requests",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.access_token}`},body:JSON.stringify(e)}),m=await p.json();p.ok?(n("Request submitted successfully!"),s(""),t({})):(s(m.error||"Failed to submit request"),n(""))}catch(p){console.error("Submit error:",p),s("Network error or server unavailable")}};return i.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Submit Teacher Request"}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsx("input",{name:"title",value:e.title||"",onChange:o,placeholder:"Title",className:"w-full border p-2",required:!0}),i.jsx("textarea",{name:"description",value:e.description||"",onChange:o,placeholder:"Description",className:"w-full border p-2"}),i.jsx("input",{type:"number",name:"amount_requested",value:e.amount_requested||"",onChange:o,placeholder:"Amount Requested",className:"w-full border p-2"}),i.jsx("input",{name:"teacher_name",value:e.teacher_name||"",onChange:o,placeholder:"Teacher Name",className:"w-full border p-2"}),i.jsx("input",{name:"grade_or_subject",value:e.grade_or_subject||"",onChange:o,placeholder:"Grade or Subject",className:"w-full border p-2"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:"Submit"}),r&&i.jsx("p",{className:"text-green-600",children:r}),a&&i.jsx("p",{className:"text-red-600",children:a})]})]})}function PI(){const[e,t]=W.useState(!1),[r,n]=W.useState(""),[a,s]=W.useState("monthly"),o=async()=>{var l;t(!0),n("");try{const d=(l=(await ze.auth.getSession()).data.session)==null?void 0:l.access_token;if(!d){n("User session not found."),t(!1);return}const p=await fetch("undefined/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({plan:a})});if(!p.ok){const g=await p.text();throw console.error("Stripe error response:",g),new Error("Stripe request failed.")}const m=await p.json();m!=null&&m.url?window.location.href=m.url:n("Checkout session failed to start.")}catch(c){console.error("Checkout error:",c),n("An error occurred during checkout.")}finally{t(!1)}};return i.jsxs("div",{className:"max-w-xl mx-auto p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Start Your PTO Connect Subscription"}),i.jsx("p",{className:"mb-4",children:"Subscribe now to unlock all features for your PTO group."}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block font-medium mb-1",children:"Choose a plan:"}),i.jsxs("select",{className:"border p-2 rounded w-full",value:a,onChange:l=>s(l.target.value),children:[i.jsx("option",{value:"monthly",children:"Monthly - $29/month"}),i.jsx("option",{value:"annual",children:"Annual - $299/year"})]})]}),i.jsx("button",{onClick:o,disabled:e,className:"bg-blue-600 text-white px-4 py-2 rounded",children:e?"Redirecting…":"Subscribe Now"}),r&&i.jsx("p",{className:"text-red-600 mt-4",children:r})]})}function DI(){return i.jsxs("div",{className:"max-w-xl mx-auto p-6 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-green-600 mb-4",children:"Subscription Successful!"}),i.jsx("p",{className:"text-gray-700",children:"Thank you for subscribing to PTO Connect. Your account is now active."})]})}function kI(){return i.jsxs("div",{className:"max-w-xl mx-auto p-6 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Checkout Canceled"}),i.jsx("p",{className:"text-gray-700",children:"You canceled the checkout process. No charges were made."})]})}function OI(){const[e,t]=W.useState(""),[r,n]=W.useState(""),[a,s]=W.useState(""),[o,l]=W.useState(""),c=Hn(),d=()=>{if(l(""),!e||!r){l("PTO Name and School Name are required.");return}const p={ptoName:e,schoolName:r,districtName:a};sessionStorage.setItem("pendingPto",JSON.stringify(p)),c("/onboarding/pricing")};return i.jsxs("div",{className:"max-w-xl mx-auto p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Create Your PTO"}),i.jsx("p",{className:"text-gray-700 mb-6",children:"Let's start by getting your organization set up. Enter your PTO's info below."}),i.jsx("input",{className:"border p-2 w-full mb-4",type:"text",placeholder:"PTO Name",value:e,onChange:p=>t(p.target.value)}),i.jsx("input",{className:"border p-2 w-full mb-4",type:"text",placeholder:"School Name",value:r,onChange:p=>n(p.target.value)}),i.jsx("input",{className:"border p-2 w-full mb-4",type:"text",placeholder:"District Name (optional)",value:a,onChange:p=>s(p.target.value)}),i.jsx("button",{onClick:d,className:"bg-blue-600 text-white px-4 py-2 rounded w-full",children:"Continue to Plan Selection"}),o&&i.jsx("p",{className:"text-red-600 mt-4",children:o})]})}function TI(){const[e,t]=W.useState(null),[r,n]=W.useState([]),[a,s]=W.useState("");Hn(),W.useEffect(()=>{const l=sessionStorage.getItem("pendingPto");l?t(JSON.parse(l)):s("Missing PTO info. Please start again."),fetch("/api/stripe/get-prices").then(c=>c.json()).then(n).catch(()=>s("Could not load pricing. Please try again."))},[]);const o=async(l,c)=>{try{const p=await(await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:l,ptoMetadata:e,plan:c==="annual_plan"?"annual":"monthly"})})).json();p.url?window.location.href=p.url:s("Unable to start checkout session.")}catch{s("Stripe checkout error.")}};return i.jsxs("div",{className:"max-w-xl mx-auto p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Choose Your Plan"}),a&&i.jsx("p",{className:"text-red-600 mb-4",children:a}),i.jsx("div",{className:"space-y-4",children:r.map(l=>i.jsxs("button",{onClick:()=>o(l.id,l.lookup_key),className:"w-full py-3 rounded bg-blue-600 text-white hover:bg-blue-700",children:[l.nickname||l.lookup_key," – $",l.amount,"/",l.interval]},l.id))})]})}function MI(){const[e]=s2(),t=Hn(),[r,n]=W.useState({adminName:"",adminEmail:"",adminPassword:"",confirmPassword:""}),[a,s]=W.useState(null),[o,l]=W.useState(!1),[c,d]=W.useState("");W.useEffect(()=>{const g=e.get("session_id"),f=sessionStorage.getItem("pendingPto");if(!f){d("Missing PTO information. Please start the signup process again.");return}s(JSON.parse(f)),g&&sessionStorage.setItem("stripeSessionId",g)},[e]);const p=g=>{n({...r,[g.target.name]:g.target.value})},m=async g=>{if(g.preventDefault(),d(""),l(!0),!r.adminName||!r.adminEmail||!r.adminPassword){d("All fields are required."),l(!1);return}if(r.adminPassword!==r.confirmPassword){d("Passwords do not match."),l(!1);return}if(r.adminPassword.length<6){d("Password must be at least 6 characters."),l(!1);return}try{const f=sessionStorage.getItem("stripeSessionId"),N=await jn.post("/signup/complete",{ptoName:a.ptoName,schoolName:a.schoolName,adminName:r.adminName,adminEmail:r.adminEmail,adminPassword:r.adminPassword,stripeSessionId:f});N.success?(sessionStorage.removeItem("pendingPto"),sessionStorage.removeItem("stripeSessionId"),t("/onboarding/next-steps",{state:{organization:N.organization}})):d(N.error||"Failed to create account.")}catch(f){console.error("Signup error:",f),d("Failed to create account. Please try again.")}finally{l(!1)}};return a?i.jsxs("div",{className:"max-w-md mx-auto p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Complete Your Setup"}),i.jsxs("p",{className:"text-gray-600",children:["Creating ",i.jsx("strong",{children:a.ptoName})," at ",a.schoolName]})]}),i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Full Name"}),i.jsx("input",{type:"text",name:"adminName",value:r.adminName,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your full name",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),i.jsx("input",{type:"email",name:"adminEmail",value:r.adminEmail,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),i.jsx("input",{type:"password",name:"adminPassword",value:r.adminPassword,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Create a password",minLength:"6",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),i.jsx("input",{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm your password",minLength:"6",required:!0})]}),c&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:c}),i.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Creating Account...":"Complete Setup"})]}),i.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:i.jsx("p",{children:"By creating an account, you agree to our Terms of Service and Privacy Policy."})})]}):i.jsxs("div",{className:"max-w-md mx-auto p-6 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-600",children:"Setup Error"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Missing PTO information. Please start the signup process again."}),i.jsx("button",{onClick:()=>t("/onboarding/create-pto"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Start Over"})]})}function II(){const e=Hn(),[t,r]=W.useState({ptoName:"",schoolName:"",adminName:"",adminEmail:"",adminPassword:"",confirmPassword:""}),[n,a]=W.useState(!1),[s,o]=W.useState(""),[l,c]=W.useState(null),d=m=>{r({...t,[m.target.name]:m.target.value})},p=async m=>{var g;if(m.preventDefault(),o(""),a(!0),!t.ptoName||!t.schoolName||!t.adminName||!t.adminEmail||!t.adminPassword){o("All fields are required."),a(!1);return}if(t.adminPassword!==t.confirmPassword){o("Passwords do not match."),a(!1);return}if(t.adminPassword.length<6){o("Password must be at least 6 characters."),a(!1);return}try{const f=await jn.post("/signup/complete",{ptoName:t.ptoName,schoolName:t.schoolName,adminName:t.adminName,adminEmail:t.adminEmail,adminPassword:t.adminPassword});f.data&&f.data.success?(c(f.data.organization),o("")):o(((g=f.data)==null?void 0:g.error)||"Failed to create account.")}catch(f){console.error("Signup error:",f),o("Failed to create account. Please try again.")}finally{a(!1)}};return l?i.jsxs("div",{className:"max-w-md mx-auto p-6 text-center",children:[i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-green-800 mb-4",children:"Success! 🎉"}),i.jsxs("p",{className:"text-green-700 mb-4",children:["Your organization ",i.jsx("strong",{children:l.name})," has been created successfully!"]}),i.jsxs("div",{className:"bg-white border border-green-300 rounded p-4 mb-4",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your signup code:"}),i.jsx("p",{className:"text-lg font-mono font-bold text-green-800",children:l.signup_code})]}),i.jsx("p",{className:"text-sm text-green-600",children:"Share this code with other members to join your organization."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>e("/login"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Go to Login"}),i.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300",children:"Create Another Organization"})]})]}):i.jsxs("div",{className:"max-w-md mx-auto p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Create Your PTO Organization"}),i.jsx("p",{className:"text-gray-600",children:"Set up your PTO and create your admin account"})]}),i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PTO Name"}),i.jsx("input",{type:"text",name:"ptoName",value:t.ptoName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Lincoln Elementary PTO",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"School Name"}),i.jsx("input",{type:"text",name:"schoolName",value:t.schoolName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Lincoln Elementary School",required:!0})]}),i.jsx("hr",{className:"my-4"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Full Name"}),i.jsx("input",{type:"text",name:"adminName",value:t.adminName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your full name",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),i.jsx("input",{type:"email",name:"adminEmail",value:t.adminEmail,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),i.jsx("input",{type:"password",name:"adminPassword",value:t.adminPassword,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Create a password",minLength:"6",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),i.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm your password",minLength:"6",required:!0})]}),s&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:s}),i.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Creating Organization...":"Create Organization"})]}),i.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:[i.jsx("p",{children:"This will create a trial organization (14 days)"}),i.jsxs("p",{className:"mt-2",children:["Already have an account? ",i.jsx("a",{href:"/login",className:"text-blue-600 hover:underline",children:"Login here"})]})]})]})}function RI(){var o;const e=gg(),t=Hn(),[r,n]=W.useState(!1),a=(o=e.state)==null?void 0:o.organization,s=()=>{a!=null&&a.signup_code&&(navigator.clipboard.writeText(a.signup_code),n(!0),setTimeout(()=>n(!1),2e3))};return a?i.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx(pg,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome to PTO Connect!"}),i.jsxs("p",{className:"text-lg text-gray-600",children:["Your organization ",i.jsx("strong",{children:a.name})," has been successfully created."]})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-4",children:"Your Organization Details"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-blue-800",children:"Organization Name:"}),i.jsx("span",{className:"ml-2 text-blue-700",children:a.name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-blue-800",children:"Organization ID:"}),i.jsx("span",{className:"ml-2 text-blue-700 font-mono text-sm",children:a.slug})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"font-medium text-blue-800",children:"Signup Code:"}),i.jsx("span",{className:"ml-2 text-blue-700 font-mono text-lg font-bold",children:a.signup_code}),i.jsx("button",{onClick:s,className:"ml-2 p-1 text-blue-600 hover:text-blue-800",title:"Copy signup code",children:i.jsx(r2,{className:"w-4 h-4"})}),r&&i.jsx("span",{className:"ml-2 text-green-600 text-sm",children:"Copied!"})]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Next Steps to Get Started"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[i.jsx(is,{className:"w-6 h-6 text-blue-600 mt-1"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Invite Your Team"}),i.jsxs("p",{className:"text-gray-600 text-sm",children:["Share your signup code ",i.jsx("strong",{children:a.signup_code})," with other PTO members, teachers, and parents so they can join your organization."]})]})]}),i.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[i.jsx(fg,{className:"w-6 h-6 text-blue-600 mt-1"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Configure Your Settings"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Set up your organization preferences, communication settings, and user roles."})]})]}),i.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[i.jsx(ss,{className:"w-6 h-6 text-blue-600 mt-1"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Create Your First Event"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Start engaging your community by creating your first PTO event or meeting."})]})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx("button",{onClick:()=>t("/login"),className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Go to Dashboard"}),i.jsx("button",{onClick:()=>t("/onboarding/create-pto"),className:"flex-1 bg-gray-200 text-gray-800 py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Create Another PTO"})]}),i.jsxs("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-yellow-700 text-sm",children:"Check out our getting started guide or contact support if you need assistance setting up your PTO organization."})]})]}):i.jsxs("div",{className:"max-w-md mx-auto p-6 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-600",children:"Setup Error"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Missing organization information. Please complete the signup process."}),i.jsx("button",{onClick:()=>t("/onboarding/create-pto"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Start Setup"})]})}function FI(){return i.jsxs(i2,{children:[i.jsx($e,{path:"/",element:i.jsx(Ff,{})}),i.jsx($e,{path:"/login",element:i.jsx(Ff,{})}),i.jsx($e,{path:"/signup",element:i.jsx(x2,{})}),i.jsx($e,{path:"/unauthorized",element:i.jsx(y2,{})}),i.jsx($e,{path:"/onboarding/create-pto",element:i.jsx(OI,{})}),i.jsx($e,{path:"/onboarding/pricing",element:i.jsx(TI,{})}),i.jsx($e,{path:"/onboarding/complete-signup",element:i.jsx(MI,{})}),i.jsx($e,{path:"/onboarding/simple-signup",element:i.jsx(II,{})}),i.jsx($e,{path:"/onboarding/next-steps",element:i.jsx(RI,{})}),i.jsx($e,{path:"/billing/success",element:i.jsx(DI,{})}),i.jsx($e,{path:"/billing/cancel",element:i.jsx(kI,{})}),i.jsx($e,{element:i.jsx(Ja,{allowedRoles:["admin","board_member","committee_lead","volunteer","parent_member","teacher"]}),children:i.jsx($e,{element:i.jsx(Za,{}),children:i.jsx($e,{path:"/dashboard",element:i.jsx(j2,{})})})}),i.jsx($e,{element:i.jsx(Ja,{allowedRoles:["admin"]}),children:i.jsxs($e,{element:i.jsx(Za,{}),children:[i.jsx($e,{path:"/dashboard/admin",element:i.jsx(qu,{})}),i.jsx($e,{path:"/admin/permissions",element:i.jsx(_2,{})}),i.jsx($e,{path:"/admin/users",element:i.jsx(qu,{})}),i.jsx($e,{path:"/admin/settings",element:i.jsx(qu,{})}),i.jsx($e,{path:"/billing",element:i.jsx(PI,{})}),i.jsx($e,{path:"/events",element:i.jsx(k2,{})}),i.jsx($e,{path:"/events/legacy",element:i.jsx(D2,{})}),i.jsx($e,{path:"/events/create",element:i.jsx(Pb,{})}),i.jsx($e,{path:"/events/edit/:id",element:i.jsx(Db,{})}),i.jsx($e,{path:"/events/calendar",element:i.jsx(Pk,{})}),i.jsx($e,{path:"/fundraisers",element:i.jsx(Dk,{})}),i.jsx($e,{path:"/fundraisers/create",element:i.jsx(kk,{})}),i.jsx($e,{path:"/budget",element:i.jsx(Tk,{})}),i.jsx($e,{path:"/budget/legacy",element:i.jsx(Ok,{})}),i.jsx($e,{path:"/budget/create",element:i.jsx(Mk,{})}),i.jsx($e,{path:"/budget/reconciliation",element:i.jsx(QO,{})}),i.jsx($e,{path:"/budget/reconciliation/new",element:i.jsx(Pv,{})}),i.jsx($e,{path:"/budget/reconciliation/:id",element:i.jsx(Lv,{})}),i.jsx($e,{path:"/communications",element:i.jsx(nT,{})}),i.jsx($e,{path:"/communications/legacy",element:i.jsx(rT,{})}),i.jsx($e,{path:"/communications/create",element:i.jsx(aT,{})}),i.jsx($e,{path:"/communications/email",element:i.jsx(oT,{})}),i.jsx($e,{path:"/communications/sms",element:i.jsx(lT,{})}),i.jsx($e,{path:"/communications/social",element:i.jsx(cT,{})}),i.jsx($e,{path:"/communications/ai",element:i.jsx(uT,{})}),i.jsx($e,{path:"/communications/design-studio",element:i.jsx(CI,{})}),i.jsx($e,{path:"/documents",element:i.jsx(dT,{})}),i.jsx($e,{path:"/documents/upload",element:i.jsx(hT,{})}),i.jsx($e,{path:"/shared-library",element:i.jsx(fT,{})}),i.jsx($e,{path:"/ai-event-ideas",element:i.jsx(pT,{})}),i.jsx($e,{path:"/ai-workflow-orchestrator",element:i.jsx(gT,{})})]})}),i.jsx($e,{element:i.jsx(Ja,{allowedRoles:["teacher"]}),children:i.jsxs($e,{element:i.jsx(Za,{}),children:[i.jsx($e,{path:"/dashboard/teacher",element:i.jsx(P2,{})}),i.jsx($e,{path:"/teacher-requests",element:i.jsx(EI,{})}),i.jsx($e,{path:"/teacher-requests/create",element:i.jsx(LI,{})})]})}),i.jsx($e,{element:i.jsx(Ja,{allowedRoles:["board_member"]}),children:i.jsx($e,{element:i.jsx(Za,{}),children:i.jsx($e,{path:"/dashboard/board",element:i.jsx(A2,{})})})}),i.jsx($e,{element:i.jsx(Ja,{allowedRoles:["committee_lead"]}),children:i.jsx($e,{element:i.jsx(Za,{}),children:i.jsx($e,{path:"/dashboard/committee",element:i.jsx(C2,{})})})}),i.jsx($e,{element:i.jsx(Ja,{allowedRoles:["volunteer"]}),children:i.jsx($e,{element:i.jsx(Za,{}),children:i.jsx($e,{path:"/dashboard/volunteer",element:i.jsx(E2,{})})})}),i.jsx($e,{element:i.jsx(Ja,{allowedRoles:["parent_member"]}),children:i.jsx($e,{element:i.jsx(Za,{}),children:i.jsx($e,{path:"/dashboard/parent",element:i.jsx(L2,{})})})})]})}yd.createRoot(document.getElementById("root")).render(i.jsx(ue.StrictMode,{children:i.jsx(o2,{children:i.jsx(FI,{})})}));export{as as _};
//# sourceMappingURL=index-CmxQtc_G.js.map
